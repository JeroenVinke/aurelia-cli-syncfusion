function _aureliaConfigureModuleLoader(){requirejs.config({baseUrl:"src/",paths:{"syncfusion-javascript":"../node_modules/syncfusion-javascript/","aurelia-binding":"..\\node_modules\\aurelia-binding\\dist\\amd\\aurelia-binding","aurelia-bootstrapper":"..\\node_modules\\aurelia-bootstrapper\\dist\\amd\\aurelia-bootstrapper","aurelia-event-aggregator":"..\\node_modules\\aurelia-event-aggregator\\dist\\amd\\aurelia-event-aggregator","aurelia-dependency-injection":"..\\node_modules\\aurelia-dependency-injection\\dist\\amd\\aurelia-dependency-injection","aurelia-history-browser":"..\\node_modules\\aurelia-history-browser\\dist\\amd\\aurelia-history-browser","aurelia-framework":"..\\node_modules\\aurelia-framework\\dist\\amd\\aurelia-framework","aurelia-loader":"..\\node_modules\\aurelia-loader\\dist\\amd\\aurelia-loader","aurelia-logging":"..\\node_modules\\aurelia-logging\\dist\\amd\\aurelia-logging","aurelia-pal":"..\\node_modules\\aurelia-pal\\dist\\amd\\aurelia-pal","aurelia-loader-default":"..\\node_modules\\aurelia-loader-default\\dist\\amd\\aurelia-loader-default","aurelia-pal-browser":"..\\node_modules\\aurelia-pal-browser\\dist\\amd\\aurelia-pal-browser","aurelia-metadata":"..\\node_modules\\aurelia-metadata\\dist\\amd\\aurelia-metadata","aurelia-polyfills":"..\\node_modules\\aurelia-polyfills\\dist\\amd\\aurelia-polyfills","aurelia-route-recognizer":"..\\node_modules\\aurelia-route-recognizer\\dist\\amd\\aurelia-route-recognizer","aurelia-router":"..\\node_modules\\aurelia-router\\dist\\amd\\aurelia-router","aurelia-task-queue":"..\\node_modules\\aurelia-task-queue\\dist\\amd\\aurelia-task-queue","aurelia-templating":"..\\node_modules\\aurelia-templating\\dist\\amd\\aurelia-templating",text:"..\\node_modules\\text\\text","aurelia-templating-binding":"..\\node_modules\\aurelia-templating-binding\\dist\\amd\\aurelia-templating-binding",jquery:"..\\node_modules\\jquery\\dist\\jquery","aurelia-logging-console":"..\\node_modules\\aurelia-logging-console\\dist\\amd\\aurelia-logging-console","aurelia-path":"..\\node_modules\\aurelia-path\\dist\\amd\\aurelia-path","aurelia-history":"..\\node_modules\\aurelia-history\\dist\\amd\\aurelia-history","app-bundle":"../scripts/app-bundle"},packages:[{name:"aurelia-templating-router",location:"../node_modules/aurelia-templating-router/dist/amd",main:"aurelia-templating-router"},{name:"aurelia-syncfusion-bridge",location:"../node_modules/aurelia-syncfusion-bridge/dist/amd",main:"index"},{name:"aurelia-templating-resources",location:"../node_modules/aurelia-templating-resources/dist/amd",main:"aurelia-templating-resources"},{name:"jsrender",location:"../node_modules/jsrender/",main:"jsrender"}],stubModules:[],shim:{},bundles:{"app-bundle":["app","environment","main","resources/index"]}})}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){var e,t,i;return function e(t,i,s){function n(o,l){if(!i[o]){if(!t[o]){var a="function"==typeof _dereq_&&_dereq_;if(!l&&a)return a(o,!0);if(r)return r(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){var i=t[o][1][e];return n(i||e)},h,h.exports,e,t,i,s)}return i[o].exports}for(var r="function"==typeof _dereq_&&_dereq_,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(e,t,i){"use strict";function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new d(16),this._normalQueue=new d(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=a}function n(e,t,i){this._lateQueue.push(e,t,i),this._queueTick()}function r(e,t,i){this._normalQueue.push(e,t,i),this._queueTick()}function o(e){this._normalQueue._pushOne(e),this._queueTick()}var l;try{throw new Error}catch(e){l=e}var a=e("./schedule"),d=e("./queue"),h=e("./util");s.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},s.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(s.prototype.invokeLater=function(e,t,i){this._trampolineEnabled?n.call(this,e,t,i):this._schedule(function(){setTimeout(function(){e.call(t,i)},100)})},s.prototype.invoke=function(e,t,i){this._trampolineEnabled?r.call(this,e,t,i):this._schedule(function(){e.call(t,i)})},s.prototype.settlePromises=function(e){this._trampolineEnabled?o.call(this,e):this._schedule(function(){e._settlePromises()})}):(s.prototype.invokeLater=n,s.prototype.invoke=r,s.prototype.settlePromises=o),s.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var i=e.shift(),s=e.shift();t.call(i,s)}else t._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},t.exports=s,t.exports.firstLineError=l},{"./queue":17,"./schedule":18,"./util":21}],2:[function(e,t,i){"use strict";t.exports=function(e,t,i,s){var n=!1,r=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(r,r,null,this,e)},l=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},a=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(r){n||(n=!0,e.prototype._propagateFrom=s.propagateFromFunction(),e.prototype._boundValue=s.boundValueFunction());var d=i(r),h=new e(t);h._propagateFrom(this,1);var c=this._target();if(h._setBoundTo(d),d instanceof e){var u={promiseRejectionQueued:!1,promise:h,target:c,bindingPromise:d};c._then(t,o,void 0,h,u),d._then(l,a,void 0,h,u),h._setOnCancel(d)}else h._resolveCallback(c);return h},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,i){return e.resolve(i).bind(t)}}},{}],3:[function(e,t,i){"use strict";function s(){try{Promise===r&&(Promise=n)}catch(e){}return r}var n;"undefined"!=typeof Promise&&(n=Promise);var r=e("./promise")();r.noConflict=s,t.exports=r},{"./promise":15}],4:[function(e,t,i){"use strict";t.exports=function(t,i,s,n){var r=e("./util"),o=r.tryCatch,l=r.errorObj,a=t._async;t.prototype.break=t.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var i=e._cancellationParent;if(null==i||!i._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=i}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),a.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(r.isArray(e))for(var i=0;i<e.length;++i)this._doInvokeOnCancel(e[i],t);else if(void 0!==e)if("function"==typeof e){if(!t){var s=o(e).call(this._boundValue());s===l&&(this._attachExtraTrace(s.e),a.throwLater(s.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(e,t,i){"use strict";t.exports=function(t){function i(e,i,l){return function(a){var d=l._boundValue();e:for(var h=0;h<e.length;++h){var c=e[h];if(c===Error||null!=c&&c.prototype instanceof Error){if(a instanceof c)return r(i).call(d,a)}else if("function"==typeof c){var u=r(c).call(d,a);if(u===o)return u;if(u)return r(i).call(d,a)}else if(s.isObject(a)){for(var p=n(c),m=0;m<p.length;++m){var g=p[m];if(c[g]!=a[g])continue e}return r(i).call(d,a)}}return t}}var s=e("./util"),n=e("./es5").keys,r=s.tryCatch,o=s.errorObj;return i}},{"./es5":10,"./util":21}],6:[function(e,t,i){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(s())}function i(){if(n)return new t}function s(){var e=r.length-1;if(e>=0)return r[e]}var n=!1,r=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=i,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var i=e.prototype._pushContext,r=e.prototype._popContext,o=e._peekContext,l=e.prototype._peekContext,a=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=i,e.prototype._popContext=r,e._peekContext=o,e.prototype._peekContext=l,e.prototype._promiseCreated=a,n=!1},n=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=s,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],7:[function(e,t,i){"use strict";t.exports=function(t,i){function s(e,t){return{promise:t}}function n(){return!1}function r(e,t,i){var s=this;try{e(t,i,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+N.toString(e));s._attachCancellationCallback(e)})}catch(e){return e}}function o(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?N.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function l(){return this._onCancelField}function a(e){this._onCancelField=e}function d(){this._cancellationParent=void 0,this._onCancelField=void 0}function h(e,t){if(0!=(1&t)){this._cancellationParent=e;var i=e._branchesRemainingToCancel;void 0===i&&(i=0),e._branchesRemainingToCancel=i+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function c(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function u(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function p(){this._trace=new P(this._peekContext())}function m(e,t){if(V(e)){var i=this._trace;if(void 0!==i&&t&&(i=i._parent),void 0!==i)i.attachExtraTrace(e);else if(!e.__stackCleaned__){var s=x(e);N.notEnumerableProp(e,"stack",s.message+"\n"+s.stack.join("\n")),N.notEnumerableProp(e,"__stackCleaned__",!0)}}}function g(e,t,i,s,n){if(void 0===e&&null!==t&&Y){if(void 0!==n&&n._returnedNonUndefined())return;if(0==(65535&s._bitField))return;i&&(i+=" ");var r="",o="";if(t._trace){for(var l=t._trace.stack.split("\n"),a=w(l),d=a.length-1;d>=0;--d){var h=a[d];if(!H.test(h)){var c=h.match(B);c&&(r="at "+c[1]+":"+c[2]+":"+c[3]+" ");break}}if(a.length>0)for(var u=a[0],d=0;d<l.length;++d)if(l[d]===u){d>0&&(o="\n"+l[d-1]);break}}var p="a promise was created in a "+i+"handler "+r+"but was not returned from it, see http://goo.gl/rRqMUw"+o;s._warn(p,!0,t)}}function f(e,t){var i=e+" is deprecated and will be removed in a future version.";return t&&(i+=" Use "+t+" instead."),_(i)}function _(e,i,s){if(re.warnings){var n,r=new L(e);if(i)s._attachExtraTrace(r);else if(re.longStackTraces&&(n=t._peekContext()))n.attachExtraTrace(r);else{var o=x(r);r.stack=o.message+"\n"+o.stack.join("\n")}ee("warning",r)||S(r,"",!0)}}function v(e,t){for(var i=0;i<t.length-1;++i)t[i].push("From previous event:"),t[i]=t[i].join("\n");return i<t.length&&(t[i]=t[i].join("\n")),e+"\n"+t.join("\n")}function b(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function y(e){for(var t=e[0],i=1;i<e.length;++i){for(var s=e[i],n=t.length-1,r=t[n],o=-1,l=s.length-1;l>=0;--l)if(s[l]===r){o=l;break}for(var l=o;l>=0;--l){var a=s[l];if(t[n]!==a)break;t.pop(),n--}t=s}}function w(e){for(var t=[],i=0;i<e.length;++i){var s=e[i],n="    (No stack trace)"===s||U.test(s),r=n&&ie(s);n&&!r&&(W&&" "!==s.charAt(0)&&(s="    "+s),t.push(s))}return t}function C(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),i=0;i<t.length;++i){var s=t[i];if("    (No stack trace)"===s||U.test(s))break}return i>0&&"SyntaxError"!=e.name&&(t=t.slice(i)),t}function x(e){var t=e.stack,i=e.toString();return t="string"==typeof t&&t.length>0?C(e):["    (No stack trace)"],{message:i,stack:"SyntaxError"==e.name?t:w(t)}}function S(e,t,i){if("undefined"!=typeof console){var s;if(N.isObject(e)){var n=e.stack;s=t+q(n,e)}else s=t+String(e);"function"==typeof E?E(s,i):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(s)}}function T(e,t,i,s){var n=!1;try{"function"==typeof t&&(n=!0,"rejectionHandled"===e?t(s):t(i,s))}catch(e){A.throwLater(e)}"unhandledRejection"===e?ee(e,i,s)||n||S(i,"Unhandled rejection "):ee(e,s)}function k(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():N.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+D(t)+">, no stack trace)"}function D(e){return e.length<41?e:e.substr(0,38)+"..."}function I(){return"function"==typeof ne}function O(e){var t=e.match(se);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function R(e,t){if(I()){for(var i,s,n=e.stack.split("\n"),r=t.stack.split("\n"),o=-1,l=-1,a=0;a<n.length;++a){var d=O(n[a]);if(d){i=d.fileName,o=d.line;break}}for(var a=0;a<r.length;++a){var d=O(r[a]);if(d){s=d.fileName,l=d.line;break}}o<0||l<0||!i||!s||i!==s||o>=l||(ie=function(e){if(z.test(e))return!0;var t=O(e);return!!(t&&t.fileName===i&&o<=t.line&&t.line<=l)})}}function P(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ne(this,P),t>32&&this.uncycle()}var M,j,E,F=t._getDomain,A=t._async,L=e("./errors").Warning,N=e("./util"),V=N.canAttachTrace,z=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,H=/\((?:timers\.js):\d+:\d+\)/,B=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,U=null,q=null,W=!1,$=!(0==N.env("BLUEBIRD_DEBUG")),G=!(0==N.env("BLUEBIRD_WARNINGS")||!$&&!N.env("BLUEBIRD_WARNINGS")),K=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!$&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&-1048577|524288},t.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),A.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){T("rejectionHandled",M,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),T("unhandledRejection",j,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,i){return _(e,t,i||this)},t.onPossiblyUnhandledRejection=function(e){var t=F();j="function"==typeof e?null===t?e:N.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=F();M="function"==typeof e?null===t?e:N.domainBind(t,e):void 0};var Q=function(){};t.longStackTraces=function(){if(A.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!re.longStackTraces&&I()){var e=t.prototype._captureStackTrace,s=t.prototype._attachExtraTrace;re.longStackTraces=!0,Q=function(){if(A.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=s,i.deactivateLongStackTraces(),A.enableTrampoline(),re.longStackTraces=!1},t.prototype._captureStackTrace=p,t.prototype._attachExtraTrace=m,i.activateLongStackTraces(),A.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return re.longStackTraces&&I()};var X=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var i=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!N.global.dispatchEvent(i)}}if("function"==typeof Event){var e=new Event("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var i=new Event(e.toLowerCase(),{cancelable:!0});return i.detail=t,!N.global.dispatchEvent(i)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(e),function(e,t){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e.toLowerCase(),!1,!0,t),!N.global.dispatchEvent(i)}}catch(e){}return function(){return!1}}(),J=function(){return N.isNode?function(){return process.emit.apply(process,arguments)}:N.global?function(e){var t="on"+e.toLowerCase(),i=N.global[t];return!!i&&(i.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),Z={promiseCreated:s,promiseFulfilled:s,promiseRejected:s,promiseResolved:s,promiseCancelled:s,promiseChained:function(e,t,i){return{promise:t,child:i}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,i){return{reason:t,promise:i}},rejectionHandled:s},ee=function(e){var t=!1;try{t=J.apply(null,arguments)}catch(e){A.throwLater(e),t=!0}var i=!1;try{i=X(e,Z[e].apply(null,arguments))}catch(e){A.throwLater(e),i=!0}return i||t};t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&Q()),"warnings"in e){var i=e.warnings;re.warnings=!!i,Y=re.warnings,N.isObject(i)&&"wForgottenReturn"in i&&(Y=!!i.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!re.cancellation){if(A.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=d,t.prototype._propagateFrom=h,t.prototype._onCancel=l,t.prototype._setOnCancel=a,t.prototype._attachCancellationCallback=o,t.prototype._execute=r,te=h,re.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!re.monitoring?(re.monitoring=!0,t.prototype._fireEvent=ee):!e.monitoring&&re.monitoring&&(re.monitoring=!1,t.prototype._fireEvent=n)),t},t.prototype._fireEvent=n,t.prototype._execute=function(e,t,i){try{e(t,i)}catch(e){return e}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var te=c,ie=function(){return!1},se=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(P,Error),i.CapturedTrace=P,P.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],i={},s=0,n=this;void 0!==n;++s)t.push(n),n=n._parent;e=this._length=s;for(var s=e-1;s>=0;--s){var r=t[s].stack;void 0===i[r]&&(i[r]=s)}for(var s=0;s<e;++s){var o=t[s].stack,l=i[o];if(void 0!==l&&l!==s){l>0&&(t[l-1]._parent=void 0,t[l-1]._length=1),t[s]._parent=void 0,t[s]._length=1;var a=s>0?t[s-1]:this;l<e-1?(a._parent=t[l+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var d=a._length+1,h=s-2;h>=0;--h)t[h]._length=d,d++;return}}}},P.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=x(e),i=t.message,s=[t.stack],n=this;void 0!==n;)s.push(w(n.stack.split("\n"))),n=n._parent;y(s),b(s),N.notEnumerableProp(e,"stack",v(i,s)),N.notEnumerableProp(e,"__stackCleaned__",!0)}};var ne=function(){var e=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():k(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,U=/^\s*at\s*/,q=e;var t=Error.captureStackTrace;return ie=function(e){return z.test(e)},function(e,i){Error.stackTraceLimit+=6,t(e,i),Error.stackTraceLimit-=6}}var i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return U=/@/,q=e,W=!0,function(e){e.stack=(new Error).stack};var s;try{throw new Error}catch(e){s="stack"in e}return"stack"in i||!s||"number"!=typeof Error.stackTraceLimit?(q=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?k(t):t.toString()},null):(U=/^\s*at\s*/,q=e,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(E=function(e){console.warn(e)},N.isNode&&process.stderr.isTTY?E=function(e,t){var i=t?"[33m":"[31m";console.warn(i+e+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(E=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var re={warnings:G,longStackTraces:!1,cancellation:!1,monitoring:!1};return K&&t.longStackTraces(),{longStackTraces:function(){return re.longStackTraces},warnings:function(){return re.warnings},cancellation:function(){return re.cancellation},monitoring:function(){return re.monitoring},propagateFromFunction:function(){return te},boundValueFunction:function(){return u},checkForgottenReturns:g,setBounds:R,warn:_,deprecated:f,CapturedTrace:P,fireDomEvent:X,fireGlobalEvent:J}}},{"./errors":9,"./util":21}],8:[function(e,t,i){"use strict";t.exports=function(e){function t(){return this.value}function i(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(i){return i instanceof e&&i.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:i},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(i,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,i,void 0,{reason:e},void 0);var t=arguments[1],s=function(){throw t};return this.caught(e,s)},e.prototype.catchReturn=function(i){if(arguments.length<=1)return i instanceof e&&i.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:i},void 0);var s=arguments[1];s instanceof e&&s.suppressUnhandledRejections();var n=function(){return s};return this.caught(i,n)}}},{}],9:[function(e,t,i){"use strict";function s(e,t){function i(s){if(!(this instanceof i))return new i(s);c(this,"message","string"==typeof s?s:t),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return h(i,Error),i}function n(e){if(!(this instanceof n))return new n(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var r,o,l=e("./es5"),a=l.freeze,d=e("./util"),h=d.inherits,c=d.notEnumerableProp,u=s("Warning","warning"),p=s("CancellationError","cancellation error"),m=s("TimeoutError","timeout error"),g=s("AggregateError","aggregate error");try{r=TypeError,o=RangeError}catch(e){r=s("TypeError","type error"),o=s("RangeError","range error")}for(var f="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<f.length;++_)"function"==typeof Array.prototype[f[_]]&&(g.prototype[f[_]]=Array.prototype[f[_]]);l.defineProperty(g.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),g.prototype.isOperational=!0;var v=0;g.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var i=0;i<this.length;++i){for(var s=this[i]===this?"[Circular AggregateError]":this[i]+"",n=s.split("\n"),r=0;r<n.length;++r)n[r]=e+n[r];s=n.join("\n"),t+=s+"\n"}return v--,t},h(n,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:p,TimeoutError:m,OperationalError:n,RejectionError:n,AggregateError:g}),l.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:u}},{"./es5":10,"./util":21}],10:[function(e,t,i){var s=function(){"use strict";return void 0===this}();if(s)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:s,propertyIsWritable:function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return!(i&&!i.writable&&!i.set)}};else{var n={}.hasOwnProperty,r={}.toString,o={}.constructor.prototype,l=function(e){var t=[];for(var i in e)n.call(e,i)&&t.push(i);return t},a=function(e,t){return{value:e[t]}},d=function(e,t,i){return e[t]=i.value,e},h=function(e){return e},c=function(e){try{return Object(e).constructor.prototype}catch(e){return o}},u=function(e){try{return"[object Array]"===r.call(e)}catch(e){return!1}};t.exports={isArray:u,keys:l,names:l,defineProperty:d,getDescriptor:a,freeze:h,getPrototypeOf:c,isES5:s,propertyIsWritable:function(){return!0}}}},{}],11:[function(e,t,i){"use strict";t.exports=function(t,i,s){function n(e,t,i){this.promise=e,this.type=t,this.handler=i,this.called=!1,this.cancelPromise=null}function r(e){this.finallyHandler=e}function o(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function l(){return d.call(this,this.promise._target()._settledValue())}function a(e){if(!o(this,e))return u.e=e,u}function d(e){var n=this.promise,d=this.handler;if(!this.called){this.called=!0;var h=this.isFinallyHandler()?d.call(n._boundValue()):d.call(n._boundValue(),e);if(h===s)return h;if(void 0!==h){n._setReturnedNonUndefined();var p=i(h,n);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var m=new c("late cancellation observer");return n._attachExtraTrace(m),u.e=m,u}p.isPending()&&p._attachCancellationCallback(new r(this))}return p._then(l,a,void 0,this,void 0)}}}return n.isRejected()?(o(this),u.e=e,u):(o(this),e)}var h=e("./util"),c=t.CancellationError,u=h.errorObj,p=e("./catch_filter")(s);return n.prototype.isFinallyHandler=function(){return 0===this.type},r.prototype._resultCancelled=function(){o(this.finallyHandler)},t.prototype._passThrough=function(e,t,i,s){return"function"!=typeof e?this.then():this._then(i,s,void 0,new n(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,d,d)},t.prototype.tap=function(e){return this._passThrough(e,1,d)},t.prototype.tapCatch=function(e){var i=arguments.length;if(1===i)return this._passThrough(e,1,void 0,d);var s,n=new Array(i-1),r=0;for(s=0;s<i-1;++s){var o=arguments[s];if(!h.isObject(o))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+h.classString(o)));n[r++]=o}n.length=r;var l=arguments[s];return this._passThrough(p(n,l,this),1,void 0,d)},n}},{"./catch_filter":5,"./util":21}],12:[function(e,t,i){"use strict";t.exports=function(t,i,s,n,r,o){var l=e("./util");l.canEvaluate,l.tryCatch,l.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var s}var n=[].slice.call(arguments);e&&n.pop();var s=new i(n).promise();return void 0!==e?s.spread(e):s}}},{"./util":21}],13:[function(e,t,i){"use strict";t.exports=function(t,i,s,n,r){var o=e("./util"),l=o.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+o.classString(e));return function(){var s=new t(i);s._captureStackTrace(),s._pushContext();var n=l(e).apply(this,arguments),o=s._popContext();return r.checkForgottenReturns(n,o,"Promise.method",s),s._resolveFromSyncValue(n),s}},t.attempt=t.try=function(e){if("function"!=typeof e)return n("expecting a function but got "+o.classString(e));var s=new t(i);s._captureStackTrace(),s._pushContext();var a;if(arguments.length>1){r.deprecated("calling Promise.try with more than 1 argument");var d=arguments[1],h=arguments[2];a=o.isArray(d)?l(e).apply(h,d):l(e).call(h,d)}else a=l(e)();var c=s._popContext();return r.checkForgottenReturns(a,c,"Promise.try",s),s._resolveFromSyncValue(a),s},t.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":21}],14:[function(e,t,i){"use strict";function s(e){return e instanceof Error&&h.getPrototypeOf(e)===Error.prototype}function n(e){var t;if(s(e)){t=new d(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var i=h.keys(e),n=0;n<i.length;++n){var r=i[n];c.test(r)||(t[r]=e[r])}return t}return o.markAsOriginatingFromRejection(e),e}function r(e,t){return function(i,s){if(null!==e){if(i){var r=n(l(i));e._attachExtraTrace(r),e._reject(r)}else if(t){var o=[].slice.call(arguments,1);e._fulfill(o)}else e._fulfill(s);e=null}}}var o=e("./util"),l=o.maybeWrapAsError,a=e("./errors"),d=a.OperationalError,h=e("./es5"),c=/^(?:name|message|stack|cause)$/;t.exports=r},{"./errors":9,"./es5":10,"./util":21}],15:[function(e,t,i){"use strict"
;t.exports=function(){function i(){}function s(e,t){if(null==e||e.constructor!==n)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new v("expecting a function but got "+p.classString(t))}function n(e){e!==y&&s(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function r(e){this.promise._resolveCallback(e)}function o(e){this.promise._rejectCallback(e,!1)}function l(e){var t=new n(y);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var a,d=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},h=function(){return new n.PromiseInspection(this._target())},c=function(e){return n.reject(new v(e))},u={},p=e("./util");a=p.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},p.notEnumerableProp(n,"_getDomain",a);var m=e("./es5"),g=e("./async"),f=new g;m.defineProperty(n,"_async",{value:f});var _=e("./errors"),v=n.TypeError=_.TypeError;n.RangeError=_.RangeError;var b=n.CancellationError=_.CancellationError;n.TimeoutError=_.TimeoutError,n.OperationalError=_.OperationalError,n.RejectionError=_.OperationalError,n.AggregateError=_.AggregateError;var y=function(){},w={},C={},x=e("./thenables")(n,y),S=e("./promise_array")(n,y,x,c,i),T=e("./context")(n),k=(T.create,e("./debuggability")(n,T)),D=(k.CapturedTrace,e("./finally")(n,x,C)),I=e("./catch_filter")(C),O=e("./nodeback"),R=p.errorObj,P=p.tryCatch;return n.prototype.toString=function(){return"[object Promise]"},n.prototype.caught=n.prototype.catch=function(e){var t=arguments.length;if(t>1){var i,s=new Array(t-1),n=0;for(i=0;i<t-1;++i){var r=arguments[i];if(!p.isObject(r))return c("Catch statement predicate: expecting an object but got "+p.classString(r));s[n++]=r}return s.length=n,e=arguments[i],this.then(void 0,I(s,e,this))}return this.then(void 0,e)},n.prototype.reflect=function(){return this._then(h,h,void 0,this,void 0)},n.prototype.then=function(e,t){if(k.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var i=".then() only accepts functions but was passed: "+p.classString(e);arguments.length>1&&(i+=", "+p.classString(t)),this._warn(i)}return this._then(e,t,void 0,void 0,void 0)},n.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},n.prototype.spread=function(e){return"function"!=typeof e?c("expecting a function but got "+p.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},n.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},n.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new S(this).promise()},n.prototype.error=function(e){return this.caught(p.originatesFromRejection,e)},n.getNewLibraryCopy=t.exports,n.is=function(e){return e instanceof n},n.fromNode=n.fromCallback=function(e){var t=new n(y);t._captureStackTrace();var i=arguments.length>1&&!!Object(arguments[1]).multiArgs,s=P(e)(O(t,i));return s===R&&t._rejectCallback(s.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},n.all=function(e){return new S(e).promise()},n.cast=function(e){var t=x(e);return t instanceof n||(t=new n(y),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},n.resolve=n.fulfilled=n.cast,n.reject=n.rejected=function(e){var t=new n(y);return t._captureStackTrace(),t._rejectCallback(e,!0),t},n.setScheduler=function(e){if("function"!=typeof e)throw new v("expecting a function but got "+p.classString(e));return f.setScheduler(e)},n.prototype._then=function(e,t,i,s,r){var o=void 0!==r,l=o?r:new n(y),d=this._target(),h=d._bitField;o||(l._propagateFrom(this,3),l._captureStackTrace(),void 0===s&&0!=(2097152&this._bitField)&&(s=0!=(50397184&h)?this._boundValue():d===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,l));var c=a();if(0!=(50397184&h)){var u,m,g=d._settlePromiseCtx;0!=(33554432&h)?(m=d._rejectionHandler0,u=e):0!=(16777216&h)?(m=d._fulfillmentHandler0,u=t,d._unsetRejectionIsUnhandled()):(g=d._settlePromiseLateCancellationObserver,m=new b("late cancellation observer"),d._attachExtraTrace(m),u=t),f.invoke(g,d,{handler:null===c?u:"function"==typeof u&&p.domainBind(c,u),promise:l,receiver:s,value:m})}else d._addCallbacks(e,t,l,s,c);return l},n.prototype._length=function(){return 65535&this._bitField},n.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},n.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},n.prototype._setLength=function(e){this._bitField=this._bitField&-65536|65535&e},n.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},n.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},n.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},n.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},n.prototype._isFinal=function(){return(4194304&this._bitField)>0},n.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},n.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},n.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},n.prototype._setAsyncGuaranteed=function(){f.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},n.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},n.prototype._promiseAt=function(e){return this[4*e-4+2]},n.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},n.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},n.prototype._boundValue=function(){},n.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),i=e._rejectionHandler0,s=e._promise0,n=e._receiverAt(0);void 0===n&&(n=u),this._addCallbacks(t,i,s,n,null)},n.prototype._migrateCallbackAt=function(e,t){var i=e._fulfillmentHandlerAt(t),s=e._rejectionHandlerAt(t),n=e._promiseAt(t),r=e._receiverAt(t);void 0===r&&(r=u),this._addCallbacks(i,s,n,r,null)},n.prototype._addCallbacks=function(e,t,i,s,n){var r=this._length();if(r>=65531&&(r=0,this._setLength(0)),0===r)this._promise0=i,this._receiver0=s,"function"==typeof e&&(this._fulfillmentHandler0=null===n?e:p.domainBind(n,e)),"function"==typeof t&&(this._rejectionHandler0=null===n?t:p.domainBind(n,t));else{var o=4*r-4;this[o+2]=i,this[o+3]=s,"function"==typeof e&&(this[o+0]=null===n?e:p.domainBind(n,e)),"function"==typeof t&&(this[o+1]=null===n?t:p.domainBind(n,t))}return this._setLength(r+1),r},n.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},n.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(d(),!1);var i=x(e,this);if(!(i instanceof n))return this._fulfill(e);t&&this._propagateFrom(i,2);var s=i._target();if(s===this)return void this._reject(d());var r=s._bitField;if(0==(50397184&r)){var o=this._length();o>0&&s._migrateCallback0(this);for(var l=1;l<o;++l)s._migrateCallbackAt(this,l);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else if(0!=(33554432&r))this._fulfill(s._value());else if(0!=(16777216&r))this._reject(s._reason());else{var a=new b("late cancellation observer");s._attachExtraTrace(a),this._reject(a)}}},n.prototype._rejectCallback=function(e,t,i){var s=p.ensureErrorObject(e),n=s===e;if(!n&&!i&&k.warnings()){var r="a promise was rejected with a non-error: "+p.classString(e);this._warn(r,!0)}this._attachExtraTrace(s,!!t&&n),this._reject(e)},n.prototype._resolveFromExecutor=function(e){if(e!==y){var t=this;this._captureStackTrace(),this._pushContext();var i=!0,s=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,i)});i=!1,this._popContext(),void 0!==s&&t._rejectCallback(s,!0)}},n.prototype._settlePromiseFromHandler=function(e,t,i,s){var n=s._bitField;if(0==(65536&n)){s._pushContext();var r;t===w?i&&"number"==typeof i.length?r=P(e).apply(this._boundValue(),i):(r=R,r.e=new v("cannot .spread() a non-array: "+p.classString(i))):r=P(e).call(t,i);var o=s._popContext();n=s._bitField,0==(65536&n)&&(r===C?s._reject(i):r===R?s._rejectCallback(r.e,!1):(k.checkForgottenReturns(r,o,"",s,this),s._resolveCallback(r)))}},n.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},n.prototype._followee=function(){return this._rejectionHandler0},n.prototype._setFollowee=function(e){this._rejectionHandler0=e},n.prototype._settlePromise=function(e,t,s,r){var o=e instanceof n,l=this._bitField,a=0!=(134217728&l);0!=(65536&l)?(o&&e._invokeInternalOnCancel(),s instanceof D&&s.isFinallyHandler()?(s.cancelPromise=e,P(t).call(s,r)===R&&e._reject(R.e)):t===h?e._fulfill(h.call(s)):s instanceof i?s._promiseCancelled(e):o||e instanceof S?e._cancel():s.cancel()):"function"==typeof t?o?(a&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,s,r,e)):t.call(s,r,e):s instanceof i?s._isResolved()||(0!=(33554432&l)?s._promiseFulfilled(r,e):s._promiseRejected(r,e)):o&&(a&&e._setAsyncGuaranteed(),0!=(33554432&l)?e._fulfill(r):e._reject(r))},n.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,i=e.promise,s=e.receiver,r=e.value;"function"==typeof t?i instanceof n?this._settlePromiseFromHandler(t,s,r,i):t.call(s,r,i):i instanceof n&&i._reject(r)},n.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},n.prototype._settlePromise0=function(e,t,i){var s=this._promise0,n=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(s,e,n,t)},n.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},n.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var i=d();return this._attachExtraTrace(i),this._reject(i)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():f.settlePromises(this))}},n.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return f.fatalError(e,p.isNode);(65535&t)>0?f.settlePromises(this):this._ensurePossibleRejectionHandled()}},n.prototype._fulfillPromises=function(e,t){for(var i=1;i<e;i++){var s=this._fulfillmentHandlerAt(i),n=this._promiseAt(i),r=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(n,s,r,t)}},n.prototype._rejectPromises=function(e,t){for(var i=1;i<e;i++){var s=this._rejectionHandlerAt(i),n=this._promiseAt(i),r=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(n,s,r,t)}},n.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var i=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,i,e),this._rejectPromises(t,i)}else{var s=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,s,e),this._fulfillPromises(t,s)}this._setLength(0)}this._clearCancellationData()},n.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},n.defer=n.pending=function(){return k.deprecated("Promise.defer","new Promise"),{promise:new n(y),resolve:r,reject:o}},p.notEnumerableProp(n,"_makeSelfResolutionError",d),e("./method")(n,y,x,c,k),e("./bind")(n,y,x,k),e("./cancel")(n,S,c,k),e("./direct_resolve")(n),e("./synchronous_inspection")(n),e("./join")(n,S,x,y,f,a),n.Promise=n,n.version="3.5.0",p.toFastProperties(n),p.toFastProperties(n.prototype),l({a:1}),l({b:2}),l({c:3}),l(1),l(function(){}),l(void 0),l(!1),l(new n(y)),k.setBounds(g.firstLineError,p.lastLineError),n}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21}],16:[function(e,t,i){"use strict";t.exports=function(t,i,s,n,r){function o(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function l(e){var s=this._promise=new t(i);e instanceof t&&s._propagateFrom(e,3),s._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=e("./util");a.isArray;return a.inherits(l,r),l.prototype.length=function(){return this._length},l.prototype.promise=function(){return this._promise},l.prototype._init=function e(i,r){var l=s(this._values,this._promise);if(l instanceof t){l=l._target();var d=l._bitField;if(this._values=l,0==(50397184&d))return this._promise._setAsyncGuaranteed(),l._then(e,this._reject,void 0,this,r);if(0==(33554432&d))return 0!=(16777216&d)?this._reject(l._reason()):this._cancel();l=l._value()}if(null===(l=a.asArray(l))){var h=n("expecting an array or an iterable object but got "+a.classString(l)).reason();return void this._promise._rejectCallback(h,!1)}if(0===l.length)return void(r===-5?this._resolveEmptyArray():this._resolve(o(r)));this._iterate(l)},l.prototype._iterate=function(e){var i=this.getActualLength(e.length);this._length=i,this._values=this.shouldCopyValues()?new Array(i):this._values;for(var n=this._promise,r=!1,o=null,l=0;l<i;++l){var a=s(e[l],n);a instanceof t?(a=a._target(),o=a._bitField):o=null,r?null!==o&&a.suppressUnhandledRejections():null!==o?0==(50397184&o)?(a._proxy(this,l),this._values[l]=a):r=0!=(33554432&o)?this._promiseFulfilled(a._value(),l):0!=(16777216&o)?this._promiseRejected(a._reason(),l):this._promiseCancelled(l):r=this._promiseFulfilled(a,l)}r||n._setAsyncGuaranteed()},l.prototype._isResolved=function(){return null===this._values},l.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},l.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},l.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},l.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},l.prototype._promiseCancelled=function(){return this._cancel(),!0},l.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},l.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var i=0;i<e.length;++i)e[i]instanceof t&&e[i].cancel()}},l.prototype.shouldCopyValues=function(){return!0},l.prototype.getActualLength=function(e){return e},l}},{"./util":21}],17:[function(e,t,i){"use strict";function s(e,t,i,s,n){for(var r=0;r<n;++r)i[r+s]=e[r+t],e[r+t]=void 0}function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,i){var s=this.length()+3;if(this._willBeOverCapacity(s))return this._pushOne(e),this._pushOne(t),void this._pushOne(i);var n=this._front+s-3;this._checkCapacity(s);var r=this._capacity-1;this[n+0&r]=e,this[n+1&r]=t,this[n+2&r]=i,this._length=s},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,s(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],18:[function(e,t,i){"use strict";var s,n=e("./util"),r=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},o=n.getNativePromise();if(n.isNode&&"undefined"==typeof MutationObserver){var l=global.setImmediate,a=process.nextTick;s=n.isRecentNode?function(e){l.call(global,e)}:function(e){a.call(process,e)}}else if("function"==typeof o&&"function"==typeof o.resolve){var d=o.resolve();s=function(e){d.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:r:function(){var e=document.createElement("div"),t={attributes:!0},i=!1,s=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),i=!1}).observe(s,t);var n=function(){i||(i=!0,s.classList.toggle("foo"))};return function(i){var s=new MutationObserver(function(){s.disconnect(),i()});s.observe(e,t),n()}}();t.exports=s},{"./util":21}],19:[function(e,t,i){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var i=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},s=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},r=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},l=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return r.call(this._target())},e.prototype.isFulfilled=function(){return n.call(this._target())},e.prototype.isResolved=function(){return l.call(this._target())},e.prototype.value=function(){return i.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),s.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],20:[function(e,t,i){"use strict";t.exports=function(t,i){function s(e,s){if(h(e)){if(e instanceof t)return e;var n=r(e);if(n===d){s&&s._pushContext();var a=t.reject(n.e);return s&&s._popContext(),a}if("function"==typeof n){if(o(e)){var a=new t(i);return e._then(a._fulfill,a._reject,void 0,a,null),a}return l(e,n,s)}}return e}function n(e){return e.then}function r(e){try{return n(e)}catch(e){return d.e=e,d}}function o(e){try{return c.call(e,"_promise0")}catch(e){return!1}}function l(e,s,n){function r(e){l&&(l._resolveCallback(e),l=null)}function o(e){l&&(l._rejectCallback(e,c,!0),l=null)}var l=new t(i),h=l;n&&n._pushContext(),l._captureStackTrace(),n&&n._popContext();var c=!0,u=a.tryCatch(s).call(e,r,o);return c=!1,l&&u===d&&(l._rejectCallback(u.e,!0,!0),l=null),h}var a=e("./util"),d=a.errorObj,h=a.isObject,c={}.hasOwnProperty;return s}},{"./util":21}],21:[function(e,t,i){"use strict";function s(){try{var e=O;return O=null,e.apply(this,arguments)}catch(e){return I.e=e,I}}function n(e){return O=e,s}function r(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return r(e)?new Error(f(e)):e}function a(e,t){var i,s=e.length,n=new Array(s+1);for(i=0;i<s;++i)n[i]=e[i];return n[i]=t,n}function d(e,t,i){if(!k.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var s=Object.getOwnPropertyDescriptor(e,t);return null!=s?null==s.get&&null==s.set?s.value:i:void 0}function h(e,t,i){if(r(e))return e;var s={value:i,configurable:!0,enumerable:!1,writable:!0};return k.defineProperty(e,t,s),e}function c(e){throw e}function u(e){try{if("function"==typeof e){var t=k.names(e.prototype),i=k.isES5&&t.length>1,s=t.length>0&&!(1===t.length&&"constructor"===t[0]),n=j.test(e+"")&&k.names(e).length>0;if(i||s||n)return!0}return!1}catch(e){return!1}}function p(e){function t(){}t.prototype=e;for(var i=8;i--;)new t;return e}function m(e){return E.test(e)}function g(e,t,i){for(var s=new Array(e),n=0;n<e;++n)s[n]=t+n+i;return s}function f(e){try{return e+""}catch(e){return"[no string representation]"}}function _(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function v(e){try{h(e,"isOperational",!0)}catch(e){}}function b(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function y(e){return _(e)&&k.propertyIsWritable(e,"stack")}function w(e){return{}.toString.call(e)}function C(e,t,i){for(var s=k.names(e),n=0;n<s.length;++n){var r=s[n];if(i(r))try{k.defineProperty(t,r,k.getDescriptor(e,r))}catch(e){}}}function x(e){return V?process.env[e]:void 0}function S(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function T(e,t){return e.bind(t)}var k=e("./es5"),D="undefined"==typeof navigator,I={e:{}},O,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,P=function(e,t){function i(){this.constructor=e,this.constructor$=t;for(var i in t.prototype)s.call(t.prototype,i)&&"$"!==i.charAt(i.length-1)&&(this[i+"$"]=t.prototype[i])}var s={}.hasOwnProperty;return i.prototype=t.prototype,e.prototype=new i,e.prototype},M=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1};if(k.isES5){var i=Object.getOwnPropertyNames;return function(e){for(var s=[],n=Object.create(null);null!=e&&!t(e);){var r;try{r=i(e)}catch(e){return s}for(var o=0;o<r.length;++o){var l=r[o];if(!n[l]){n[l]=!0;var a=Object.getOwnPropertyDescriptor(e,l);null!=a&&null==a.get&&null==a.set&&s.push(l)}}e=k.getPrototypeOf(e)}return s}}var s={}.hasOwnProperty;return function(i){if(t(i))return[];var n=[];e:for(var r in i)if(s.call(i,r))n.push(r);else{for(var o=0;o<e.length;++o)if(s.call(e[o],r))continue e;n.push(r)}return n}}(),j=/this\s*\.\s*\S+\s*=/,E=/^[a-z$_][a-z$_0-9]*$/i,F=function(){return"stack"in new Error?function(e){return y(e)?e:new Error(f(e))}:function(e){if(y(e))return e;try{throw new Error(f(e))}catch(e){return e}}}(),A=function(e){return k.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,i=[],s=e[Symbol.iterator]();!(t=s.next()).done;)i.push(t.value);return i};A=function(e){return k.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?L(e):null}}var N="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),V="undefined"!=typeof process&&void 0!==process.env,z={isClass:u,isIdentifier:m,inheritedDataKeys:M,getDataPropertyOrDefault:d,thrower:c,isArray:k.isArray,asArray:A,notEnumerableProp:h,isPrimitive:r,isObject:o,isError:_,canEvaluate:D,errorObj:I,tryCatch:n,inherits:P,withAppended:a,maybeWrapAsError:l,toFastProperties:p,filledRange:g,toString:f,canAttachTrace:y,ensureErrorObject:F,originatesFromRejection:b,markAsOriginatingFromRejection:v,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:N,hasEnvVariables:V,env:x,global:R,getNativePromise:S,domainBind:T};z.isRecentNode=z.isNode&&function(){var e=process.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),z.isNode&&z.toFastProperties(process);try{throw new Error}catch(e){z.lastLineError=e}t.exports=z},{"./es5":10}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),Promise.config({warnings:{wForgottenReturn:!1}});var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,s){return t&&eachProp(t,function(t,n){!i&&hasProp(e,n)||(!s||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[n]=t:(e[n]||(e[n]={}),mixin(e[n],t,i,s)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,s){var n=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=s,i&&(n.originalError=i),n}function newContext(e){function t(e){var t,i;for(t=0;t<e.length;t++)if("."===(i=e[t]))e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,s){var n,r,o,l,a,d,h,c,u,p,m,g=i&&i.split("/"),f=x.map,_=f&&f["*"];if(e&&(e=e.split("/"),d=e.length-1,x.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(m=g.slice(0,g.length-1),e=m.concat(e)),t(e),e=e.join("/")),s&&f&&(g||_)){r=e.split("/");e:for(o=r.length;o>0;o-=1){if(a=r.slice(0,o).join("/"),g)for(l=g.length;l>0;l-=1)if((n=getOwn(f,g.slice(0,l).join("/")))&&(n=getOwn(n,a))){h=n,c=o;break e}!u&&_&&getOwn(_,a)&&(u=getOwn(_,a),p=o)}!h&&u&&(h=u,c=p),h&&(r.splice(0,c,h),e=r.join("/"))}return getOwn(x.pkgs,e)||e}function s(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===y.contextName)return t.parentNode.removeChild(t),!0})}function n(e){var t=getOwn(x.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),y.require.undef(e),y.makeRequire(null,{skipMap:!0})([e]),!0}function r(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function o(e,t,s,n){var o,l,a,d,h=null,c=t?t.name:null,u=e,p=!0,m="";return e||(p=!1,e="_@r"+(P+=1)),d=r(e),h=d[0],e=d[1],h&&(h=i(h,c,n),l=getOwn(I,h)),e&&(h?m=s?e:l&&l.normalize?l.normalize(e,function(e){return i(e,c,n)}):e.indexOf("!")===-1?i(e,c,n):e:(m=i(e,c,n),d=r(m),h=d[0],m=d[1],s=!0,o=y.nameToUrl(m))),a=!h||l||s?"":"_unnormalized"+(M+=1),{prefix:h,name:m,parentMap:t,unnormalized:!!a,url:o,originalName:u,isDefine:p,id:(h?h+"!"+m:m)+a}}function l(e){var t=e.id,i=getOwn(S,t);return i||(i=S[t]=new y.Module(e)),i}function a(e,t,i){var s=e.id,n=getOwn(S,s);!hasProp(I,s)||n&&!n.defineEmitComplete?(n=l(e),n.error&&"error"===t?i(n.error):n.on(t,i)):"defined"===t&&i(I[s])}function d(e,t){var i=e.requireModules,s=!1;t?t(e):(each(i,function(t){var i=getOwn(S,t);i&&(i.error=e,i.events.error&&(s=!0,i.emit("error",e)))}),s||req.onError(e))}function h(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(y.defQueueMap[t]=!0),D.push(e)}),globalDefQueue=[])}function c(e){delete S[e],delete T[e]}function u(e,t,i){var s=e.map.id;e.error?e.emit("error",e.error):(t[s]=!0,each(e.depMaps,function(s,n){var r=s.id,o=getOwn(S,r);!o||e.depMatched[n]||i[r]||(getOwn(t,r)?(e.defineDep(n,I[r]),e.check()):u(o,t,i))}),i[s]=!0)}function p(){var e,t,i=1e3*x.waitSeconds,r=i&&y.startTime+i<(new Date).getTime(),o=[],l=[],a=!1,h=!0;if(!v){if(v=!0,eachProp(T,function(e){var i=e.map,d=i.id;if(e.enabled&&(i.isDefine||l.push(e),!e.error))if(!e.inited&&r)n(d)?(t=!0,a=!0):(o.push(d),s(d));else if(!e.inited&&e.fetched&&i.isDefine&&(a=!0,!i.prefix))return h=!1}),r&&o.length)return e=makeError("timeout","Load timeout for modules: "+o,null,o),e.contextName=y.contextName,d(e);h&&each(l,function(e){u(e,{},{})}),r&&!t||!a||!isBrowser&&!isWebWorker||C||(C=setTimeout(function(){C=0,p()},50)),v=!1}}function m(e){hasProp(I,e[0])||l(o(e[0],null,!0)).init(e[1],e[2])}function g(e,t,i,s){e.detachEvent&&!isOpera?s&&e.detachEvent(s,t):e.removeEventListener(i,t,!1)}function f(e){var t=e.currentTarget||e.srcElement;return g(t,y.onScriptLoad,"load","onreadystatechange"),g(t,y.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;for(h();D.length;){if(e=D.shift(),null===e[0])return d(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}y.defQueueMap={}}var v,b,y,w,C,x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},T={},k={},D=[],I={},O={},R={},P=1,M=1;return w={require:function(e){return e.require?e.require:e.require=y.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?I[e.map.id]=e.exports:e.exports=I[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(x.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(k,e.id)||{},this.map=e,this.shim=getOwn(x.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,i,s){s=s||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=s.ignore,s.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,y.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();y.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;O[e]||(O[e]=!0,y.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,s=this.depExports,n=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{n=y.execCb(i,r,s,n)}catch(t){e=t}else n=y.execCb(i,r,s,n);if(this.map.isDefine&&void 0===n&&(t=this.module,t?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",d(this.error=e)}else n=r;if(this.exports=n,this.map.isDefine&&!this.ignore&&(I[i]=n,req.onResourceLoad)){var o=[];each(this.depMaps,function(e){o.push(e.normalizedMap||e)}),req.onResourceLoad(y,this.map,o)}c(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,
this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(y.defQueueMap,i)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,s=o(e.prefix);this.depMaps.push(s),a(s,"defined",bind(this,function(s){var n,r,h,u=getOwn(R,this.map.id),p=this.map.name,m=this.map.parentMap?this.map.parentMap.name:null,g=y.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(s.normalize&&(p=s.normalize(p,function(e){return i(e,m,!0)})||""),r=o(e.prefix+"!"+p,this.map.parentMap,!0),a(r,"defined",bind(this,function(e){this.map.normalizedMap=r,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((h=getOwn(S,r.id))&&(this.depMaps.push(r),this.events.error&&h.on("error",bind(this,function(e){this.emit("error",e)})),h.enable()))):u?(this.map.url=y.nameToUrl(u),void this.load()):(n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),n.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(S,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&c(e.map.id)}),d(e)}),n.fromText=bind(this,function(i,s){var r=e.name,a=o(r),h=useInteractive;s&&(i=s),h&&(useInteractive=!1),l(a),hasProp(x.config,t)&&(x.config[r]=x.config[t]);try{req.exec(i)}catch(e){return d(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}h&&(useInteractive=!0),this.depMaps.push(a),y.completeLoad(r),g([r],n)}),void s.load(e.name,g,n,x))})),y.enable(s,this),this.pluginMaps[s.id]=s},enable:function(){T[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,s,n;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=getOwn(w,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,a(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?a(e,"error",bind(this,this.errback)):this.events.error&&a(e,"error",bind(this,function(e){this.emit("error",e)}))}i=e.id,s=S[i],hasProp(w,i)||!s||s.enabled||y.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&y.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},y={config:x,contextName:e,registry:S,defined:I,urlFetched:O,defQueue:D,defQueueMap:{},Module:b,makeModuleMap:o,nextTick:req.nextTick,onError:d,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,i){return(i.indexOf("?")===-1?"?":"&")+t}}var i=x.shim,s={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){s[t]?(x[t]||(x[t]={}),mixin(x[t],e,!0,!0)):x[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(R[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=y.makeShimExports(e)),i[t]=e}),x.shim=i),e.packages&&each(e.packages,function(e){var t,i;e="string"==typeof e?{name:e}:e,i=e.name,t=e.location,t&&(x.paths[i]=e.location),x.pkgs[i]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=o(t,null,!0))}),(e.deps||e.callback)&&y.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function r(i,s,a){var h,c,u;return n.enableBuildCallback&&s&&isFunction(s)&&(s.__requireJsBuild=!0),"string"==typeof i?isFunction(s)?d(makeError("requireargs","Invalid require call"),a):t&&hasProp(w,i)?w[i](S[t.id]):req.get?req.get(y,i,t,r):(c=o(i,t,!1,!0),h=c.id,hasProp(I,h)?I[h]:d(makeError("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),y.nextTick(function(){_(),u=l(o(null,t)),u.skipMap=n.skipMap,u.init(i,s,a,{enabled:!0}),p()}),r)}return n=n||{},mixin(r,{isBrowser:isBrowser,toUrl:function(e){var s,n=e.lastIndexOf("."),r=e.split("/")[0],o="."===r||".."===r;return n!==-1&&(!o||n>1)&&(s=e.substring(n,e.length),e=e.substring(0,n)),y.nameToUrl(i(e,t&&t.id,!0),s,!0)},defined:function(e){return hasProp(I,o(e,t,!1,!0).id)},specified:function(e){return e=o(e,t,!1,!0).id,hasProp(I,e)||hasProp(S,e)}}),t||(r.undef=function(e){h();var i=o(e,t,!0),n=getOwn(S,e);n.undefed=!0,s(e),delete I[e],delete O[i.url],delete k[e],eachReverse(D,function(t,i){t[0]===e&&D.splice(i,1)}),delete y.defQueueMap[e],n&&(n.events.defined&&(k[e]=n.events),c(e))}),r},enable:function(e){getOwn(S,e.id)&&l(e).enable()},completeLoad:function(e){var t,i,s,r=getOwn(x.shim,e)||{},o=r.exports;for(h();D.length;){if(i=D.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);m(i)}if(y.defQueueMap={},s=getOwn(S,e),!t&&!hasProp(I,e)&&s&&!s.inited){if(!(!x.enforceDefine||o&&getGlobal(o)))return n(e)?void 0:d(makeError("nodefine","No define call for "+e,null,[e]));m([e,r.deps||[],r.exportsFn])}p()},nameToUrl:function(e,t,i){var s,n,r,o,l,a,d,h=getOwn(x.pkgs,e);if(h&&(e=h),d=getOwn(R,e))return y.nameToUrl(d,t,i);if(req.jsExtRegExp.test(e))l=e+(t||"");else{for(s=x.paths,n=e.split("/"),r=n.length;r>0;r-=1)if(o=n.slice(0,r).join("/"),a=getOwn(s,o)){isArray(a)&&(a=a[0]),n.splice(0,r,a);break}l=n.join("/"),l+=t||(/^data\:|^blob\:|\?/.test(l)||i?"":".js"),l=("/"===l.charAt(0)||l.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+l}return x.urlArgs&&!/^blob\:/.test(l)?l+x.urlArgs(e,l):l},load:function(e,t){req.load(y,e,t)},execCb:function(e,t,i,s){return t.apply(s,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=f(e);y.completeLoad(t.id)}},onScriptError:function(e){var t=f(e);if(!n(t.id)){var i=[];return eachProp(S,function(e,s){0!==s.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return i.push(s),!0})}),d(makeError("scripterror",'Script error for "'+t.id+(i.length?'", needed by: '+i.join(", "):'"'),e,[t.id]))}}},y.require=y.makeRequire(),y}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.3",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,s){var n,r,o="_";return isArray(e)||"string"==typeof e||(r=e,isArray(t)?(e=t,t=i,i=s):e=[]),r&&r.context&&(o=r.context),n=getOwn(contexts,o),n||(n=contexts[o]=req.s.newContext(o)),r&&n.configure(r),n.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version="2.3.3",req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts._;return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var s=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return s.type=e.scriptType||"text/javascript",s.charset="utf-8",s.async=!0,s},req.load=function(e,t,i){var s,n=e&&e.config||{};if(isBrowser)return s=req.createNode(n,t,i),s.setAttribute("data-requirecontext",e.contextName),s.setAttribute("data-requiremodule",t),!s.attachEvent||s.attachEvent.toString&&s.attachEvent.toString().indexOf("[native code")<0||isOpera?(s.addEventListener("load",e.onScriptLoad,!1),s.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,s.attachEvent("onreadystatechange",e.onScriptLoad)),s.src=i,n.onNodeCreated&&n.onNodeCreated(s,n,t,i),currentlyAddingScript=s,baseElement?head.insertBefore(s,baseElement):head.appendChild(s),currentlyAddingScript=null,s;if(isWebWorker)try{setTimeout(function(){},0),importScripts(i),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||mainScript.indexOf("!")!==-1||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,i){var s,n;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,commentReplace).replace(/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(s=currentlyAddingScript||getInteractiveScript())&&(e||(e=s.getAttribute("data-requiremodule")),n=contexts[s.getAttribute("data-requirecontext")]),n?(n.defQueue.push([e,t,i]),n.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),_aureliaConfigureModuleLoader(),define("aurelia-binding",["exports","aurelia-logging","aurelia-pal","aurelia-task-queue","aurelia-metadata"],function(e,t,i,s,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){if(e in Le)return Le[e];var t=e.charAt(0).toLowerCase()+e.slice(1).replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()});return Le[e]=t,t}function a(e,t){return{bindingContext:e,parentOverrideContext:t||null}}function d(e,t,i){var s=t.overrideContext;if(i){for(;i&&s;)i--,s=s.parentOverrideContext;if(i||!s)return;return e in s?s:s.bindingContext}for(;s&&!(e in s)&&!(s.bindingContext&&e in s.bindingContext);)s=s.parentOverrideContext;return s?e in s?s:s.bindingContext:t.bindingContext||t.overrideContext}function h(e,t){return t?{bindingContext:e,overrideContext:a(e,a(t))}:{bindingContext:e,overrideContext:a(e)}}function c(e){for(var t=void 0===this._observerSlots?0:this._observerSlots,i=t;i--&&this[Ve[i]]!==e;);if(i===-1){for(i=0;this[Ve[i]];)i++;this[Ve[i]]=e,e.subscribe(Ne,this),i===t&&(this._observerSlots=i+1)}void 0===this._version&&(this._version=0),this[ze[i]]=this._version}function u(e,t){var i=this.observerLocator.getObserver(e,t);c.call(this,i)}function p(e){var t=this.observerLocator.getArrayObserver(e);c.call(this,t)}function m(e){for(var t=this._observerSlots;t--;)if(e||this[ze[t]]!==this._version){var i=this[Ve[t]];this[Ve[t]]=null,i&&i.unsubscribe(Ne,this)}}function g(){return function(e){e.prototype.observeProperty=u,e.prototype.observeArray=p,e.prototype.unobserve=m,e.prototype.addObserver=c}}function f(e){for(var t=Be.length,s=0;s<t;){var n=Be[s];if(Ue[n.__connectQueueId]=!1,n.connect(!0),++s%100==0&&i.PLATFORM.performance.now()-e>$e)break}Be.splice(0,s),Be.length?i.PLATFORM.requestAnimationFrame(f):(Ge=!1,Ke=0)}function _(e){if(Ke<We)Ke++,e.connect(!1);else{var t=e.__connectQueueId;void 0===t&&(t=qe,qe++,e.__connectQueueId=t),Ue[t]||(Be.push(e),Ue[t]=!0)}Ge||(Ge=!0,i.PLATFORM.requestAnimationFrame(f))}function v(e,t){return!this.hasSubscriber(e,t)&&(this._context0?this._context1?this._context2?this._contextsRest?(this._contextsRest.push(e),this._callablesRest.push(t),!0):(this._contextsRest=[e],this._callablesRest=[t],!0):(this._context2=e,this._callable2=t,!0):(this._context1=e,this._callable1=t,!0):(this._context0=e,this._callable0=t,!0))}function b(e,t){if(this._context0===e&&this._callable0===t)return this._context0=null,this._callable0=null,!0;if(this._context1===e&&this._callable1===t)return this._context1=null,this._callable1=null,!0;if(this._context2===e&&this._callable2===t)return this._context2=null,this._callable2=null,!0;var i=this._contextsRest,s=void 0;return!(!i||!i.length||(s=i.indexOf(e))===-1||this._callablesRest[s]!==t)&&(i.splice(s,1),this._callablesRest.splice(s,1),!0)}function y(e,t){var i=this._context0,s=this._callable0,n=this._context1,r=this._callable1,o=this._context2,l=this._callable2,a=this._contextsRest?this._contextsRest.length:0,d=void 0,h=void 0,c=void 0,u=void 0;if(a){for(c=Xe.length;c--&&Xe[c];);for(c<0?(c=Xe.length,d=[],h=[],Xe.push(!0),Ye.push(d),Qe.push(h)):(Xe[c]=!0,d=Ye[c],h=Qe[c]),u=a;u--;)d[u]=this._contextsRest[u],h[u]=this._callablesRest[u]}if(i&&(s?s.call(i,e,t):i(e,t)),n&&(r?r.call(n,e,t):n(e,t)),o&&(l?l.call(o,e,t):o(e,t)),a){for(u=0;u<a;u++){var p=h[u],m=d[u];p?p.call(m,e,t):m(e,t),d[u]=null,h[u]=null}Xe[c]=!1}}function w(){return!!(this._context0||this._context1||this._context2||this._contextsRest&&this._contextsRest.length)}function C(e,t){if(this._context0===e&&this._callable0===t||this._context1===e&&this._callable1===t||this._context2===e&&this._callable2===t)return!0;var i=void 0,s=this._contextsRest;if(!s||0===(i=s.length))return!1;for(var n=this._callablesRest;i--;)if(s[i]===e&&n[i]===t)return!0;return!1}function x(){return function(e){e.prototype.addSubscriber=v,e.prototype.removeSubscriber=b,e.prototype.callSubscribers=y,e.prototype.hasSubscribers=w,e.prototype.hasSubscriber=C}}function S(e){return+e==e>>>0}function T(e){return+e}function k(e,t,i){return{index:e,removed:t,addedCount:i}}function D(){}function I(e,t,i,s,n,r){return Ze.calcSplices(e,t,i,s,n,r)}function O(e,t,i,s){return t<i||s<e?-1:t===i||s===e?0:e<i?t<s?t-i:s-i:s<t?s-e:t-e}function R(e,t,i,s){for(var n=k(t,i,s),r=!1,o=0,l=0;l<e.length;l++){var a=e[l];if(a.index+=o,!r){var d=O(n.index,n.index+n.removed.length,a.index,a.index+a.addedCount);if(d>=0){e.splice(l,1),l--,o-=a.addedCount-a.removed.length,n.addedCount+=a.addedCount-d;var h=n.removed.length+a.removed.length-d;if(n.addedCount||h){var c=a.removed;if(n.index<a.index){var u=n.removed.slice(0,a.index-n.index);Array.prototype.push.apply(u,c),c=u}if(n.index+n.removed.length>a.index+a.addedCount){var p=n.removed.slice(a.index+a.addedCount-n.index);Array.prototype.push.apply(c,p)}n.removed=c,a.index<n.index&&(n.index=a.index)}else r=!0}else if(n.index<a.index){r=!0,e.splice(l,0,n),l++;var m=n.addedCount-n.removed.length;a.index+=m,o+=m}}}r||e.push(n)}function P(e,t){for(var i=[],s=0;s<t.length;s++){var n=t[s];switch(n.type){case"splice":R(i,n.index,n.removed.slice(),n.addedCount);break;case"add":case"update":case"delete":if(!S(n.name))continue;var r=T(n.name);if(r<0)continue;R(i,r,[n.oldValue],"delete"===n.type?0:1);break;default:console.error("Unexpected record type: "+JSON.stringify(n))}}return i}function M(e,t){var i=[];return P(e,t).forEach(function(t){if(1===t.addedCount&&1===t.removed.length)return void(t.removed[0]!==e[t.index]&&i.push(t));i=i.concat(I(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length))}),i}function j(e,t,i,s){return{type:e,object:t,key:i,oldValue:s}}function E(e){for(var t=new Array(e.size),i=e.keys(),s=0,n=void 0;(n=i.next())&&!n.done;)t[s]=j("added",e,n.value),s++;return t}function F(e,t){return dt.for(e,t)}function A(e,t,i){for(var s=t.length,n=[],r=0;r<s;r++)n[r]=t[r].evaluate(e,i);return n}function L(e,t){return null!==e&&null!==t?"string"==typeof e&&"string"!=typeof t?e+t.toString():"string"!=typeof e&&"string"==typeof t?e.toString()+t:e+t:null!==e?e:null!==t?t:0}function N(e,t,i){var s=null===e||void 0===e?null:e[t];if("function"==typeof s)return s;if(!i&&(null===s||void 0===s))return null;throw new Error(t+" is not a function")}function V(e,t){if(Array.isArray(e))return e[parseInt(t,10)];if(e)return e[t];if(null!==e&&void 0!==e)return e[t]}function z(e,t,i){if(Array.isArray(e)){var s=parseInt(t,10);e.length<=s&&(e.length=s+1),e[s]=i}else e[t]=i;return i}function H(e){var t=new Rt;return e.accept(t)}function B(e){return e>=Lt&&e<=Bt||e===Pi}function U(e){return bi<=e&&e<=Di||ci<=e&&e<=pi||e===vi||e===Wt}function q(e){return bi<=e&&e<=Di||ci<=e&&e<=pi||di<=e&&e<=hi||e===vi||e===Wt}function W(e){return di<=e&&e<=hi}function $(e){return e===yi||e===ui}function G(e){return e===ei||e===Jt}function K(e){switch(e){case Ci:return Nt;case wi:return zt;case xi:return Ht;case Si:return Lt;case ki:return Vt;default:return e}}function Y(e,t){if(!e)throw t||"Assertion failed"}function Q(e,t){return Ai.for(e,t)}function X(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}function J(){this.standardStopPropagation(),this.propagationStopped=!0}function Z(e){e.standardStopPropagation=e.stopPropagation,e.stopPropagation=J}function ee(e){var t=!1;e.propagationStopped=!1;for(var i=X(e),s=[];i;){if(i.capturedCallbacks){var n=i.capturedCallbacks[e.type];n&&(t||(Z(e),t=!0),s.push(n))}i=i.parentNode}for(var r=s.length-1;r>=0;r--){if((0,s[r])(e),e.propagationStopped)break}}function te(e){var t=!1;e.propagationStopped=!1;for(var i=X(e);i&&!e.propagationStopped;){if(i.delegatedCallbacks){var s=i.delegatedCallbacks[e.type];s&&(t||(Z(e),t=!0),s(e))}i=i.parentNode}}function ie(e){return!!(e&&e.get&&e.get.dependencies)}function se(e,t,i){Object.getOwnPropertyDescriptor(e.prototype,t).get.dependencies=i}function ne(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e,i,s){return s.get.dependencies=t,s}}function re(e,t,i,s){var n=i.get.dependencies;if(!(n instanceof is)){for(var r=n.length;r--;)n[r]=s.parser.parse(n[r]);n=i.get.dependencies=new is(t,n)}var o={bindingContext:e,overrideContext:a(e)};return new Je(o,n,s)}function oe(e){if(void 0===e||"string"==typeof e)return function(t){n.metadata.define(n.metadata.resource,new gs(e),t)};n.metadata.define(n.metadata.resource,new gs,e)}function le(e){if(void 0===e||"string"==typeof e)return function(t){n.metadata.define(n.metadata.resource,new fs(e),t)};n.metadata.define(n.metadata.resource,new fs,e)}function ae(e){var t=e.au;if(void 0===t)throw new Error('No Aurelia APIs are defined for the element: "'+e.tagName+'".');return t}function de(e,t){return ws.for(e,t)}function he(e,t,i){function s(e,t,i,s){var n=void 0===t;n&&(e=e.prototype,t="string"==typeof s?s:s.name);var r="_"+t,o={configurable:!0,enumerable:!1,writable:!0},l=s&&s.changeHandler||t+"Changed";if(i?"function"==typeof i.initializer&&(o.value=i.initializer()):i={},"enumerable"in i||(i.enumerable=!0),delete i.value,delete i.writable,delete i.initializer,Reflect.defineProperty(e,r,o),i.get=function(){return this[r]},i.set=function(e){var i=this[r];e!==i&&(this[r]=e,Reflect.defineProperty(this,r,{enumerable:!1}),this[l]&&this[l](e,i,t))},i.get.dependencies=[r],!n)return i;Reflect.defineProperty(e,t,i)}return void 0===t?function(t,i,n){return s(t,i,n,e)}:s(e,t,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.getSetObserver=e.BindingEngine=e.NameExpression=e.Listener=e.ListenerExpression=e.BindingBehaviorResource=e.ValueConverterResource=e.Call=e.CallExpression=e.Binding=e.BindingExpression=e.ObjectObservationAdapter=e.ObserverLocator=e.SVGAnalyzer=e.presentationAttributes=e.presentationElements=e.elements=e.ComputedExpression=e.ClassObserver=e.SelectValueObserver=e.CheckedObserver=e.ValueAttributeObserver=e.StyleObserver=e.DataAttributeObserver=e.dataAttributeAccessor=e.XLinkAttributeObserver=e.SetterObserver=e.PrimitiveObserver=e.propertyAccessor=e.DirtyCheckProperty=e.DirtyChecker=e.EventManager=e.delegationStrategy=e.getMapObserver=e.ParserImplementation=e.Parser=e.Scanner=e.Lexer=e.Token=e.bindingMode=e.ExpressionCloner=e.Unparser=e.LiteralObject=e.LiteralArray=e.LiteralString=e.LiteralPrimitive=e.PrefixNot=e.Binary=e.CallFunction=e.CallMember=e.CallScope=e.AccessKeyed=e.AccessMember=e.AccessScope=e.AccessThis=e.Conditional=e.Assign=e.ValueConverter=e.BindingBehavior=e.Chain=e.Expression=e.getArrayObserver=e.CollectionLengthObserver=e.ModifyCollectionObserver=e.ExpressionObserver=e.sourceContext=void 0,e.camelCase=l,e.createOverrideContext=a,e.getContextFor=d,e.createScopeForTest=h,e.connectable=g,e.enqueueBindingConnect=_,e.subscriberCollection=x,e.calcSplices=I,e.mergeSplice=R,e.projectArraySplices=M,e.getChangeRecords=E,e.cloneExpression=H,e.hasDeclaredDependencies=ie,e.declarePropertyDependencies=se,e.computedFrom=ne,e.createComputedObserver=re,e.valueConverter=oe,e.bindingBehavior=le,e.observable=he;for(var ce,ue,pe,me,ge,fe,_e,ve,be,ye,we,Ce,xe,Se,Te,ke,De,Ie,Oe,Re,Pe,Me,je,Ee=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(t),Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},Ae=(function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}()),Le=Object.create(null),Ne=e.sourceContext="Binding:source",Ve=[],ze=[],He=0;He<100;He++)Ve.push("_observer"+He),ze.push("_observerVersion"+He);var Be=[],Ue={},qe=0,We=100,$e=15,Ge=!1,Ke=0,Ye=[],Qe=[],Xe=[],Je=e.ExpressionObserver=(ce=g(),ue=x(),ce(pe=ue(pe=function(){function e(e,t,i,s){this.scope=e,this.expression=t,this.observerLocator=i,this.lookupFunctions=s}return e.prototype.getValue=function(){return this.expression.evaluate(this.scope,this.lookupFunctions)},e.prototype.setValue=function(e){this.expression.assign(this.scope,e)},e.prototype.subscribe=function(e,t){var i=this;if(this.hasSubscribers()||(this.oldValue=this.expression.evaluate(this.scope,this.lookupFunctions),this.expression.connect(this,this.scope)),this.addSubscriber(e,t),1===arguments.length&&e instanceof Function)return{dispose:function(){i.unsubscribe(e,t)}}},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.unobserve(!0),this.oldValue=void 0)},e.prototype.call=function(){var e=this.expression.evaluate(this.scope,this.lookupFunctions),t=this.oldValue;e!==t&&(this.oldValue=e,this.callSubscribers(e,t)),this._version++,this.expression.connect(this,this.scope),this.unobserve(!1)},e}())||pe)||pe);D.prototype={calcEditDistances:function(e,t,i,s,n,r){for(var o=r-n+1,l=i-t+1,a=new Array(o),d=void 0,h=void 0,c=0;c<o;++c)a[c]=new Array(l),a[c][0]=c;for(var u=0;u<l;++u)a[0][u]=u;for(var p=1;p<o;++p)for(var m=1;m<l;++m)this.equals(e[t+m-1],s[n+p-1])?a[p][m]=a[p-1][m-1]:(d=a[p-1][m]+1,h=a[p][m-1]+1,a[p][m]=d<h?d:h);return a},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,i=e[0].length-1,s=e[t][i],n=[];t>0||i>0;)if(0!==t)if(0!==i){var r=e[t-1][i-1],o=e[t-1][i],l=e[t][i-1],a=void 0;a=o<l?o<r?o:r:l<r?l:r,a===r?(r===s?n.push(0):(n.push(1),s=r),t--,i--):a===o?(n.push(3),t--,s=o):(n.push(2),i--,s=l)}else n.push(3),t--;else n.push(2),i--;return n.reverse(),n},calcSplices:function(e,t,i,s,n,r){var o=0,l=0,a=Math.min(i-t,r-n);if(0===t&&0===n&&(o=this.sharedPrefix(e,s,a)),i===e.length&&r===s.length&&(l=this.sharedSuffix(e,s,a-o)),t+=o,n+=o,i-=l,r-=l,i-t==0&&r-n==0)return[];if(t===i){for(var d=k(t,[],0);n<r;)d.removed.push(s[n++]);return[d]}if(n===r)return[k(t,[],i-t)];for(var h=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,i,s,n,r)),c=void 0,u=[],p=t,m=n,g=0;g<h.length;++g)switch(h[g]){case 0:c&&(u.push(c),c=void 0),p++,m++;break;case 1:c||(c=k(p,[],0)),c.addedCount++,p++,c.removed.push(s[m]),m++;break;case 2:c||(c=k(p,[],0)),c.addedCount++,p++;break;case 3:c||(c=k(p,[],0)),c.removed.push(s[m]),m++}return c&&u.push(c),u},sharedPrefix:function(e,t,i){for(var s=0;s<i;++s)if(!this.equals(e[s],t[s]))return s;return i},sharedSuffix:function(e,t,i){for(var s=e.length,n=t.length,r=0;r<i&&this.equals(e[--s],t[--n]);)r++;return r},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var Ze=new D,et=e.ModifyCollectionObserver=(me=x())(ge=function(){function e(e,t){this.taskQueue=e,this.queued=!1,this.changeRecords=null,this.oldCollection=null,this.collection=t,this.lengthPropertyName=t instanceof Map||t instanceof Set?"size":"length"}return e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.addChangeRecord=function(e){if(this.hasSubscribers()||this.lengthObserver){if("splice"===e.type){var t=e.index,i=e.object.length;t>i?t=i-e.addedCount:t<0&&(t=i+e.removed.length+t-e.addedCount),t<0&&(t=0),e.index=t}null===this.changeRecords?this.changeRecords=[e]:this.changeRecords.push(e),this.queued||(this.queued=!0,this.taskQueue.queueMicroTask(this))}},e.prototype.flushChangeRecords=function(){(this.changeRecords&&this.changeRecords.length||this.oldCollection)&&this.call()},e.prototype.reset=function(e){this.oldCollection=e,this.hasSubscribers()&&!this.queued&&(this.queued=!0,this.taskQueue.queueMicroTask(this))},e.prototype.getLengthObserver=function(){return this.lengthObserver||(this.lengthObserver=new tt(this.collection))},e.prototype.call=function(){var e=this.changeRecords,t=this.oldCollection,i=void 0;this.queued=!1,this.changeRecords=[],this.oldCollection=null,this.hasSubscribers()&&(i=t?this.collection instanceof Map||this.collection instanceof Set?E(t):I(this.collection,0,this.collection.length,t,0,t.length):this.collection instanceof Map||this.collection instanceof Set?e:M(this.collection,e),this.callSubscribers(i)),this.lengthObserver&&this.lengthObserver.call(this.collection[this.lengthPropertyName])},e}())||ge,tt=e.CollectionLengthObserver=(fe=x())(_e=function(){function e(e){this.collection=e,this.lengthPropertyName=e instanceof Map||e instanceof Set?"size":"length",this.currentValue=e[this.lengthPropertyName]}return e.prototype.getValue=function(){return this.collection[this.lengthPropertyName]},e.prototype.setValue=function(e){this.collection[this.lengthPropertyName]=e},e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.call=function(e){var t=this.currentValue;this.callSubscribers(e,t),this.currentValue=e},e}())||_e,it=Array.prototype.pop,st=Array.prototype.push,nt=Array.prototype.reverse,rt=Array.prototype.shift,ot=Array.prototype.sort,lt=Array.prototype.splice,at=Array.prototype.unshift;Array.prototype.pop=function(){var e=this.length>0,t=it.apply(this,arguments);return e&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:this.length,oldValue:t}),t},Array.prototype.push=function(){var e=st.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:this.length-arguments.length,removed:[],addedCount:arguments.length}),e},Array.prototype.reverse=function(){var e=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),e=this.slice());var t=nt.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(e),t},Array.prototype.shift=function(){var e=this.length>0,t=rt.apply(this,arguments);return e&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:0,oldValue:t}),t},Array.prototype.sort=function(){var e=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),e=this.slice());var t=ot.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(e),t},Array.prototype.splice=function(){var e=lt.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:+arguments[0],removed:e,addedCount:arguments.length>2?arguments.length-2:0}),e},Array.prototype.unshift=function(){var e=at.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:0,removed:[],addedCount:arguments.length}),e},e.getArrayObserver=F;var dt=function(e){function t(t,i){return r(this,e.call(this,t,i))}return o(t,e),t.for=function(e,i){return"__array_observer__"in i||Reflect.defineProperty(i,"__array_observer__",{value:t.create(e,i),enumerable:!1,configurable:!1}),i.__array_observer__},t.create=function(e,i){return new t(e,i)},t}(et),ht=e.Expression=function(){function e(){this.isChain=!1,this.isAssignable=!1}return e.prototype.evaluate=function(e,t,i){throw new Error('Binding expression "'+this+'" cannot be evaluated.')},e.prototype.assign=function(e,t,i){throw new Error('Binding expression "'+this+'" cannot be assigned to.')},e.prototype.toString=function(){return"undefined"==typeof FEATURE_NO_UNPARSER?Ot.unparse(this):Function.prototype.toString.call(this)},e}(),ct=e.Chain=function(e){function t(t){var i=r(this,e.call(this));return i.expressions=t,i.isChain=!0,i}return o(t,e),t.prototype.evaluate=function(e,t){for(var i=void 0,s=this.expressions,n=void 0,r=0,o=s.length;r<o;++r)null!==(n=s[r].evaluate(e,t))&&(i=n);return i},t.prototype.accept=function(e){return e.visitChain(this)},t}(ht),ut=e.BindingBehavior=function(e){function t(t,i,s){var n=r(this,e.call(this));return n.expression=t,n.name=i,n.args=s,n}return o(t,e),t.prototype.evaluate=function(e,t){return this.expression.evaluate(e,t)},t.prototype.assign=function(e,t,i){return this.expression.assign(e,t,i)},t.prototype.accept=function(e){return e.visitBindingBehavior(this)},t.prototype.connect=function(e,t){this.expression.connect(e,t)},t.prototype.bind=function(e,t,i){this.expression.expression&&this.expression.bind&&this.expression.bind(e,t,i);var s=i.bindingBehaviors(this.name);if(!s)throw new Error('No BindingBehavior named "'+this.name+'" was found!');var n="behavior-"+this.name;if(e[n])throw new Error('A binding behavior named "'+this.name+'" has already been applied to "'+this.expression+'"');e[n]=s,s.bind.apply(s,[e,t].concat(A(t,this.args,e.lookupFunctions)))},t.prototype.unbind=function(e,t){var i="behavior-"+this.name;e[i].unbind(e,t),e[i]=null,this.expression.expression&&this.expression.unbind&&this.expression.unbind(e,t)},t}(ht),pt=e.ValueConverter=function(e){function t(t,i,s,n){var o=r(this,e.call(this));return o.expression=t,o.name=i,o.args=s,o.allArgs=n,o}return o(t,e),t.prototype.evaluate=function(e,t){var i=t.valueConverters(this.name);if(!i)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"toView"in i?i.toView.apply(i,A(e,this.allArgs,t)):this.allArgs[0].evaluate(e,t)},t.prototype.assign=function(e,t,i){
var s=i.valueConverters(this.name);if(!s)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"fromView"in s&&(t=s.fromView.apply(s,[t].concat(A(e,this.args,i)))),this.allArgs[0].assign(e,t,i)},t.prototype.accept=function(e){return e.visitValueConverter(this)},t.prototype.connect=function(e,t){for(var i=this.allArgs,s=i.length;s--;)i[s].connect(e,t)},t}(ht),mt=e.Assign=function(e){function t(t,i){var s=r(this,e.call(this));return s.target=t,s.value=i,s.isAssignable=!0,s}return o(t,e),t.prototype.evaluate=function(e,t){return this.target.assign(e,this.value.evaluate(e,t))},t.prototype.accept=function(e){e.visitAssign(this)},t.prototype.connect=function(e,t){},t.prototype.assign=function(e,t){this.value.assign(e,t),this.target.assign(e,t)},t}(ht),gt=e.Conditional=function(e){function t(t,i,s){var n=r(this,e.call(this));return n.condition=t,n.yes=i,n.no=s,n}return o(t,e),t.prototype.evaluate=function(e,t){return this.condition.evaluate(e,t)?this.yes.evaluate(e,t):this.no.evaluate(e,t)},t.prototype.accept=function(e){return e.visitConditional(this)},t.prototype.connect=function(e,t){this.condition.connect(e,t),this.condition.evaluate(t)?this.yes.connect(e,t):this.no.connect(e,t)},t}(ht),ft=e.AccessThis=function(e){function t(t){var i=r(this,e.call(this));return i.ancestor=t,i}return o(t,e),t.prototype.evaluate=function(e,t){for(var i=e.overrideContext,s=this.ancestor;s--&&i;)i=i.parentOverrideContext;return s<1&&i?i.bindingContext:void 0},t.prototype.accept=function(e){return e.visitAccessThis(this)},t.prototype.connect=function(e,t){},t}(ht),_t=e.AccessScope=function(e){function t(t,i){var s=r(this,e.call(this));return s.name=t,s.ancestor=i,s.isAssignable=!0,s}return o(t,e),t.prototype.evaluate=function(e,t){return d(this.name,e,this.ancestor)[this.name]},t.prototype.assign=function(e,t){var i=d(this.name,e,this.ancestor);return i?i[this.name]=t:void 0},t.prototype.accept=function(e){return e.visitAccessScope(this)},t.prototype.connect=function(e,t){var i=d(this.name,t,this.ancestor);e.observeProperty(i,this.name)},t}(ht),vt=e.AccessMember=function(e){function t(t,i){var s=r(this,e.call(this));return s.object=t,s.name=i,s.isAssignable=!0,s}return o(t,e),t.prototype.evaluate=function(e,t){var i=this.object.evaluate(e,t);return null===i||void 0===i?i:i[this.name]},t.prototype.assign=function(e,t){var i=this.object.evaluate(e);return null!==i&&void 0!==i||(i={},this.object.assign(e,i)),i[this.name]=t,t},t.prototype.accept=function(e){return e.visitAccessMember(this)},t.prototype.connect=function(e,t){this.object.connect(e,t);var i=this.object.evaluate(t);i&&e.observeProperty(i,this.name)},t}(ht),bt=e.AccessKeyed=function(e){function t(t,i){var s=r(this,e.call(this));return s.object=t,s.key=i,s.isAssignable=!0,s}return o(t,e),t.prototype.evaluate=function(e,t){return V(this.object.evaluate(e,t),this.key.evaluate(e,t))},t.prototype.assign=function(e,t){return z(this.object.evaluate(e),this.key.evaluate(e),t)},t.prototype.accept=function(e){return e.visitAccessKeyed(this)},t.prototype.connect=function(e,t){this.object.connect(e,t);var i=this.object.evaluate(t);if(i instanceof Object){this.key.connect(e,t);var s=this.key.evaluate(t);null===s||void 0===s||Array.isArray(i)&&"number"==typeof s||e.observeProperty(i,s)}},t}(ht),yt=e.CallScope=function(e){function t(t,i,s){var n=r(this,e.call(this));return n.name=t,n.args=i,n.ancestor=s,n}return o(t,e),t.prototype.evaluate=function(e,t,i){var s=A(e,this.args,t),n=d(this.name,e,this.ancestor),r=N(n,this.name,i);if(r)return r.apply(n,s)},t.prototype.accept=function(e){return e.visitCallScope(this)},t.prototype.connect=function(e,t){for(var i=this.args,s=i.length;s--;)i[s].connect(e,t)},t}(ht),wt=e.CallMember=function(e){function t(t,i,s){var n=r(this,e.call(this));return n.object=t,n.name=i,n.args=s,n}return o(t,e),t.prototype.evaluate=function(e,t,i){var s=this.object.evaluate(e,t),n=A(e,this.args,t),r=N(s,this.name,i);if(r)return r.apply(s,n)},t.prototype.accept=function(e){return e.visitCallMember(this)},t.prototype.connect=function(e,t){if(this.object.connect(e,t),N(this.object.evaluate(t),this.name,!1))for(var i=this.args,s=i.length;s--;)i[s].connect(e,t)},t}(ht),Ct=e.CallFunction=function(e){function t(t,i){var s=r(this,e.call(this));return s.func=t,s.args=i,s}return o(t,e),t.prototype.evaluate=function(e,t,i){var s=this.func.evaluate(e,t);if("function"==typeof s)return s.apply(null,A(e,this.args,t));if(i||null!==s&&void 0!==s)throw new Error(this.func+" is not a function")},t.prototype.accept=function(e){return e.visitCallFunction(this)},t.prototype.connect=function(e,t){if(this.func.connect(e,t),"function"==typeof this.func.evaluate(t))for(var i=this.args,s=i.length;s--;)i[s].connect(e,t)},t}(ht),xt=e.Binary=function(e){function t(t,i,s){var n=r(this,e.call(this));return n.operation=t,n.left=i,n.right=s,n}return o(t,e),t.prototype.evaluate=function(e,t){var i=this.left.evaluate(e,t);switch(this.operation){case"&&":return i&&this.right.evaluate(e,t);case"||":return i||this.right.evaluate(e,t)}var s=this.right.evaluate(e,t);switch(this.operation){case"==":return i==s;case"===":return i===s;case"!=":return i!=s;case"!==":return i!==s}if(null===i||null===s||void 0===i||void 0===s){switch(this.operation){case"+":return null!==i&&void 0!==i?i:null!==s&&void 0!==s?s:0;case"-":return null!==i&&void 0!==i?i:null!==s&&void 0!==s?0-s:0}return null}switch(this.operation){case"+":return L(i,s);case"-":return i-s;case"*":return i*s;case"/":return i/s;case"%":return i%s;case"<":return i<s;case">":return i>s;case"<=":return i<=s;case">=":return i>=s;case"^":return i^s}throw new Error("Internal error ["+this.operation+"] not handled")},t.prototype.accept=function(e){return e.visitBinary(this)},t.prototype.connect=function(e,t){this.left.connect(e,t);var i=this.left.evaluate(t);"&&"===this.operation&&!i||"||"===this.operation&&i||this.right.connect(e,t)},t}(ht),St=e.PrefixNot=function(e){function t(t,i){var s=r(this,e.call(this));return s.operation=t,s.expression=i,s}return o(t,e),t.prototype.evaluate=function(e,t){return!this.expression.evaluate(e,t)},t.prototype.accept=function(e){return e.visitPrefix(this)},t.prototype.connect=function(e,t){this.expression.connect(e,t)},t}(ht),Tt=e.LiteralPrimitive=function(e){function t(t){var i=r(this,e.call(this));return i.value=t,i}return o(t,e),t.prototype.evaluate=function(e,t){return this.value},t.prototype.accept=function(e){return e.visitLiteralPrimitive(this)},t.prototype.connect=function(e,t){},t}(ht),kt=e.LiteralString=function(e){function t(t){var i=r(this,e.call(this));return i.value=t,i}return o(t,e),t.prototype.evaluate=function(e,t){return this.value},t.prototype.accept=function(e){return e.visitLiteralString(this)},t.prototype.connect=function(e,t){},t}(ht),Dt=e.LiteralArray=function(e){function t(t){var i=r(this,e.call(this));return i.elements=t,i}return o(t,e),t.prototype.evaluate=function(e,t){for(var i=this.elements,s=[],n=0,r=i.length;n<r;++n)s[n]=i[n].evaluate(e,t);return s},t.prototype.accept=function(e){return e.visitLiteralArray(this)},t.prototype.connect=function(e,t){for(var i=this.elements.length,s=0;s<i;s++)this.elements[s].connect(e,t)},t}(ht),It=e.LiteralObject=function(e){function t(t,i){var s=r(this,e.call(this));return s.keys=t,s.values=i,s}return o(t,e),t.prototype.evaluate=function(e,t){for(var i={},s=this.keys,n=this.values,r=0,o=s.length;r<o;++r)i[s[r]]=n[r].evaluate(e,t);return i},t.prototype.accept=function(e){return e.visitLiteralObject(this)},t.prototype.connect=function(e,t){for(var i=this.keys.length,s=0;s<i;s++)this.values[s].connect(e,t)},t}(ht),Ot=null;e.Unparser=Ot,"undefined"==typeof FEATURE_NO_UNPARSER&&(e.Unparser=Ot=function(){function e(e){this.buffer=e}return e.unparse=function(e){var t=[],i=new Ot(t);return e.accept(i),t.join("")},e.prototype.write=function(e){this.buffer.push(e)},e.prototype.writeArgs=function(e){this.write("(");for(var t=0,i=e.length;t<i;++t)0!==t&&this.write(","),e[t].accept(this);this.write(")")},e.prototype.visitChain=function(e){for(var t=e.expressions,i=0,s=expression.length;i<s;++i)0!==i&&this.write(";"),t[i].accept(this)},e.prototype.visitBindingBehavior=function(e){var t=e.args;e.expression.accept(this),this.write("&"+e.name);for(var i=0,s=t.length;i<s;++i)this.write(":"),t[i].accept(this)},e.prototype.visitValueConverter=function(e){var t=e.args;e.expression.accept(this),this.write("|"+e.name);for(var i=0,s=t.length;i<s;++i)this.write(":"),t[i].accept(this)},e.prototype.visitAssign=function(e){e.target.accept(this),this.write("="),e.value.accept(this)},e.prototype.visitConditional=function(e){e.condition.accept(this),this.write("?"),e.yes.accept(this),this.write(":"),e.no.accept(this)},e.prototype.visitAccessThis=function(e){if(0===e.ancestor)return void this.write("$this");this.write("$parent");for(var t=e.ancestor-1;t--;)this.write(".$parent")},e.prototype.visitAccessScope=function(e){for(var t=e.ancestor;t--;)this.write("$parent.");this.write(e.name)},e.prototype.visitAccessMember=function(e){e.object.accept(this),this.write("."+e.name)},e.prototype.visitAccessKeyed=function(e){e.object.accept(this),this.write("["),e.key.accept(this),this.write("]")},e.prototype.visitCallScope=function(e){for(var t=e.ancestor;t--;)this.write("$parent.");this.write(e.name),this.writeArgs(e.args)},e.prototype.visitCallFunction=function(e){e.func.accept(this),this.writeArgs(e.args)},e.prototype.visitCallMember=function(e){e.object.accept(this),this.write("."+e.name),this.writeArgs(e.args)},e.prototype.visitPrefix=function(e){this.write("("+e.operation),e.expression.accept(this),this.write(")")},e.prototype.visitBinary=function(e){e.left.accept(this),this.write(e.operation),e.right.accept(this)},e.prototype.visitLiteralPrimitive=function(e){this.write(""+e.value)},e.prototype.visitLiteralArray=function(e){var t=e.elements;this.write("[");for(var i=0,s=t.length;i<s;++i)0!==i&&this.write(","),t[i].accept(this);this.write("]")},e.prototype.visitLiteralObject=function(e){var t=e.keys,i=e.values;this.write("{");for(var s=0,n=t.length;s<n;++s)0!==s&&this.write(","),this.write("'"+t[s]+"':"),i[s].accept(this);this.write("}")},e.prototype.visitLiteralString=function(e){var t=e.value.replace(/'/g,"'");this.write("'"+t+"'")},e}());var Rt=e.ExpressionCloner=function(){function e(){}return e.prototype.cloneExpressionArray=function(e){for(var t=[],i=e.length;i--;)t[i]=e[i].accept(this);return t},e.prototype.visitChain=function(e){return new ct(this.cloneExpressionArray(e.expressions))},e.prototype.visitBindingBehavior=function(e){return new ut(e.expression.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitValueConverter=function(e){return new pt(e.expression.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitAssign=function(e){return new mt(e.target.accept(this),e.value.accept(this))},e.prototype.visitConditional=function(e){return new gt(e.condition.accept(this),e.yes.accept(this),e.no.accept(this))},e.prototype.visitAccessThis=function(e){return new ft(e.ancestor)},e.prototype.visitAccessScope=function(e){return new _t(e.name,e.ancestor)},e.prototype.visitAccessMember=function(e){return new vt(e.object.accept(this),e.name)},e.prototype.visitAccessKeyed=function(e){return new bt(e.object.accept(this),e.key.accept(this))},e.prototype.visitCallScope=function(e){return new yt(e.name,this.cloneExpressionArray(e.args),e.ancestor)},e.prototype.visitCallFunction=function(e){return new Ct(e.func.accept(this),this.cloneExpressionArray(e.args))},e.prototype.visitCallMember=function(e){return new wt(e.object.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitPrefix=function(e){return new St(e.operation,e.expression.accept(this))},e.prototype.visitBinary=function(e){return new xt(e.operation,e.left.accept(this),e.right.accept(this))},e.prototype.visitLiteralPrimitive=function(e){return new Tt(e)},e.prototype.visitLiteralArray=function(e){return new Dt(this.cloneExpressionArray(e.elements))},e.prototype.visitLiteralObject=function(e){return new It(e.keys,this.cloneExpressionArray(e.values))},e.prototype.visitLiteralString=function(e){return new kt(e.value)},e}(),Pt=e.bindingMode={oneTime:0,oneWay:1,twoWay:2},Mt=e.Token=function(){function e(e,t){this.index=e,this.text=t}return e.prototype.withOp=function(e){return this.opKey=e,this},e.prototype.withGetterSetter=function(e){return this.key=e,this},e.prototype.withValue=function(e){return this.value=e,this},e.prototype.toString=function(){return"Token("+this.text+")"},e}(),jt=e.Lexer=function(){function e(){}return e.prototype.lex=function(e){for(var t=new Et(e),i=[],s=t.scanToken();s;)i.push(s),s=t.scanToken();return i},e}(),Et=e.Scanner=function(){function e(e){this.input=e,this.length=e.length,this.peek=0,this.index=-1,this.advance()}return e.prototype.scanToken=function(){for(;this.peek<=Bt;){if(++this.index>=this.length)return this.peek=At,null;this.peek=this.input.charCodeAt(this.index)}if(U(this.peek))return this.scanIdentifier();if(W(this.peek))return this.scanNumber(this.index);var e=this.index;switch(this.peek){case ti:return this.advance(),W(this.peek)?this.scanNumber(e):new Mt(e,".");case Yt:case Qt:case Ii:case Ri:case mi:case fi:case Zt:case si:case ni:return this.scanCharacter(e,String.fromCharCode(this.peek));case Kt:case qt:return this.scanString();case Jt:case ei:case Xt:case ii:case $t:case _i:case ai:return this.scanOperator(e,String.fromCharCode(this.peek));case ri:case li:case Ut:case oi:return this.scanComplexOperator(e,oi,String.fromCharCode(this.peek),"=");case Gt:return this.scanComplexOperator(e,Gt,"&","&");case Oi:return this.scanComplexOperator(e,Oi,"|","|");case Pi:for(;B(this.peek);)this.advance();return this.scanToken()}var t=String.fromCharCode(this.peek);return this.error("Unexpected character ["+t+"]"),null},e.prototype.scanCharacter=function(e,t){return Y(this.peek===t.charCodeAt(0)),this.advance(),new Mt(e,t)},e.prototype.scanOperator=function(e,t){return Y(this.peek===t.charCodeAt(0)),Y(Ft.indexOf(t)!==-1),this.advance(),new Mt(e,t).withOp(t)},e.prototype.scanComplexOperator=function(e,t,i,s){Y(this.peek===i.charCodeAt(0)),this.advance();var n=i;return this.peek===t&&(this.advance(),n+=s),this.peek===t&&(this.advance(),n+=s),Y(Ft.indexOf(n)!==-1),new Mt(e,n).withOp(n)},e.prototype.scanIdentifier=function(){Y(U(this.peek));var e=this.index;for(this.advance();q(this.peek);)this.advance();var t=this.input.substring(e,this.index),i=new Mt(e,t);return Ft.indexOf(t)!==-1?i.withOp(t):i.withGetterSetter(t),i},e.prototype.scanNumber=function(e){Y(W(this.peek));var t=this.index===e;for(this.advance();;){if(!W(this.peek))if(this.peek===ti)t=!1;else{if(!$(this.peek))break;this.advance(),G(this.peek)&&this.advance(),W(this.peek)||this.error("Invalid exponent",-1),t=!1}this.advance()}var i=this.input.substring(e,this.index),s=t?parseInt(i,10):parseFloat(i);return new Mt(e,i).withValue(s)},e.prototype.scanString=function(){Y(this.peek===Kt||this.peek===qt);var e=this.index,t=this.peek;this.advance();for(var i=void 0,s=this.index;this.peek!==t;)if(this.peek===gi){i||(i=[]),i.push(this.input.substring(s,this.index)),this.advance();var n=void 0;if(this.peek===Ti){var r=this.input.substring(this.index+1,this.index+5);/[A-Z0-9]{4}/.test(r)||this.error("Invalid unicode escape [\\u"+r+"]"),n=parseInt(r,16);for(var o=0;o<5;++o)this.advance()}else n=K(this.peek),this.advance();i.push(String.fromCharCode(n)),s=this.index}else this.peek===At?this.error("Unterminated quote"):this.advance();var l=this.input.substring(s,this.index);this.advance();var a=this.input.substring(e,this.index),d=l;return null!==i&&void 0!==i&&(i.push(l),d=i.join("")),new Mt(e,a).withValue(d)},e.prototype.advance=function(){++this.index>=this.length?this.peek=At:this.peek=this.input.charCodeAt(this.index)},e.prototype.error=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=this.index+t;throw new Error("Lexer Error: "+e+" at column "+i+" in expression ["+this.input+"]")},e}(),Ft=["undefined","null","true","false","+","-","*","/","%","^","=","==","===","!=","!==","<",">","<=",">=","&&","||","&","|","!","?"],At=0,Lt=9,Nt=10,Vt=11,zt=12,Ht=13,Bt=32,Ut=33,qt=34,Wt=36,$t=37,Gt=38,Kt=39,Yt=40,Qt=41,Xt=42,Jt=43,Zt=44,ei=45,ti=46,ii=47,si=58,ni=59,ri=60,oi=61,li=62,ai=63,di=48,hi=57,ci=65,ui=69,pi=90,mi=91,gi=92,fi=93,_i=94,vi=95,bi=97,yi=101,wi=102,Ci=110,xi=114,Si=116,Ti=117,ki=118,Di=122,Ii=123,Oi=124,Ri=125,Pi=160,Mi=new Mt(-1,null),ji=e.Parser=function(){function e(){this.cache={},this.lexer=new jt}return e.prototype.parse=function(e){return e=e||"",this.cache[e]||(this.cache[e]=new Ei(this.lexer,e).parseChain())},e}(),Ei=e.ParserImplementation=function(){function e(e,t){this.index=0,this.input=t,this.tokens=e.lex(t)}return e.prototype.parseChain=function(){for(var e=!1,t=[];this.optional(";");)e=!0;for(;this.index<this.tokens.length;){")"!==this.peek.text&&"}"!==this.peek.text&&"]"!==this.peek.text||this.error("Unconsumed token "+this.peek.text);var i=this.parseBindingBehavior();for(t.push(i);this.optional(";");)e=!0;e&&this.error("Multiple expressions are not allowed.")}return 1===t.length?t[0]:new ct(t)},e.prototype.parseBindingBehavior=function(){for(var e=this.parseValueConverter();this.optional("&");){var t=this.peek.text,i=[];for(this.advance();this.optional(":");)i.push(this.parseExpression());e=new ut(e,t,i)}return e},e.prototype.parseValueConverter=function(){for(var e=this.parseExpression();this.optional("|");){var t=this.peek.text,i=[];for(this.advance();this.optional(":");)i.push(this.parseExpression());e=new pt(e,t,i,[e].concat(i))}return e},e.prototype.parseExpression=function(){for(var e=this.peek.index,t=this.parseConditional();"="===this.peek.text;){if(!t.isAssignable){var i=this.index<this.tokens.length?this.peek.index:this.input.length,s=this.input.substring(e,i);this.error("Expression "+s+" is not assignable")}this.expect("="),t=new mt(t,this.parseConditional())}return t},e.prototype.parseConditional=function(){var e=this.peek.index,t=this.parseLogicalOr();if(this.optional("?")){var i=this.parseExpression();if(!this.optional(":")){var s=this.index<this.tokens.length?this.peek.index:this.input.length,n=this.input.substring(e,s);this.error("Conditional expression "+n+" requires all 3 expressions")}var r=this.parseExpression();t=new gt(t,i,r)}return t},e.prototype.parseLogicalOr=function(){for(var e=this.parseLogicalAnd();this.optional("||");)e=new xt("||",e,this.parseLogicalAnd());return e},e.prototype.parseLogicalAnd=function(){for(var e=this.parseEquality();this.optional("&&");)e=new xt("&&",e,this.parseEquality());return e},e.prototype.parseEquality=function(){for(var e=this.parseRelational();;)if(this.optional("=="))e=new xt("==",e,this.parseRelational());else if(this.optional("!="))e=new xt("!=",e,this.parseRelational());else if(this.optional("==="))e=new xt("===",e,this.parseRelational());else{if(!this.optional("!=="))return e;e=new xt("!==",e,this.parseRelational())}},e.prototype.parseRelational=function(){for(var e=this.parseAdditive();;)if(this.optional("<"))e=new xt("<",e,this.parseAdditive());else if(this.optional(">"))e=new xt(">",e,this.parseAdditive());else if(this.optional("<="))e=new xt("<=",e,this.parseAdditive());else{if(!this.optional(">="))return e;e=new xt(">=",e,this.parseAdditive())}},e.prototype.parseAdditive=function(){for(var e=this.parseMultiplicative();;)if(this.optional("+"))e=new xt("+",e,this.parseMultiplicative());else{if(!this.optional("-"))return e;e=new xt("-",e,this.parseMultiplicative())}},e.prototype.parseMultiplicative=function(){for(var e=this.parsePrefix();;)if(this.optional("*"))e=new xt("*",e,this.parsePrefix());else if(this.optional("%"))e=new xt("%",e,this.parsePrefix());else{if(!this.optional("/"))return e;e=new xt("/",e,this.parsePrefix())}},e.prototype.parsePrefix=function(){return this.optional("+")?this.parsePrefix():this.optional("-")?new xt("-",new Tt(0),this.parsePrefix()):this.optional("!")?new St("!",this.parsePrefix()):this.parseAccessOrCallMember()},e.prototype.parseAccessOrCallMember=function(){for(var e=this.parsePrimary();;)if(this.optional(".")){var t=this.peek.text;if(this.advance(),this.optional("(")){var i=this.parseExpressionList(")");this.expect(")"),e=e instanceof ft?new yt(t,i,e.ancestor):new wt(e,t,i)}else e=e instanceof ft?new _t(t,e.ancestor):new vt(e,t)}else if(this.optional("[")){var s=this.parseExpression();this.expect("]"),e=new bt(e,s)}else{if(!this.optional("("))return e;var n=this.parseExpressionList(")");this.expect(")"),e=new Ct(e,n)}},e.prototype.parsePrimary=function(){if(this.optional("(")){var e=this.parseExpression();return this.expect(")"),e}if(this.optional("null"))return new Tt(null);if(this.optional("undefined"))return new Tt(void 0);if(this.optional("true"))return new Tt(!0);if(this.optional("false"))return new Tt(!1);if(this.optional("[")){var t=this.parseExpressionList("]");return this.expect("]"),new Dt(t)}if("{"===this.peek.text)return this.parseObject();if(null!==this.peek.key&&void 0!==this.peek.key)return this.parseAccessOrCallScope();if(null!==this.peek.value&&void 0!==this.peek.value){var i=this.peek.value;return this.advance(),i instanceof String||"string"==typeof i?new kt(i):new Tt(i)}if(this.index>=this.tokens.length)throw new Error("Unexpected end of expression: "+this.input);this.error("Unexpected token "+this.peek.text)},e.prototype.parseAccessOrCallScope=function(){var e=this.peek.key;if(this.advance(),"$this"===e)return new ft(0);for(var t=0;"$parent"===e;)if(t++,this.optional("."))e=this.peek.key,this.advance();else{if(this.peek===Mi||"("===this.peek.text||")"===this.peek.text||"["===this.peek.text||"}"===this.peek.text||","===this.peek.text)return new ft(t);this.error("Unexpected token "+this.peek.text)}if(this.optional("(")){var i=this.parseExpressionList(")");return this.expect(")"),new yt(e,i,t)}return new _t(e,t)},e.prototype.parseObject=function(){var e=[],t=[];if(this.expect("{"),"}"!==this.peek.text)do{var i=this.peek,s=i.value;e.push("string"==typeof s?s:i.text),this.advance(),!i.key||","!==this.peek.text&&"}"!==this.peek.text?(this.expect(":"),t.push(this.parseExpression())):(--this.index,t.push(this.parseAccessOrCallScope()))}while(this.optional(","));return this.expect("}"),new It(e,t)},e.prototype.parseExpressionList=function(e){var t=[];if(this.peek.text!==e)do{t.push(this.parseExpression())}while(this.optional(","));return t},e.prototype.optional=function(e){return this.peek.text===e&&(this.advance(),!0)},e.prototype.expect=function(e){this.peek.text===e?this.advance():this.error("Missing expected "+e)},e.prototype.advance=function(){this.index++},e.prototype.error=function(e){var t=this.index<this.tokens.length?"at column "+(this.tokens[this.index].index+1)+" in":"at the end of the expression";throw new Error("Parser Error: "+e+" "+t+" ["+this.input+"]")},Ae(e,[{key:"peek",get:function(){return this.index<this.tokens.length?this.tokens[this.index]:Mi}}]),e}(),Fi=Map.prototype;e.getMapObserver=Q;var Ai=function(e){function t(t,i){return r(this,e.call(this,t,i))}return o(t,e),t.for=function(e,i){return"__map_observer__"in i||Reflect.defineProperty(i,"__map_observer__",{value:t.create(e,i),enumerable:!1,configurable:!1}),i.__map_observer__},t.create=function(e,i){var s=new t(e,i),n=Fi;return n.set===i.set&&n.delete===i.delete&&n.clear===i.clear||(n={set:i.set,delete:i.delete,clear:i.clear}),i.set=function(){var e=i.has(arguments[0]),t=e?"update":"add",r=i.get(arguments[0]),o=n.set.apply(i,arguments);return e&&r===i.get(arguments[0])||s.addChangeRecord({type:t,object:i,key:arguments[0],oldValue:r}),o},i.delete=function(){var e=i.has(arguments[0]),t=i.get(arguments[0]),r=n.delete.apply(i,arguments);return e&&s.addChangeRecord({type:"delete",object:i,key:arguments[0],oldValue:t}),r},i.clear=function(){var e=n.clear.apply(i,arguments);return s.addChangeRecord({type:"clear",object:i}),e},s},t}(et),Li=function(){function e(e){this.eventName=e,this.count=0}return e.prototype.increment=function(){1===++this.count&&i.DOM.addEventListener(this.eventName,ee,!0)},e.prototype.decrement=function(){0===--this.count&&i.DOM.removeEventListener(this.eventName,ee,!0)},e}(),Ni=function(){function e(e){this.eventName=e,this.count=0}return e.prototype.increment=function(){1===++this.count&&i.DOM.addEventListener(this.eventName,te,!1)},e.prototype.decrement=function(){0===--this.count&&i.DOM.removeEventListener(this.eventName,te)},e}(),Vi=function(){function e(){this.delegatedHandlers={},this.capturedHandlers={}}return e.prototype.subscribe=function(e,t,i,s){var n=this,r=void 0,o=void 0,l=void 0;if(s===zi.bubbling){var a=function(){r=n.delegatedHandlers,l=r[t]||(r[t]=new Ni(t));var s=e.delegatedCallbacks||(e.delegatedCallbacks={});return l.increment(),s[t]=i,{v:function(){l.decrement(),s[t]=null}}}();if("object"===(void 0===a?"undefined":Fe(a)))return a.v}if(s===zi.capturing){var d=function(){o=n.capturedHandlers,l=o[t]||(o[t]=new Li(t));var s=e.capturedCallbacks||(e.capturedCallbacks={});return l.increment(),s[t]=i,{v:function(){l.decrement(),s[t]=null}}}();if("object"===(void 0===d?"undefined":Fe(d)))return d.v}return e.addEventListener(t,i,!1),function(){e.removeEventListener(t,i)}},e}(),zi=e.delegationStrategy={none:0,capturing:1,bubbling:2},Hi=e.EventManager=function(){function e(){this.elementHandlerLookup={},this.eventStrategyLookup={},this.registerElementConfig({tagName:"input",properties:{value:["change","input"],checked:["change","input"],files:["change","input"]}}),this.registerElementConfig({tagName:"textarea",properties:{value:["change","input"]}}),this.registerElementConfig({tagName:"select",properties:{value:["change"]}}),this.registerElementConfig({tagName:"content editable",properties:{value:["change","input","blur","keyup","paste"]}}),this.registerElementConfig({tagName:"scrollable element",properties:{scrollTop:["scroll"],scrollLeft:["scroll"]}}),this.defaultEventStrategy=new Vi}return e.prototype.registerElementConfig=function(e){var t=e.tagName.toLowerCase(),i=e.properties,s=void 0;this.elementHandlerLookup[t]={};for(s in i)i.hasOwnProperty(s)&&this.registerElementPropertyConfig(t,s,i[s])},e.prototype.registerElementPropertyConfig=function(e,t,i){this.elementHandlerLookup[e][t]=this.createElementHandler(i)},e.prototype.createElementHandler=function(e){return{subscribe:function(t,i){return e.forEach(function(e){t.addEventListener(e,i,!1)}),function(){e.forEach(function(e){t.removeEventListener(e,i)})}}}},e.prototype.registerElementHandler=function(e,t){this.elementHandlerLookup[e.toLowerCase()]=t},e.prototype.registerEventStrategy=function(e,t){this.eventStrategyLookup[e]=t},e.prototype.getElementHandler=function(e,t){var i=void 0,s=this.elementHandlerLookup;if(e.tagName){if(i=e.tagName.toLowerCase(),s[i]&&s[i][t])return s[i][t];if("textContent"===t||"innerHTML"===t)return s["content editable"].value;if("scrollTop"===t||"scrollLeft"===t)return s["scrollable element"][t]}return null},e.prototype.addEventListener=function(e,t,i,s){return(this.eventStrategyLookup[t]||this.defaultEventStrategy).subscribe(e,t,i,s)},e}(),Bi=e.DirtyChecker=function(){function e(){this.tracked=[],this.checkDelay=120}return e.prototype.addProperty=function(e){var t=this.tracked;t.push(e),1===t.length&&this.scheduleDirtyCheck()},e.prototype.removeProperty=function(e){var t=this.tracked;t.splice(t.indexOf(e),1)},e.prototype.scheduleDirtyCheck=function(){var e=this;setTimeout(function(){return e.check()},this.checkDelay)},e.prototype.check=function(){for(var e=this.tracked,t=e.length;t--;){var i=e[t];i.isDirty()&&i.call()}e.length&&this.scheduleDirtyCheck()},e}(),Ui=e.DirtyCheckProperty=(ve=x())(be=function(){function e(e,t,i){this.dirtyChecker=e,this.obj=t,this.propertyName=i}return e.prototype.getValue=function(){return this.obj[this.propertyName]},e.prototype.setValue=function(e){this.obj[this.propertyName]=e},e.prototype.call=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},e.prototype.isDirty=function(){return this.oldValue!==this.obj[this.propertyName]},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.dirtyChecker.addProperty(this)),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)},e}())||be,qi=Ee.getLogger("property-observation"),Wi=e.propertyAccessor={getValue:function(e,t){return e[t]},setValue:function(e,t,i){t[i]=e}},$i=e.PrimitiveObserver=function(){function e(e,t){this.doNotCache=!0,this.primitive=e,this.propertyName=t}return e.prototype.getValue=function(){return this.primitive[this.propertyName]},e.prototype.setValue=function(){var e=Fe(this.primitive);throw new Error("The "+this.propertyName+" property of a "+e+" ("+this.primitive+") cannot be assigned.")},e.prototype.subscribe=function(){},e.prototype.unsubscribe=function(){},e}(),Gi=e.SetterObserver=(ye=x())(we=function(){function e(e,t,i){this.taskQueue=e,this.obj=t,this.propertyName=i,this.queued=!1,this.observing=!1}return e.prototype.getValue=function(){return this.obj[this.propertyName]},e.prototype.setValue=function(e){this.obj[this.propertyName]=e},e.prototype.getterValue=function(){return this.currentValue},e.prototype.setterValue=function(e){var t=this.currentValue;t!==e&&(this.queued||(this.oldValue=t,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=e)},e.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.queued=!1,this.callSubscribers(t,e)},e.prototype.subscribe=function(e,t){this.observing||this.convertProperty(),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.convertProperty=function(){this.observing=!0,this.currentValue=this.obj[this.propertyName],this.setValue=this.setterValue,this.getValue=this.getterValue,Reflect.defineProperty(this.obj,this.propertyName,{configurable:!0,enumerable:!(this.propertyName in this.obj)||this.obj.propertyIsEnumerable(this.propertyName),get:this.getValue.bind(this),set:this.setValue.bind(this)})||qi.warn("Cannot observe property '"+this.propertyName+"' of object",this.obj)},e}())||we,Ki=e.XLinkAttributeObserver=function(){function e(e,t,i){this.element=e,this.propertyName=t,this.attributeName=i}return e.prototype.getValue=function(){return this.element.getAttributeNS("http://www.w3.org/1999/xlink",this.attributeName)},e.prototype.setValue=function(e){return this.element.setAttributeNS("http://www.w3.org/1999/xlink",this.attributeName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),Yi=e.dataAttributeAccessor={getValue:function(e,t){return e.getAttribute(t)},setValue:function(e,t,i){return t.setAttribute(i,e)}},Qi=e.DataAttributeObserver=function(){function e(e,t){this.element=e,this.propertyName=t}return e.prototype.getValue=function(){return this.element.getAttribute(this.propertyName)},e.prototype.setValue=function(e){return this.element.setAttribute(this.propertyName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),Xi=e.StyleObserver=function(){function e(e,t){this.element=e,this.propertyName=t,this.styles=null,this.version=0}return e.prototype.getValue=function(){return this.element.style.cssText},e.prototype._setProperty=function(e,t){var i="";null!==t&&void 0!==t&&"function"==typeof t.indexOf&&t.indexOf("!important")!==-1&&(i="important",t=t.replace("!important","")),this.element.style.setProperty(e,t,i)},e.prototype.setValue=function(e){var t=this.styles||{},i=void 0,s=this.version;if(null!==e&&void 0!==e)if(e instanceof Object){var n=void 0;for(i in e)e.hasOwnProperty(i)&&(n=e[i],i=i.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),t[i]=s,this._setProperty(i,n))
}else if(e.length)for(var r=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:^"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g,o=void 0;null!==(o=r.exec(e));)(i=o[1])&&(t[i]=s,this._setProperty(i,o[2]));if(this.styles=t,this.version+=1,0!==s){s-=1;for(i in t)t.hasOwnProperty(i)&&t[i]===s&&this.element.style.removeProperty(i)}},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),Ji=e.ValueAttributeObserver=(Ce=x())(xe=function(){function e(e,t,i){this.element=e,this.propertyName=t,this.handler=i,"files"===t&&(this.setValue=function(){})}return e.prototype.getValue=function(){return this.element[this.propertyName]},e.prototype.setValue=function(e){e=void 0===e||null===e?"":e,this.element[this.propertyName]!==e&&(this.element[this.propertyName]=e,this.notify())},e.prototype.notify=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.disposeHandler=this.handler.subscribe(this.element,this.notify.bind(this))),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},e}())||xe,Zi=e.CheckedObserver=(Se=x())(Te=function(){function e(e,t,i){this.element=e,this.handler=t,this.observerLocator=i}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){this.initialSync&&this.value===e||(this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),"checkbox"===this.element.type&&Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe("CheckedObserver:array",this)),this.oldValue=this.value,this.value=e,this.synchronizeElement(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},e.prototype.call=function(e,t){this.synchronizeElement(),this.valueObserver||(this.valueObserver=this.element.__observers__.model||this.element.__observers__.value,this.valueObserver&&this.valueObserver.subscribe("CheckedObserver:value",this))},e.prototype.synchronizeElement=function(){var e=this.value,t=this.element,i=t.hasOwnProperty("model")?t.model:t.value,s="radio"===t.type,n=t.matcher||function(e,t){return e===t};t.checked=s&&!!n(e,i)||!s&&e===!0||!s&&Array.isArray(e)&&e.findIndex(function(e){return!!n(e,i)})!==-1},e.prototype.synchronizeValue=function(){var e=this.value,t=this.element,i=t.hasOwnProperty("model")?t.model:t.value,s=void 0,n=t.matcher||function(e,t){return e===t};if("checkbox"===t.type){if(Array.isArray(e))return s=e.findIndex(function(e){return!!n(e,i)}),void(t.checked&&s===-1?e.push(i):t.checked||s===-1||e.splice(s,1));e=t.checked}else{if(!t.checked)return;e=i}this.oldValue=this.value,this.value=e,this.notify()},e.prototype.notify=function(){var e=this.oldValue,t=this.value;t!==e&&this.callSubscribers(t,e)},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this.synchronizeValue.bind(this,!1))),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},e.prototype.unbind=function(){this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),this.valueObserver&&this.valueObserver.unsubscribe("CheckedObserver:value",this)},e}())||Te,es=e.SelectValueObserver=(ke=x())(De=function(){function e(e,t,i){this.element=e,this.handler=t,this.observerLocator=i}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){if(null!==e&&void 0!==e&&this.element.multiple&&!Array.isArray(e))throw new Error("Only null or Array instances can be bound to a multi-select.");this.value!==e&&(this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null),Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe("SelectValueObserver:array",this)),this.oldValue=this.value,this.value=e,this.synchronizeOptions(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},e.prototype.call=function(e,t){this.synchronizeOptions()},e.prototype.synchronizeOptions=function(){var e=this.value,t=void 0;Array.isArray(e)&&(t=!0);for(var i=this.element.options,s=i.length,n=this.element.matcher||function(e,t){return e===t};s--;){(function(){var r=i.item(s),o=r.hasOwnProperty("model")?r.model:r.value;if(t)return r.selected=e.findIndex(function(e){return!!n(o,e)})!==-1,"continue";r.selected=!!n(o,e)})()}},e.prototype.synchronizeValue=function(){for(var e=this,t=this.element.options,i=0,s=[],n=0,r=t.length;n<r;n++){var o=t.item(n);o.selected&&(s.push(o.hasOwnProperty("model")?o.model:o.value),i++)}if(this.element.multiple){if(Array.isArray(this.value)){var l=function(){for(var t=e.element.matcher||function(e,t){return e===t},i=0;i<e.value.length;)!function(){var n=e.value[i];s.findIndex(function(e){return t(n,e)})===-1?e.value.splice(i,1):i++}();i=0;for(;i<s.length;)!function(){var n=s[i];e.value.findIndex(function(e){return t(n,e)})===-1&&e.value.push(n),i++}();return{v:void 0}}();if("object"===(void 0===l?"undefined":Fe(l)))return l.v}}else s=0===i?null:s[0];s!==this.value&&(this.oldValue=this.value,this.value=s,this.notify())},e.prototype.notify=function(){var e=this.oldValue,t=this.value;this.callSubscribers(t,e)},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this.synchronizeValue.bind(this,!1))),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},e.prototype.bind=function(){var e=this;this.domObserver=i.DOM.createMutationObserver(function(){e.synchronizeOptions(),e.synchronizeValue()}),this.domObserver.observe(this.element,{childList:!0,subtree:!0})},e.prototype.unbind=function(){this.domObserver.disconnect(),this.domObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null)},e}())||De,ts=e.ClassObserver=function(){function e(e){this.element=e,this.doNotCache=!0,this.value="",this.version=0}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){var t=this.nameIndex||{},i=this.version,s=void 0,n=void 0;if(null!==e&&void 0!==e&&e.length){s=e.split(/\s+/);for(var r=0,o=s.length;r<o;r++)""!==(n=s[r])&&(t[n]=i,this.element.classList.add(n))}if(this.value=e,this.nameIndex=t,this.version+=1,0!==i){i-=1;for(n in t)t.hasOwnProperty(n)&&t[n]===i&&this.element.classList.remove(n)}},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "class" property is not supported.')},e}(),is=e.ComputedExpression=function(e){function t(t,i){var s=r(this,e.call(this));return s.name=t,s.dependencies=i,s.isAssignable=!0,s}return o(t,e),t.prototype.evaluate=function(e,t){return e.bindingContext[this.name]},t.prototype.assign=function(e,t){e.bindingContext[this.name]=t},t.prototype.accept=function(e){throw new Error("not implemented")},t.prototype.connect=function(e,t){for(var i=this.dependencies,s=i.length;s--;)i[s].connect(e,t)},t}(ht),ss=void 0,ns=void 0,rs=void 0,os=void 0;"undefined"==typeof FEATURE_NO_SVG&&function(){ss={a:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],altGlyph:["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],altGlyphDef:["id","xml:base","xml:lang","xml:space"],altGlyphItem:["id","xml:base","xml:lang","xml:space"],animate:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateColor:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateMotion:["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateTransform:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],circle:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],clipPath:["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],"color-profile":["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],cursor:["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],defs:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],desc:["class","id","style","xml:base","xml:lang","xml:space"],ellipse:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],feBlend:["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"],feColorMatrix:["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"],feComponentTransfer:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feComposite:["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"],feConvolveMatrix:["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"],feDiffuseLighting:["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feDisplacementMap:["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"],feDistantLight:["azimuth","elevation","id","xml:base","xml:lang","xml:space"],feFlood:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feFuncA:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncB:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncG:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncR:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feGaussianBlur:["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"],feImage:["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],feMerge:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feMergeNode:["id","xml:base","xml:lang","xml:space"],feMorphology:["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"],feOffset:["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],fePointLight:["id","x","xml:base","xml:lang","xml:space","y","z"],feSpecularLighting:["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feSpotLight:["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"],feTile:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feTurbulence:["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"],filter:["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],font:["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],"font-face":["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"],"font-face-format":["id","string","xml:base","xml:lang","xml:space"],"font-face-name":["id","name","xml:base","xml:lang","xml:space"],"font-face-src":["id","xml:base","xml:lang","xml:space"],"font-face-uri":["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],foreignObject:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],g:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],glyph:["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],glyphRef:["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],hkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"],image:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],line:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"],linearGradient:["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"],marker:["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"],mask:["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"],metadata:["id","xml:base","xml:lang","xml:space"],"missing-glyph":["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],mpath:["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],path:["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],pattern:["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],polygon:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],polyline:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],radialGradient:["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],rect:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],script:["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],set:["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],stop:["class","id","offset","style","xml:base","xml:lang","xml:space"],style:["id","media","title","type","xml:base","xml:lang","xml:space"],svg:["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"],switch:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],symbol:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"],text:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"],textPath:["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],title:["class","id","style","xml:base","xml:lang","xml:space"],tref:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],tspan:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"],use:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],view:["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"],vkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]},ns={a:!0,altGlyph:!0,animate:!0,animateColor:!0,circle:!0,clipPath:!0,defs:!0,ellipse:!0,feBlend:!0,feColorMatrix:!0,feComponentTransfer:!0,feComposite:!0,feConvolveMatrix:!0,feDiffuseLighting:!0,feDisplacementMap:!0,feFlood:!0,feGaussianBlur:!0,feImage:!0,feMerge:!0,feMorphology:!0,feOffset:!0,feSpecularLighting:!0,feTile:!0,feTurbulence:!0,filter:!0,font:!0,foreignObject:!0,g:!0,glyph:!0,glyphRef:!0,image:!0,line:!0,linearGradient:!0,marker:!0,mask:!0,"missing-glyph":!0,path:!0,pattern:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tref:!0,tspan:!0,use:!0},rs={"alignment-baseline":!0,"baseline-shift":!0,"clip-path":!0,"clip-rule":!0,clip:!0,"color-interpolation-filters":!0,"color-interpolation":!0,"color-profile":!0,"color-rendering":!0,color:!0,cursor:!0,direction:!0,display:!0,"dominant-baseline":!0,"enable-background":!0,"fill-opacity":!0,"fill-rule":!0,fill:!0,filter:!0,"flood-color":!0,"flood-opacity":!0,"font-family":!0,"font-size-adjust":!0,"font-size":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-horizontal":!0,"glyph-orientation-vertical":!0,"image-rendering":!0,kerning:!0,"letter-spacing":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,mask:!0,opacity:!0,overflow:!0,"pointer-events":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,stroke:!0,"text-anchor":!0,"text-decoration":!0,"text-rendering":!0,"unicode-bidi":!0,visibility:!0,"word-spacing":!0,"writing-mode":!0};var e=function(e){var t=i.DOM.createElement("div");return t.innerHTML=e,t.firstChild};os=function(){function t(){"altglyph"===e("<svg><altGlyph /></svg>").firstElementChild.nodeName&&ls.altGlyph&&(ls.altglyph=ls.altGlyph,delete ls.altGlyph,ls.altglyphdef=ls.altGlyphDef,delete ls.altGlyphDef,ls.altglyphitem=ls.altGlyphItem,delete ls.altGlyphItem,ls.glyphref=ls.glyphRef,delete ls.glyphRef)}return t.prototype.isStandardSvgAttribute=function(e,t){return as[e]&&ds[t]||ls[e]&&ls[e].indexOf(t)!==-1},t}()}();var ls=e.elements=ss,as=e.presentationElements=ns,ds=e.presentationAttributes=rs,hs=e.SVGAnalyzer=os||function(){function e(){}return e.prototype.isStandardSvgAttribute=function(){return!1},e}(),cs=e.ObserverLocator=(Oe=Ie=function(){function e(e,t,i,s,n){this.taskQueue=e,this.eventManager=t,this.dirtyChecker=i,this.svgAnalyzer=s,this.parser=n,this.adapters=[],this.logger=Ee.getLogger("observer-locator")}return e.prototype.getObserver=function(e,t){var i=e.__observers__,s=void 0;return i&&t in i?i[t]:(s=this.createPropertyObserver(e,t),s.doNotCache||(void 0===i&&(i=this.getOrCreateObserversLookup(e)),i[t]=s),s)},e.prototype.getOrCreateObserversLookup=function(e){return e.__observers__||this.createObserversLookup(e)},e.prototype.createObserversLookup=function(e){var t={};return Reflect.defineProperty(e,"__observers__",{enumerable:!1,configurable:!1,writable:!1,value:t})||this.logger.warn("Cannot add observers to object",e),t},e.prototype.addAdapter=function(e){this.adapters.push(e)},e.prototype.getAdapterObserver=function(e,t,i){for(var s=0,n=this.adapters.length;s<n;s++){var r=this.adapters[s],o=r.getObserver(e,t,i);if(o)return o}return null},e.prototype.createPropertyObserver=function(e,t){var s=void 0,n=void 0,r=void 0;if(!(e instanceof Object))return new $i(e,t);if(e instanceof i.DOM.Element){if("class"===t)return new ts(e);if("style"===t||"css"===t)return new Xi(e,t);if(n=this.eventManager.getElementHandler(e,t),"value"===t&&"select"===e.tagName.toLowerCase())return new es(e,n,this);if("checked"===t&&"input"===e.tagName.toLowerCase())return new Zi(e,n,this);if(n)return new Ji(e,t,n);if(r=/^xlink:(.+)$/.exec(t))return new Ki(e,t,r[1]);if("role"===t&&(e instanceof i.DOM.Element||e instanceof i.DOM.SVGElement)||/^\w+:|^data-|^aria-/.test(t)||e instanceof i.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(e.nodeName,t))return new Qi(e,t)}if(s=Object.getPropertyDescriptor(e,t),ie(s))return re(e,t,s,this);if(s){var o=s.get||s.set;if(o){if(o.getObserver)return o.getObserver(e);var l=this.getAdapterObserver(e,t,s);return l||new Ui(this.dirtyChecker,e,t)}}return e instanceof Array?"length"===t?this.getArrayObserver(e).getLengthObserver():new Ui(this.dirtyChecker,e,t):e instanceof Map?"size"===t?this.getMapObserver(e).getLengthObserver():new Ui(this.dirtyChecker,e,t):e instanceof Set?"size"===t?this.getSetObserver(e).getLengthObserver():new Ui(this.dirtyChecker,e,t):new Gi(this.taskQueue,e,t)},e.prototype.getAccessor=function(e,t){if(e instanceof i.DOM.Element){if("class"===t||"style"===t||"css"===t||"value"===t&&("input"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase())||"checked"===t&&"input"===e.tagName.toLowerCase()||"model"===t&&"input"===e.tagName.toLowerCase()||/^xlink:.+$/.exec(t))return this.getObserver(e,t);if(/^\w+:|^data-|^aria-/.test(t)||e instanceof i.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(e.nodeName,t))return Yi}return Wi},e.prototype.getArrayObserver=function(e){return F(this.taskQueue,e)},e.prototype.getMapObserver=function(e){return Q(this.taskQueue,e)},e.prototype.getSetObserver=function(e){return de(this.taskQueue,e)},e}(),Ie.inject=[s.TaskQueue,Hi,Bi,hs,ji],Oe),us=(e.ObjectObservationAdapter=function(){function e(){}return e.prototype.getObserver=function(e,t,i){throw new Error("BindingAdapters must implement getObserver(object, propertyName).")},e}(),e.BindingExpression=function(){function e(e,t,i,s,n,r){this.observerLocator=e,this.targetProperty=t,this.sourceExpression=i,this.mode=s,this.lookupFunctions=n,this.attribute=r,this.discrete=!1}return e.prototype.createBinding=function(e){return new ps(this.observerLocator,this.sourceExpression,e,this.targetProperty,this.mode,this.lookupFunctions)},e}()),ps=e.Binding=(Re=g())(Pe=function(){function e(e,t,i,s,n,r){this.observerLocator=e,this.sourceExpression=t,this.target=i,this.targetProperty=s,this.mode=n,this.lookupFunctions=r}return e.prototype.updateTarget=function(e){this.targetObserver.setValue(e,this.target,this.targetProperty)},e.prototype.updateSource=function(e){this.sourceExpression.assign(this.source,e,this.lookupFunctions)},e.prototype.call=function(e,t,i){if(this.isBound){if(e===Ne)return i=this.targetObserver.getValue(this.target,this.targetProperty),t=this.sourceExpression.evaluate(this.source,this.lookupFunctions),t!==i&&this.updateTarget(t),void(this.mode!==Pt.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.unobserve(!1)));if("Binding:target"===e)return void(t!==this.sourceExpression.evaluate(this.source,this.lookupFunctions)&&this.updateSource(t));throw new Error("Unexpected call context "+e)}},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions)
;var t=this.mode;if(!this.targetObserver){var i=t===Pt.twoWay?"getObserver":"getAccessor";this.targetObserver=this.observerLocator[i](this.target,this.targetProperty)}"bind"in this.targetObserver&&this.targetObserver.bind();var s=this.sourceExpression.evaluate(e,this.lookupFunctions);this.updateTarget(s),t===Pt.oneWay?_(this):t===Pt.twoWay&&(this.sourceExpression.connect(this,e),this.targetObserver.subscribe("Binding:target",this))},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,"unbind"in this.targetObserver&&this.targetObserver.unbind(),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe("Binding:target",this),this.unobserve(!0))},e.prototype.connect=function(e){if(this.isBound){if(e){var t=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.updateTarget(t)}this.sourceExpression.connect(this,this.source)}},e}())||Pe,ms=(e.CallExpression=function(){function e(e,t,i,s){this.observerLocator=e,this.targetProperty=t,this.sourceExpression=i,this.lookupFunctions=s}return e.prototype.createBinding=function(e){return new ms(this.observerLocator,this.sourceExpression,e,this.targetProperty,this.lookupFunctions)},e}(),e.Call=function(){function e(e,t,i,s,n){this.sourceExpression=t,this.target=i,this.targetProperty=e.getObserver(i,s),this.lookupFunctions=n}return e.prototype.callSource=function(e){var t=this.source.overrideContext;Object.assign(t,e),t.$event=e;var i=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);delete t.$event;for(var s in e)delete t[s];return i},e.prototype.bind=function(e){var t=this;if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this.targetProperty.setValue(function(e){return t.callSource(e)})},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.targetProperty.setValue(null))},e}()),gs=e.ValueConverterResource=function(){function e(e){this.name=e}return e.convention=function(t){if(t.endsWith("ValueConverter"))return new e(l(t.substring(0,t.length-14)))},e.prototype.initialize=function(e,t){this.instance=e.get(t)},e.prototype.register=function(e,t){e.registerValueConverter(t||this.name,this.instance)},e.prototype.load=function(e,t){},e}(),fs=e.BindingBehaviorResource=function(){function e(e){this.name=e}return e.convention=function(t){if(t.endsWith("BindingBehavior"))return new e(l(t.substring(0,t.length-15)))},e.prototype.initialize=function(e,t){this.instance=e.get(t)},e.prototype.register=function(e,t){e.registerBindingBehavior(t||this.name,this.instance)},e.prototype.load=function(e,t){},e}(),_s=(e.ListenerExpression=function(){function e(e,t,i,s,n,r){this.eventManager=e,this.targetEvent=t,this.sourceExpression=i,this.delegationStrategy=s,this.discrete=!0,this.preventDefault=n,this.lookupFunctions=r}return e.prototype.createBinding=function(e){return new _s(this.eventManager,this.targetEvent,this.delegationStrategy,this.sourceExpression,e,this.preventDefault,this.lookupFunctions)},e}(),e.Listener=function(){function e(e,t,i,s,n,r,o){this.eventManager=e,this.targetEvent=t,this.delegationStrategy=i,this.sourceExpression=s,this.target=n,this.preventDefault=r,this.lookupFunctions=o}return e.prototype.callSource=function(e){var t=this.source.overrideContext;t.$event=e;var i=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);return delete t.$event,i!==!0&&this.preventDefault&&e.preventDefault(),i},e.prototype.bind=function(e){var t=this;if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this._disposeListener=this.eventManager.addEventListener(this.target,this.targetEvent,function(e){return t.callSource(e)},this.delegationStrategy)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this._disposeListener(),this._disposeListener=null)},e}()),vs=(e.NameExpression=function(){function e(e,t,i){this.sourceExpression=e,this.apiName=t,this.lookupFunctions=i,this.discrete=!0}return e.prototype.createBinding=function(t){return new vs(this.sourceExpression,e.locateAPI(t,this.apiName),this.lookupFunctions)},e.locateAPI=function(e,t){switch(t){case"element":return e;case"controller":return ae(e).controller;case"view-model":return ae(e).controller.viewModel;case"view":return ae(e).controller.view;default:var i=ae(e)[t];if(void 0===i)throw new Error('Attempted to reference "'+t+"\", but it was not found amongst the target's API.");return i.viewModel}},e}(),function(){function e(e,t,i){this.sourceExpression=e,this.target=t,this.lookupFunctions=i}return e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this.sourceExpression.assign(this.source,this.target,this.lookupFunctions)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.evaluate(this.source,this.lookupFunctions)===this.target&&this.sourceExpression.assign(this.source,null,this.lookupFunctions),this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null)},e}()),bs={bindingBehaviors:function(e){return null},valueConverters:function(e){return null}},ys=(e.BindingEngine=(je=Me=function(){function e(e,t){this.observerLocator=e,this.parser=t}return e.prototype.createBindingExpression=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?Pt.oneWay:arguments[2],s=arguments.length<=3||void 0===arguments[3]?bs:arguments[3];return new us(this.observerLocator,e,this.parser.parse(t),i,s)},e.prototype.propertyObserver=function(e,t){var i=this;return{subscribe:function(s){var n=i.observerLocator.getObserver(e,t);return n.subscribe(s),{dispose:function(){return n.unsubscribe(s)}}}}},e.prototype.collectionObserver=function(e){var t=this;return{subscribe:function(i){var s=void 0;if(e instanceof Array)s=t.observerLocator.getArrayObserver(e);else if(e instanceof Map)s=t.observerLocator.getMapObserver(e);else{if(!(e instanceof Set))throw new Error("collection must be an instance of Array, Map or Set.");s=t.observerLocator.getSetObserver(e)}return s.subscribe(i),{dispose:function(){return s.unsubscribe(i)}}}}},e.prototype.expressionObserver=function(e,t){var i={bindingContext:e,overrideContext:a(e)};return new Je(i,this.parser.parse(t),this.observerLocator,bs)},e.prototype.parseExpression=function(e){return this.parser.parse(e)},e.prototype.registerAdapter=function(e){this.observerLocator.addAdapter(e)},e}(),Me.inject=[cs,ji],je),Set.prototype);e.getSetObserver=de;var ws=function(e){function t(t,i){return r(this,e.call(this,t,i))}return o(t,e),t.for=function(e,i){return"__set_observer__"in i||Reflect.defineProperty(i,"__set_observer__",{value:t.create(e,i),enumerable:!1,configurable:!1}),i.__set_observer__},t.create=function(e,i){var s=new t(e,i),n=ys;return n.add===i.add&&n.delete===i.delete&&n.clear===i.clear||(n={add:i.add,delete:i.delete,clear:i.clear}),i.add=function(){var e=i.size,t=n.add.apply(i,arguments);return i.size===e||s.addChangeRecord({type:"add",object:i,value:Array.from(i).pop()}),t},i.delete=function(){var e=i.has(arguments[0]),t=n.delete.apply(i,arguments);return e&&s.addChangeRecord({type:"delete",object:i,value:arguments[0]}),t},i.clear=function(){var e=n.clear.apply(i,arguments);return s.addChangeRecord({type:"clear",object:i}),e},s},t}(et)}),define("aurelia-bootstrapper",["module","exports","aurelia-pal","aurelia-polyfills"],function(e,t,i){"use strict";function s(){return u.document&&"complete"!==u.document.readyState?new Promise(function(e){function t(){u.document.removeEventListener("DOMContentLoaded",t),u.removeEventListener("load",t),e()}u.document.addEventListener("DOMContentLoaded",t),u.addEventListener("load",t)}):Promise.resolve()}function n(){if(i.PLATFORM.Loader)return Promise.resolve(new i.PLATFORM.Loader);if("undefined"==typeof AURELIA_WEBPACK_2_0){if("undefined"!=typeof __webpack_require__){var t=__webpack_require__(require.resolve("aurelia-loader-webpack"));return Promise.resolve(new t.WebpackLoader)}if(u.System&&"function"==typeof u.System.config)return u.System.normalize("aurelia-bootstrapper").then(function(e){return u.System.normalize("aurelia-loader-default",e)}).then(function(e){return u.System.import(e).then(function(e){return new e.DefaultLoader})});if("function"==typeof u.require&&"string"==typeof u.require.version)return new Promise(function(e,t){return u.require(["aurelia-loader-default"],function(t){return e(new t.DefaultLoader)},t)});if(p&&void 0!==e&&void 0!==e.require){var s=e.require("aurelia-loader-nodejs");return Promise.resolve(new s.NodeJsLoader)}}return Promise.reject("No PLATFORM.Loader is defined and there is neither a System API (ES6) or a Require API (AMD) globally available to load your app.")}function r(e){var t=void 0,s=p&&("renderer"===process.type||process.versions["node-webkit"]);if(p&&!s)t="nodejs";else if("undefined"!=typeof window)t="browser";else{if("undefined"==typeof self)throw new Error("Could not determine platform implementation to load.");t="worker"}return e.loadModule("aurelia-pal-"+t).then(function(e){return"nodejs"===t&&!i.isInitialized&&e.globalize()||e.initialize()})}function o(e){var t=function(t,i){return e.normalize(t,i).then(function(i){return e.map(t,i),i})};return r(e).then(function(){return e.normalize("aurelia-bootstrapper")}).then(function(e){var s=t(i.PLATFORM.moduleName("aurelia-framework",{exports:["Aurelia"]}),e);return Promise.all([s,s.then(function(e){return t("aurelia-dependency-injection",e)}),t("aurelia-router",e),t("aurelia-logging-console",e)])}).then(function(t){var i=t[0];return e.loadModule(i)}).then(function(t){return h(function(){return new t.Aurelia(e)})})}function l(e,t,i){return i.host=e,i.configModuleId=t||null,t?i.loader.loadModule(t).then(function(e){if(!e.configure)throw new Error("Cannot initialize module '"+t+"' without a configure function.");return e.configure(i)}):(i.use.standardConfiguration().developmentLogging(),i.start().then(function(){return i.setRoot()}))}function a(e){var t=c.then(function(t){return e(t())});return d&&d.push(t),t}Object.defineProperty(t,"__esModule",{value:!0}),t.starting=void 0,t.bootstrap=a;var d=[],h=void 0,c=new Promise(function(e){return h=e}),u=i.PLATFORM.global,p="undefined"!=typeof process&&!process.browser;t.starting=function(){return s().then(n).then(o).then(function(){for(var e=u.document.querySelectorAll("[aurelia-app],[data-aurelia-app]"),t=0,i=e.length;t<i;++t){var s=e[t],n=s.getAttribute("aurelia-app")||s.getAttribute("data-aurelia-app");a(l.bind(null,s,n))}var r=console.error.bind(console),o=d.map(function(e){return e.catch(r)});return d=null,Promise.all(o)})}()}),define("aurelia-dependency-injection",["exports","aurelia-metadata","aurelia-pal"],function(e,t,i){"use strict";function s(e,i){var s=e.inject;if("function"==typeof s)throw new Error("Decorator "+i+' cannot be used with "inject()".  Please use an array instead.');return s||(s=t.metadata.getOwn(t.metadata.paramTypes,e).slice(),e.inject=s),s}function n(e){return function(t,i,n){s(t,"lazy")[n]=A.of(e)}}function r(e){return function(t,i,n){s(t,"all")[n]=L.of(e)}}function o(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=function(e){return function(t,i,n){var r=s(t,"optional");r[n]=N.of(r[n],e)}};return t("boolean"==typeof e?e:!0)}function l(e,t,i){var n=s(e,"parent");n[i]=V.of(n[i])}function a(e,t){return function(i,n,r){var o=s(i,"factory"),l=H.of(e);o[r]=t?l.as(t):l}}function d(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=function(e){return function(t,n,r){var o=s(t,"newInstance");o[r]=B.of.apply(B,[o[r]].concat(i)),e&&o[r].as(e)}};return arguments.length>=1?r(e):r()}function h(e){return function(i){t.metadata.define(t.metadata.invoker,e,i)}}function c(e){var i=function(e){t.metadata.define(t.metadata.invoker,U.instance,e)};return e?i(e):i}function u(e){return function(i){t.metadata.define(t.metadata.registration,e,i)}}function p(e){return u(new q(e))}function m(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return u(new W(e,t))}function g(e){if(null===e||void 0===e)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function f(e,t,i,s){for(var n=i.length,r=new Array(n);n--;)r[n]=e.get(i[n]);return void 0!==s&&(r=r.concat(s)),Reflect.construct(t,r)}function _(e){return e.hasOwnProperty("inject")?"function"==typeof e.inject?e.inject():e.inject:[]}function v(e){var i=function(e){var i=e.inject?e.inject.slice():null,s=t.metadata.getOwn(t.metadata.paramTypes,e)||$;if(i){for(var n=0;n<s.length;n++)if(i[n]&&i[n]!==s[n]){var r=i.indexOf(s[n]);r>-1&&i.splice(r,1),i.splice(r>-1&&r<n?n-1:n,0,s[n])}else i[n]||(i[n]=s[n]);e.inject=i}else e.inject=s};return e?i(e):i}function b(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return function(e,s,n){if("number"==typeof n&&1===i.length){var r=e.inject;if("function"==typeof r)throw new Error('Decorator inject cannot be used with "inject()".  Please use an array instead.');return r||(r=t.metadata.getOwn(t.metadata.paramTypes,e).slice(),e.inject=r),void(r[n]=i[0])}if(n){n.value.inject=i}else e.inject=i}}Object.defineProperty(e,"__esModule",{value:!0}),e.Container=e.InvocationHandler=e._emptyParameters=e.SingletonRegistration=e.TransientRegistration=e.FactoryInvoker=e.NewInstance=e.Factory=e.StrategyResolver=e.Parent=e.Optional=e.All=e.Lazy=e.resolver=void 0,e.getDecoratorDependencies=s,e.lazy=n,e.all=r,e.optional=o,e.parent=l,e.factory=a,e.newInstance=d,e.invoker=h,e.invokeAsFactory=c,e.registration=u,e.transient=p,e.singleton=m,e.autoinject=v,e.inject=b;var y,w,C,x,S,T,k,D,I,O,R,P,M,j,E,F=e.resolver=t.protocol.create("aurelia:resolver",function(e){return"function"==typeof e.get||"Resolvers must implement: get(container: Container, key: any): any"}),A=e.Lazy=(y=F())(w=function(){function e(e){this._key=e}return e.prototype.get=function(e){var t=this;return function(){return e.get(t._key)}},e.of=function(t){return new e(t)},e}())||w,L=e.All=(C=F())(x=function(){function e(e){this._key=e}return e.prototype.get=function(e){return e.getAll(this._key)},e.of=function(t){return new e(t)},e}())||x,N=e.Optional=(S=F())(T=function(){function e(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this._key=e,this._checkParent=t}return e.prototype.get=function(e){return e.hasResolver(this._key,this._checkParent)?e.get(this._key):null},e.of=function(t){return new e(t,arguments.length<=1||void 0===arguments[1]||arguments[1])},e}())||T,V=e.Parent=(k=F())(D=function(){function e(e){this._key=e}return e.prototype.get=function(e){return e.parent?e.parent.get(this._key):null},e.of=function(t){return new e(t)},e}())||D,z=e.StrategyResolver=(I=F())(O=function(){function e(e,t){this.strategy=e,this.state=t}return e.prototype.get=function(e,t){switch(this.strategy){case 0:return this.state;case 1:var i=e.invoke(this.state);return this.state=i,this.strategy=0,i;case 2:return e.invoke(this.state);case 3:return this.state(e,t,this);case 4:return this.state[0].get(e,t);case 5:return e.get(this.state);default:throw new Error("Invalid strategy: "+this.strategy)}},e}())||O,H=e.Factory=(R=F())(P=function(){function e(e){this._key=e}return e.prototype.get=function(e){var t=this;return function(){for(var i=arguments.length,s=Array(i),n=0;n<i;n++)s[n]=arguments[n];return e.invoke(t._key,s)}},e.of=function(t){return new e(t)},e}())||P,B=e.NewInstance=(M=F())(j=function(){function e(e){this.key=e,this.asKey=e;for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.dynamicDependencies=i}return e.prototype.get=function(e){var t=this.dynamicDependencies.length>0?this.dynamicDependencies.map(function(t){return t["protocol:aurelia:resolver"]?t.get(e):e.get(t)}):void 0,i=e.invoke(this.key,t);return e.registerInstance(this.asKey,i),i},e.prototype.as=function(e){return this.asKey=e,this},e.of=function(t){for(var i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat([t],s)))},e}())||j,U=e.FactoryInvoker=function(){function e(){}return e.prototype.invoke=function(e,t,i){for(var s=i.length,n=new Array(s);s--;)n[s]=e.get(i[s]);return t.apply(void 0,n)},e.prototype.invokeWithDynamicDependencies=function(e,t,i,s){for(var n=i.length,r=new Array(n);n--;)r[n]=e.get(i[n]);return void 0!==s&&(r=r.concat(s)),t.apply(void 0,r)},e}();U.instance=new U;var q=e.TransientRegistration=function(){function e(e){this._key=e}return e.prototype.registerResolver=function(e,t,i){var s=e.getResolver(this._key||t);return void 0===s?e.registerTransient(this._key||t,i):s},e}(),W=e.SingletonRegistration=function(){function e(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];"boolean"==typeof e?this._registerInChild=e:(this._key=e,this._registerInChild=t)}return e.prototype.registerResolver=function(e,t,i){var s=this._registerInChild?e:e.root,n=s.getResolver(this._key||t);return void 0===n?s.registerSingleton(this._key||t,i):n},e}(),$=e._emptyParameters=Object.freeze([]);t.metadata.registration="aurelia:registration",t.metadata.invoker="aurelia:invoker";var G=F.decorates,K=e.InvocationHandler=function(){function e(e,t,i){this.fn=e,this.invoker=t,this.dependencies=i}return e.prototype.invoke=function(e,t){return void 0!==t?this.invoker.invokeWithDynamicDependencies(e,this.fn,this.dependencies,t):this.invoker.invoke(e,this.fn,this.dependencies)},e}(),Y=(E={},E[0]={invoke:function(e,t){return new t},invokeWithDynamicDependencies:f},E[1]={invoke:function(e,t,i){return new t(e.get(i[0]))},invokeWithDynamicDependencies:f},E[2]={invoke:function(e,t,i){return new t(e.get(i[0]),e.get(i[1]))},invokeWithDynamicDependencies:f},E[3]={invoke:function(e,t,i){return new t(e.get(i[0]),e.get(i[1]),e.get(i[2]))},invokeWithDynamicDependencies:f},E[4]={invoke:function(e,t,i){return new t(e.get(i[0]),e.get(i[1]),e.get(i[2]),e.get(i[3]))},invokeWithDynamicDependencies:f},E[5]={invoke:function(e,t,i){return new t(e.get(i[0]),e.get(i[1]),e.get(i[2]),e.get(i[3]),e.get(i[4]))},invokeWithDynamicDependencies:f},E.fallback={invoke:f,invokeWithDynamicDependencies:f},E);e.Container=function(){function e(e){void 0===e&&(e={}),this._configuration=e,this._onHandlerCreated=e.onHandlerCreated,this._handlers=e.handlers||(e.handlers=new Map),this._resolvers=new Map,this.root=this,this.parent=null}return e.prototype.makeGlobal=function(){return e.instance=this,this},e.prototype.setHandlerCreatedCallback=function(e){this._onHandlerCreated=e,this._configuration.onHandlerCreated=e},e.prototype.registerInstance=function(e,t){return this.registerResolver(e,new z(0,void 0===t?e:t))},e.prototype.registerSingleton=function(e,t){return this.registerResolver(e,new z(1,void 0===t?e:t))},e.prototype.registerTransient=function(e,t){return this.registerResolver(e,new z(2,void 0===t?e:t))},e.prototype.registerHandler=function(e,t){return this.registerResolver(e,new z(3,t))},e.prototype.registerAlias=function(e,t){return this.registerResolver(t,new z(5,e))},e.prototype.registerResolver=function(e,t){g(e);var i=this._resolvers,s=i.get(e);return void 0===s?i.set(e,t):4===s.strategy?s.state.push(t):i.set(e,new z(4,[s,t])),t},e.prototype.autoRegister=function(e,i){if("function"==typeof(i=void 0===i?e:i)){var s=t.metadata.get(t.metadata.registration,i);return void 0===s?this.registerResolver(e,new z(1,i)):s.registerResolver(this,e,i)}return this.registerResolver(e,new z(0,i))},e.prototype.autoRegisterAll=function(e){for(var t=e.length;t--;)this.autoRegister(e[t])},e.prototype.unregister=function(e){this._resolvers.delete(e)},e.prototype.hasResolver=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return g(e),this._resolvers.has(e)||t&&null!==this.parent&&this.parent.hasResolver(e,t)},e.prototype.getResolver=function(e){return this._resolvers.get(e)},e.prototype.get=function(i){if(g(i),i===e)return this;if(G(i))return i.get(this,i);var s=this._resolvers.get(i);if(void 0===s){if(null===this.parent)return this.autoRegister(i).get(this,i);var n=t.metadata.get(t.metadata.registration,i);return void 0===n?this.parent._get(i):n.registerResolver(this,i,i).get(this,i)}return s.get(this,i)},e.prototype._get=function(e){var t=this._resolvers.get(e);return void 0===t?null===this.parent?this.autoRegister(e).get(this,e):this.parent._get(e):t.get(this,e)},e.prototype.getAll=function(e){g(e);var t=this._resolvers.get(e);if(void 0===t)return null===this.parent?$:this.parent.getAll(e);if(4===t.strategy){for(var i=t.state,s=i.length,n=new Array(s);s--;)n[s]=i[s].get(this,e);return n}return[t.get(this,e)]},e.prototype.createChild=function(){var t=new e(this._configuration);return t.root=this.root,t.parent=this,t},e.prototype.invoke=function(e,t){try{var s=this._handlers.get(e);return void 0===s&&(s=this._createInvocationHandler(e),this._handlers.set(e,s)),s.invoke(this,t)}catch(t){throw new i.AggregateError("Error invoking "+e.name+". Check the inner error for details.",t,!0)}},e.prototype._createInvocationHandler=function(e){var i=void 0;if(void 0===e.inject)i=t.metadata.getOwn(t.metadata.paramTypes,e)||$;else{i=[];for(var s=e;"function"==typeof s;){var n;(n=i).push.apply(n,_(s)),s=Object.getPrototypeOf(s)}}var r=t.metadata.getOwn(t.metadata.invoker,e)||Y[i.length]||Y.fallback,o=new K(e,r,i);return void 0!==this._onHandlerCreated?this._onHandlerCreated(o):o},e}()}),define("aurelia-event-aggregator",["exports","aurelia-logging"],function(e,t){"use strict";function i(e,t,i){try{e(t,i)}catch(e){l.error(e)}}function s(e,t){try{e.handle(t)}catch(e){l.error(e)}}function n(e){var t=new d;return e.subscribeOnce=function(e,i){return t.subscribeOnce(e,i)},e.subscribe=function(e,i){return t.subscribe(e,i)},e.publish=function(e,i){t.publish(e,i)},t}function r(e){e.instance(d,n(e.aurelia))}Object.defineProperty(e,"__esModule",{value:!0}),e.EventAggregator=void 0,e.includeEventsIn=n,e.configure=r;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(t),l=o.getLogger("event-aggregator"),a=function(){function e(e,t){this.messageType=e,this.callback=t}return e.prototype.handle=function(e){e instanceof this.messageType&&this.callback.call(null,e)},e}(),d=e.EventAggregator=function(){function e(){this.eventLookup={},this.messageHandlers=[]}return e.prototype.publish=function(e,t){var n=void 0,r=void 0;if(!e)throw new Error("Event was invalid.");if("string"==typeof e){if(n=this.eventLookup[e])for(n=n.slice(),r=n.length;r--;)i(n[r],t,e)}else for(n=this.messageHandlers.slice(),r=n.length;r--;)s(n[r],e)},e.prototype.subscribe=function(e,t){var i=void 0,s=void 0;if(!e)throw new Error("Event channel/type was invalid.");return"string"==typeof e?(i=t,s=this.eventLookup[e]||(this.eventLookup[e]=[])):(i=new a(e,t),s=this.messageHandlers),s.push(i),{dispose:function(){var e=s.indexOf(i);e!==-1&&s.splice(e,1)}}},e.prototype.subscribeOnce=function(e,t){var i=this.subscribe(e,function(e,s){return i.dispose(),t(e,s)});return i},e}()}),define("aurelia-framework",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-metadata","aurelia-templating","aurelia-loader","aurelia-task-queue","aurelia-path","aurelia-pal","aurelia-logging"],function(e,t,i,s,n,r,o,l,a,d){"use strict";function h(){a.DOM.addEventListener("submit",function(e){var t=e.target,i=t.action;"form"!==t.tagName.toLowerCase()||i||e.preventDefault()})}function c(e,t){var i=void 0;return function s(){return i=t.shift(),i?Promise.resolve(i(e)).then(s):Promise.resolve()}()}function u(e,t,i){function s(s){return t.loadModule(s).then(function(t){if("configure"in t)return Promise.resolve(t.configure(e,i.config||{})).then(function(){e.resourcesRelativeTo=null,_.debug("Configured plugin "+i.moduleId+".")});e.resourcesRelativeTo=null,_.debug("Loaded plugin "+i.moduleId+".")})}_.debug("Loading plugin "+i.moduleId+"."),e.resourcesRelativeTo=i.resourcesRelativeTo;var n=i.moduleId;return i.resourcesRelativeTo.length>1?t.normalize(i.moduleId,i.resourcesRelativeTo[1]).then(function(e){return s(e)}):s(n)}function p(e,t,i){function s(t){var i=t.moduleId,s=m(i);return r(i)&&(i=o(i)),e.loader.normalize(i,t.relativeTo).then(function(e){return{name:t.moduleId,importId:r(t.moduleId)?l(e,s):e}})}function r(e){var t=m(e);return!!t&&(""!==t&&(".js"!==t&&".ts"!==t))}function o(e){return e.replace(v,"")}function l(e,t){return o(e)+"."+t}var a=e.container.get(n.ViewEngine);return Promise.all(Object.keys(t).map(function(e){return s(t[e])})).then(function(e){var t=[],s=[];return e.forEach(function(e){t.push(void 0),s.push(e.importId)}),a.importViewResources(s,t,i)})}function m(e){var t=e.match(v);if(t&&t.length>0)return t[0].split(".")[1]}function g(e){if(e.processed)throw new Error("This config instance has already been applied. To load more plugins or global resources, create a new FrameworkConfiguration instance.")}Object.defineProperty(e,"__esModule",{value:!0}),e.LogManager=e.FrameworkConfiguration=e.Aurelia=void 0,Object.keys(t).forEach(function(i){"default"!==i&&"__esModule"!==i&&Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}})}),Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}),Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(d),_=(e.Aurelia=function(){function e(i,s,o){this.loader=i||new a.PLATFORM.Loader,this.container=s||(new t.Container).makeGlobal(),this.resources=o||new n.ViewResources,this.use=new b(this),this.logger=f.getLogger("aurelia"),this.hostConfigured=!1,this.host=null,this.use.instance(e,this),this.use.instance(r.Loader,this.loader),this.use.instance(n.ViewResources,this.resources)}return e.prototype.start=function(){var e=this;return this._started?this._started:(this.logger.info("Aurelia Starting"),this._started=this.use.apply().then(function(){if(h(),!e.container.hasResolver(n.BindingLanguage)){var t="You must configure Aurelia with a BindingLanguage implementation.";throw e.logger.error(t),new Error(t)}e.logger.info("Aurelia Started");var i=a.DOM.createCustomEvent("aurelia-started",{bubbles:!0,cancelable:!0});return a.DOM.dispatchEvent(i),e}))},e.prototype.enhance=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this._configureHost(i||a.DOM.querySelectorAll("body")[0]),new Promise(function(i){var s=e.container.get(n.TemplatingEngine);e.root=s.enhance({container:e.container,element:e.host,resources:e.resources,bindingContext:t}),e.root.attached(),e._onAureliaComposed(),i(e)})},e.prototype.setRoot=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?null:arguments[1],s={};this.root&&this.root.viewModel&&this.root.viewModel.router&&(this.root.viewModel.router.deactivate(),this.root.viewModel.router.reset()),this._configureHost(i);var r=this.container.get(n.TemplatingEngine);return delete this.container.get(n.CompositionTransaction).initialComposition,t||(t=this.configModuleId?(0,l.relativeToFile)("./app",this.configModuleId):"app"),s.viewModel=t,s.container=s.childContainer=this.container,s.viewSlot=this.hostSlot,s.host=this.host,r.compose(s).then(function(t){return e.root=t,s.viewSlot.attached(),e._onAureliaComposed(),e})},e.prototype._configureHost=function(e){if(!this.hostConfigured){if(e=e||this.host,this.host=e&&"string"!=typeof e?e:a.DOM.getElementById(e||"applicationHost"),!this.host)throw new Error("No applicationHost was specified.");this.hostConfigured=!0,this.host.aurelia=this,this.hostSlot=new n.ViewSlot(this.host,!0),this.hostSlot.transformChildNodesIntoView(),this.container.registerInstance(a.DOM.boundary,this.host)}},e.prototype._onAureliaComposed=function(){var e=a.DOM.createCustomEvent("aurelia-composed",{bubbles:!0,cancelable:!0});setTimeout(function(){return a.DOM.dispatchEvent(e)},1)},e}(),f.getLogger("aurelia")),v=/\.[^\/.]+$/,b=function(){function e(e){var t=this;this.aurelia=e,this.container=e.container,this.info=[],this.processed=!1,this.preTasks=[],this.postTasks=[],this.resourcesToLoad={},this.preTask(function(){return e.loader.normalize("aurelia-bootstrapper").then(function(e){return t.bootstrapperName=e})}),this.postTask(function(){return p(e,t.resourcesToLoad,e.resources)})}return e.prototype.instance=function(e,t){return this.container.registerInstance(e,t),this},e.prototype.singleton=function(e,t){return this.container.registerSingleton(e,t),this},e.prototype.transient=function(e,t){return this.container.registerTransient(e,t),this},e.prototype.preTask=function(e){return g(this),this.preTasks.push(e),this},e.prototype.postTask=function(e){return g(this),this.postTasks.push(e),this},e.prototype.feature=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=/\/index$/i.test(e),s=i||m(e)?e:e+"/index",n=i?e.substr(0,e.length-6):e;return this.plugin({moduleId:s,resourcesRelativeTo:[n,""],config:t})},e.prototype.globalResources=function(e){g(this);for(var t=Array.isArray(e)?e:arguments,i=void 0,s=this.resourcesRelativeTo||["",""],n=0,r=t.length;n<r;++n){if("string"!=typeof(i=t[n]))throw new Error("Invalid resource path ["+i+"]. Resources must be specified as relative module IDs.");var o=s[0],a=s[1],d=i;(i.startsWith("./")||i.startsWith("../"))&&""!==o&&(d=(0,l.join)(o,i)),this.resourcesToLoad[d]={moduleId:d,relativeTo:a}}return this},e.prototype.globalName=function(e,t){return g(this),this.resourcesToLoad[e]={moduleId:t,relativeTo:""},this},e.prototype.plugin=function(e,t){return g(this),"string"==typeof e?this.plugin({moduleId:e,resourcesRelativeTo:[e,""],config:t||{}}):(this.info.push(e),this)},e.prototype._addNormalizedPlugin=function(e,t){var i=this,s={moduleId:e,resourcesRelativeTo:[e,""],config:t||{}};return this.plugin(s),this.preTask(function(){var t=[e,i.bootstrapperName];return s.moduleId=e,s.resourcesRelativeTo=t,Promise.resolve()}),this},e.prototype.defaultBindingLanguage=function(){return this._addNormalizedPlugin("aurelia-templating-binding")},e.prototype.router=function(){return this._addNormalizedPlugin("aurelia-templating-router")},e.prototype.history=function(){return this._addNormalizedPlugin("aurelia-history-browser")},e.prototype.defaultResources=function(){return this._addNormalizedPlugin("aurelia-templating-resources")},e.prototype.eventAggregator=function(){return this._addNormalizedPlugin("aurelia-event-aggregator")},
e.prototype.basicConfiguration=function(){return this.defaultBindingLanguage().defaultResources().eventAggregator()},e.prototype.standardConfiguration=function(){return this.basicConfiguration().history().router()},e.prototype.developmentLogging=function(){var e=this;return this.preTask(function(){return e.aurelia.loader.normalize("aurelia-logging-console",e.bootstrapperName).then(function(t){return e.aurelia.loader.loadModule(t).then(function(e){f.addAppender(new e.ConsoleAppender),f.setLevel(f.logLevel.debug)})})}),this},e.prototype.apply=function(){var e=this;return this.processed?Promise.resolve():c(this,this.preTasks).then(function(){var t=e.aurelia.loader,i=e.info,s=void 0;return function n(){return(s=i.shift())?u(e,t,s).then(n):(e.processed=!0,Promise.resolve())}().then(function(){return c(e,e.postTasks)})})},e}();e.FrameworkConfiguration=b;e.LogManager=f}),define("aurelia-history",["exports"],function(e){"use strict";function t(e){throw new Error("History must implement "+e+"().")}Object.defineProperty(e,"__esModule",{value:!0});e.History=function(){function e(){}return e.prototype.activate=function(e){t("activate")},e.prototype.deactivate=function(){t("deactivate")},e.prototype.getAbsoluteRoot=function(){t("getAbsoluteRoot")},e.prototype.navigate=function(e,i){t("navigate")},e.prototype.navigateBack=function(){t("navigateBack")},e.prototype.setTitle=function(e){t("setTitle")},e}()}),define("aurelia-history-browser",["exports","aurelia-pal","aurelia-history"],function(e,t,i){"use strict";function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){e.singleton(i.History,u),e.transient(h,c)}function o(e,t,i){if(i){var s=e.href.replace(/(javascript:|#).*$/,"");e.replace(s+"#"+t)}else e.hash="#"+t}function l(e,t,i){return e+"//"+t+(i?":"+i:"")}Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserHistory=e.DefaultLinkHandler=e.LinkHandler=void 0,e.configure=r;var a,d,h=e.LinkHandler=function(){function e(){}return e.prototype.activate=function(e){},e.prototype.deactivate=function(){},e}(),c=e.DefaultLinkHandler=function(e){function i(){var t=s(this,e.call(this));return t.handler=function(e){var s=i.getEventInfo(e),n=s.shouldHandleEvent,r=s.href;n&&(e.preventDefault(),t.history.navigate(r))},t}return n(i,e),i.prototype.activate=function(e){e._hasPushState&&(this.history=e,t.DOM.addEventListener("click",this.handler,!0))},i.prototype.deactivate=function(){t.DOM.removeEventListener("click",this.handler)},i.getEventInfo=function(e){var t={shouldHandleEvent:!1,href:null,anchor:null},s=i.findClosestAnchor(e.target);if(!s||!i.targetIsThisWindow(s))return t;if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return t;var n=s.getAttribute("href");t.anchor=s,t.href=n;var r=1===e.which,o=n&&!("#"===n.charAt(0)||/^[a-z]+:/i.test(n));return t.shouldHandleEvent=r&&o,t},i.findClosestAnchor=function(e){for(;e;){if("A"===e.tagName)return e;e=e.parentNode}},i.targetIsThisWindow=function(e){var i=e.getAttribute("target"),s=t.PLATFORM.global;return!i||i===s.name||"_self"===i||"top"===i&&s===s.top},i}(h),u=e.BrowserHistory=(d=a=function(e){function i(i){var n=s(this,e.call(this));return n._isActive=!1,n._checkUrlCallback=n._checkUrl.bind(n),n.location=t.PLATFORM.location,n.history=t.PLATFORM.history,n.linkHandler=i,n}return n(i,e),i.prototype.activate=function(e){if(this._isActive)throw new Error("History has already been activated.");var i=!!e.pushState;this._isActive=!0,this.options=Object.assign({},{root:"/"},this.options,e),this.root=("/"+this.options.root+"/").replace(m,"/"),this._wantsHashChange=this.options.hashChange!==!1,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var s=void 0;if(this._hasPushState?s="popstate":this._wantsHashChange&&(s="hashchange"),t.PLATFORM.addEventListener(s,this._checkUrlCallback),this._wantsHashChange&&i){var n=this.location,r=n.pathname.replace(/[^\/]$/,"$&/")===this.root;if(!this._hasPushState&&!r)return this.fragment=this._getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&r&&n.hash&&(this.fragment=this._getHash().replace(p,""),this.history.replaceState({},t.DOM.title,this.root+this.fragment+n.search))}if(this.fragment||(this.fragment=this._getFragment()),this.linkHandler.activate(this),!this.options.silent)return this._loadUrl()},i.prototype.deactivate=function(){t.PLATFORM.removeEventListener("popstate",this._checkUrlCallback),t.PLATFORM.removeEventListener("hashchange",this._checkUrlCallback),this._isActive=!1,this.linkHandler.deactivate()},i.prototype.getAbsoluteRoot=function(){return""+l(this.location.protocol,this.location.hostname,this.location.port)+this.root},i.prototype.navigate=function(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=i.trigger,n=void 0===s||s,r=i.replace,l=void 0!==r&&r;if(e&&f.test(e))return this.location.href=e,!0;if(!this._isActive)return!1;if(e=this._getFragment(e||""),this.fragment===e&&!l)return!1;this.fragment=e;var a=this.root+e;if(""===e&&"/"!==a&&(a=a.slice(0,-1)),this._hasPushState)a=a.replace("//","/"),this.history[l?"replaceState":"pushState"]({},t.DOM.title,a);else{if(!this._wantsHashChange)return this.location.assign(a);o(this.location,e,l)}return n?this._loadUrl(e):void 0},i.prototype.navigateBack=function(){this.history.back()},i.prototype.setTitle=function(e){t.DOM.title=e},i.prototype._getHash=function(){return this.location.hash.substr(1)},i.prototype._getFragment=function(e,t){var i=void 0;return e||(this._hasPushState||!this._wantsHashChange||t?(e=this.location.pathname+this.location.search,i=this.root.replace(g,""),e.indexOf(i)||(e=e.substr(i.length))):e=this._getHash()),"/"+e.replace(p,"")},i.prototype._checkUrl=function(){this._getFragment()!==this.fragment&&this._loadUrl()},i.prototype._loadUrl=function(e){var t=this.fragment=this._getFragment(e);return!!this.options.routeHandler&&this.options.routeHandler(t)},i}(i.History),a.inject=[h],d),p=/^#?\/*|\s+$/g,m=/^\/+|\/+$/g,g=/\/$/,f=/^([a-z][a-z0-9+\-.]*:)?\/\//i}),define("aurelia-loader",["exports","aurelia-path","aurelia-metadata"],function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=e.TemplateRegistryEntry=e.TemplateDependency=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=e.TemplateDependency=function(e,t){this.src=e,this.name=t},r=e.TemplateRegistryEntry=function(){function e(e){this.templateIsLoaded=!1,this.factoryIsReady=!1,this.resources=null,this.dependencies=null,this.address=e,this.onReady=null,this._template=null,this._factory=null}return e.prototype.addDependency=function(e,s){var r="string"==typeof e?(0,t.relativeToFile)(e,this.address):i.Origin.get(e).moduleId;this.dependencies.push(new n(r,s))},s(e,[{key:"template",get:function(){return this._template},set:function(e){var i=this.address,s=void 0,r=void 0,o=void 0,l=void 0;this._template=e,this.templateIsLoaded=!0,s=e.content.querySelectorAll("require"),l=this.dependencies=new Array(s.length);for(var a=0,d=s.length;a<d;++a){if(r=s[a],!(o=r.getAttribute("from")))throw new Error("<require> element in "+i+' has no "from" attribute.');l[a]=new n((0,t.relativeToFile)(o,i),r.getAttribute("as")),r.parentNode&&r.parentNode.removeChild(r)}}},{key:"factory",get:function(){return this._factory},set:function(e){this._factory=e,this.factoryIsReady=!0}}]),e}();e.Loader=function(){function e(){this.templateRegistry={}}return e.prototype.map=function(e,t){throw new Error("Loaders must implement map(id, source).")},e.prototype.normalizeSync=function(e,t){throw new Error("Loaders must implement normalizeSync(moduleId, relativeTo).")},e.prototype.normalize=function(e,t){throw new Error("Loaders must implement normalize(moduleId: string, relativeTo: string): Promise<string>.")},e.prototype.loadModule=function(e){throw new Error("Loaders must implement loadModule(id).")},e.prototype.loadAllModules=function(e){throw new Error("Loader must implement loadAllModules(ids).")},e.prototype.loadTemplate=function(e){throw new Error("Loader must implement loadTemplate(url).")},e.prototype.loadText=function(e){throw new Error("Loader must implement loadText(url).")},e.prototype.applyPluginToUrl=function(e,t){throw new Error("Loader must implement applyPluginToUrl(url, pluginName).")},e.prototype.addPlugin=function(e,t){throw new Error("Loader must implement addPlugin(pluginName, implementation).")},e.prototype.getOrCreateTemplateRegistryEntry=function(e){return this.templateRegistry[e]||(this.templateRegistry[e]=new r(e))},e}()}),define("aurelia-loader-default",["exports","aurelia-loader","aurelia-pal","aurelia-metadata"],function(e,t,i,s){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var i=e,n=void 0,r=void 0;i.__useDefault&&(i=i.default),s.Origin.set(i,new s.Origin(t,"default"));for(n in i)"function"==typeof(r=i[n])&&s.Origin.set(r,new s.Origin(t,n));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultLoader=e.TextTemplateLoader=void 0;var l=e.TextTemplateLoader=function(){function e(){}return e.prototype.loadTemplate=function(e,t){return e.loadText(t.address).then(function(e){t.template=i.DOM.createTemplateFromMarkup(e)})},e}(),a=e.DefaultLoader=function(e){function t(){var t=n(this,e.call(this));t.textPluginName="text",t.moduleRegistry=Object.create(null),t.useTemplateLoader(new l);var i=t;return t.addPlugin("template-registry-entry",{fetch:function(e){var t=i.getOrCreateTemplateRegistryEntry(e);return t.templateIsLoaded?t:i.templateLoader.loadTemplate(i,t).then(function(e){return t})}}),t}return r(t,e),t.prototype.useTemplateLoader=function(e){this.templateLoader=e},t.prototype.loadAllModules=function(e){for(var t=[],i=0,s=e.length;i<s;++i)t.push(this.loadModule(e[i]));return Promise.all(t)},t.prototype.loadTemplate=function(e){return this._import(this.applyPluginToUrl(e,"template-registry-entry"))},t.prototype.loadText=function(e){return this._import(this.applyPluginToUrl(e,this.textPluginName)).then(function(e){return"string"==typeof e?e:e.default})},t}(t.Loader);i.PLATFORM.Loader=a,i.PLATFORM.global.System&&i.PLATFORM.global.System.import?(i.PLATFORM.eachModule=function(e){if(System.registry)for(var t=System.registry.entries(),i=Array.isArray(t),s=0,t=i?t:t[Symbol.iterator]();;){var n;if(i){if(s>=t.length)break;n=t[s++]}else{if(s=t.next(),s.done)break;n=s.value}var r=n,o=r[0],l=r[1];try{if(e(o,l))return}catch(e){}}else{var a=System._loader.modules;for(var d in a)try{if(e(d,a[d].module))return}catch(e){}}},System.set("text",System.newModule({translate:function(e){return'module.exports = "'+e.source.replace(/(["\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")+'";'}})),a.prototype._import=function(e){return System.import(e)},a.prototype.loadModule=function(e){var t=this;return System.normalize(e).then(function(e){var i=t.moduleRegistry[e];return void 0!==i?Promise.resolve(i):System.import(e).then(function(i){return t.moduleRegistry[e]=i,o(i,e)})})},a.prototype.map=function(e,t){var i;System.config({map:(i={},i[e]=t,i)})},a.prototype.normalizeSync=function(e,t){return System.normalizeSync(e,t)},a.prototype.normalize=function(e,t){return System.normalize(e,t)},a.prototype.applyPluginToUrl=function(e,t){return e+"!"+t},a.prototype.addPlugin=function(e,t){System.set(e,System.newModule({fetch:function(e,i){var s=t.fetch(e.address);return Promise.resolve(s).then(function(t){return e.metadata.result=t,""})},instantiate:function(e){return e.metadata.result}}))}):(i.PLATFORM.global.requirejs&&requirejs.s&&requirejs.s.contexts&&requirejs.s.contexts._&&requirejs.s.contexts._.defined?i.PLATFORM.eachModule=function(e){var t=requirejs.s.contexts._.defined;for(var i in t)try{if(e(i,t[i]))return}catch(e){}}:i.PLATFORM.eachModule=function(e){},a.prototype._import=function(e){return new Promise(function(t,i){require([e],t,i)})},a.prototype.loadModule=function(e){var t=this,i=this.moduleRegistry[e];return void 0!==i?Promise.resolve(i):new Promise(function(i,s){require([e],function(s){t.moduleRegistry[e]=s,i(o(s,e))},s)})},a.prototype.map=function(e,t){},a.prototype.normalize=function(e,t){return Promise.resolve(e)},a.prototype.normalizeSync=function(e,t){return e},a.prototype.applyPluginToUrl=function(e,t){return t+"!"+e},a.prototype.addPlugin=function(e,t){define(e,[],{load:function(e,i,s){var n=t.fetch(e);Promise.resolve(n).then(s)}})})}),define("aurelia-logging",["exports"],function(e){"use strict";function t(){return[this].concat(Array.prototype.slice.call(arguments))}function i(e){var i=d[e];return function(){if(!(this.level<i))for(var s=t.apply(this,arguments),n=c.length;n--;){var r;(r=c[n])[e].apply(r,s)}}}function s(){var e=p.prototype;e.debug=i("debug"),e.info=i("info"),e.warn=i("warn"),e.error=i("error")}function n(e){return h[e]||new p(e)}function r(e){1===c.push(e)&&s()}function o(e){c=c.filter(function(t){return t!==e})}function l(e){u=e;for(var t in h)h[t].setLevel(e)}function a(){return u}Object.defineProperty(e,"__esModule",{value:!0}),e.getLogger=n,e.addAppender=r,e.removeAppender=o,e.setLevel=l,e.getLevel=a;var d=e.logLevel={none:0,error:1,warn:2,info:3,debug:4},h={},c=[],u=d.none,p=e.Logger=function(){function e(e){var t=h[e];if(t)return t;h[e]=this,this.id=e,this.level=u}return e.prototype.debug=function(e){},e.prototype.info=function(e){},e.prototype.warn=function(e){},e.prototype.error=function(e){},e.prototype.setLevel=function(e){this.level=e},e}()}),define("aurelia-logging-console",["exports","aurelia-logging"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleAppender=void 0;e.ConsoleAppender=function(){function e(){}return e.prototype.debug=function(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];(t=console).debug.apply(t,["DEBUG ["+e.id+"]"].concat(s))},e.prototype.info=function(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];(t=console).info.apply(t,["INFO ["+e.id+"]"].concat(s))},e.prototype.warn=function(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];(t=console).warn.apply(t,["WARN ["+e.id+"]"].concat(s))},e.prototype.error=function(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];(t=console).error.apply(t,["ERROR ["+e.id+"]"].concat(s))},e}()}),define("aurelia-metadata",["exports","aurelia-pal"],function(e,t){"use strict";function i(e){return e&&("function"==typeof e||"object"===(void 0===e?"undefined":p(e)))}function s(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=function(e,i,s){var n=t.length;if(i){for(s=s||{value:e[i],writable:!0,configurable:!0,enumerable:!0};n--;)s=t[n](e,i,s)||s;Object.defineProperty(e,i,s)}else for(;n--;)e=t[n](e)||e;return e};return s.on=s,s}function n(e,t,i){function s(i,s,n){var r=i.constructor.name+"#"+s,o=t?{}:e||{},l="DEPRECATION - "+r;if("function"!=typeof n.value)throw new SyntaxError("Only methods can be marked as deprecated.");return o.message&&(l+=" - "+o.message),u({},n,{value:function(){if(o.error)throw new Error(l);return console.warn(l),n.value.apply(this,arguments)}})}return t?s(e,t,i):s}function r(e){function t(t){var s=function(t){for(var s="function"==typeof t?t.prototype:t,n=i.length;n--;){var r=i[n];Object.defineProperty(s,r,{value:e[r],writable:!0})}};return t?s(t):s}var i=Object.keys(e);return t}function o(){return!0}function l(){}function a(e){return void 0===e?e={}:"function"==typeof e&&(e={validate:e}),e.validate||(e.validate=o),e.compose||(e.compose=l),e}function d(e){return function(t){return e(t)===!0}}function h(e,t){return function(i){var s=t(i);if(s!==!0)throw new Error(s||e+" was not correctly implemented.")}}function c(e,t){t=a(t);var i=function i(s){var n="function"==typeof s?s.prototype:s;t.compose(n),i.assert(n),Object.defineProperty(n,"protocol:"+e,{enumerable:!1,configurable:!1,writable:!1,value:!0})};return i.validate=d(t.validate),i.assert=h(e,t.validate),i}Object.defineProperty(e,"__esModule",{value:!0}),e.Origin=e.metadata=void 0,e.decorators=s,e.deprecated=n,e.mixin=r,e.protocol=c;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},m=e.metadata={resource:"aurelia:resource",paramTypes:"design:paramtypes",propertyType:"design:type",properties:"design:properties",get:function(e,t,s){if(i(t)){var n=m.getOwn(e,t,s);return void 0===n?m.get(e,Object.getPrototypeOf(t),s):n}},getOwn:function(e,t,s){if(i(t))return Reflect.getOwnMetadata(e,t,s)},define:function(e,t,i,s){Reflect.defineMetadata(e,t,i,s)},getOrCreateOwn:function(e,t,i,s){var n=m.getOwn(e,i,s);return void 0===n&&(n=new t,Reflect.defineMetadata(e,n,i,s)),n}},g=new Map,f=Object.freeze({moduleId:void 0,moduleMember:void 0});e.Origin=function(){function e(e,t){this.moduleId=e,this.moduleMember=t}return e.get=function(i){var s=g.get(i);return void 0===s&&t.PLATFORM.eachModule(function(t,n){if("object"===(void 0===n?"undefined":p(n)))for(var r in n){var o=n[r];if(o===i)return g.set(i,s=new e(t,r)),!0}return n===i&&(g.set(i,s=new e(t,"default")),!0)}),s||f},e.set=function(e,t){g.set(e,t)},e}();c.create=function(e,t){t=a(t);var i="protocol:"+e,s=function(i){var s=c(e,t);return i?s(i):s};return s.decorates=function(e){return e[i]===!0},s.validate=d(t.validate),s.assert=h(e,t.validate),s}}),define("aurelia-pal",["exports"],function(e){"use strict";function t(e,t,i){if(t){if(t.innerError&&i)return t;var s="\n------------------------------------------------\n";e+=s+"Inner Error:\n","string"==typeof t?e+="Message: "+t:(t.message?e+="Message: "+t.message:e+="Unknown Inner Error Type. Displaying Inner Error as JSON:\n "+JSON.stringify(t,null,"  "),t.stack&&(e+="\nInner Error Stack:\n"+t.stack,e+="\nEnd Inner Error Stack")),e+=s}var n=new Error(e);return t&&(n.innerError=t),n}function i(t){l||(e.isInitialized=l=!0,"function"!=typeof Object.getPropertyDescriptor&&(Object.getPropertyDescriptor=function(e,t){for(var i=Object.getOwnPropertyDescriptor(e,t),s=Object.getPrototypeOf(e);void 0===i&&null!==s;)i=Object.getOwnPropertyDescriptor(s,t),s=Object.getPrototypeOf(s);return i}),t(r,n,o))}function s(){e.isInitialized=l=!1}Object.defineProperty(e,"__esModule",{value:!0}),e.AggregateError=t,e.initializePAL=i,e.reset=s;var n=e.FEATURE={},r=e.PLATFORM={noop:function(){},eachModule:function(){},moduleName:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e})};r.global=function(){return"undefined"!=typeof self?self:"undefined"!=typeof global?global:new Function("return this")()}();var o=e.DOM={},l=e.isInitialized=!1}),define("aurelia-pal-browser",["exports","aurelia-pal"],function(e,t){"use strict";function i(){t.isInitialized||(0,t.initializePAL)(function(e,t,i){Object.assign(e,n),Object.assign(t,d),Object.assign(i,c),Object.defineProperty(i,"title",{get:function(){return document.title},set:function(e){document.title=e}}),Object.defineProperty(i,"activeElement",{get:function(){return document.activeElement}}),Object.defineProperty(e,"XMLHttpRequest",{get:function(){return e.global.XMLHttpRequest}})})}Object.defineProperty(e,"__esModule",{value:!0}),e._DOM=e._FEATURE=e._PLATFORM=void 0,e.initialize=i;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e._PLATFORM={location:window.location,history:window.history,addEventListener:function(e,t,i){this.global.addEventListener(e,t,i)},removeEventListener:function(e,t,i){this.global.removeEventListener(e,t,i)},performance:window.performance,requestAnimationFrame:function(e){return this.global.requestAnimationFrame(e)}};if("undefined"==typeof FEATURE_NO_IE){(function(){}).name||Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:e}),e}})}if("undefined"==typeof FEATURE_NO_IE)if("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){var r=document.createElement("_");if(r.classList.add("c1","c2"),!r.classList.contains("c2")){var o=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){for(var i=0,s=arguments.length;i<s;++i)e=arguments[i],t.call(this,e)}};o("add"),o("remove")}r.classList.toggle("c3",!1),r.classList.contains("c3")&&function(){var e=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,i){return 1 in arguments&&!this.contains(t)==!i?i:e.call(this,t)}}(),r=null}else!function(){var e=String.prototype.trim,t=Array.prototype.indexOf,i=[],s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},n=function(e,i){if(""===i)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(i))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return t.call(e,i)},r=function(t){for(var s=e.call(t.getAttribute("class")||""),n=s?s.split(/\s+/):i,r=0,o=n.length;r<o;++r)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},o=r.prototype=[];s.prototype=Error.prototype,o.item=function(e){return this[e]||null},o.contains=function(e){return e+="",n(this,e)!==-1},o.add=function(){var e=arguments,t=0,i=e.length,s=void 0,r=!1;do{s=e[t]+"",n(this,s)===-1&&(this.push(s),r=!0)}while(++t<i);r&&this._updateClassName()},o.remove=function(){var e=arguments,t=0,i=e.length,s=void 0,r=!1,o=void 0;do{for(s=e[t]+"",o=n(this,s);o!==-1;)this.splice(o,1),r=!0,o=n(this,s)}while(++t<i);r&&this._updateClassName()},o.toggle=function(e,t){e+="";var i=this.contains(e),s=i?t!==!0&&"remove":t!==!1&&"add";return s&&this[s](e),t===!0||t===!1?t:!i},o.toString=function(){return this.join(" ")},Object.defineProperty(Element.prototype,"classList",{get:function(){return new r(this)},enumerable:!0,configurable:!0})}();if("undefined"==typeof FEATURE_NO_IE&&("performance"in window==!1&&(window.performance={}),"now"in window.performance==!1&&function(){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}(),n.performance=window.performance),"undefined"==typeof FEATURE_NO_IE&&function(){var e=window.console=window.console||{},t=function(){};e.memory||(e.memory={}),"assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",").forEach(function(i){e[i]||(e[i]=t)}),"object"===s(e.log)&&"log,info,warn,error,assert,dir,clear,profile,profileEnd".split(",").forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call)}(),"undefined"==typeof FEATURE_NO_IE&&(!window.CustomEvent||"function"!=typeof window.CustomEvent)){var l=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i};l.prototype=window.Event.prototype,window.CustomEvent=l}if(Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}var d=e._FEATURE={shadowDOM:!!HTMLElement.prototype.attachShadow,scopedCSS:"scoped"in document.createElement("style"),htmlTemplateElement:"content"in document.createElement("template"),mutationObserver:!(!window.MutationObserver&&!window.WebKitMutationObserver),ensureHTMLTemplateElement:function(e){return e}};"undefined"==typeof FEATURE_NO_IE&&function(){var e=function(e){return"template"===e.tagName&&"http://www.w3.org/2000/svg"===e.namespaceURI},t=function(e){var t=e.ownerDocument.createElement("template"),s=e.attributes,n=s.length,r=void 0;for(e.parentNode.insertBefore(t,e);n-- >0;)r=s[n],t.setAttribute(r.name,r.value),e.removeAttribute(r.name);return e.parentNode.removeChild(e),i(t)},i=function(e){for(var t=e.content=document.createDocumentFragment(),i=void 0;i=e.firstChild;)t.appendChild(i);return e},s=function(s){for(var n=i(s).content,r=n.querySelectorAll("template"),o=0,l=r.length;o<l;++o){var a=r[o];e(a)?t(a):i(a)}return s};d.htmlTemplateElement||(d.ensureHTMLTemplateElement=s)}();var h=window.ShadowDOMPolyfill||null,c=e._DOM={Element:Element,SVGElement:SVGElement,boundary:"aurelia-dom-boundary",addEventListener:function(e,t,i){document.addEventListener(e,t,i)},removeEventListener:function(e,t,i){document.removeEventListener(e,t,i)},adoptNode:function(e){return document.adoptNode(e,!0)},createElement:function(e){return document.createElement(e)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},createDocumentFragment:function(){return document.createDocumentFragment()},createMutationObserver:function(e){return new(window.MutationObserver||window.WebKitMutationObserver)(e)},createCustomEvent:function(e,t){return new window.CustomEvent(e,t)},dispatchEvent:function(e){document.dispatchEvent(e)},getComputedStyle:function(e){return window.getComputedStyle(e)},getElementById:function(e){return document.getElementById(e)},querySelectorAll:function(e){return document.querySelectorAll(e)},nextElementSibling:function(e){if(e.nextElementSibling)return e.nextElementSibling;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e},createTemplateFromMarkup:function(e){var t=document.createElement("div");t.innerHTML=e;var i=t.firstElementChild;if(!i||"TEMPLATE"!==i.nodeName)throw new Error("Template markup must be wrapped in a <template> element e.g. <template> <!-- markup here --> </template>");return d.ensureHTMLTemplateElement(i)},appendNode:function(e,t){(t||document.body).appendChild(e)},replaceNode:function(e,t,i){t.parentNode?t.parentNode.replaceChild(e,t):null!==h?h.unwrap(i).replaceChild(h.unwrap(e),h.unwrap(t)):i.replaceChild(e,t)},removeNode:function(e,t){e.parentNode?e.parentNode.removeChild(e):t&&(null!==h?h.unwrap(t).removeChild(h.unwrap(e)):t.removeChild(e))},injectStyles:function(e,t,i){var s=document.createElement("style");return s.innerHTML=e,s.type="text/css",t=t||document.head,i&&t.childNodes.length>0?t.insertBefore(s,t.childNodes[0]):t.appendChild(s),s}}}),define("aurelia-path",["exports"],function(e){"use strict";function t(e){for(var t=0;t<e.length;++t){var i=e[t];if("."===i)e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}}function i(e,i){var s=i&&i.split("/"),n=e.trim().split("/");if("."===n[0].charAt(0)&&s){var r=s.slice(0,s.length-1);n.unshift.apply(n,r)}return t(n),n.join("/")}function s(e,t){if(!e)return t;if(!t)return e;var i=e.match(/^([^\/]*?:)\//),s=i&&i.length>0?i[1]:"";e=e.substr(s.length);var n=void 0;n=0===e.indexOf("///")&&"file:"===s?"///":0===e.indexOf("//")?"//":0===e.indexOf("/")?"/":"";for(var r="/"===t.slice(-1)?"/":"",o=e.split("/"),l=t.split("/"),a=[],d=0,h=o.length;d<h;++d)if(".."===o[d])a.pop();else{if("."===o[d]||""===o[d])continue;a.push(o[d])}for(var c=0,u=l.length;c<u;++c)if(".."===l[c])a.pop();else{if("."===l[c]||""===l[c])continue;a.push(l[c])}return s+n+a.join("/")+r}function n(e,t,i){var s=[];if(null===t||void 0===t)return s;if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)if(i)s.push(c(e)+"="+h(t[r]));else{var l=e+"["+("object"===d(t[r])&&null!==t[r]?r:"")+"]";s=s.concat(n(l,t[r]))}else if("object"!==(void 0===t?"undefined":d(t))||i)s.push(c(e)+"="+h(t));else for(var a in t)s=s.concat(n(e+"["+a+"]",t[a]));return s}function r(e,t){for(var i=[],s=Object.keys(e||{}).sort(),r=0,o=s.length;r<o;r++){var l=s[r];i=i.concat(n(l,e[l],t))}return 0===i.length?"":i.join("&")}function o(e,t){return Array.isArray(e)?(e.push(t),e):void 0!==e?[e,t]:t}function l(e,t,i){for(var s=e,n=t.length-1,r=0;r<=n;r++){var o=""===t[r]?s.length:t[r];if(r<n){var l=s[o]&&"object"!==d(s[o])?[s[o]]:s[o];s=s[o]=l||(isNaN(t[r+1])?{}:[])}else s=s[o]=i}}function a(e){var t={};if(!e||"string"!=typeof e)return t;var i=e;"?"===i.charAt(0)&&(i=i.substr(1));for(var s=i.replace(/\+/g," ").split("&"),n=0;n<s.length;n++){var r=s[n].split("="),a=decodeURIComponent(r[0]);if(a){var d=a.split("]["),h=d.length-1;if(/\[/.test(d[0])&&/\]$/.test(d[h])?(d[h]=d[h].replace(/\]$/,""),d=d.shift().split("[").concat(d),h=d.length-1):h=0,r.length>=2){var c=r[1]?decodeURIComponent(r[1]):"";h?l(t,d,c):t[a]=o(t[a],c)}else t[a]=!0}}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.relativeToFile=i,e.join=s,e.buildQueryString=r,e.parseQueryString=a;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},h=encodeURIComponent,c=function(e){return h(e).replace("%24","$")}}),define("aurelia-polyfills",["aurelia-pal"],function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};"undefined"==typeof FEATURE_NO_ES2015&&(function(i,s){if(!(s in i)){var n,r=e.PLATFORM.global,o=0,l=""+Math.random(),a="__symbol:",d=a.length,h="__symbol@@"+l,c="defineProperty",u="defineProperties",p="getOwnPropertyNames",m="getOwnPropertyDescriptor",g="propertyIsEnumerable",f=i[p],_=i[m],v=i.create,b=i.keys,y=i[c],w=i[u],C=_(i,p),x=i.prototype,S=x.hasOwnProperty,T=x[g],k=x.toString,D=(Array.prototype.indexOf,function(e,t,i){S.call(e,h)||y(e,h,{enumerable:!1,configurable:!1,writable:!1,value:{}}),e[h]["@@"+t]=i}),I=function(e,i){var s=v(e);return null!==i&&"object"===(void 0===i?"undefined":t(i))&&f(i).forEach(function(e){j.call(i,e)&&V(s,e,i[e])}),s},O=function(e){var t=v(e);return t.enumerable=!1,t},R=function(){},P=function(e){return e!=h&&!S.call(A,e)},M=function(e){return e!=h&&S.call(A,e)},j=function(e){var t=""+e;return M(t)?S.call(this,t)&&this[h]["@@"+t]:T.call(this,e)},E=function(e){return y(x,e,{enumerable:!1,configurable:!0,get:R,set:function(t){n(this,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),D(this,e,!0)}}),A[e]=y(i(e),"constructor",L)},F=function(e){if(this&&this!==r)throw new TypeError("Symbol is not a constructor");return E(a.concat(e||"",l,++o))},A=v(null),L={value:F},N=function(e){return A[e]},V=function(e,t,i){var s=""+t;return M(s)?(n(e,s,i.enumerable?O(i):i),D(e,s,!!i.enumerable)):y(e,t,i),e},z=function(e){
return e="[object String]"===k.call(e)?e.split(""):i(e),f(e).filter(M).map(N)};C.value=V,y(i,c,C),C.value=z,y(i,s,C),C.value=function(e){return f(e).filter(P)},y(i,p,C),C.value=function(e,t){var i=z(t);return i.length?b(t).concat(i).forEach(function(i){j.call(t,i)&&V(e,i,t[i])}):w(e,t),e},y(i,u,C),C.value=j,y(x,g,C),C.value=F,y(r,"Symbol",C),C.value=function(e){var t=a.concat(a,e,l);return t in x?A[t]:E(t)},y(F,"for",C),C.value=function(e){return S.call(A,e)?e.slice(2*d,-l.length):void 0},y(F,"keyFor",C),C.value=function(e,t){var i=_(e,t);return i&&M(t)&&(i.enumerable=j.call(e,t)),i},y(i,m,C),C.value=function(e,t){return 1===arguments.length?v(e):I(e,t)},y(i,"create",C),C.value=function(){var e=k.call(this);return"[object String]"===e&&M(this)?"[object Symbol]":e},y(x,"toString",C);try{n=v(y({},a,{get:function(){return y(this,a,{value:!1})[a]}}))[a]||y}catch(e){n=function(e,t,i){var s=_(x,t);delete x[t],y(e,t,i),y(x,t,s)}}}}(Object,"getOwnPropertySymbols"),function(e,t){var i,s=e.defineProperty,n=e.prototype,r=n.toString;["iterator","match","replace","search","split","hasInstance","isConcatSpreadable","unscopables","species","toPrimitive","toStringTag"].forEach(function(t){if(!(t in Symbol))switch(s(Symbol,t,{value:Symbol(t)}),t){case"toStringTag":i=e.getOwnPropertyDescriptor(n,"toString"),i.value=function(){var e=r.call(this),t=void 0===this||null===this?void 0:this[Symbol.toStringTag];return void 0===t?e:"[object "+t+"]"},s(n,"toString",i)}})}(Object,Symbol),function(e,t,i){function s(){return this}t[e]||(t[e]=function(){var t=0,i=this,n={next:function(){var e=i.length<=t;return e?{done:e}:{done:e,value:i[t++]}}};return n[e]=s,n}),i[e]||(i[e]=function(){var t=String.fromCodePoint,i=this,n=0,r=i.length,o={next:function(){var e=r<=n,s=e?"":t(i.codePointAt(n));return n+=s.length,e?{done:e}:{done:e,value:s}}};return o[e]=s,o})}(Symbol.iterator,Array.prototype,String.prototype)),"undefined"==typeof FEATURE_NO_ES2015&&(Number.isNaN=Number.isNaN||function(e){return e!==e},Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}),String.prototype.endsWith&&!function(){try{return!"ab".endsWith("a",1)}catch(e){return!0}}()||(String.prototype.endsWith=function(e,t){var i=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>i.length)&&(t=i.length),t-=e.length;var s=i.indexOf(e,t);return s!==-1&&s===t}),String.prototype.startsWith&&!function(){try{return!"ab".startsWith("b",1)}catch(e){return!0}}()||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),"undefined"==typeof FEATURE_NO_ES2015&&(Array.from||(Array.from=function(){var e=function(e){return isNaN(e=+e)?0:(e>0?Math.floor:Math.ceil)(e)},t=function(t){return t>0?Math.min(e(t),9007199254740991):0},i=function(e,t,i,s){try{return t(i,s)}catch(t){throw"function"==typeof e.return&&e.return(),t}};return function(e){var s,n,r,o,l=Object(e),a="function"==typeof this?this:Array,d=arguments.length,h=d>1?arguments[1]:void 0,c=void 0!==h,u=0,p=l[Symbol.iterator];if(c&&(h=h.bind(d>2?arguments[2]:void 0)),void 0==p||Array.isArray(e))for(s=t(l.length),n=new a(s);s>u;u++)n[u]=c?h(l[u],u):l[u];else for(o=p.call(l),n=new a;!(r=o.next()).done;u++)n[u]=c?i(o,h,r.value,u):r.value;return n.length=u,n}}()),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,enumerable:!1,value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),s=i.length>>>0,n=arguments[1],r=0;r<s;r++)if(t=i[r],e.call(n,t,r,i))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,writable:!0,enumerable:!1,value:function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),s=i.length>>>0,n=arguments[1],r=0;r<s;r++)if(t=i[r],e.call(n,t,r,i))return r;return-1}})),"undefined"!=typeof FEATURE_NO_ES2016||Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,enumerable:!1,value:function(e){var t=Object(this),i=parseInt(t.length)||0;if(0===i)return!1;var s,n=parseInt(arguments[1])||0;n>=0?s=n:(s=i+n)<0&&(s=0);for(var r;s<i;){if(r=t[s],e===r||e!==e&&r!==r)return!0;s++}return!1}}),"undefined"==typeof FEATURE_NO_ES2015&&(function(){var e=!1;try{var t=Object.keys("a");e=1!==t.length||"0"!==t[0]}catch(t){e=!0}e&&(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=i.length;return function(n){if(void 0===n||null===n)throw TypeError("Cannot convert undefined or null to object");n=Object(n);var r,o,l=[];for(r in n)e.call(n,r)&&l.push(r);if(t)for(o=0;o<s;o++)e.call(n,i[o])&&l.push(i[o]);return l}}())}(),function(e){"assign"in e||e.defineProperty(e,"assign",{configurable:!0,writable:!0,value:function(){var t=e.getOwnPropertySymbols,i=e.propertyIsEnumerable,s=t?function(e){return t(e).filter(i,e)}:function(){return Array.prototype};return function(i){function n(e){i[e]=l[e]}!t||i instanceof e||console.warn("problematic Symbols",i);for(var r=1,o=arguments.length;r<o;++r){var l=arguments[r];null!==l&&void 0!==l&&e.keys(l).concat(s(l)).forEach(n)}return i}}()})}(Object)),"undefined"==typeof FEATURE_NO_ES2015&&function(e){function t(e,t){function s(e){if(!this||this.constructor!==s)return new s(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&i.call(this,e)}return t||b(e,"size",{get:f}),e.constructor=s,s.prototype=e,s}function i(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}function s(e){return this.has(e)&&(this._keys.splice(v,1),this._values.splice(v,1),this._itp.forEach(function(e){v<e[0]&&e[0]--})),-1<v}function n(e){return this.has(e)?this._values[v]:void 0}function r(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(v=e.length;v--&&!y(e[v],t););else v=e.indexOf(t);return-1<v}function o(e){return r.call(this,this._values,e)}function l(e){return r.call(this,this._keys,e)}function a(e,t){return this.has(e)?this._values[v]=t:this._values[this._keys.push(e)-1]=t,this}function d(e){return this.has(e)||this._values.push(e),this}function h(){(this._keys||0).length=this._values.length=0}function c(){return g(this._itp,this._keys)}function u(){return g(this._itp,this._values)}function p(){return g(this._itp,this._keys,this._values)}function m(){return g(this._itp,this._values,this._values)}function g(e,t,i){var s,n=[0],r=!1;return e.push(n),s={},s[Symbol.iterator]=function(){return this},s.next=function(){var s,o=n[0];return!r&&o<t.length?(s=i?[t[o],i[o]]:t[o],n[0]++):(r=!0,e.splice(e.indexOf(n),1)),{done:r,value:s}},s}function f(){return this._values.length}function _(e,t){for(var i=this.entries();;){var s=i.next();if(s.done)break;e.call(t,s.value[1],s.value[0],this)}}var v,b=Object.defineProperty,y=function(e,t){return e===t||e!==e&&t!==t};if("undefined"==typeof WeakMap&&(e.WeakMap=t({delete:s,clear:h,get:n,has:l,set:a},!0)),"undefined"==typeof Map||"function"!=typeof(new Map).values||!(new Map).values().next){var w;e.Map=t((w={delete:s,has:l,get:n,set:a,keys:c,values:u,entries:p,forEach:_,clear:h},w[Symbol.iterator]=p,w))}if("undefined"==typeof Set||"function"!=typeof(new Set).values||!(new Set).values().next){var C;e.Set=t((C={has:o,add:d,delete:s,clear:h,keys:u,values:u,entries:m,forEach:_},C[Symbol.iterator]=u,C))}"undefined"==typeof WeakSet&&(e.WeakSet=t({delete:s,add:d,clear:h,has:o},!0))}(e.PLATFORM.global),"undefined"==typeof FEATURE_NO_ES2015&&function(){var i=Function.prototype.bind;void 0===e.PLATFORM.global.Reflect&&(e.PLATFORM.global.Reflect={}),"function"!=typeof Reflect.defineProperty&&(Reflect.defineProperty=function(e,i,s){if("object"===(void 0===e?"undefined":t(e))?null===e:"function"!=typeof e)throw new TypeError("Reflect.defineProperty called on non-object");try{return Object.defineProperty(e,i,s),!0}catch(e){return!1}}),"function"!=typeof Reflect.construct&&(Reflect.construct=function(e,t){if(t)switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var s=[null];return s.push.apply(s,t),new(i.apply(e,s))}),"function"!=typeof Reflect.ownKeys&&(Reflect.ownKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))})}(),"undefined"==typeof FEATURE_NO_ESNEXT&&function(){var e=Object.freeze({});"function"!=typeof Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(t,i,s){if(i.hasOwnProperty("__metadata__"))return(i.__metadata__[s]||e)[t]}),"function"!=typeof Reflect.defineMetadata&&(Reflect.defineMetadata=function(e,t,i,s){var n=i.hasOwnProperty("__metadata__")?i.__metadata__:i.__metadata__={};(n[s]||(n[s]={}))[e]=t}),"function"!=typeof Reflect.metadata&&(Reflect.metadata=function(e,t){return function(i,s){Reflect.defineMetadata(e,t,i,s)}})}()}),define("aurelia-route-recognizer",["exports","aurelia-path"],function(e,t){"use strict";function i(e,t,i,s){var n=e;"/"===e.charAt(0)&&(n=e.substr(1));for(var r=[],o=n.split("/"),l=0,a=o.length;l<a;++l){var d=o[l],m=d.match(/^:([^?]+)(\?)?$/);if(m){var g=m,f=g[1],_=g[2];if(f.indexOf("=")!==-1)throw new Error("Parameter "+f+" in route "+e+" has a default value, which is not supported.");r.push(new c(f,!!_)),t.push(f),i.dynamics++}else m=d.match(/^\*(.+)$/),m?(r.push(new u(m[1])),t.push(m[1]),i.stars++):""===d?r.push(new p):(r.push(new h(d,s)),i.statics++)}return r}function s(e){return e.sort(function(e,t){if(e.types.stars!==t.types.stars)return e.types.stars-t.types.stars;if(e.types.stars){if(e.types.statics!==t.types.statics)return t.types.statics-e.types.statics;if(e.types.dynamics!==t.types.dynamics)return t.types.dynamics-e.types.dynamics}return e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?t.types.statics-e.types.statics:0})}function n(e,t){for(var i=[],s=0,n=e.length;s<n;s++){var r=e[s];i.push.apply(i,r.match(t))}for(var o=i.filter(function(e){return e.epsilon});o.length>0;)!function(){var e=[];o.forEach(function(t){i.push.apply(i,t.epsilon),e.push.apply(e,t.epsilon)}),o=e.filter(function(e){return e.epsilon})}();return i}function r(e,t,i){for(var s=e.handlers,n=e.regex,r=t.match(n),o=1,l=new m(i),a=0,d=s.length;a<d;a++){for(var h=s[a],c=h.names,u={},p=0,g=c.length;p<g;p++)u[c[p]]=r[o++];l.push({handler:h.handler,params:u,isDynamic:!!c.length})}return l}function o(e,t){var i=e.put({validChars:"/"});return t.eachChar(function(e){i=i.put(e)}),t.optional&&(e.epsilon=e.epsilon||[],e.epsilon.push(i)),i}Object.defineProperty(e,"__esModule",{value:!0}),e.RouteRecognizer=e.EpsilonSegment=e.StarSegment=e.DynamicSegment=e.StaticSegment=e.State=void 0;var l=e.State=function(){function e(e){this.charSpec=e,this.nextStates=[]}return e.prototype.get=function(e){for(var t=this.nextStates,i=Array.isArray(t),s=0,t=i?t:t[Symbol.iterator]();;){var n;if(i){if(s>=t.length)break;n=t[s++]}else{if(s=t.next(),s.done)break;n=s.value}var r=n;if(r.charSpec.validChars===e.validChars&&r.charSpec.invalidChars===e.invalidChars)return r}},e.prototype.put=function(t){var i=this.get(t);return i||(i=new e(t),this.nextStates.push(i),t.repeat&&i.nextStates.push(i),i)},e.prototype.match=function(e){for(var t=this.nextStates,i=[],s=0,n=t.length;s<n;s++){var r=t[s],o=r.charSpec;void 0!==o.validChars?o.validChars.indexOf(e)!==-1&&i.push(r):void 0!==o.invalidChars&&o.invalidChars.indexOf(e)===-1&&i.push(r)}return i},e}(),a=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],d=new RegExp("(\\"+a.join("|\\")+")","g"),h=e.StaticSegment=function(){function e(e,t){this.string=e,this.caseSensitive=t}return e.prototype.eachChar=function(e){for(var t=this.string,i=0,s=t.length;i<s;++i){var n=t[i];e({validChars:this.caseSensitive?n:n.toUpperCase()+n.toLowerCase()})}},e.prototype.regex=function(){return this.string.replace(d,"\\$1")},e.prototype.generate=function(){return this.string},e}(),c=e.DynamicSegment=function(){function e(e,t){this.name=e,this.optional=t}return e.prototype.eachChar=function(e){e({invalidChars:"/",repeat:!0})},e.prototype.regex=function(){return this.optional?"([^/]+)?":"([^/]+)"},e.prototype.generate=function(e,t){return t[this.name]=!0,e[this.name]},e}(),u=e.StarSegment=function(){function e(e){this.name=e}return e.prototype.eachChar=function(e){e({invalidChars:"",repeat:!0})},e.prototype.regex=function(){return"(.+)"},e.prototype.generate=function(e,t){return t[this.name]=!0,e[this.name]},e}(),p=e.EpsilonSegment=function(){function e(){}return e.prototype.eachChar=function(){},e.prototype.regex=function(){return""},e.prototype.generate=function(){return""},e}(),m=(e.RouteRecognizer=function(){function e(){this.rootState=new l,this.names={}}return e.prototype.add=function(e){var t=this;if(Array.isArray(e))return void e.forEach(function(e){return t.add(e)});for(var s=this.rootState,n="^",r={statics:0,dynamics:0,stars:0},l=[],a=e.handler.name,d=!0,h=!0,c=i(e.path,l,r,e.caseSensitive),u=0,m=c.length;u<m;u++){var g=c[u];g instanceof p||(d=!1,h=h&&g.optional,s=o(s,g),n+=g.optional?"/?":"/",n+=g.regex())}if(h)if(d)s=s.put({validChars:"/"}),n+="/";else{var f=this.rootState.put({validChars:"/"});s.epsilon=[f],s=f}var _=[{handler:e.handler,names:l}];if(a)for(var v=Array.isArray(a)?a:[a],b=0;b<v.length;b++)this.names[v[b]]={segments:c,handlers:_};return s.handlers=_,s.regex=new RegExp(n+"$",e.caseSensitive?"":"i"),s.types=r,s},e.prototype.handlersFor=function(e){var t=this.names[e];if(!t)throw new Error("There is no route named "+e);return[].concat(t.handlers)},e.prototype.hasRoute=function(e){return!!this.names[e]},e.prototype.generate=function(e,i){var s=this.names[e];if(!s)throw new Error("There is no route named "+e);var n=s.handlers[0].handler;if(n.generationUsesHref)return n.href;for(var r=Object.assign({},i),o=s.segments,l={},a="",d=0,h=o.length;d<h;d++){var c=o[d];if(!(c instanceof p)){var u=c.generate(r,l);if(null===u||void 0===u){if(!c.optional)throw new Error("A value is required for route parameter '"+c.name+"' in route '"+e+"'.")}else a+="/",a+=u}}"/"!==a.charAt(0)&&(a="/"+a);for(var m in l)delete r[m];var g=(0,t.buildQueryString)(r);return a+=g?"?"+g:""},e.prototype.recognize=function(e){var i=[this.rootState],o={},l=!1,a=e,d=a.indexOf("?");if(d!==-1){var h=a.substr(d+1,a.length);a=a.substr(0,d),o=(0,t.parseQueryString)(h)}a=decodeURI(a),"/"!==a.charAt(0)&&(a="/"+a);var c=a.length;c>1&&"/"===a.charAt(c-1)&&(a=a.substr(0,c-1),l=!0);for(var u=0,p=a.length;u<p&&(i=n(i,a.charAt(u)),i.length);u++);for(var m=[],g=0,f=i.length;g<f;g++)i[g].handlers&&m.push(i[g]);i=s(m);var _=m[0];if(_&&_.handlers)return l&&"(.+)$"===_.regex.source.slice(-5)&&(a+="/"),r(_,a,o)},e}(),function(e){this.splice=Array.prototype.splice,this.slice=Array.prototype.slice,this.push=Array.prototype.push,this.length=0,this.queryParams=e||{}})}),define("aurelia-router",["exports","aurelia-logging","aurelia-route-recognizer","aurelia-dependency-injection","aurelia-history","aurelia-event-aggregator"],function(e,t,i,s,n,r){"use strict";function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];return t||"#"===e[0]||(e="#"+e),t&&i&&(e=e.substring(1,e.length)),e}function d(e,t,i,s){if(L.test(e))return e;var n="";return t.length&&"/"!==t[0]&&(n+="/"),n+=t,n.length&&"/"===n[n.length-1]||"/"===e[0]||(n+="/"),n.length&&"/"===n[n.length-1]&&"/"===e[0]&&(n=n.substring(0,n.length-1)),a(n+e,i,s)}function h(e,t,i){return A.test(e)?a(e,i):d(e,t,i)}function c(e,t){return function(e){return Promise.resolve({status:t,output:e,completed:t===N.completed})}}function u(e){e.previousInstruction=null,e.plan=null}function p(e){return e&&"function"==typeof e.navigate}function m(e,t){var i=e.previousInstruction,s=e.config,n={};if("redirect"in s){var r=h(s.redirect,f(e));return e.queryString&&(r+="?"+e.queryString),Promise.reject(new U(r))}if(i){var o=g(i,e),l=[];for(var a in i.viewPortInstructions)!function(r){var a=i.viewPortInstructions[r],d=s.viewPorts[r];if(!d)throw new Error('Invalid Route Config: Configuration for viewPort "'+r+'" was not found for route: "'+e.config.route+'."');var h=n[r]={name:r,config:d,prevComponent:a.component,prevModuleId:a.moduleId};if(a.moduleId!==d.moduleId)h.strategy=W.replace;else if("determineActivationStrategy"in a.component.viewModel){var c;h.strategy=(c=a.component.viewModel).determineActivationStrategy.apply(c,e.lifecycleArgs)}else s.activationStrategy?h.strategy=s.activationStrategy:h.strategy=o||t?W.invokeLifecycle:W.noChange;if(h.strategy!==W.replace&&a.childRouter){var u=e.getWildcardPath(),p=a.childRouter._createNavigationInstruction(u,e).then(function(e){return h.childNavigationInstruction=e,m(e,h.strategy===W.invokeLifecycle).then(function(t){e.plan=t})});l.push(p)}}(a);return Promise.all(l).then(function(){return n})}for(var d in s.viewPorts)n[d]={name:d,strategy:W.replace,config:e.config.viewPorts[d]};return Promise.resolve(n)}function g(e,t){var i=e.params,s=t.params,n=t.config.hasChildRouter?t.getWildCardName():null;for(var r in s)if(r!==n&&i[r]!==s[r])return!0;for(var o in i)if(o!==n&&i[o]!==s[o])return!0;if(!t.options.compareQueryParams)return!1;var l=e.queryParams,a=t.queryParams;for(var d in a)if(l[d]!==a[d])return!0;for(var h in l)if(l[h]!==a[h])return!0;return!1}function f(e){var t=[];for(e=e.parentInstruction;e;)t.unshift(e.getBaseUrl()),e=e.parentInstruction;return t.unshift("/"),t.join("")}function _(e,t){if("object"!==(void 0===e?"undefined":E(e)))throw new Error("Invalid Route Config");if("string"!=typeof e.route){var i=e.name||"(no name)";throw new Error('Invalid Route Config for "'+i+'": You must specify a "route:" pattern.')}if(!("redirect"in e||e.moduleId||e.navigationStrategy||e.viewPorts))throw new Error('Invalid Route Config for "'+e.route+'": You must specify a "moduleId:", "redirect:", "navigationStrategy:", or "viewPorts:".')}function v(e,t,i){return Promise.resolve(t.call(i,e)).then(function(){return"viewPorts"in e.config||(e.config.viewPorts={default:{moduleId:e.config.moduleId}}),e})}function b(e,t,i,s){function n(e){return s||S(e)?r():i.cancel(e)}function r(){if(l--)try{return T(o[l][t](),n,i.cancel)}catch(e){return i.cancel(e)}return i()}var o=y(e,t),l=o.length;return r()}function y(e,t){var i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];for(var s in e){var n=e[s],r=n.prevComponent;if((n.strategy===W.invokeLifecycle||n.strategy===W.replace)&&r){var o=r.viewModel;t in o&&i.push(o)}n.childNavigationInstruction?y(n.childNavigationInstruction.plan,t,i):r&&w(r,t,i)}return i}function w(e,t,i){var s=e.childRouter;if(s&&s.currentInstruction){var n=s.currentInstruction.viewPortInstructions;for(var r in n){var o=n[r],l=o.component,a=l.viewModel;t in a&&i.push(a),w(l,t,i)}}}function C(e,t,i,s){function n(e,t){return s||S(e,t)?r():i.cancel(e)}function r(){if(++a<l)try{var e=function(){var e,s=o[a];return{v:T((e=s.viewModel)[t].apply(e,s.lifecycleArgs),function(e){return n(e,s.router)},i.cancel)}}();if("object"===(void 0===e?"undefined":E(e)))return e.v}catch(e){return i.cancel(e)}return i()}var o=x(e,t),l=o.length,a=-1;return r()}function x(e,t){var i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],s=arguments[3],n=e.plan;return Object.keys(n).filter(function(r){var o=n[r],l=e.viewPortInstructions[r],a=l.component.viewModel;(o.strategy===W.invokeLifecycle||o.strategy===W.replace)&&t in a&&i.push({viewModel:a,lifecycleArgs:l.lifecycleArgs,router:s}),o.childNavigationInstruction&&x(o.childNavigationInstruction,t,i,l.component.childRouter||s)}),i}function S(e,t){return!(e instanceof Error)&&(p(e)?("function"==typeof e.setRouter&&e.setRouter(t),!!e.shouldContinueProcessing):void 0===e||e)}function T(e,t,i){if(e&&"function"==typeof e.then)return Promise.resolve(e).then(t).catch(i);if(e&&"function"==typeof e.subscribe){var s=function(){var s=e;return{v:new J(function(n){return s.subscribe({next:function(){n.subscribed&&(n.unsubscribe(),t(e))},error:function(e){n.subscribed&&(n.unsubscribe(),i(e))},complete:function(){n.subscribed&&(n.unsubscribe(),t(e))}})})}}();if("object"===(void 0===s?"undefined":E(s)))return s.v}try{return t(e)}catch(e){return i(e)}}function k(e,t){var i=D(t),s=i.map(function(t){return I(e,t.navigationInstruction,t.viewPortPlan)});return Promise.all(s)}function D(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=e.plan;for(var s in i){var n=i[s];if(n.strategy===W.replace)t.push({viewPortPlan:n,navigationInstruction:e}),n.childNavigationInstruction&&D(n.childNavigationInstruction,t);else{var r=e.addViewPortInstruction(s,n.strategy,n.prevModuleId,n.prevComponent);n.childNavigationInstruction&&(r.childNavigationInstruction=n.childNavigationInstruction,D(n.childNavigationInstruction,t))}}return t}function I(e,t,i){var s=i.config.moduleId;return O(e,t,i.config).then(function(n){var r=t.addViewPortInstruction(i.name,i.strategy,s,n),o=n.childRouter;if(o){var l=t.getWildcardPath();return o._createNavigationInstruction(l,t).then(function(t){return i.childNavigationInstruction=t,m(t).then(function(i){return t.plan=i,r.childNavigationInstruction=t,k(e,t)})})}})}function O(e,t,i){var s=t.router,n=t.lifecycleArgs;return e.loadRoute(s,i,t).then(function(e){var t=e.viewModel,r=e.childContainer;if(e.router=s,e.config=i,"configureRouter"in t){var o=function(){var i=r.getChildRouter();return e.childRouter=i,{v:i.configure(function(e){return t.configureRouter.apply(t,[e,i].concat(n))}).then(function(){return e})}}();if("object"===(void 0===o?"undefined":E(o)))return o.v}return e})}function R(e,t,i,s){t&&"completed"in t&&"output"in t||(t=t||{},t.output=new Error("Expected router pipeline to return a navigation result, but got ["+JSON.stringify(t)+"] instead."));var n=null;return p(t.output)?t.output.navigate(s):(n=t,t.completed||(t.output instanceof Error&&se.error(t.output),M(s))),s._dequeueInstruction(i+1).then(function(e){return n||e||t})}function P(e,t,i,s){e.resolve(t);var n={instruction:e,result:t};if(i)s.events.publish("router:navigation:child:complete",n);else{s.isNavigating=!1,s.isExplicitNavigation=!1,s.isExplicitNavigationBack=!1;var r=void 0;if(t.output instanceof Error)r="error";else if(t.completed){var o=e.queryString?"?"+e.queryString:"";s.history.previousLocation=e.fragment+o,r="success"}else r="canceled";s.events.publish("router:navigation:"+r,n),s.events.publish("router:navigation:complete",n)}return t}function M(e){e.history.previousLocation?e.navigate(e.history.previousLocation,{trigger:!1,replace:!0}):e.fallbackRoute?e.navigate(e.fallbackRoute,{trigger:!0,replace:!0}):se.error("Router navigation failed, and no previous location or fallbackRoute could be restored.")}Object.defineProperty(e,"__esModule",{value:!0}),e.AppRouter=e.PipelineProvider=e.LoadRouteStep=e.RouteLoader=e.ActivateNextStep=e.DeactivatePreviousStep=e.CanActivateNextStep=e.CanDeactivatePreviousStep=e.Router=e.BuildNavigationPlanStep=e.activationStrategy=e.RouterConfiguration=e.RedirectToRoute=e.Redirect=e.NavModel=e.NavigationInstruction=e.CommitChangesStep=e.Pipeline=e.pipelineStatus=void 0,e._normalizeAbsolutePath=a,e._createRootedPath=d,e._resolveUrl=h,e.isNavigationCommand=p,e._buildNavigationPlan=m;var j=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(t),E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},F=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),A=/^#?\//,L=/^([a-z][a-z0-9+\-.]*:)?\/\//i,N=e.pipelineStatus={completed:"completed",canceled:"canceled",rejected:"rejected",running:"running"},V=e.Pipeline=function(){function e(){this.steps=[]}return e.prototype.addStep=function(e){var t=void 0;if("function"==typeof e)t=e;else{if("function"==typeof e.getSteps){for(var i=e.getSteps(),s=0,n=i.length;s<n;s++)this.addStep(i[s]);return this}t=e.run.bind(e)}return this.steps.push(t),this},e.prototype.run=function(e){function t(){if(!(++i<s.length))return t.complete();var n=s[i];try{return n(e,t)}catch(e){return t.reject(e)}}var i=-1,s=this.steps;return t.complete=c(t,N.completed),t.cancel=c(t,N.canceled),t.reject=c(t,N.rejected),t()},e}(),z=e.CommitChangesStep=function(){function e(){}return e.prototype.run=function(e,t){return e._commitChanges(!0).then(function(){return e._updateTitle(),t()})},e}(),H=e.NavigationInstruction=function(){function e(e){this.plan=null,this.options={},Object.assign(this,e),this.params=this.params||{},this.viewPortInstructions={};var t=[],i=this;do{var s=Object.assign({},i.params);i.config&&i.config.hasChildRouter&&delete s[i.getWildCardName()],t.unshift(s),i=i.parentInstruction}while(i);var n=Object.assign.apply(Object,[{},this.queryParams].concat(t));this.lifecycleArgs=[n,this.config,this]}return e.prototype.getAllInstructions=function(){var e=[this];for(var t in this.viewPortInstructions){var i=this.viewPortInstructions[t].childNavigationInstruction;i&&e.push.apply(e,i.getAllInstructions())}return e},e.prototype.getAllPreviousInstructions=function(){return this.getAllInstructions().map(function(e){return e.previousInstruction}).filter(function(e){return e})},e.prototype.addViewPortInstruction=function(e,t,i,s){return this.viewPortInstructions[e]={name:e,strategy:t,moduleId:i,component:s,childRouter:s.childRouter,lifecycleArgs:this.lifecycleArgs.slice()}},e.prototype.getWildCardName=function(){var e=this.config.route.lastIndexOf("*");return this.config.route.substr(e+1)},e.prototype.getWildcardPath=function(){var e=this.getWildCardName(),t=this.params[e]||"";return this.queryString&&(t+="?"+this.queryString),t},e.prototype.getBaseUrl=function(){var e=this,t=this.fragment;if(""===t){var i=this.router.routes.find(function(t){return t.name===e.config.name&&""!==t.route});i&&(t=i.route)}if(!this.params)return t;var s=this.getWildCardName(),n=this.params[s]||"";return n?(n=encodeURI(n),t.substr(0,t.lastIndexOf(n))):t},e.prototype._commitChanges=function(e){var t=this,i=this.router;i.currentInstruction=this,this.previousInstruction&&(this.previousInstruction.config.navModel.isActive=!1),this.config.navModel.isActive=!0,i._refreshBaseUrl(),i.refreshNavigation();var s=[],n=[];for(var r in this.viewPortInstructions)!function(r){var o=t.viewPortInstructions[r],l=i.viewPorts[r];if(!l)throw new Error("There was no router-view found in the view for "+o.moduleId+".");o.strategy===W.replace?(e&&n.push({viewPort:l,viewPortInstruction:o}),s.push(l.process(o,e).then(function(e){if(o.childNavigationInstruction)return o.childNavigationInstruction._commitChanges()}))):o.childNavigationInstruction&&s.push(o.childNavigationInstruction._commitChanges(e))}(r);return Promise.all(s).then(function(){return n.forEach(function(e){return e.viewPort.swap(e.viewPortInstruction)}),null}).then(function(){return u(t)})},e.prototype._updateTitle=function(){var e=this._buildTitle();e&&this.router.history.setTitle(e)},e.prototype._buildTitle=function(){var e=arguments.length<=0||void 0===arguments[0]?" | ":arguments[0],t="",i=[];this.config.navModel.title&&(t=this.router.transformTitle(this.config.navModel.title));for(var s in this.viewPortInstructions){var n=this.viewPortInstructions[s];if(n.childNavigationInstruction){var r=n.childNavigationInstruction._buildTitle(e);r&&i.push(r)}}return i.length&&(t=i.join(e)+(t?e:"")+t),this.router.title&&(t+=(t?e:"")+this.router.transformTitle(this.router.title)),t},e}(),B=e.NavModel=function(){function e(e,t){this.isActive=!1,this.title=null,this.href=null,this.relativeHref=null,this.settings={},this.config=null,this.router=e,this.relativeHref=t}return e.prototype.setTitle=function(e){this.title=e,this.isActive&&this.router.updateTitle()},e}(),U=e.Redirect=function(){function e(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.url=e,this.options=Object.assign({trigger:!0,replace:!0},t),this.shouldContinueProcessing=!1}return e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigate(this.url,this.options)},e}(),q=(e.RedirectToRoute=function(){function e(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];this.route=e,this.params=t,this.options=Object.assign({trigger:!0,replace:!0},i),this.shouldContinueProcessing=!1}return e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigateToRoute(this.route,this.params,this.options)},e}(),e.RouterConfiguration=function(){function e(){this.instructions=[],this.options={},this.pipelineSteps=[]}return e.prototype.addPipelineStep=function(e,t){return this.pipelineSteps.push({name:e,step:t}),this},e.prototype.addAuthorizeStep=function(e){return this.addPipelineStep("authorize",e)},e.prototype.addPreActivateStep=function(e){return this.addPipelineStep("preActivate",e)},e.prototype.addPreRenderStep=function(e){return this.addPipelineStep("preRender",e)},e.prototype.addPostRenderStep=function(e){return this.addPipelineStep("postRender",e)},e.prototype.fallbackRoute=function(e){return this._fallbackRoute=e,this},e.prototype.map=function(e){return Array.isArray(e)?(e.forEach(this.map.bind(this)),this):this.mapRoute(e)},e.prototype.mapRoute=function(e){return this.instructions.push(function(t){var i=[];if(Array.isArray(e.route))for(var s=0,n=e.route.length;s<n;++s){var r=Object.assign({},e);r.route=e.route[s],i.push(r)}else i.push(Object.assign({},e));for(var o=void 0,l=0,a=i.length;l<a;++l){var d=i[l];d.settings=d.settings||{},o||(o=t.createNavModel(d)),t.addRoute(d,o)}}),this},e.prototype.mapUnknownRoutes=function(e){return this.unknownRouteConfig=e,this},e.prototype.exportToRouter=function(e){for(var t=this.instructions,i=0,s=t.length;i<s;++i)t[i](e);this.title&&(e.title=this.title),this.unknownRouteConfig&&e.handleUnknownRoutes(this.unknownRouteConfig),this._fallbackRoute&&(e.fallbackRoute=this._fallbackRoute),e.options=this.options;var n=this.pipelineSteps;if(n.length){if(!e.isRoot)throw new Error("Pipeline steps can only be added to the root router");for(var r=e.pipelineProvider,o=0,l=n.length;o<l;++o){var a=n[o],d=a.name,h=a.step;r.addStep(d,h)}}},e}()),W=e.activationStrategy={noChange:"no-change",invokeLifecycle:"invoke-lifecycle",replace:"replace"},$=e.BuildNavigationPlanStep=function(){function e(){}return e.prototype.run=function(e,t){return m(e).then(function(i){return e.plan=i,t()}).catch(t.cancel)},e}(),G=e.Router=function(){function e(e,t){var i=this;this.parent=null,this.options={},this.transformTitle=function(e){return i.parent?i.parent.transformTitle(e):e},this.container=e,this.history=t,this.reset()}return e.prototype.reset=function(){var e=this;this.viewPorts={},this.routes=[],this.baseUrl="",this.isConfigured=!1,this.isNavigating=!1,this.isExplicitNavigation=!1,
this.isExplicitNavigationBack=!1,this.navigation=[],this.currentInstruction=null,this._fallbackOrder=100,this._recognizer=new i.RouteRecognizer,this._childRecognizer=new i.RouteRecognizer,this._configuredPromise=new Promise(function(t){e._resolveConfiguredPromise=t})},e.prototype.registerViewPort=function(e,t){t=t||"default",this.viewPorts[t]=e},e.prototype.ensureConfigured=function(){return this._configuredPromise},e.prototype.configure=function(e){var t=this;this.isConfigured=!0;var i=e,s=void 0;return"function"==typeof e&&(s=new q,i=e(s)),Promise.resolve(i).then(function(e){e&&e.exportToRouter&&(s=e),s.exportToRouter(t),t.isConfigured=!0,t._resolveConfiguredPromise()})},e.prototype.navigate=function(e,t){return!this.isConfigured&&this.parent?this.parent.navigate(e,t):(this.isExplicitNavigation=!0,this.history.navigate(h(e,this.baseUrl,this.history._hasPushState),t))},e.prototype.navigateToRoute=function(e,t,i){var s=this.generate(e,t);return this.navigate(s,i)},e.prototype.navigateBack=function(){this.isExplicitNavigationBack=!0,this.history.navigateBack()},e.prototype.createChild=function(t){var i=new e(t||this.container.createChild(),this.history);return i.parent=this,i},e.prototype.generate=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=this._recognizer.hasRoute(e);if((!this.isConfigured||!s)&&this.parent)return this.parent.generate(e,t);if(!s)throw new Error("A route with name '"+e+"' could not be found. Check that `name: '"+e+"'` was specified in the route's config.");var n=this._recognizer.generate(e,t),r=d(n,this.baseUrl,this.history._hasPushState,i.absolute);return i.absolute?""+this.history.getAbsoluteRoot()+r:r},e.prototype.createNavModel=function(e){var t=new B(this,"href"in e?e.href:e.route);return t.title=e.title,t.order=e.nav,t.href=e.href,t.settings=e.settings,t.config=e,t},e.prototype.addRoute=function(e,t){_(e,this.routes),"viewPorts"in e||e.navigationStrategy||(e.viewPorts={default:{moduleId:e.moduleId,view:e.view}}),t||(t=this.createNavModel(e)),this.routes.push(e);var i=e.route;"/"===i.charAt(0)&&(i=i.substr(1));var s=e.caseSensitive===!0,n=this._recognizer.add({path:i,handler:e,caseSensitive:s});if(i){var r=e.settings;delete e.settings;var o=JSON.parse(JSON.stringify(e));e.settings=r,o.route=i+"/*childRoute",o.hasChildRouter=!0,this._childRecognizer.add({path:o.route,handler:o,caseSensitive:s}),o.navModel=t,o.settings=e.settings,o.navigationStrategy=e.navigationStrategy}if(e.navModel=t,(t.order||0===t.order)&&this.navigation.indexOf(t)===-1){if(!t.href&&""!==t.href&&(n.types.dynamics||n.types.stars))throw new Error('Invalid route config for "'+e.route+'" : dynamic routes must specify an "href:" to be included in the navigation model.');"number"!=typeof t.order&&(t.order=++this._fallbackOrder),this.navigation.push(t),this.navigation=this.navigation.sort(function(e,t){return e.order-t.order})}},e.prototype.hasRoute=function(e){return!!(this._recognizer.hasRoute(e)||this.parent&&this.parent.hasRoute(e))},e.prototype.hasOwnRoute=function(e){return this._recognizer.hasRoute(e)},e.prototype.handleUnknownRoutes=function(e){var t=this;if(!e)throw new Error("Invalid unknown route handler");this.catchAllHandler=function(i){return t._createRouteConfig(e,i).then(function(e){return i.config=e,i})}},e.prototype.updateTitle=function(){if(this.parent)return this.parent.updateTitle();this.currentInstruction&&this.currentInstruction._updateTitle()},e.prototype.refreshNavigation=function(){for(var e=this.navigation,t=0,i=e.length;t<i;t++){var s=e[t];s.config.href?s.href=a(s.config.href,this.history._hasPushState):s.href=d(s.relativeHref,this.baseUrl,this.history._hasPushState)}},e.prototype._refreshBaseUrl=function(){if(this.parent){var e=this.parent.currentInstruction.getBaseUrl();this.baseUrl=this.parent.baseUrl+e}},e.prototype._createNavigationInstruction=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=e,s="",n=e.indexOf("?");n!==-1&&(i=e.substr(0,n),s=e.substr(n+1));var r=this._recognizer.recognize(e);r&&r.length||(r=this._childRecognizer.recognize(e));var o={fragment:i,queryString:s,config:null,parentInstruction:t,previousInstruction:this.currentInstruction,router:this,options:{compareQueryParams:this.options.compareQueryParams}};if(r&&r.length){var l=r[0],a=new H(Object.assign({},o,{params:l.params,queryParams:l.queryParams||r.queryParams,config:l.config||l.handler}));return"function"==typeof l.handler?v(a,l.handler,l):l.handler&&"function"==typeof l.handler.navigationStrategy?v(a,l.handler.navigationStrategy,l.handler):Promise.resolve(a)}if(this.catchAllHandler){return v(new H(Object.assign({},o,{params:{path:i},queryParams:r&&r.queryParams,config:null})),this.catchAllHandler)}return Promise.reject(new Error("Route not found: "+e))},e.prototype._createRouteConfig=function(e,t){var i=this;return Promise.resolve(e).then(function(e){return"string"==typeof e?{moduleId:e}:"function"==typeof e?e(t):e}).then(function(e){return"string"==typeof e?{moduleId:e}:e}).then(function(e){return e.route=t.params.path,_(e,i.routes),e.navModel||(e.navModel=i.createNavModel(e)),e})},F(e,[{key:"isRoot",get:function(){return!this.parent}}]),e}(),K=e.CanDeactivatePreviousStep=function(){function e(){}return e.prototype.run=function(e,t){return b(e.plan,"canDeactivate",t)},e}(),Y=e.CanActivateNextStep=function(){function e(){}return e.prototype.run=function(e,t){return C(e,"canActivate",t)},e}(),Q=e.DeactivatePreviousStep=function(){function e(){}return e.prototype.run=function(e,t){return b(e.plan,"deactivate",t,!0)},e}(),X=e.ActivateNextStep=function(){function e(){}return e.prototype.run=function(e,t){return C(e,"activate",t,!0)},e}(),J=function(){function e(e){this._subscribed=!0,this._subscription=e(this),this._subscribed||this.unsubscribe()}return e.prototype.unsubscribe=function(){this._subscribed&&this._subscription&&this._subscription.unsubscribe(),this._subscribed=!1},F(e,[{key:"subscribed",get:function(){return this._subscribed}}]),e}(),Z=e.RouteLoader=function(){function e(){}return e.prototype.loadRoute=function(e,t,i){throw Error('Route loaders must implement "loadRoute(router, config, navigationInstruction)".')},e}(),ee=e.LoadRouteStep=function(){function e(e){this.routeLoader=e}return e.inject=function(){return[Z]},e.prototype.run=function(e,t){return k(this.routeLoader,e).then(t).catch(t.cancel)},e}(),te=function(){function e(e,t,i){this.steps=[],this.container=e,this.slotName=t,this.slotAlias=i}return e.prototype.getSteps=function(){var e=this;return this.steps.map(function(t){return e.container.get(t)})},e}(),ie=e.PipelineProvider=function(){function e(e){this.container=e,this.steps=[$,K,ee,this._createPipelineSlot("authorize"),Y,this._createPipelineSlot("preActivate","modelbind"),Q,X,this._createPipelineSlot("preRender","precommit"),z,this._createPipelineSlot("postRender","postcomplete")]}return e.inject=function(){return[s.Container]},e.prototype.createPipeline=function(){var e=this,t=new V;return this.steps.forEach(function(i){return t.addStep(e.container.get(i))}),t},e.prototype._findStep=function(e){return this.steps.find(function(t){return t.slotName===e||t.slotAlias===e})},e.prototype.addStep=function(e,t){var i=this._findStep(e);if(!i)throw new Error("Invalid pipeline slot name: "+e+".");i.steps.includes(t)||i.steps.push(t)},e.prototype.removeStep=function(e,t){var i=this._findStep(e);i&&i.steps.splice(i.steps.indexOf(t),1)},e.prototype._clearSteps=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=this._findStep(e);t&&(t.steps=[])},e.prototype.reset=function(){this._clearSteps("authorize"),this._clearSteps("preActivate"),this._clearSteps("preRender"),this._clearSteps("postRender")},e.prototype._createPipelineSlot=function(e,t){return new te(this.container,e,t)},e}(),se=j.getLogger("app-router");e.AppRouter=function(e){function t(t,i,s,n){var r=o(this,e.call(this,t,i));return r.pipelineProvider=s,r.events=n,r}return l(t,e),t.inject=function(){return[s.Container,n.History,ie,r.EventAggregator]},t.prototype.reset=function(){e.prototype.reset.call(this),this.maxInstructionCount=10,this._queue?this._queue.length=0:this._queue=[]},t.prototype.loadUrl=function(e){var t=this;return this._createNavigationInstruction(e).then(function(e){return t._queueInstruction(e)}).catch(function(e){se.error(e),M(t)})},t.prototype.registerViewPort=function(t,i){var s=this;if(e.prototype.registerViewPort.call(this,t,i),this.isActive)this._dequeueInstruction();else{var n=function(){var e=s._findViewModel(t);if("configureRouter"in e){if(!s.isConfigured){var i=function(){var t=s._resolveConfiguredPromise;return s._resolveConfiguredPromise=function(){},{v:{v:s.configure(function(t){return e.configureRouter(t,s)}).then(function(){s.activate(),t()})}}}();if("object"===(void 0===i?"undefined":E(i)))return i.v}}else s.activate()}();if("object"===(void 0===n?"undefined":E(n)))return n.v}return Promise.resolve()},t.prototype.activate=function(e){this.isActive||(this.isActive=!0,this.options=Object.assign({routeHandler:this.loadUrl.bind(this)},this.options,e),this.history.activate(this.options),this._dequeueInstruction())},t.prototype.deactivate=function(){this.isActive=!1,this.history.deactivate()},t.prototype._queueInstruction=function(e){var t=this;return new Promise(function(i){e.resolve=i,t._queue.unshift(e),t._dequeueInstruction()})},t.prototype._dequeueInstruction=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return Promise.resolve().then(function(){if(!e.isNavigating||t){var i=e._queue.shift();if(e._queue.length=0,i){if(e.isNavigating=!0,i.previousInstruction=e.currentInstruction,t){if(t===e.maxInstructionCount-1)return se.error(t+1+" navigation instructions have been attempted without success. Restoring last known good location."),M(e),e._dequeueInstruction(t+1);if(t>e.maxInstructionCount)throw new Error("Maximum navigation attempts exceeded. Giving up.")}else e.events.publish("router:navigation:processing",{instruction:i});return e.pipelineProvider.createPipeline().run(i).then(function(s){return R(i,s,t,e)}).catch(function(e){return{output:e instanceof Error?e:new Error(e)}}).then(function(s){return P(i,s,!!t,e)})}}})},t.prototype._findViewModel=function(e){if(this.container.viewModel)return this.container.viewModel;if(e.container)for(var t=e.container;t;){if(t.viewModel)return this.container.viewModel=t.viewModel,t.viewModel;t=t.parent}},t}(G)}),define("aurelia-task-queue",["exports","aurelia-pal"],function(e,t){"use strict";function i(e){var i=1,s=t.DOM.createMutationObserver(e),n=t.DOM.createTextNode("");return s.observe(n,{characterData:!0}),function(){i=-i,n.data=i}}function s(e){return function(){function t(){clearTimeout(i),clearInterval(s),e()}var i=setTimeout(t,0),s=setInterval(t,50)}}function n(e,t,i){i&&t.stack&&"object"===(void 0===e?"undefined":a(e))&&null!==e&&(e.stack=l(e.stack)+t.stack),"onError"in t?t.onError(e):d?setImmediate(function(){throw e}):setTimeout(function(){throw e},0)}function r(){var e=new Error;if(e.stack)return e.stack;try{throw e}catch(e){return e.stack}}function o(e){return e.replace(/^[\s\S]*?\bqueue(Micro)?Task\b[^\n]*\n/,"")}function l(e){var t=e.lastIndexOf("flushMicroTaskQueue");return t<0&&(t=e.lastIndexOf("flushTaskQueue"))<0?e:(t=e.lastIndexOf("\n",t),t<0?e:e.substr(0,t))}Object.defineProperty(e,"__esModule",{value:!0}),e.TaskQueue=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d="function"==typeof setImmediate;e.TaskQueue=function(){function e(){var e=this;this.flushing=!1,this.longStacks=!1,this.microTaskQueue=[],this.microTaskQueueCapacity=1024,this.taskQueue=[],t.FEATURE.mutationObserver?this.requestFlushMicroTaskQueue=i(function(){return e.flushMicroTaskQueue()}):this.requestFlushMicroTaskQueue=s(function(){return e.flushMicroTaskQueue()}),this.requestFlushTaskQueue=s(function(){return e.flushTaskQueue()})}return e.prototype.queueMicroTask=function(e){this.microTaskQueue.length<1&&this.requestFlushMicroTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in MicroTaskQueue by:\n")),this.microTaskQueue.push(e)},e.prototype.queueTask=function(e){this.taskQueue.length<1&&this.requestFlushTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in TaskQueue by:\n")),this.taskQueue.push(e)},e.prototype.flushTaskQueue=function(){var e=this.taskQueue,t=0,i=void 0;this.taskQueue=[];try{for(this.flushing=!0;t<e.length;)i=e[t],this.longStacks&&(this.stack="string"==typeof i.stack?i.stack:void 0),i.call(),t++}catch(e){n(e,i,this.longStacks)}finally{this.flushing=!1}},e.prototype.flushMicroTaskQueue=function(){var e=this.microTaskQueue,t=this.microTaskQueueCapacity,i=0,s=void 0;try{for(this.flushing=!0;i<e.length;)if(s=e[i],this.longStacks&&(this.stack="string"==typeof s.stack?s.stack:void 0),s.call(),++i>t){for(var r=0,o=e.length-i;r<o;r++)e[r]=e[r+i];e.length-=i,i=0}}catch(e){n(e,s,this.longStacks)}finally{this.flushing=!1}e.length=0},e.prototype.prepareQueueStack=function(e){var t=e+o(r());return"string"==typeof this.stack&&(t=l(t)+this.stack),t},e}()}),define("aurelia-templating",["exports","aurelia-logging","aurelia-metadata","aurelia-pal","aurelia-path","aurelia-loader","aurelia-dependency-injection","aurelia-binding","aurelia-task-queue"],function(e,t,i,s,n,r,o,l,a){"use strict";function d(e){return"-"+e.toLowerCase()}function h(e){return(e.charAt(0).toLowerCase()+e.slice(1)).replace(We,d)}function c(e){return!(e.auInterpolationTarget||/[^\t\n\r ]/.test(e.textContent))}function u(e){var t=function(e){i.metadata.define(i.metadata.resource,new $e,e)};return e?t(e):t}function p(e){throw new Error("BindingLanguage must implement "+e+"().")}function m(e,t,i,s){if(t){var n=e[t];if(n){if(n!==i)throw new Error("Attempted to register "+s+" when one with the same name already exists. Name: "+t+".")}else e[t]=i}}function g(e){if(void 0!==e.animatableElement)return e.animatableElement;for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t&&1===t.nodeType?e.animatableElement=t.classList.contains("au-animate")?t:null:e.animatableElement=null}function f(e){if(e===s.DOM.Element)return this.element;if(e===ft){if(this.boundViewFactory)return this.boundViewFactory;var t=this.instruction.viewFactory,i=this.partReplacements;return i&&(t=i[t.part]||t),this.boundViewFactory=new ft(this,t,i),this.boundViewFactory}return e===pt?(void 0===this.viewSlot&&(this.viewSlot=new pt(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):e===Ge?this.elementEvents||(this.elementEvents=new Ge(this.element)):e===qe?this.compositionTransaction||(this.compositionTransaction=this.parent.get(e)):e===ct?this.viewResources:e===Xe?this.instruction:this.superGet(e)}function _(e,t,i,s,n,r){var o=e.createChild(),l=void 0,a=void 0;for(o.element=t,o.instruction=i,o.children=s,o.viewResources=r,o.partReplacements=n,l=i.providers,a=l.length;a--;)o._resolvers.set(l[a],gt);return o.superGet=o.get,o.get=f,o}function v(e){return this._element.hasAttribute(e)}function b(e){return this._element.getAttribute(e)}function y(e,t){this._element.setAttribute(e,t)}function w(e,t){var i=s.DOM.createComment("anchor");if(t){var n=e.firstChild;n&&"AU-CONTENT"===n.tagName&&(i.contentElement=n),i._element=e,i.hasAttribute=v,i.getAttribute=b,i.setAttribute=y}return s.DOM.replaceNode(i,e),i}function C(e,t,i,n,r,o,l,a,d){var h=i.behaviorInstructions,c=i.expressions,u=void 0,p=void 0,m=void 0,g=void 0,f=void 0;if(i.contentExpression)return r.push(i.contentExpression.createBinding(t.nextSibling)),t.nextSibling.auInterpolationTarget=!0,void t.parentNode.removeChild(t);if(i.shadowSlot){var v=s.DOM.createComment("slot"),b=void 0;return b=i.slotDestination?new at(v,i.slotName,i.slotDestination,i.slotFallbackFactory):new dt(v,i.slotName,i.slotFallbackFactory),s.DOM.replaceNode(v,t),l[i.slotName]=b,void n.push(b)}if(h.length)for(i.anchorIsContainer||(t=w(t,i.elementInstruction)),e[i.injectorId]=u=_(e[i.parentInjectorId],t,i,o,a,d),p=0,m=h.length;p<m;++p)g=h[p],f=g.type.create(u,g,t,r),n.push(f);for(p=0,m=c.length;p<m;++p)r.push(c[p].createBinding(t))}function x(e,t){var i=e.split(";"),s=void 0,n=void 0,r=void 0,o=void 0,l=void 0;for(t=t||{},n=0;n<i.length;n++)r=i[n],s=r.indexOf(":"),o=r.substring(0,s).trim(),l=r.substring(s+1).trim(),t[o]=l;return t}function S(e){var t="";for(var i in e)t+=i+":"+e[i]+";";return t}function T(e,t,i,s,n,r){var o=i.behaviorInstructions,l=i.expressions,a=i.providers,d=i.values,h=void 0,c=void 0,u=void 0,p=void 0,m=void 0;for(h=a.length;h--;)e._resolvers.set(a[h],gt);for(var g in d)if(m=t.getAttribute(g)){if("class"===g)t.setAttribute("class",m+" "+d[g]);else if("style"===g){var f=x(d[g]);x(m,f),t.setAttribute("style",S(f))}}else t.setAttribute(g,d[g]);if(o.length)for(h=0,c=o.length;h<c;++h)u=o[h],p=u.type.create(e,u,t,n),p.contentView&&r.push(p.contentView),s.push(p);for(h=0,c=l.length;h<c;++h)n.push(l[h].createBinding(t))}function k(){return++vt}function D(){return(++bt).toString()}function I(e){var t=e.getAttribute("class"),i=D();return e.setAttribute("class",t?t+" au-target":"au-target"),e.setAttribute("au-target-id",i),i}function O(e,t,i,n,r){var o=s.DOM.createElement("au-shadow-slot");s.DOM.replaceNode(o,i);var l=I(o),a=Xe.shadowSlot(r);if(a.slotName=i.getAttribute("name")||ht.defaultSlotKey,a.slotDestination=i.getAttribute("slot"),i.innerHTML.trim()){for(var d=s.DOM.createDocumentFragment(),h=void 0;h=i.firstChild;)d.appendChild(h);a.slotFallbackFactory=e.compile(d,t)}return n[l]=a,o}function R(e,t){return t instanceof r.TemplateRegistryEntry?Promise.resolve(t):e.loadTemplate(t)}function P(e,t,i){var s=t.__observers__;return void 0===s&&(e.isInitialized||e.initialize(o.Container.instance||new o.Container,t.constructor),s=e.observerLocator.getOrCreateObserversLookup(t),e._ensurePropertiesDefined(t,s)),s[i]}function M(){return++Rt}function j(){return!0}function E(){}function F(e,t){return function(s,n,r){var o="string"==typeof n?s.constructor:s,l=i.metadata.getOrCreateOwn(i.metadata.resource,Pt,o);"string"==typeof e&&(e={selector:e,name:n}),r&&(r.writable=!0,r.configurable=!0),e.all=t,l.addChildBinding(new Mt(e))}}function A(e){return F(e,!0)}function L(e){return F(e,!1)}function N(e,t,i){var s=e.get(t);s||(s=[],e.set(t,s)),s.push(i)}function V(e,t){for(var i=t.binders,s=i.length,n=new Map,r=0,o=e.length;r<o;++r){for(var l=e[r],a=l.addedNodes,d=l.removedNodes,h=0,c=d.length;h<c;++h){var u=d[h];if(1===u.nodeType)for(var p=0;p<s;++p){var m=i[p];m.onRemove(u)&&N(n,m,l)}}for(var g=0,f=a.length;g<f;++g){var _=a[g];if(1===_.nodeType)for(var v=0;v<s;++v){var b=i[v];b.onAdd(_)&&N(n,b,l)}}}n.forEach(function(e,t){null!==t.changeHandler&&t.viewModel[t.changeHandler](e)})}function z(e,t){return Array.isArray(t)?e.removeMany(t,!0):e.remove(t,!0)}function H(e){return e.skipActivation||"function"!=typeof e.viewModel.activate?Promise.resolve():e.viewModel.activate(e.model)||Promise.resolve()}function B(e,t){if(/[A-Z]/.test(e)){var i=h(e);return Ne.getLogger("templating").warn("'"+e+"' is not a valid "+t+" name and has been converted to '"+i+"'. Upper-case letters are not allowed because the DOM is not case-sensitive."),i}return e}function U(e){return function(t){i.metadata.define(i.metadata.resource,e,t)}}function q(e){return function(t){if(e instanceof Pt)i.metadata.define(i.metadata.resource,e,t);else{var s=i.metadata.getOrCreateOwn(i.metadata.resource,Pt,t);Object.assign(s,e)}}}function W(e){return function(t){i.metadata.getOrCreateOwn(i.metadata.resource,Pt,t).elementName=B(e,"custom element")}}function $(e,t,s){return function(n){var r=i.metadata.getOrCreateOwn(i.metadata.resource,Pt,n);r.attributeName=B(e,"custom attribute"),r.attributeDefaultBindingMode=t,r.aliases=s}}function G(e){var t=function(e){i.metadata.getOrCreateOwn(i.metadata.resource,Pt,e).liftsContent=!0};return e?t(e):t}function K(e,t,s){var n=function(t,s,n){var r=s?t.constructor:t,o=i.metadata.getOrCreateOwn(i.metadata.resource,Pt,r),l=void 0;return s&&(e=e||{},e.name=s),l=new Ot(e),l.registerWith(r,o,n)};if(!e)return n;if(t){var r=e;return e=null,n(r,t,s)}return n}function Y(e){var t=function(e){i.metadata.getOrCreateOwn(i.metadata.resource,Pt,e).hasDynamicOptions=!0};return e?t(e):t}function Q(e){var t="function"!=typeof e&&e?e:Nt,s=function(e){var s=i.metadata.getOrCreateOwn(i.metadata.resource,Pt,e);s.targetShadowDOM=!0,s.shadowDOMOptions=t};return"function"==typeof e?s(e):s}function X(e){return function(t){i.metadata.getOrCreateOwn(i.metadata.resource,Pt,t).processAttributes=function(t,i,s,n,r){try{e(t,i,s,n,r)}catch(e){Ne.getLogger("templating").error(e)}}}}function J(){return!1}function Z(e){return function(t){i.metadata.getOrCreateOwn(i.metadata.resource,Pt,t).processContent=e?function(t,i,s,n){try{return e(t,i,s,n)}catch(e){return Ne.getLogger("templating").error(e),!1}}:J}}function ee(e){var t=function(e){i.metadata.getOrCreateOwn(i.metadata.resource,Pt,e).containerless=!0};return e?t(e):t}function te(e){return function(t){i.metadata.define(nt.viewStrategyMetadataKey,e,t)}}function ie(e){return te(new Ze(e))}function se(e,t,i){return te(new st(e,t,i))}function ne(e,t){var s=void 0,n=void 0;"function"==typeof e?s=e:(n=e,s=void 0);var r=function(e){i.metadata.define(nt.viewStrategyMetadataKey,new tt(n,t),e)};return s?r(s):r}function re(e){var t=function(e){i.metadata.define(i.metadata.resource,new Lt,e)};return e?t(e):t}function oe(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(e){i.metadata.define(kt.viewModelRequireMetadataKey,t,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingEngine=e.ElementConfigResource=e.CompositionEngine=e.SwapStrategies=e.HtmlBehaviorResource=e.BindableProperty=e.BehaviorPropertyObserver=e.Controller=e.ViewEngine=e.ModuleAnalyzer=e.ResourceDescription=e.ResourceModule=e.ViewCompiler=e.ViewFactory=e.BoundViewFactory=e.ViewSlot=e.View=e.ViewResources=e.ShadowDOM=e.ShadowSlot=e.PassThroughSlot=e.SlotCustomAttribute=e.BindingLanguage=e.ViewLocator=e.InlineViewStrategy=e.TemplateRegistryViewStrategy=e.NoViewStrategy=e.ConventionalViewStrategy=e.RelativeViewStrategy=e.viewStrategy=e.TargetInstruction=e.BehaviorInstruction=e.ViewCompileInstruction=e.ResourceLoadContext=e.ElementEvents=e.ViewEngineHooksResource=e.CompositionTransaction=e.CompositionTransactionOwnershipToken=e.CompositionTransactionNotifier=e.Animator=e.animationEvent=void 0,e._hyphenate=h,e._isAllWhitespace=c,e.viewEngineHooks=u,e.children=A,e.child=L,e.resource=U,e.behavior=q,e.customElement=W,e.customAttribute=$,e.templateController=G,e.bindable=K,e.dynamicOptions=Y,e.useShadowDOM=Q,e.processAttributes=X,e.processContent=Z,e.containerless=ee,e.useViewStrategy=te,e.useView=ie,e.inlineView=se,e.noView=ne,e.elementConfig=re,e.viewResources=oe;var le,ae,de,he,ce,ue,pe,me,ge,fe,_e,ve,be,ye,we,Ce,xe,Se,Te,ke,De,Ie,Oe,Re,Pe,Me,je,Ee,Fe,Ae,Le,Ne=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(t),Ve=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He=(e.animationEvent={enterBegin:"animation:enter:begin",enterActive:"animation:enter:active",enterDone:"animation:enter:done",enterTimeout:"animation:enter:timeout",leaveBegin:"animation:leave:begin",leaveActive:"animation:leave:active",leaveDone:"animation:leave:done",leaveTimeout:"animation:leave:timeout",staggerNext:"animation:stagger:next",removeClassBegin:"animation:remove-class:begin",removeClassActive:"animation:remove-class:active",removeClassDone:"animation:remove-class:done",removeClassTimeout:"animation:remove-class:timeout",addClassBegin:"animation:add-class:begin",addClassActive:"animation:add-class:active",addClassDone:"animation:add-class:done",addClassTimeout:"animation:add-class:timeout",animateBegin:"animation:animate:begin",animateActive:"animation:animate:active",animateDone:"animation:animate:done",animateTimeout:"animation:animate:timeout",sequenceBegin:"animation:sequence:begin",sequenceDone:"animation:sequence:done"},e.Animator=function(){function e(){}return e.prototype.enter=function(e){return Promise.resolve(!1)},e.prototype.leave=function(e){return Promise.resolve(!1)},e.prototype.removeClass=function(e,t){return e.classList.remove(t),Promise.resolve(!1)},e.prototype.addClass=function(e,t){return e.classList.add(t),Promise.resolve(!1)},e.prototype.animate=function(e,t){return Promise.resolve(!1)},e.prototype.runSequence=function(e){},e.prototype.registerEffect=function(e,t){},e.prototype.unregisterEffect=function(e){},e}()),Be=e.CompositionTransactionNotifier=function(){function e(e){this.owner=e,this.owner._compositionCount++}return e.prototype.done=function(){this.owner._compositionCount--,this.owner._tryCompleteTransaction()},e}(),Ue=e.CompositionTransactionOwnershipToken=function(){function e(e){this.owner=e,this.owner._ownershipToken=this,this.thenable=this._createThenable()}return e.prototype.waitForCompositionComplete=function(){return this.owner._tryCompleteTransaction(),this.thenable},e.prototype.resolve=function(){this._resolveCallback()},e.prototype._createThenable=function(){var e=this;return new Promise(function(t,i){e._resolveCallback=t})},e}(),qe=e.CompositionTransaction=function(){function e(){this._ownershipToken=null,this._compositionCount=0}return e.prototype.tryCapture=function(){return null===this._ownershipToken?new Ue(this):null},e.prototype.enlist=function(){return new Be(this)},e.prototype._tryCompleteTransaction=function(){if(this._compositionCount<=0&&(this._compositionCount=0,null!==this._ownershipToken)){var e=this._ownershipToken;this._ownershipToken=null,e.resolve()}},e}(),We=/([A-Z])/g,$e=e.ViewEngineHooksResource=function(){function e(){}return e.prototype.initialize=function(e,t){this.instance=e.get(t)},e.prototype.register=function(e,t){e.registerViewEngineHooks(this.instance)},e.prototype.load=function(e,t){},e.convention=function(t){if(t.endsWith("ViewEngineHooks"))return new e},e}(),Ge=e.ElementEvents=function(){function e(e){this.element=e,this.subscriptions={}}return e.prototype._enqueueHandler=function(e){this.subscriptions[e.eventName]=this.subscriptions[e.eventName]||[],this.subscriptions[e.eventName].push(e)},e.prototype._dequeueHandler=function(e){var t=void 0,i=this.subscriptions[e.eventName];return i&&(t=i.indexOf(e))>-1&&i.splice(t,1),e},e.prototype.publish=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=s.DOM.createCustomEvent(e,{cancelable:n,bubbles:i,detail:t});this.element.dispatchEvent(r)},e.prototype.subscribe=function(e,t){var i=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&"function"==typeof t)return t.eventName=e,t.handler=t,t.bubbles=s,t.dispose=function(){i.element.removeEventListener(e,t,s),i._dequeueHandler(t)},this.element.addEventListener(e,t,s),this._enqueueHandler(t),t},e.prototype.subscribeOnce=function(e,t){var i=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&"function"==typeof t){var n=function(){var n=function e(i){t(i),e.dispose()};return{v:i.subscribe(e,n,s)}}();if("object"===(void 0===n?"undefined":ze(n)))return n.v}},e.prototype.dispose=function(e){if(e&&"string"==typeof e){var t=this.subscriptions[e];if(t)for(;t.length;){var i=t.pop();i&&i.dispose()}}else this.disposeAll()},e.prototype.disposeAll=function(){for(var e in this.subscriptions)this.dispose(e)},e}(),Ke=e.ResourceLoadContext=function(){function e(){this.dependencies={}}return e.prototype.addDependency=function(e){this.dependencies[e]=!0},e.prototype.hasDependency=function(e){return e in this.dependencies},e}(),Ye=e.ViewCompileInstruction=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.targetShadowDOM=e,this.compileSurrogate=t,this.associatedModuleId=null};Ye.normal=new Ye;var Qe=e.BehaviorInstruction=function(){function e(){this.initiatedByBehavior=!1,this.enhance=!1,this.partReplacements=null,this.viewFactory=null,this.originalAttrName=null,this.skipContentProcessing=!1,this.contentFactory=null,this.viewModel=null,this.anchorIsContainer=!1,this.host=null,this.attributes=null,this.type=null,this.attrName=null,this.inheritBindingContext=!1}return e.enhance=function(){var t=new e;return t.enhance=!0,t},e.unitTest=function(t,i){var s=new e;return s.type=t,s.attributes=i||{},s},e.element=function(t,i){var s=new e;return s.type=i,s.attributes={},s.anchorIsContainer=!(t.hasAttribute("containerless")||i.containerless),s.initiatedByBehavior=!0,s},e.attribute=function(t,i){var s=new e;return s.attrName=t,s.type=i||null,s.attributes={},s},e.dynamic=function(t,i,s){var n=new e;return n.host=t,n.viewModel=i,n.viewFactory=s,n.inheritBindingContext=!0,n},e}();Qe.normal=new Qe;var Xe=e.TargetInstruction=(ae=le=function(){function e(){this.injectorId=null,this.parentInjectorId=null,this.shadowSlot=!1,this.slotName=null,this.slotFallbackFactory=null,this.contentExpression=null,this.expressions=null,this.behaviorInstructions=null,this.providers=null,this.viewFactory=null,this.anchorIsContainer=!1,this.elementInstruction=null,this.lifting=!1,this.values=null}return e.shadowSlot=function(t){var i=new e;return i.parentInjectorId=t,i.shadowSlot=!0,i},e.contentExpression=function(t){var i=new e;return i.contentExpression=t,i},e.lifting=function(t,i){var s=new e;return s.parentInjectorId=t,s.expressions=e.noExpressions,s.behaviorInstructions=[i],s.viewFactory=i.viewFactory,s.providers=[i.type.target],s.lifting=!0,s},e.normal=function(t,i,s,n,r,o){var l=new e;return l.injectorId=t,l.parentInjectorId=i,l.providers=s,l.behaviorInstructions=n,l.expressions=r,l.anchorIsContainer=!o||o.anchorIsContainer,l.elementInstruction=o,l},e.surrogate=function(t,i,s,n){var r=new e;return r.expressions=s,r.behaviorInstructions=i,r.providers=t,r.values=n,r},e}(),le.noExpressions=Object.freeze([]),ae),Je=e.viewStrategy=i.protocol.create("aurelia:view-strategy",{validate:function(e){return"function"==typeof e.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>"},compose:function(e){"function"!=typeof e.makeRelativeTo&&(e.makeRelativeTo=s.PLATFORM.noop)}}),Ze=e.RelativeViewStrategy=(de=Je())(he=function(){function e(e){this.path=e,this.absolutePath=null}return e.prototype.loadViewFactory=function(e,t,i,s){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=(0,n.relativeToFile)(this.path,this.moduleId)),t.associatedModuleId=this.moduleId,e.loadViewFactory(this.absolutePath||this.path,t,i,s)},e.prototype.makeRelativeTo=function(e){null===this.absolutePath&&(this.absolutePath=(0,n.relativeToFile)(this.path,e))},e}())||he,et=e.ConventionalViewStrategy=(ce=Je())(ue=function(){function e(e,t){this.moduleId=t.moduleId,this.viewUrl=e.convertOriginToViewUrl(t)}return e.prototype.loadViewFactory=function(e,t,i,s){return t.associatedModuleId=this.moduleId,e.loadViewFactory(this.viewUrl,t,i,s)},e}())||ue,tt=e.NoViewStrategy=(pe=Je())(me=function(){function e(e,t){this.dependencies=e||null,this.dependencyBaseUrl=t||""}
return e.prototype.loadViewFactory=function(e,t,i,s){var n=this.entry,o=this.dependencies;if(n&&n.factoryIsReady)return Promise.resolve(null);if(this.entry=n=new r.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),n.dependencies=[],n.templateIsLoaded=!0,null!==o)for(var l=0,a=o.length;l<a;++l){var d=o[l];"string"==typeof d||"function"==typeof d?n.addDependency(d):n.addDependency(d.from,d.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(n,t,i,s)},e}())||me,it=e.TemplateRegistryViewStrategy=(ge=Je())(fe=function(){function e(e,t){this.moduleId=e,this.entry=t}return e.prototype.loadViewFactory=function(e,t,i,s){var n=this.entry;return n.factoryIsReady?Promise.resolve(n.factory):(t.associatedModuleId=this.moduleId,e.loadViewFactory(n,t,i,s))},e}())||fe,st=e.InlineViewStrategy=(_e=Je())(ve=function(){function e(e,t,i){this.markup=e,this.dependencies=t||null,this.dependencyBaseUrl=i||""}return e.prototype.loadViewFactory=function(e,t,i,n){var o=this.entry,l=this.dependencies;if(o&&o.factoryIsReady)return Promise.resolve(o.factory);if(this.entry=o=new r.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),o.template=s.DOM.createTemplateFromMarkup(this.markup),null!==l)for(var a=0,d=l.length;a<d;++a){var h=l[a];"string"==typeof h||"function"==typeof h?o.addDependency(h):o.addDependency(h.from,h.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(o,t,i,n)},e}())||ve,nt=e.ViewLocator=(ye=be=function(){function e(){}return e.prototype.getViewStrategy=function(t){if(!t)return null;if("object"===(void 0===t?"undefined":ze(t))&&"getViewStrategy"in t){var s=i.Origin.get(t.constructor);return t=t.getViewStrategy(),"string"==typeof t&&(t=new Ze(t)),Je.assert(t),s.moduleId&&t.makeRelativeTo(s.moduleId),t}if("string"==typeof t&&(t=new Ze(t)),Je.validate(t))return t;"function"!=typeof t&&(t=t.constructor);var n=i.Origin.get(t),r=i.metadata.get(e.viewStrategyMetadataKey,t);if(r)n.moduleId&&(r.moduleId=n.moduleId);else{if(!n.moduleId)throw new Error("Cannot determine default view strategy for object.",t);r=this.createFallbackViewStrategy(n)}return r},e.prototype.createFallbackViewStrategy=function(e){return new et(this,e)},e.prototype.convertOriginToViewUrl=function(e){var t=e.moduleId;return(t.endsWith(".js")||t.endsWith(".ts")?t.substring(0,t.length-3):t)+".html"},e}(),be.viewStrategyMetadataKey="aurelia:view-strategy",ye),rt=e.BindingLanguage=function(){function e(){}return e.prototype.inspectAttribute=function(e,t,i,s){p("inspectAttribute")},e.prototype.createAttributeInstruction=function(e,t,i,s){p("createAttributeInstruction")},e.prototype.inspectTextContent=function(e,t){p("inspectTextContent")},e}(),ot=Object.freeze([]),lt=e.SlotCustomAttribute=(we=(0,o.inject)(s.DOM.Element))(Ce=function(){function e(e){this.element=e,this.element.auSlotAttribute=this}return e.prototype.valueChanged=function(e,t){},e}())||Ce,at=e.PassThroughSlot=function(){function e(e,t,i,s){this.anchor=e,this.anchor.viewSlot=this,this.name=t,this.destinationName=i,this.fallbackFactory=s,this.destinationSlot=null,this.projections=0,this.contentView=null,new lt(this.anchor).value=this.destinationName}return e.prototype.renderFallbackContent=function(e,t,i,s){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);var n=Object.create(null);n[this.destinationSlot.name]=this.destinationSlot,ht.distributeView(this.contentView,n,i,s,this.destinationSlot.name)}},e.prototype.passThroughTo=function(e){this.destinationSlot=e},e.prototype.addNode=function(t,i,s,n){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),i.viewSlot instanceof e)return void i.viewSlot.passThroughTo(this);this.projections++,this.destinationSlot.addNode(t,i,s,n)},e.prototype.removeView=function(e,t){this.projections--,this.destinationSlot.removeView(e,t),this.needsFallbackRendering&&this.renderFallbackContent(null,ot,t)},e.prototype.removeAll=function(e){this.projections=0,this.destinationSlot.removeAll(e),this.needsFallbackRendering&&this.renderFallbackContent(null,ot,e)},e.prototype.projectFrom=function(e,t){this.destinationSlot.projectFrom(e,t)},e.prototype.created=function(e){this.ownerView=e},e.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},e.prototype.attached=function(){this.contentView&&this.contentView.attached()},e.prototype.detached=function(){this.contentView&&this.contentView.detached()},e.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},Ve(e,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),e}(),dt=e.ShadowSlot=function(){function e(e,t,i){this.anchor=e,this.anchor.isContentProjectionSource=!0,this.anchor.viewSlot=this,this.name=t,this.fallbackFactory=i,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}return e.prototype.addNode=function(e,t,i,s,n){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),t.viewSlot instanceof at)return void t.viewSlot.passThroughTo(this);if(null!==this.destinationSlots)ht.distributeNodes(e,[t],this.destinationSlots,this,s);else{t.auOwnerView=e,t.auProjectionSource=i,t.auAssignedSlot=this;var r=this._findAnchor(e,t,i,s);r.parentNode.insertBefore(t,r),this.children.push(t),this.projections++}},e.prototype.removeView=function(e,t){if(null!==this.destinationSlots)ht.undistributeView(e,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)ht.undistributeView(e,this.contentView.slots,t);else{var i=this.children.find(function(e){return e.auSlotProjectFrom===t});if(i){for(var s=i.auProjectionChildren,n=0,r=s.length;n<r;++n){var o=s[n];o.auOwnerView===e&&(s.splice(n,1),e.fragment.appendChild(o),n--,r--,this.projections--)}this.needsFallbackRendering&&this.renderFallbackContent(e,ot,t)}}},e.prototype.removeAll=function(e){if(null!==this.destinationSlots)ht.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)ht.undistributeAll(this.contentView.slots,e);else{var t=this.children.find(function(t){return t.auSlotProjectFrom===e});if(t){for(var i=t.auProjectionChildren,s=0,n=i.length;s<n;++s){var r=i[s];r.auOwnerView.fragment.appendChild(r),this.projections--}t.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,ot,e)}}},e.prototype._findAnchor=function(e,t,i,s){if(i){var n=this.children.find(function(e){return e.auSlotProjectFrom===i});if(n){if(void 0!==s)for(var r=n.auProjectionChildren,o=-1,l=void 0,a=0,d=r.length;a<d;++a){var h=r[a];if(h.auOwnerView!==l&&(o++,l=h.auOwnerView,o>=s&&l!==e))return r.splice(a,0,t),h}return n.auProjectionChildren.push(t),n}}return this.anchor},e.prototype.projectTo=function(e){this.destinationSlots=e},e.prototype.projectFrom=function(e,t){var i=s.DOM.createComment("anchor"),n=this.anchor.parentNode;i.auSlotProjectFrom=t,i.auOwnerView=e,i.auProjectionChildren=[],n.insertBefore(i,this.anchor),this.children.push(i),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(i)},e.prototype.renderFallbackContent=function(e,t,i,s){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){var n=this.contentView.slots,r=this.projectFromAnchors;if(null!==r)for(var o in n)for(var l=n[o],a=0,d=r.length;a<d;++a){var h=r[a];l.projectFrom(h.auOwnerView,h.auSlotProjectFrom)}this.fallbackSlots=n,ht.distributeNodes(e,t,n,i,s)}},e.prototype.created=function(e){this.ownerView=e},e.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},e.prototype.attached=function(){this.contentView&&this.contentView.attached()},e.prototype.detached=function(){this.contentView&&this.contentView.detached()},e.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},Ve(e,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),e}(),ht=e.ShadowDOM=(Se=xe=function(){function e(){}return e.getSlotName=function(t){return void 0===t.auSlotAttribute?e.defaultSlotKey:t.auSlotAttribute.value},e.distributeView=function(t,i,s,n,r){var o=void 0;if(null===t)o=ot;else{var l=t.fragment.childNodes,a=l.length;o=new Array(a);for(var d=0;d<a;++d)o[d]=l[d]}e.distributeNodes(t,o,i,s,n,r)},e.undistributeView=function(e,t,i){for(var s in t)t[s].removeView(e,i)},e.undistributeAll=function(e,t){for(var i in e)e[i].removeAll(t)},e.distributeNodes=function(t,i,s,n,r,o){for(var l=0,a=i.length;l<a;++l){var d=i[l],h=d.nodeType;if(d.isContentProjectionSource){d.viewSlot.projectTo(s);for(var u in s)s[u].projectFrom(t,d.viewSlot);i.splice(l,1),a--,l--}else if(1===h||3===h||d.viewSlot instanceof at)if(3===h&&c(d))i.splice(l,1),a--,l--;else{var p=s[o||e.getSlotName(d)];p&&(p.addNode(t,d,n,r),i.splice(l,1),a--,l--)}else i.splice(l,1),a--,l--}for(var m in s){var g=s[m];g.needsFallbackRendering&&g.renderFallbackContent(t,i,n,r)}},e}(),xe.defaultSlotKey="__au-default-slot-key__",Se),ct=e.ViewResources=function(){function e(e,t){this.bindingLanguage=null,this.parent=e||null,this.hasParent=null!==this.parent,this.viewUrl=t||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}return e.prototype._tryAddHook=function(e,t){if("function"==typeof e[t]){for(var i=e[t].bind(e),s=1,n=void 0;void 0!==this[n=t+s.toString()];)s++;this[t]=!0,this[n]=i}},e.prototype._invokeHook=function(e,t,i,s,n){if(this.hasParent&&this.parent._invokeHook(e,t,i,s,n),this[e]){this[e+"1"](t,i,s,n);var r=e+"2";if(this[r]&&(this[r](t,i,s,n),r=e+"3",this[r])){this[r](t,i,s,n);for(var o=4;void 0!==this[r=e+o.toString()];)this[r](t,i,s,n),o++}}},e.prototype.registerViewEngineHooks=function(e){this._tryAddHook(e,"beforeCompile"),this._tryAddHook(e,"afterCompile"),this._tryAddHook(e,"beforeCreate"),this._tryAddHook(e,"afterCreate"),this._tryAddHook(e,"beforeBind"),this._tryAddHook(e,"beforeUnbind")},e.prototype.getBindingLanguage=function(e){return this.bindingLanguage||(this.bindingLanguage=e)},e.prototype.patchInParent=function(e){var t=this.parent;this.parent=e||null,this.hasParent=null!==this.parent,null===e.parent&&(e.parent=t,e.hasParent=null!==t)},e.prototype.relativeToView=function(e){return(0,n.relativeToFile)(e,this.viewUrl)},e.prototype.registerElement=function(e,t){m(this.elements,e,t,"an Element")},e.prototype.getElement=function(e){return this.elements[e]||(this.hasParent?this.parent.getElement(e):null)},e.prototype.mapAttribute=function(e){return this.attributeMap[e]||(this.hasParent?this.parent.mapAttribute(e):null)},e.prototype.registerAttribute=function(e,t,i){this.attributeMap[e]=i,m(this.attributes,e,t,"an Attribute")},e.prototype.getAttribute=function(e){return this.attributes[e]||(this.hasParent?this.parent.getAttribute(e):null)},e.prototype.registerValueConverter=function(e,t){m(this.valueConverters,e,t,"a ValueConverter")},e.prototype.getValueConverter=function(e){return this.valueConverters[e]||(this.hasParent?this.parent.getValueConverter(e):null)},e.prototype.registerBindingBehavior=function(e,t){m(this.bindingBehaviors,e,t,"a BindingBehavior")},e.prototype.getBindingBehavior=function(e){return this.bindingBehaviors[e]||(this.hasParent?this.parent.getBindingBehavior(e):null)},e.prototype.registerValue=function(e,t){m(this.values,e,t,"a value")},e.prototype.getValue=function(e){return this.values[e]||(this.hasParent?this.parent.getValue(e):null)},e}(),ut=e.View=function(){function e(e,t,i,s,n,r,o){this.container=e,this.viewFactory=t,this.resources=t.resources,this.fragment=i,this.firstChild=i.firstChild,this.lastChild=i.lastChild,this.controllers=s,this.bindings=n,this.children=r,this.slots=o,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this._isUserControlled=!1,this.contentView=null;for(var l in o){this.hasSlots=!0;break}}return e.prototype.returnToCache=function(){this.viewFactory.returnViewToCache(this)},e.prototype.created=function(){var e=void 0,t=void 0,i=this.controllers;for(e=0,t=i.length;e<t;++e)i[e].created(this)},e.prototype.bind=function(e,t,i){var s=void 0,n=void 0,r=void 0,o=void 0,a=void 0;if(!i||!this._isUserControlled){if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e,this.overrideContext=t||(0,l.createOverrideContext)(e),this.resources._invokeHook("beforeBind",this),n=this.bindings,o=0,a=n.length;o<a;++o)n[o].bind(this);for(null!==this.viewModelScope&&(e.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),s=this.controllers,o=0,a=s.length;o<a;++o)s[o].bind(this);for(r=this.children,o=0,a=r.length;o<a;++o)r[o].bind(e,t,!0);this.hasSlots&&ht.distributeView(this.contentView,this.slots)}},e.prototype.addBinding=function(e){this.bindings.push(e),this.isBound&&e.bind(this)},e.prototype.unbind=function(){var e=void 0,t=void 0,i=void 0,s=void 0,n=void 0;if(this.isBound){for(this.isBound=!1,this.resources._invokeHook("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),t=this.bindings,s=0,n=t.length;s<n;++s)t[s].unbind();for(e=this.controllers,s=0,n=e.length;s<n;++s)e[s].unbind();for(i=this.children,s=0,n=i.length;s<n;++s)i[s].unbind();this.bindingContext=null,this.overrideContext=null}},e.prototype.insertNodesBefore=function(e){e.parentNode.insertBefore(this.fragment,e)},e.prototype.appendNodesTo=function(e){e.appendChild(this.fragment)},e.prototype.removeNodes=function(){for(var e=this.fragment,t=this.firstChild,i=this.lastChild,s=void 0;t&&(s=t.nextSibling,e.appendChild(t),t!==i);)t=s},e.prototype.attached=function(){var e=void 0,t=void 0,i=void 0,s=void 0;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),e=this.controllers,i=0,s=e.length;i<s;++i)e[i].attached();for(t=this.children,i=0,s=t.length;i<s;++i)t[i].attached()}},e.prototype.detached=function(){var e=void 0,t=void 0,i=void 0,s=void 0;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),e=this.controllers,i=0,s=e.length;i<s;++i)e[i].detached();for(t=this.children,i=0,s=t.length;i<s;++i)t[i].detached()}},e}(),pt=e.ViewSlot=function(){function e(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He.instance;this.anchor=e,this.anchorIsContainer=t,this.bindingContext=null,this.overrideContext=null,this.animator=i,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,e.viewSlot=this,e.isContentProjectionSource=!1}return e.prototype.animateView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"enter",i=g(e);if(null!==i)switch(t){case"enter":return this.animator.enter(i);case"leave":return this.animator.leave(i);default:throw new Error("Invalid animation direction: "+t)}},e.prototype.transformChildNodesIntoView=function(){var e=this.anchor;this.children.push({fragment:e,firstChild:e.firstChild,lastChild:e.lastChild,returnToCache:function(){},removeNodes:function(){for(var t=void 0;t=e.lastChild;)e.removeChild(t)},created:function(){},bind:function(){},unbind:function(){},attached:function(){},detached:function(){}})},e.prototype.bind=function(e,t){var i=void 0,s=void 0,n=void 0;if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e=e||this.bindingContext,this.overrideContext=t=t||this.overrideContext,n=this.children,i=0,s=n.length;i<s;++i)n[i].bind(e,t,!0)},e.prototype.unbind=function(){if(this.isBound){var e=void 0,t=void 0,i=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,e=0,t=i.length;e<t;++e)i[e].unbind()}},e.prototype.add=function(e){if(this.anchorIsContainer?e.appendNodesTo(this.anchor):e.insertNodesBefore(this.anchor),this.children.push(e),this.isAttached)return e.attached(),this.animateView(e,"enter")},e.prototype.insert=function(e,t){var i=this.children,s=i.length;return 0===e&&0===s||e>=s?this.add(t):(t.insertNodesBefore(i[e].firstChild),i.splice(e,0,t),this.isAttached?(t.attached(),this.animateView(t,"enter")):void 0)},e.prototype.move=function(e,t){if(e!==t){var i=this.children,s=i[e];s.removeNodes(),s.insertNodesBefore(i[t].firstChild),i.splice(e,1),i.splice(t,0,s)}},e.prototype.remove=function(e,t,i){return this.removeAt(this.children.indexOf(e),t,i)},e.prototype.removeMany=function(e,t,i){var s=this,n=this.children,r=e.length,o=void 0,l=[];e.forEach(function(e){if(i)return void e.removeNodes();var t=s.animateView(e,"leave");t?l.push(t.then(function(){return e.removeNodes()})):e.removeNodes()});var a=function(){if(s.isAttached)for(o=0;o<r;++o)e[o].detached();if(t)for(o=0;o<r;++o)e[o].returnToCache();for(o=0;o<r;++o){var i=n.indexOf(e[o]);i>=0&&n.splice(i,1)}};return l.length>0?Promise.all(l).then(function(){return a()}):a()},e.prototype.removeAt=function(e,t,i){var s=this,n=this.children[e],r=function(){return e=s.children.indexOf(n),n.removeNodes(),s.children.splice(e,1),s.isAttached&&n.detached(),t&&n.returnToCache(),n};if(!i){var o=this.animateView(n,"leave");if(o)return o.then(function(){return r()})}return r()},e.prototype.removeAll=function(e,t){var i=this,s=this.children,n=s.length,r=void 0,o=[];s.forEach(function(e){if(t)return void e.removeNodes();var s=i.animateView(e,"leave");s?o.push(s.then(function(){return e.removeNodes()})):e.removeNodes()});var l=function(){if(i.isAttached)for(r=0;r<n;++r)s[r].detached();if(e)for(r=0;r<n;++r){var t=s[r];t&&t.returnToCache()}i.children=[]};return o.length>0?Promise.all(o).then(function(){return l()}):l()},e.prototype.attached=function(){var e=void 0,t=void 0,i=void 0,s=void 0;if(!this.isAttached)for(this.isAttached=!0,i=this.children,e=0,t=i.length;e<t;++e)s=i[e],s.attached(),this.animateView(s,"enter")},e.prototype.detached=function(){var e=void 0,t=void 0,i=void 0;if(this.isAttached)for(this.isAttached=!1,i=this.children,e=0,t=i.length;e<t;++e)i[e].detached()},e.prototype.projectTo=function(e){var t=this;this.projectToSlots=e,this.add=this._projectionAdd,this.insert=this._projectionInsert,this.move=this._projectionMove,this.remove=this._projectionRemove,this.removeAt=this._projectionRemoveAt,this.removeMany=this._projectionRemoveMany,this.removeAll=this._projectionRemoveAll,this.children.forEach(function(i){return ht.distributeView(i,e,t)})},e.prototype._projectionAdd=function(e){ht.distributeView(e,this.projectToSlots,this),this.children.push(e),this.isAttached&&e.attached()},e.prototype._projectionInsert=function(e,t){0===e&&!this.children.length||e>=this.children.length?this.add(t):(ht.distributeView(t,this.projectToSlots,this,e),this.children.splice(e,0,t),this.isAttached&&t.attached())},e.prototype._projectionMove=function(e,t){if(e!==t){var i=this.children,s=i[e];ht.undistributeView(s,this.projectToSlots,this),ht.distributeView(s,this.projectToSlots,this,t),i.splice(e,1),i.splice(t,0,s)}},e.prototype._projectionRemove=function(e,t){ht.undistributeView(e,this.projectToSlots,this),this.children.splice(this.children.indexOf(e),1),this.isAttached&&e.detached()},e.prototype._projectionRemoveAt=function(e,t){var i=this.children[e];ht.undistributeView(i,this.projectToSlots,this),this.children.splice(e,1),this.isAttached&&i.detached()},e.prototype._projectionRemoveMany=function(e,t){var i=this;e.forEach(function(e){return i.remove(e,t)})},e.prototype._projectionRemoveAll=function(e){ht.undistributeAll(this.projectToSlots,this);var t=this.children;if(this.isAttached)for(var i=0,s=t.length;i<s;++i)t[i].detached();this.children=[]},e}(),mt=(0,o.resolver)(Te=function(){function e(){}return e.prototype.get=function(e,t){var i=t.__providerId__;return i in e?e[i]:e[i]=e.invoke(t)},e}())||Te,gt=new mt,ft=e.BoundViewFactory=function(){function e(e,t,i){this.parentContainer=e,this.viewFactory=t,this.factoryCreateInstruction={partReplacements:i}}return e.prototype.create=function(){var e=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return e._isUserControlled=!0,e},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},Ve(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),_t=e.ViewFactory=function(){function e(e,t,i){this.isCaching=!1,this.template=e,this.instructions=t,this.resources=i,this.cacheSize=-1,this.cache=null}return e.prototype.setCacheSize=function(e,t){e&&("*"===e?e=Number.MAX_VALUE:"string"==typeof e&&(e=parseInt(e,10))),this.cacheSize!==-1&&t||(this.cacheSize=e),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0},e.prototype.getCachedView=function(){return null!==this.cache?this.cache.pop()||null:null},e.prototype.returnViewToCache=function(e){e.isAttached&&e.detached(),e.isBound&&e.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(e.fromCache=!0,this.cache.push(e))},e.prototype.create=function(e,t,i){t=t||Qe.normal;var s=this.getCachedView();if(null!==s)return s;var n=t.enhance?this.template:this.template.cloneNode(!0),r=n.querySelectorAll(".au-target"),o=this.instructions,l=this.resources,a=[],d=[],h=[],c=Object.create(null),u={root:e},p=t.partReplacements,m=void 0,g=void 0,f=void 0,_=void 0,v=void 0;for(this.resources._invokeHook("beforeCreate",this,e,n,t),i&&null!==this.surrogateInstruction&&T(e,i,this.surrogateInstruction,a,d,h),t.enhance&&n.hasAttribute("au-target-id")&&(_=n,v=o[_.getAttribute("au-target-id")],C(u,_,v,a,d,h,c,p,l)),m=0,g=r.length;m<g;++m)_=r[m],v=o[_.getAttribute("au-target-id")],C(u,_,v,a,d,h,c,p,l);return f=new ut(e,this,n,a,d,h,c),t.initiatedByBehavior||f.created(),this.resources._invokeHook("afterCreate",f),f},e}(),vt=0,bt=0,yt=e.ViewCompiler=(ke=(0,o.inject)(rt,ct))(De=function(){function e(e,t){this.bindingLanguage=e,this.resources=t}return e.prototype.compile=function(e,t,i){t=t||this.resources,i=i||Ye.normal,e="string"==typeof e?s.DOM.createTemplateFromMarkup(e):e;var n=void 0,r=void 0,o=void 0;e.content?(r=e.getAttribute("part"),o=e.getAttribute("view-cache"),n=s.DOM.adoptNode(e.content)):n=e,i.targetShadowDOM=i.targetShadowDOM&&s.FEATURE.shadowDOM,t._invokeHook("beforeCompile",n,t,i);var l={};this._compileNode(n,t,l,e,"root",!i.targetShadowDOM);var a=n.firstChild;if(a&&1===a.nodeType){var d=a.getAttribute("au-target-id");if(d){var h=l[d];(h.shadowSlot||h.lifting||h.elementInstruction&&!h.elementInstruction.anchorIsContainer)&&n.insertBefore(s.DOM.createComment("view"),a)}}var c=new _t(n,l,t);return c.surrogateInstruction=i.compileSurrogate?this._compileSurrogate(e,t):null,c.part=r,o&&c.setCacheSize(o),t._invokeHook("afterCompile",c),c},e.prototype._compileNode=function(e,t,i,n,r,o){switch(e.nodeType){case 1:return this._compileElement(e,t,i,n,r,o);case 3:var l=t.getBindingLanguage(this.bindingLanguage).inspectTextContent(t,e.wholeText);if(l){var a=s.DOM.createElement("au-marker"),d=I(a);for((e.parentNode||n).insertBefore(a,e),e.textContent=" ",i[d]=Xe.contentExpression(l);e.nextSibling&&3===e.nextSibling.nodeType;)(e.parentNode||n).removeChild(e.nextSibling)}else for(;e.nextSibling&&3===e.nextSibling.nodeType;)e=e.nextSibling;return e.nextSibling;case 11:for(var h=e.firstChild;h;)h=this._compileNode(h,t,i,e,r,o)}return e.nextSibling},e.prototype._compileSurrogate=function(e,t){var i=e.tagName.toLowerCase(),s=e.attributes,n=t.getBindingLanguage(this.bindingLanguage),r=void 0,o=void 0,l=void 0,a=void 0,d=void 0,h=void 0,c=void 0,u=void 0,p=void 0,m=void 0,g=[],f=void 0,_=[],v={},b=!1,y=[];for(a=0,d=s.length;a<d;++a){if(h=s[a],c=h.name,u=h.value,p=n.inspectAttribute(t,i,c,u),(m=t.getAttribute(p.attrName))&&(r=t.mapAttribute(p.attrName))&&(o=m.attributes[r])&&(p.defaultBindingMode=o.defaultBindingMode,p.command||p.expression||(p.command=o.hasOptions?"options":null),p.command&&"options"!==p.command&&m.primaryProperty)){var w=m.primaryProperty;c=p.attrName=w.name,p.defaultBindingMode=w.defaultBindingMode}if(l=n.createAttributeInstruction(t,e,p,void 0,m))if(l.alteredAttr&&(m=t.getAttribute(l.attrName)),l.discrete)g.push(l);else if(m){if(l.type=m,this._configureProperties(l,t),m.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");_.push(l)}else g.push(l.attributes[l.attrName]);else if(m){if(l=Qe.attribute(c,m),l.attributes[t.mapAttribute(c)]=u,m.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");_.push(l)}else"id"!==c&&"part"!==c&&"replace-part"!==c&&(b=!0,v[c]=u)}if(g.length||_.length||b){for(a=0,d=_.length;a<d;++a)l=_[a],l.type.compile(this,t,e,l),y.push(l.type.target);for(a=0,d=g.length;a<d;++a)f=g[a],void 0!==f.attrToRemove&&e.removeAttribute(f.attrToRemove);return Xe.surrogate(y,_,g,v)}return null},e.prototype._compileElement=function(e,t,i,s,n,r){var o=e.tagName.toLowerCase(),l=e.attributes,a=[],d=void 0,h=[],c=[],u=t.getBindingLanguage(this.bindingLanguage),p=void 0,m=void 0,g=void 0,f=void 0,_=void 0,v=void 0,b=void 0,y=void 0,w=void 0,C=void 0,x=void 0,S=void 0,T=void 0,D=void 0,R=void 0,P=void 0;if("slot"===o)return r&&(e=O(this,t,e,i,n)),e.nextSibling;for("template"===o?(m=this.compile(e,t),m.part=e.getAttribute("part")):(g=t.getElement(e.getAttribute("as-element")||o))&&(f=Qe.element(e,g),g.processAttributes(this,t,e,l,f),h.push(f)),v=0,b=l.length;v<b;++v){if(y=l[v],w=y.name,C=y.value,S=u.inspectAttribute(t,o,w,C),r&&"slot"===S.attrName&&(S.attrName=w="au-slot"),g=t.getAttribute(S.attrName),_=null,g){if((D=t.mapAttribute(S.attrName))&&(T=g.attributes[D])&&(S.defaultBindingMode=T.defaultBindingMode,S.command||S.expression||(S.command=T.hasOptions?"options":null),S.command&&"options"!==S.command&&g.primaryProperty)){var M=g.primaryProperty;w=S.attrName=M.name,S.defaultBindingMode=M.defaultBindingMode}}else f&&(_=f.type.attributes[S.attrName])&&(S.defaultBindingMode=_.defaultBindingMode);if(x=_?u.createAttributeInstruction(t,e,S,f):u.createAttributeInstruction(t,e,S,void 0,g))if(x.alteredAttr&&(g=t.getAttribute(x.attrName)),x.discrete)a.push(x);else if(g){if(x.type=g,this._configureProperties(x,t),g.liftsContent){x.originalAttrName=w,p=x;break}h.push(x)}else _?f.attributes[S.attrName].targetProperty=_.name:a.push(x.attributes[x.attrName]);else if(g){if(x=Qe.attribute(w,g),x.attributes[t.mapAttribute(w)]=C,g.liftsContent){x.originalAttrName=w,p=x;break}h.push(x)}else _&&(f.attributes[w]=C)}if(p)p.viewFactory=m,e=p.type.compile(this,t,e,p,s),R=I(e),i[R]=Xe.lifting(n,p);else{if(a.length||h.length){for(P=!!h.length&&k(),v=0,b=h.length;v<b;++v)x=h[v],x.type.compile(this,t,e,x,s),c.push(x.type.target);for(v=0,b=a.length;v<b;++v)d=a[v],void 0!==d.attrToRemove&&e.removeAttribute(d.attrToRemove);R=I(e),i[R]=Xe.normal(P,n,c,h,a,f)}if(f&&f.skipContentProcessing)return e.nextSibling;for(var j=e.firstChild;j;)j=this._compileNode(j,t,i,e,P||n,r)}return e.nextSibling},e.prototype._configureProperties=function(e,t){var i=e.type,s=e.attrName,n=e.attributes,r=void 0,o=void 0,l=void 0,a=t.mapAttribute(s);a&&s in n&&a!==s&&(n[a]=n[s],delete n[s]);for(o in n)null!==(l=n[o])&&"object"===(void 0===l?"undefined":ze(l))&&(r=i.attributes[o],l.targetProperty=void 0!==r?r.name:o)},e}())||De,wt=e.ResourceModule=function(){function e(e){this.id=e,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}return e.prototype.initialize=function(e){var t=this.mainResource,i=this.resources,s=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==t&&(t.metadata.viewStrategy=s,t.initialize(e));for(var n=0,r=i.length;n<r;++n)t=i[n],t.metadata.viewStrategy=s,t.initialize(e)}},e.prototype.register=function(e,t){var i=this.mainResource,s=this.resources;void 0!==i&&(i.register(e,t),t=null);for(var n=0,r=s.length;n<r;++n)s[n].register(e,t),t=null},e.prototype.load=function(e,t){if(null!==this.onLoaded)return this.loadContext===t?Promise.resolve():this.onLoaded;var i=this.mainResource,s=this.resources,n=void 0;if(void 0!==i){n=new Array(s.length+1),n[0]=i.load(e,t);for(var r=0,o=s.length;r<o;++r)n[r+1]=s[r].load(e,t)}else{n=new Array(s.length);for(var l=0,a=s.length;l<a;++l)n[l]=s[l].load(e,t)}return this.loadContext=t,this.onLoaded=Promise.all(n),this.onLoaded},e}(),Ct=e.ResourceDescription=function(){function e(e,t,s){s||(s=i.metadata.get(i.metadata.resource,t))||(s=new Pt,s.elementName=h(e),i.metadata.define(i.metadata.resource,s,t)),s instanceof Pt?void 0===s.elementName?s.elementName=h(e):void 0===s.attributeName?s.attributeName=h(e):null===s.attributeName&&null===s.elementName&&Pt.convention(e,s):s.name||(s.name=h(e)),this.metadata=s,this.value=t}return e.prototype.initialize=function(e){this.metadata.initialize(e,this.value)},e.prototype.register=function(e,t){this.metadata.register(e,t)},e.prototype.load=function(e,t){return this.metadata.load(e,this.value,t)},e}(),xt=e.ModuleAnalyzer=function(){function e(){this.cache=Object.create(null)}return e.prototype.getAnalysis=function(e){return this.cache[e]},e.prototype.analyze=function(e,t,s){var n=void 0,o=void 0,a=void 0,d=void 0,c=void 0,u=void 0,p=[],m=void 0,g=void 0,f=void 0;if(f=this.cache[e])return f;f=new wt(e),this.cache[e]=f,"function"==typeof t&&(t={default:t}),s&&(n=new Ct(s,t[s]));for(c in t)u=t[c],c!==s&&"function"==typeof u&&(d=i.metadata.get(i.metadata.resource,u),d?(null===d.attributeName&&null===d.elementName&&Pt.convention(c,d),null===d.attributeName&&null===d.elementName&&(d.elementName=h(c)),!n&&d instanceof Pt&&null!==d.elementName?n=new Ct(c,u,d):p.push(new Ct(c,u,d))):Je.decorates(u)?g=u:u instanceof r.TemplateRegistryEntry?g=new it(e,u):(m=Pt.convention(c))?(null===m.elementName||n?p.push(new Ct(c,u,m)):n=new Ct(c,u,m),i.metadata.define(i.metadata.resource,m,u)):(m=l.ValueConverterResource.convention(c)||l.BindingBehaviorResource.convention(c)||$e.convention(c))?(p.push(new Ct(c,u,m)),i.metadata.define(i.metadata.resource,m,u)):o||(o=u,a=c));return!n&&o&&(n=new Ct(a,o)),f.moduleInstance=t,f.mainResource=n,f.resources=p,f.viewStrategy=g,f},e}(),St=Ne.getLogger("templating"),Tt=function(){function e(e){var t=this;e.then(function(e){return t.viewFactory=e})}return e.prototype.create=function(e,t,i,s){return this.viewFactory.create(e,t,i,s)},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},Ve(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),kt=e.ViewEngine=(Ie=(0,o.inject)(r.Loader,o.Container,yt,xt,ct))((Pe=Re=function(){function e(e,t,i,s,n){this.loader=e,this.container=t,this.viewCompiler=i,this.moduleAnalyzer=s,this.appResources=n,this._pluginMap={};var r=new Pt;r.attributeName="au-slot",r.initialize(t,lt),r.register(n)}return e.prototype.addResourcePlugin=function(e,t){var i=e.replace(".","")+"-resource-plugin";this._pluginMap[e]=i,this.loader.addPlugin(i,t)},e.prototype.loadViewFactory=function(e,t,i,s){var n=this
;return i=i||new Ke,R(this.loader,e).then(function(r){return r.onReady?i.hasDependency(e)?null===r.template?r.onReady:Promise.resolve(new Tt(r.onReady)):(i.addDependency(e),r.onReady):(i.addDependency(e),r.onReady=n.loadTemplateResources(r,t,i,s).then(function(e){if(r.resources=e,null===r.template)return r.factory=null;var i=n.viewCompiler.compile(r.template,e,t);return r.factory=i}),r.onReady)})},e.prototype.loadTemplateResources=function(t,s,r,o){var l=new ct(this.appResources,t.address),a=t.dependencies,d=void 0,h=void 0;if(s=s||Ye.normal,0===a.length&&!s.associatedModuleId)return Promise.resolve(l);if(d=a.map(function(e){return e.src}),h=a.map(function(e){return e.name}),St.debug("importing resources for "+t.address,d),o){var c=i.metadata.get(e.viewModelRequireMetadataKey,o);if(c){for(var u=d.length,p=0,m=c.length;p<m;++p){var g=c[p],f="function"==typeof g?i.Origin.get(g).moduleId:(0,n.relativeToFile)(g.src||g,t.address);d.indexOf(f)===-1&&(d.push(f),h.push(g.as))}St.debug("importing ViewModel resources for "+s.associatedModuleId,d.slice(u))}}return this.importViewResources(d,h,l,s,r)},e.prototype.importViewModelResource=function(e,t){var s=this;return this.loader.loadModule(e).then(function(n){var r=i.Origin.get(n).moduleId,o=s.moduleAnalyzer.analyze(r,n,t);if(!o.mainResource)throw new Error('No view model found in module "'+e+'".');return o.initialize(s.container),o.mainResource})},e.prototype.importViewResources=function(e,t,s,n,r){var o=this;return r=r||new Ke,n=n||Ye.normal,e=e.map(function(e){return o._applyLoaderPlugin(e)}),this.loader.loadAllModules(e).then(function(e){var l=void 0,a=void 0,d=void 0,h=void 0,c=void 0,u=void 0,p=o.container,m=o.moduleAnalyzer,g=new Array(e.length);for(l=0,a=e.length;l<a;++l)c=e[l],h=i.Origin.get(c).moduleId,d=m.analyze(h,c),d.initialize(p),d.register(s,t[l]),g[l]=d;for(n.associatedModuleId&&(u=m.getAnalysis(n.associatedModuleId))&&u.register(s),l=0,a=g.length;l<a;++l)g[l]=g[l].load(p,r);return Promise.all(g).then(function(){return s})})},e.prototype._applyLoaderPlugin=function(e){var t=e.lastIndexOf(".");if(t!==-1){var i=e.substring(t),s=this._pluginMap[i];return void 0===s?e:this.loader.applyPluginToUrl(e,s)}return e},e}(),Re.viewModelRequireMetadataKey="aurelia:view-model-require",Oe=Pe))||Oe,Dt=e.Controller=function(){function e(e,t,i,s){this.behavior=e,this.instruction=t,this.viewModel=i,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=s,this.elementEvents=s.elementEvents||null;var n=e.observerLocator.getOrCreateObserversLookup(i),r=e.handlesBind,o=t.attributes,l=this.boundProperties=[],a=e.properties,d=void 0,h=void 0;for(e._ensurePropertiesDefined(i,n),d=0,h=a.length;d<h;++d)a[d]._initialize(i,n,o,r,l)}return e.prototype.created=function(e){this.behavior.handlesCreated&&this.viewModel.created(e,this.view)},e.prototype.automate=function(e,t){this.view.bindingContext=this.viewModel,this.view.overrideContext=e||(0,l.createOverrideContext)(this.viewModel),this.view._isUserControlled=!0,this.behavior.handlesCreated&&this.viewModel.created(t||null,this.view),this.bind(this.view)},e.prototype.bind=function(e){var t=this.behavior.handlesBind,i=this.boundProperties,s=void 0,n=void 0,r=void 0,o=void 0,a=void 0;if(this.isBound){if(this.scope===e)return;this.unbind()}for(this.isBound=!0,this.scope=e,s=0,n=i.length;s<n;++s)r=i[s],o=r.observer,a=o.selfSubscriber,o.publishing=!1,t&&(o.selfSubscriber=null),r.binding.bind(e),o.call(),o.publishing=!0,o.selfSubscriber=a;var d=void 0;null!==this.view?(t&&(this.view.viewModelScope=e),this.viewModel===e.overrideContext.bindingContext?d=e.overrideContext:this.instruction.inheritBindingContext?d=(0,l.createOverrideContext)(this.viewModel,e.overrideContext):(d=(0,l.createOverrideContext)(this.viewModel),d.__parentOverrideContext=e.overrideContext),this.view.bind(this.viewModel,d)):t&&(d=e.overrideContext,void 0!==e.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&(d=Object.assign({},e.overrideContext),d.parentOverrideContext=e.overrideContext.__parentOverrideContext),this.viewModel.bind(e.bindingContext,d))},e.prototype.unbind=function(){if(this.isBound){var e=this.boundProperties,t=void 0,i=void 0;for(this.isBound=!1,this.scope=null,null!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),t=0,i=e.length;t<i;++t)e[t].binding.unbind()}},e.prototype.attached=function(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())},e.prototype.detached=function(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())},e}(),It=e.BehaviorPropertyObserver=(Me=(0,l.subscriberCollection)())(je=function(){function e(e,t,i,s,n){this.taskQueue=e,this.obj=t,this.propertyName=i,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=s,this.currentValue=this.oldValue=n}return e.prototype.getValue=function(){return this.currentValue},e.prototype.setValue=function(e){var t=this.currentValue;t!==e&&(this.oldValue=t,this.currentValue=e,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))},e.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.notqueued=!0,t!==e&&(this.selfSubscriber&&this.selfSubscriber(t,e),this.callSubscribers(t,e),this.oldValue=t)},e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e}())||je,Ot=e.BindableProperty=function(){function e(e){"string"==typeof e?this.name=e:Object.assign(this,e),this.attribute=this.attribute||h(this.name),null!==this.defaultBindingMode&&void 0!==this.defaultBindingMode||(this.defaultBindingMode=l.bindingMode.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}return e.prototype.registerWith=function(e,t,i){if(t.properties.push(this),t.attributes[this.attribute]=this,this.owner=t,i)return this.descriptor=i,this._configureDescriptor(t,i)},e.prototype._configureDescriptor=function(e,t){var i=this.name;return t.configurable=!0,t.enumerable=!0,"initializer"in t&&(this.defaultValue=t.initializer,delete t.initializer,delete t.writable),"value"in t&&(this.defaultValue=t.value,delete t.value,delete t.writable),t.get=function(){return P(e,this,i).getValue()},t.set=function(t){P(e,this,i).setValue(t)},t.get.getObserver=function(t){return P(e,t,i)},t},e.prototype.defineOn=function(e,t){var i=this.name,s=void 0;null===this.changeHandler&&(s=i+"Changed")in e.prototype&&(this.changeHandler=s),null===this.descriptor&&Object.defineProperty(e.prototype,i,this._configureDescriptor(t,{}))},e.prototype.createObserver=function(e){var t=null,i=this.defaultValue,s=this.changeHandler,n=this.name,r=void 0;if(!this.hasOptions){if(s in e)t="propertyChanged"in e?function(t,i){e[s](t,i),e.propertyChanged(n,t,i)}:function(t,i){return e[s](t,i)};else if("propertyChanged"in e)t=function(t,i){return e.propertyChanged(n,t,i)};else if(null!==s)throw new Error("Change handler "+s+" was specified but not declared on the class.");return void 0!==i&&(r="function"==typeof i?i.call(e):i),new It(this.owner.taskQueue,e,this.name,t,r)}},e.prototype._initialize=function(e,t,i,s,n){var r=void 0,o=void 0,l=void 0,a=this.defaultValue;if(this.isDynamic)for(var d in i)this._createDynamicProperty(e,t,s,d,i[d],n);else this.hasOptions||(o=t[this.name],null!==i&&(r=o.selfSubscriber,l=i[this.attribute],s&&(o.selfSubscriber=null),"string"==typeof l?(e[this.name]=l,o.call()):l?n.push({observer:o,binding:l.createBinding(e)}):void 0!==a&&o.call(),o.selfSubscriber=r),o.publishing=!0)},e.prototype._createDynamicProperty=function(e,t,i,s,n,r){var o=s+"Changed",l=null,a=void 0,d=void 0;o in e?l="propertyChanged"in e?function(t,i){e[o](t,i),e.propertyChanged(s,t,i)}:function(t,i){return e[o](t,i)}:"propertyChanged"in e&&(l=function(t,i){return e.propertyChanged(s,t,i)}),a=t[s]=new It(this.owner.taskQueue,e,s,l),Object.defineProperty(e,s,{configurable:!0,enumerable:!0,get:a.getValue.bind(a),set:a.setValue.bind(a)}),i&&(a.selfSubscriber=null),"string"==typeof n?(e[s]=n,a.call()):n&&(d={observer:a,binding:n.createBinding(e)},r.push(d)),a.publishing=!0,a.selfSubscriber=l},e}(),Rt=0,Pt=e.HtmlBehaviorResource=function(){function e(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=E,this.processContent=j,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}return e.convention=function(t,i){var s=void 0;return t.endsWith("CustomAttribute")&&(s=i||new e,s.attributeName=h(t.substring(0,t.length-15))),t.endsWith("CustomElement")&&(s=i||new e,s.elementName=h(t.substring(0,t.length-13))),s},e.prototype.addChildBinding=function(e){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(e)},e.prototype.initialize=function(e,t){var i=t.prototype,n=this.properties,r=this.attributeName,o=this.attributeDefaultBindingMode,d=void 0,h=void 0,c=void 0;if(!this.isInitialized)if(this.isInitialized=!0,t.__providerId__=M(),this.observerLocator=e.get(l.ObserverLocator),this.taskQueue=e.get(a.TaskQueue),this.target=t,this.usesShadowDOM=this.targetShadowDOM&&s.FEATURE.shadowDOM,this.handlesCreated="created"in i,this.handlesBind="bind"in i,this.handlesUnbind="unbind"in i,this.handlesAttached="attached"in i,this.handlesDetached="detached"in i,this.htmlName=this.elementName||this.attributeName,null!==r)if(0===n.length&&new Ot({name:"value",changeHandler:"valueChanged"in i?"valueChanged":null,attribute:r,defaultBindingMode:o}).registerWith(t,this),c=n[0],1===n.length&&"value"===c.name)c.isDynamic=c.hasOptions=this.hasDynamicOptions,c.defineOn(t,this);else{for(d=0,h=n.length;d<h;++d)if(n[d].defineOn(t,this),n[d].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=n[d]}c=new Ot({name:"value",changeHandler:"valueChanged"in i?"valueChanged":null,attribute:r,defaultBindingMode:o}),c.hasOptions=!0,c.registerWith(t,this)}else for(d=0,h=n.length;d<h;++d)n[d].defineOn(t,this)},e.prototype.register=function(e,t){var i=this;null!==this.attributeName&&(e.registerAttribute(t||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach(function(t){e.registerAttribute(t,i,i.attributeName)})),null!==this.elementName&&e.registerElement(t||this.elementName,this)},e.prototype.load=function(e,t,s,n,r){var o=this,l=void 0;return null!==this.elementName?(n=e.get(nt).getViewStrategy(n||this.viewStrategy||t),l=new Ye(this.targetShadowDOM,!0),n.moduleId||(n.moduleId=i.Origin.get(t).moduleId),n.loadViewFactory(e.get(kt),l,s,t).then(function(e){return r&&o.viewFactory||(o.viewFactory=e),e})):Promise.resolve(this)},e.prototype.compile=function(e,t,i,n,r){if(this.liftsContent){if(!n.viewFactory){var o=s.DOM.createElement("template"),l=s.DOM.createDocumentFragment(),a=i.getAttribute("view-cache"),d=i.getAttribute("part");i.removeAttribute(n.originalAttrName),s.DOM.replaceNode(o,i,r),l.appendChild(i),n.viewFactory=e.compile(l,t),d&&(n.viewFactory.part=d,i.removeAttribute("part")),a&&(n.viewFactory.setCacheSize(a),i.removeAttribute("view-cache")),i=o}}else if(null!==this.elementName){var h={};if(this.processContent(e,t,i,n)&&i.hasChildNodes()){for(var u=i.firstChild,p=this.usesShadowDOM?null:s.DOM.createElement("au-content"),m=void 0,g=void 0;u;)m=u.nextSibling,"TEMPLATE"===u.tagName&&(g=u.getAttribute("replace-part"))?(h[g]=e.compile(u,t),s.DOM.removeNode(u,r),n.partReplacements=h):null!==p&&(3===u.nodeType&&c(u)?s.DOM.removeNode(u,r):p.appendChild(u)),u=m;null!==p&&p.hasChildNodes()&&i.appendChild(p),n.skipContentProcessing=!1}else n.skipContentProcessing=!0}return i},e.prototype.create=function(e,t,i,n){var r=void 0,o=null;t=t||Qe.normal,i=i||null,n=n||null,null!==this.elementName&&i&&(this.usesShadowDOM?(r=i.attachShadow(this.shadowDOMOptions),e.registerInstance(s.DOM.boundary,r)):(r=i,this.targetShadowDOM&&e.registerInstance(s.DOM.boundary,r))),null!==i&&(i.au=o=i.au||{});var l=t.viewModel||e.get(this.target),a=new Dt(this,t,l,e),d=this.childBindings,h=void 0;if(this.liftsContent)o.controller=a;else if(null!==this.elementName){if(h=t.viewFactory||this.viewFactory,e.viewModel=l,h&&(a.view=h.create(e,t,i)),null!==i){if(o.controller=a,a.view){if(!this.usesShadowDOM&&(1===i.childNodes.length||i.contentElement)){var c=i.childNodes[0]||i.contentElement;a.view.contentView={fragment:c},c.parentNode&&s.DOM.removeNode(c)}if(t.anchorIsContainer){if(null!==d)for(var u=0,p=d.length;u<p;++u)a.view.addBinding(d[u].create(i,l,a));a.view.appendNodesTo(r)}else a.view.insertNodesBefore(r)}else if(null!==d)for(var m=0,g=d.length;m<g;++m)n.push(d[m].create(i,l,a))}else if(a.view){if(a.view.controller=a,null!==d)for(var f=0,_=d.length;f<_;++f)a.view.addBinding(d[f].create(t.host,l,a))}else if(null!==d)for(var v=0,b=d.length;v<b;++v)n.push(d[v].create(t.host,l,a))}else if(null!==d)for(var y=0,w=d.length;y<w;++y)n.push(d[y].create(i,l,a));return null!==o&&(o[this.htmlName]=a),t.initiatedByBehavior&&h&&a.view.created(),a},e.prototype._ensurePropertiesDefined=function(e,t){var i=void 0,s=void 0,n=void 0,r=void 0;if(!("__propertiesDefined__"in t))for(t.__propertiesDefined__=!0,i=this.properties,s=0,n=i.length;s<n;++s)void 0!==(r=i[s].createObserver(e))&&(t[r.propertyName]=r)},e}(),Mt=function(){function e(e){this.name=e.name,this.changeHandler=e.changeHandler||this.name+"Changed",this.selector=e.selector,this.all=e.all}return e.prototype.create=function(e,t,i){return new Et(this.selector,e,this.name,t,i,this.changeHandler,this.all)},e}(),jt=[],Et=function(){function e(e,t,i,s,n,r,o){this.selector=e,this.viewHost=t,this.property=i,this.viewModel=s,this.controller=n,this.changeHandler=r in s?r:null,this.usesShadowDOM=n.behavior.usesShadowDOM,this.all=o,!this.usesShadowDOM&&n.view&&n.view.contentView?this.contentView=n.view.contentView:this.contentView=null}return e.prototype.matches=function(e){if(e.matches(this.selector)){if(null===this.contentView)return!0;var t=this.contentView,i=e.auAssignedSlot;if(i&&i.projectFromAnchors){for(var s=i.projectFromAnchors,n=0,r=s.length;n<r;++n)if(s[n].auOwnerView===t)return!0;return!1}return e.auOwnerView===t}return!1},e.prototype.bind=function(e){var t=this.viewHost,i=this.viewModel,n=t.__childObserver__;if(!n){n=t.__childObserver__=s.DOM.createMutationObserver(V);var r={childList:!0,subtree:!this.usesShadowDOM};n.observe(t,r),n.binders=[]}if(n.binders.push(this),this.usesShadowDOM){var o=t.firstElementChild;if(this.all){var l=i[this.property];for(l?l.length=0:l=i[this.property]=[];o;)this.matches(o)&&l.push(o.au&&o.au.controller?o.au.controller.viewModel:o),o=o.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](jt)}else for(;o;){if(this.matches(o)){var a=o.au&&o.au.controller?o.au.controller.viewModel:o;this.viewModel[this.property]=a,null!==this.changeHandler&&this.viewModel[this.changeHandler](a);break}o=o.nextElementSibling}}},e.prototype.onRemove=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){var i=this.viewModel[this.property]||(this.viewModel[this.property]=[]),s=i.indexOf(t);return s!==-1&&i.splice(s,1),!0}return!1}return!1},e.prototype.onAdd=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){for(var i=this.viewModel[this.property]||(this.viewModel[this.property]=[]),s=0,n=e.previousElementSibling;n;)this.matches(n)&&s++,n=n.previousElementSibling;return i.splice(s,0,t),!0}this.viewModel[this.property]=t,null!==this.changeHandler&&this.viewModel[this.changeHandler](t)}return!1},e.prototype.unbind=function(){this.viewHost.__childObserver__&&(this.viewHost.__childObserver__.disconnect(),this.viewHost.__childObserver__=null)},e}(),Ft=e.SwapStrategies={before:function(e,t,i){return void 0===t?i():i().then(function(){return z(e,t)})},with:function(e,t,i){return void 0===t?i():Promise.all([z(e,t),i()])},after:function(e,t,i){return Promise.resolve(e.removeAll(!0)).then(i)}},At=e.CompositionEngine=(Ee=(0,o.inject)(kt,nt))(Fe=function(){function e(e,t){this.viewEngine=e,this.viewLocator=t}return e.prototype._swap=function(e,t){var i=Ft[e.swapOrder]||Ft.after,s=e.viewSlot.children.slice();return i(e.viewSlot,s,function(){return Promise.resolve(e.viewSlot.add(t)).then(function(){e.currentController&&e.currentController.unbind()})}).then(function(){e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done()})},e.prototype._createControllerAndSwap=function(e){var t=this;return this.createController(e).then(function(i){return i.automate(e.overrideContext,e.owningView),e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return t._swap(e,i.view)}).then(function(){return i}):t._swap(e,i.view).then(function(){return i})})},e.prototype.createController=function(e){var t=this,i=void 0,s=void 0,n=void 0,r=void 0;return this.ensureViewModel(e).then(H).then(function(){i=e.childContainer,s=e.viewModel,n=e.viewModelResource,r=n.metadata;var o=t.viewLocator.getViewStrategy(e.view||s);return e.viewResources&&o.makeRelativeTo(e.viewResources.viewUrl),r.load(i,n.value,null,o,!0)}).then(function(t){return r.create(i,Qe.dynamic(e.host,s,t))})},e.prototype.ensureViewModel=function(e){var t=e.childContainer=e.childContainer||e.container.createChild();if("string"==typeof e.viewModel)return e.viewModel=e.viewResources?e.viewResources.relativeToView(e.viewModel):e.viewModel,this.viewEngine.importViewModelResource(e.viewModel).then(function(i){return t.autoRegister(i.value),e.host&&t.registerInstance(s.DOM.Element,e.host),e.viewModel=t.viewModel=t.get(i.value),e.viewModelResource=i,e});var n=i.metadata.getOrCreateOwn(i.metadata.resource,Pt,e.viewModel.constructor);return n.elementName=n.elementName||"dynamic-element",n.initialize(e.container||t,e.viewModel.constructor),e.viewModelResource={metadata:n,value:e.viewModel.constructor},t.viewModel=e.viewModel,Promise.resolve(e)},e.prototype.compose=function(e){var t=this;e.childContainer=e.childContainer||e.container.createChild(),e.view=this.viewLocator.getViewStrategy(e.view);var i=e.childContainer.get(qe),s=i.tryCapture();return s?e.compositionTransactionOwnershipToken=s:e.compositionTransactionNotifier=i.enlist(),e.viewModel?this._createControllerAndSwap(e):e.view?(e.viewResources&&e.view.makeRelativeTo(e.viewResources.viewUrl),e.view.loadViewFactory(this.viewEngine,new Ye).then(function(i){var s=i.create(e.childContainer);return s.bind(e.bindingContext,e.overrideContext),e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return t._swap(e,s)}).then(function(){return s}):t._swap(e,s).then(function(){return s})})):e.viewSlot?(e.viewSlot.removeAll(),e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done(),Promise.resolve(null)):Promise.resolve(null)},e}())||Fe,Lt=e.ElementConfigResource=function(){function e(){}return e.prototype.initialize=function(e,t){},e.prototype.register=function(e,t){},e.prototype.load=function(e,t){var i=new t;e.get(l.EventManager).registerElementConfig(i)},e}(),Nt={mode:"open"};e.TemplatingEngine=(Ae=(0,o.inject)(o.Container,xt,yt,At))(Le=function(){function e(e,t,i,s){this._container=e,this._moduleAnalyzer=t,this._viewCompiler=i,this._compositionEngine=s,e.registerInstance(He,He.instance=new He)}return e.prototype.configureAnimator=function(e){this._container.unregister(He),this._container.registerInstance(He,He.instance=e)},e.prototype.compose=function(e){return this._compositionEngine.compose(e)},e.prototype.enhance=function(e){e instanceof s.DOM.Element&&(e={element:e});var t={},i=e.resources||this._container.get(ct);this._viewCompiler._compileNode(e.element,i,t,e.element.parentNode,"root",!0);var n=new _t(e.element,t,i),r=e.container||this._container.createChild(),o=n.create(r,Qe.enhance());return o.bind(e.bindingContext||{},e.overrideContext),o.firstChild=o.lastChild=o.fragment,o.fragment=s.DOM.createDocumentFragment(),o.attached(),o},e}())||Le}),define("aurelia-templating-resources/compose",["exports","aurelia-dependency-injection","aurelia-task-queue","aurelia-templating","aurelia-pal"],function(e,t,i,s,n){"use strict";function r(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function o(e,t,i,s,n){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}function l(e,t){return Object.assign(t,{bindingContext:e.bindingContext,overrideContext:e.overrideContext,owningView:e.owningView,container:e.container,viewSlot:e.viewSlot,viewResources:e.viewResources,currentController:e.currentController,host:e.element,swapOrder:e.swapOrder})}function a(e,t){e.currentInstruction=null,e.compositionEngine.compose(t).then(function(t){e.currentController=t,e.currentViewModel=t?t.viewModel:null})}Object.defineProperty(e,"__esModule",{value:!0}),e.Compose=void 0;var d,h,c,u,p,m,g,f;e.Compose=(d=(0,s.customElement)("compose"),h=(0,t.inject)(n.DOM.Element,t.Container,s.CompositionEngine,s.ViewSlot,s.ViewResources,i.TaskQueue),d(c=(0,s.noView)(c=h((u=function(){function e(e,t,i,s,n,o){r(this,"model",p,this),r(this,"view",m,this),r(this,"viewModel",g,this),r(this,"swapOrder",f,this),this.element=e,this.container=t,this.compositionEngine=i,this.viewSlot=s,this.viewResources=n,this.taskQueue=o,this.currentController=null,this.currentViewModel=null}return e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,a(this,l(this,{view:this.view,viewModel:this.viewModel,model:this.model}))},e.prototype.unbind=function(e,t){this.bindingContext=null,this.overrideContext=null;this.viewSlot.removeAll(!0,!0)},e.prototype.modelChanged=function(e,t){var i=this;if(this.currentInstruction)return void(this.currentInstruction.model=e);this.taskQueue.queueMicroTask(function(){if(i.currentInstruction)return void(i.currentInstruction.model=e);var t=i.currentViewModel;t&&"function"==typeof t.activate&&t.activate(e)})},e.prototype.viewChanged=function(e,t){var i=this,s=l(this,{view:e,viewModel:this.currentViewModel||this.viewModel,model:this.model});if(this.currentInstruction)return void(this.currentInstruction=s);this.currentInstruction=s,this.taskQueue.queueMicroTask(function(){return a(i,i.currentInstruction)})},e.prototype.viewModelChanged=function(e,t){var i=this,s=l(this,{viewModel:e,view:this.view,model:this.model});if(this.currentInstruction)return void(this.currentInstruction=s);this.currentInstruction=s,this.taskQueue.queueMicroTask(function(){return a(i,i.currentInstruction)})},e}(),p=o(u.prototype,"model",[s.bindable],{enumerable:!0,initializer:null}),m=o(u.prototype,"view",[s.bindable],{enumerable:!0,initializer:null}),g=o(u.prototype,"viewModel",[s.bindable],{enumerable:!0,initializer:null}),f=o(u.prototype,"swapOrder",[s.bindable],{enumerable:!0,initializer:null}),c=u))||c)||c)||c)}),define("aurelia-templating-resources/if",["exports","aurelia-templating","aurelia-dependency-injection"],function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.If=void 0;var s,n,r;e.If=(s=(0,t.customAttribute)("if"),n=(0,i.inject)(t.BoundViewFactory,t.ViewSlot),s(r=(0,t.templateController)(r=n(r=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.showing=!1,this.view=null,this.bindingContext=null,this.overrideContext=null}return e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=this;if(this.__queuedChanges)return void this.__queuedChanges.push(e);var i=this._runValueChanged(e);i instanceof Promise&&function(){var e=t.__queuedChanges=[],s=function i(){if(!e.length)return void(t.__queuedChanges=void 0);(t._runValueChanged(e.shift())||Promise.resolve()).then(i)};i.then(s)}()},e.prototype._runValueChanged=function(e){var t=this;if(!e){var i=void 0;return null!==this.view&&this.showing&&(i=this.viewSlot.remove(this.view),i instanceof Promise?i.then(function(){return t.view.unbind()}):this.view.unbind()),this.showing=!1,i}if(null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),!this.showing)return this.showing=!0,this.viewSlot.add(this.view)},e.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing&&(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)),this.view.returnToCache(),this.view=null))},e}())||r)||r)||r)}),define("aurelia-templating-resources/with",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-binding"],function(e,t,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.With=void 0;var n,r,o;e.With=(n=(0,i.customAttribute)("with"),r=(0,t.inject)(i.BoundViewFactory,i.ViewSlot),n(o=(0,i.templateController)(o=r(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.parentOverrideContext=null,this.view=null}return e.prototype.bind=function(e,t){this.parentOverrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=(0,s.createOverrideContext)(e,this.parentOverrideContext);this.view?this.view.bind(e,t):(this.view=this.viewFactory.create(),this.view.bind(e,t),this.viewSlot.add(this.view))},e.prototype.unbind=function(){this.parentOverrideContext=null,this.view&&this.view.unbind()},e}())||o)||o)||o)}),define("aurelia-templating-resources/repeat",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","./repeat-strategy-locator","./repeat-utilities","./analyze-view-factory","./abstract-repeater"],function(e,t,i,s,n,r,o,l){"use strict";function a(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t,i,s,n){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.Repeat=void 0;var u,p,m,g,f,_,v,b;e.Repeat=(u=(0,s.customAttribute)("repeat"),p=(0,t.inject)(s.BoundViewFactory,s.TargetInstruction,s.ViewSlot,s.ViewResources,i.ObserverLocator,n.RepeatStrategyLocator),u(m=(0,s.templateController)(m=p((g=function(e){function t(t,i,s,n,l,h){var c=d(this,e.call(this,{local:"item",viewsRequireLifecycle:(0,o.viewsRequireLifecycle)(t)}));return a(c,"items",f,c),a(c,"local",_,c),a(c,"key",v,c),a(c,"value",b,c),c.viewFactory=t,c.instruction=i,c.viewSlot=s,c.lookupFunctions=n.lookupFunctions,c.observerLocator=l,c.key="key",c.value="value",c.strategyLocator=h,c.ignoreMutation=!1,c.sourceExpression=(0,r.getItemsSourceExpression)(c.instruction,"repeat.for"),c.isOneTime=(0,r.isOneTime)(c.sourceExpression),c.viewsRequireLifecycle=(0,o.viewsRequireLifecycle)(t),c}return h(t,e),t.prototype.call=function(e,t){this[e](this.items,t)},t.prototype.bind=function(e,t){this.scope={bindingContext:e,overrideContext:t},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},t.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0),this._unsubscribeCollection()},t.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},t.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var e=this.items;if(this.strategy=this.strategyLocator.getStrategy(e),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,e)}},t.prototype._getInnerCollection=function(){var e=(0,r.unwrapExpression)(this.sourceExpression);return e?e.evaluate(this.scope,null):null},t.prototype.handleCollectionMutated=function(e,t){this.collectionObserver&&this.strategy.instanceMutated(this,e,t)},t.prototype.handleInnerCollectionMutated=function(e,t){var i=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var s=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return i.ignoreMutation=!1}),s===this.items?this.itemsChanged():this.items=s}},t.prototype._observeInnerCollection=function(){var e=this._getInnerCollection(),t=this.strategyLocator.getStrategy(e);return!!t&&(this.collectionObserver=t.getCollectionObserver(this.observerLocator,e),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},t.prototype._observeCollection=function(){var e=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,e),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},t.prototype._captureAndRemoveMatcherBinding=function(){if(this.viewFactory.viewFactory)for(var e=this.viewFactory.viewFactory.instructions,t=Object.keys(e),i=0;i<t.length;i++){var s=e[t[i]].expressions;if(s)for(;i<s.length;i++)if("matcher"===s[0].targetProperty){var n=s[0];return s.splice(0,1),n}}},t.prototype.viewCount=function(){return this.viewSlot.children.length},t.prototype.views=function(){return this.viewSlot.children},t.prototype.view=function(e){return this.viewSlot.children[e]},t.prototype.matcher=function(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null},t.prototype.addView=function(e,t){var i=this.viewFactory.create();i.bind(e,t),this.viewSlot.add(i)},t.prototype.insertView=function(e,t,i){var s=this.viewFactory.create();s.bind(t,i),this.viewSlot.insert(e,s)},t.prototype.moveView=function(e,t){this.viewSlot.move(e,t)},t.prototype.removeAllViews=function(e,t){return this.viewSlot.removeAll(e,t)},t.prototype.removeViews=function(e,t,i){return this.viewSlot.removeMany(e,t,i)},t.prototype.removeView=function(e,t,i){return this.viewSlot.removeAt(e,t,i)},t.prototype.updateBindings=function(e){for(var t=e.bindings.length;t--;)(0,r.updateOneTimeBinding)(e.bindings[t])
;for(t=e.controllers.length;t--;)for(var i=e.controllers[t].boundProperties.length;i--;){var s=e.controllers[t].boundProperties[i].binding;(0,r.updateOneTimeBinding)(s)}},t}(l.AbstractRepeater),f=c(g.prototype,"items",[s.bindable],{enumerable:!0,initializer:null}),_=c(g.prototype,"local",[s.bindable],{enumerable:!0,initializer:null}),v=c(g.prototype,"key",[s.bindable],{enumerable:!0,initializer:null}),b=c(g.prototype,"value",[s.bindable],{enumerable:!0,initializer:null}),m=g))||m)||m)||m)}),define("aurelia-templating-resources/repeat-strategy-locator",["exports","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy"],function(e,t,i,s,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepeatStrategyLocator=void 0;e.RepeatStrategyLocator=function(){function e(){this.matchers=[],this.strategies=[],this.addStrategy(function(e){return null===e||void 0===e},new t.NullRepeatStrategy),this.addStrategy(function(e){return e instanceof Array},new i.ArrayRepeatStrategy),this.addStrategy(function(e){return e instanceof Map},new s.MapRepeatStrategy),this.addStrategy(function(e){return e instanceof Set},new n.SetRepeatStrategy),this.addStrategy(function(e){return"number"==typeof e},new r.NumberRepeatStrategy)}return e.prototype.addStrategy=function(e,t){this.matchers.push(e),this.strategies.push(t)},e.prototype.getStrategy=function(e){for(var t=this.matchers,i=0,s=t.length;i<s;++i)if(t[i](e))return this.strategies[i];return null},e}()}),define("aurelia-templating-resources/null-repeat-strategy",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NullRepeatStrategy=function(){function e(){}return e.prototype.instanceChanged=function(e,t){e.removeAllViews(!0)},e.prototype.getCollectionObserver=function(e,t){},e}()}),define("aurelia-templating-resources/array-repeat-strategy",["exports","./repeat-utilities","aurelia-binding"],function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayRepeatStrategy=void 0;e.ArrayRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getArrayObserver(t)},e.prototype.instanceChanged=function(e,i){var s=this,n=i.length;if(!i||0===n)return void e.removeAllViews(!0,!e.viewsRequireLifecycle);var r=e.views(),o=r.length;if(0===o)return void this._standardProcessInstanceChanged(e,i);e.viewsRequireLifecycle?function(){for(var l=r.slice(0),a=e.local,d=e.matcher(),h=[],c=[],u=0;u<o;u++){var p=l[u],m=p.bindingContext[a];(0,t.indexOf)(i,m,d)===-1?c.push(p):h.push(m)}var g=void 0,f=void 0;h.length>0?(f=e.removeViews(c,!0,!e.viewsRequireLifecycle),g=function(){for(var o=0;o<n;o++){var l=i[o],a=(0,t.indexOf)(h,l,d,o),c=void 0;if(a===-1){var u=(0,t.createFullOverrideContext)(e,i[o],o,n);e.insertView(o,u.bindingContext,u),h.splice(o,0,void 0)}else a===o?(c=r[a],h[a]=void 0):(c=r[a],e.moveView(a,o),h.splice(a,1),h.splice(o,0,void 0));c&&(0,t.updateOverrideContext)(c.overrideContext,o,n)}s._inPlaceProcessItems(e,i)}):(f=e.removeAllViews(!0,!e.viewsRequireLifecycle),g=function(){return s._standardProcessInstanceChanged(e,i)}),f instanceof Promise?f.then(g):g()}():this._inPlaceProcessItems(e,i)},e.prototype._standardProcessInstanceChanged=function(e,i){for(var s=0,n=i.length;s<n;s++){var r=(0,t.createFullOverrideContext)(e,i[s],s,n);e.addView(r.bindingContext,r)}},e.prototype._inPlaceProcessItems=function(e,i){for(var s=i.length,n=e.viewCount();n>s;)n--,e.removeView(n,!0,!e.viewsRequireLifecycle);for(var r=e.local,o=0;o<n;o++){var l=e.view(o),a=o===s-1,d=0!==o&&!a;l.bindingContext[r]===i[o]&&l.overrideContext.$middle===d&&l.overrideContext.$last===a||(l.bindingContext[r]=i[o],l.overrideContext.$middle=d,l.overrideContext.$last=a,e.updateBindings(l))}for(var h=n;h<s;h++){var c=(0,t.createFullOverrideContext)(e,i[h],h,s);e.addView(c.bindingContext,c)}},e.prototype.instanceMutated=function(e,t,s){var n=this;if(e.__queuedSplices){for(var r=0,o=s.length;r<o;++r){var l=s[r],a=l.index,d=l.removed,h=l.addedCount;(0,i.mergeSplice)(e.__queuedSplices,a,d,h)}return void(e.__array=t.slice(0))}var c=this._runSplices(e,t.slice(0),s);c instanceof Promise&&function(){var t=e.__queuedSplices=[],i=function i(){if(!t.length)return e.__queuedSplices=void 0,void(e.__array=void 0);var s=n._runSplices(e,e.__array,t)||Promise.resolve();t=e.__queuedSplices=[],s.then(i)};c.then(i)}()},e.prototype._runSplices=function(e,i,s){for(var n=this,r=0,o=[],l=0,a=s.length;l<a;++l){for(var d=s[l],h=d.removed,c=0,u=h.length;c<u;++c){var p=e.removeView(d.index+r+o.length,!0);p instanceof Promise&&o.push(p)}r-=d.addedCount}if(o.length>0)return Promise.all(o).then(function(){var r=n._handleAddedSplices(e,i,s);(0,t.updateOverrideContexts)(e.views(),r)});var m=this._handleAddedSplices(e,i,s);(0,t.updateOverrideContexts)(e.views(),m)},e.prototype._handleAddedSplices=function(e,i,s){for(var n=void 0,r=void 0,o=i.length,l=0,a=s.length;l<a;++l){var d=s[l],h=n=d.index,c=d.index+d.addedCount;for((void 0===r||null===r||r>d.index)&&(r=n);h<c;++h){var u=(0,t.createFullOverrideContext)(e,i[h],h,o);e.insertView(h,u.bindingContext,u)}}return r},e}()}),define("aurelia-templating-resources/repeat-utilities",["exports","aurelia-binding"],function(e,t){"use strict";function i(e,t){var i=e.length;for(t>0&&(t-=1);t<i;++t)n(e[t].overrideContext,t,i)}function s(e,i,s,r,o){var l={},a=(0,t.createOverrideContext)(l,e.scope.overrideContext);return void 0!==o?(l[e.key]=o,l[e.value]=i):l[e.local]=i,n(a,s,r),a}function n(e,t,i){var s=0===t,n=t===i-1,r=t%2==0;e.$index=t,e.$first=s,e.$last=n,e.$middle=!(s||n),e.$odd=!r,e.$even=r}function r(e,t){return e.behaviorInstructions.filter(function(e){return e.originalAttrName===t})[0].attributes.items.sourceExpression}function o(e){for(var i=!1;e instanceof t.BindingBehavior;)e=e.expression;for(;e instanceof t.ValueConverter;)e=e.expression,i=!0;return i?e:null}function l(e){for(;e instanceof t.BindingBehavior;){if("oneTime"===e.name)return!0;e=e.expression}return!1}function a(e){e.call&&e.mode===h?e.call(t.sourceContext):e.updateOneTimeBindings&&e.updateOneTimeBindings()}function d(e,t,i,s){if(!i)return e.indexOf(t);for(var n=e.length,r=s||0;r<n;r++)if(i(e[r],t))return r;return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.updateOverrideContexts=i,e.createFullOverrideContext=s,e.updateOverrideContext=n,e.getItemsSourceExpression=r,e.unwrapExpression=o,e.isOneTime=l,e.updateOneTimeBinding=a,e.indexOf=d;var h=t.bindingMode.oneTime}),define("aurelia-templating-resources/map-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapRepeatStrategy=void 0;e.MapRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getMapObserver(t)},e.prototype.instanceChanged=function(e,t){var i=this,s=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(s instanceof Promise)return void s.then(function(){return i._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,i){var s=0,n=void 0;i.forEach(function(r,o){n=(0,t.createFullOverrideContext)(e,r,s,i.size,o),e.addView(n.bindingContext,n),++s})},e.prototype.instanceMutated=function(e,i,s){var n=void 0,r=void 0,o=void 0,l=void 0,a=void 0,d=void 0,h=[],c=void 0;for(r=0,o=s.length;r<o;++r)switch(d=s[r],n=d.key,d.type){case"update":a=this._getViewIndexByKey(e,n),c=e.removeView(a,!0,!e.viewsRequireLifecycle),c instanceof Promise&&h.push(c),l=(0,t.createFullOverrideContext)(e,i.get(n),a,i.size,n),e.insertView(a,l.bindingContext,l);break;case"add":l=(0,t.createFullOverrideContext)(e,i.get(n),i.size-1,i.size,n),e.insertView(i.size-1,l.bindingContext,l);break;case"delete":if(void 0===d.oldValue)return;a=this._getViewIndexByKey(e,n),c=e.removeView(a,!0,!e.viewsRequireLifecycle),c instanceof Promise&&h.push(c);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}h.length>0?Promise.all(h).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByKey=function(e,t){var i=void 0,s=void 0,n=void 0;for(i=0,s=e.viewCount();i<s;++i)if(n=e.view(i),n.bindingContext[e.key]===t)return i},e}()}),define("aurelia-templating-resources/set-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SetRepeatStrategy=void 0;e.SetRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getSetObserver(t)},e.prototype.instanceChanged=function(e,t){var i=this,s=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(s instanceof Promise)return void s.then(function(){return i._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,i){var s=0,n=void 0;i.forEach(function(r){n=(0,t.createFullOverrideContext)(e,r,s,i.size),e.addView(n.bindingContext,n),++s})},e.prototype.instanceMutated=function(e,i,s){var n=void 0,r=void 0,o=void 0,l=void 0,a=void 0,d=void 0,h=[],c=void 0;for(r=0,o=s.length;r<o;++r)switch(d=s[r],n=d.value,d.type){case"add":l=(0,t.createFullOverrideContext)(e,n,i.size-1,i.size),e.insertView(i.size-1,l.bindingContext,l);break;case"delete":a=this._getViewIndexByValue(e,n),c=e.removeView(a,!0,!e.viewsRequireLifecycle),c instanceof Promise&&h.push(c);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}h.length>0?Promise.all(h).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByValue=function(e,t){var i=void 0,s=void 0,n=void 0;for(i=0,s=e.viewCount();i<s;++i)if(n=e.view(i),n.bindingContext[e.local]===t)return i},e}()}),define("aurelia-templating-resources/number-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberRepeatStrategy=void 0;e.NumberRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(){return null},e.prototype.instanceChanged=function(e,t){var i=this,s=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(s instanceof Promise)return void s.then(function(){return i._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,i){var s=e.viewCount(),n=void 0,r=void 0,o=void 0,l=void 0;if(i=Math.floor(i),(l=s-i)>0)for(l>s&&(l=s),n=0,r=l;n<r;++n)e.removeView(s-(n+1),!0,!e.viewsRequireLifecycle);else{for(n=s,r=i;n<r;++n)o=(0,t.createFullOverrideContext)(e,n,n,r),e.addView(o.bindingContext,o);(0,t.updateOverrideContexts)(e.views(),0)}},e}()}),define("aurelia-templating-resources/analyze-view-factory",["exports"],function(e){"use strict";function t(e){var t=e.type,i=null!==t.elementName?t.elementName:t.attributeName;return n.indexOf(i)===-1&&(t.handlesAttached||t.handlesBind||t.handlesCreated||t.handlesDetached||t.handlesUnbind)||t.viewFactory&&s(t.viewFactory)||e.viewFactory&&s(e.viewFactory)}function i(e){var i=e.behaviorInstructions;if(i)for(var n=i.length;n--;)if(t(i[n]))return!0;return e.viewFactory&&s(e.viewFactory)}function s(e){if("_viewsRequireLifecycle"in e)return e._viewsRequireLifecycle;if(e._viewsRequireLifecycle=!1,e.viewFactory)return e._viewsRequireLifecycle=s(e.viewFactory),e._viewsRequireLifecycle;if(e.template.querySelector(".au-animate"))return e._viewsRequireLifecycle=!0,!0;for(var t in e.instructions)if(i(e.instructions[t]))return e._viewsRequireLifecycle=!0,!0;return e._viewsRequireLifecycle=!1,!1}Object.defineProperty(e,"__esModule",{value:!0}),e.viewsRequireLifecycle=s;var n=e.lifecycleOptionalBehaviors=["focus","if","repeat","show","with"]}),define("aurelia-templating-resources/abstract-repeater",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AbstractRepeater=function(){function e(e){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},e)}return e.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},e.prototype.views=function(){throw new Error("subclass must implement `views`")},e.prototype.view=function(e){throw new Error("subclass must implement `view`")},e.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},e.prototype.addView=function(e,t){throw new Error("subclass must implement `addView`")},e.prototype.insertView=function(e,t,i){throw new Error("subclass must implement `insertView`")},e.prototype.moveView=function(e,t){throw new Error("subclass must implement `moveView`")},e.prototype.removeAllViews=function(e,t){throw new Error("subclass must implement `removeAllViews`")},e.prototype.removeViews=function(e,t,i){throw new Error("subclass must implement `removeView`")},e.prototype.removeView=function(e,t,i){throw new Error("subclass must implement `removeView`")},e.prototype.updateBindings=function(e){throw new Error("subclass must implement `updateBindings`")},e}()}),define("aurelia-templating-resources/show",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Show=void 0;var r,o,l;e.Show=(r=(0,i.customAttribute)("show"),o=(0,t.inject)(s.DOM.Element,i.Animator,t.Optional.of(s.DOM.boundary,!0)),r(l=o(l=function(){function e(e,t,i){this.element=e,this.animator=t,this.domBoundary=i}return e.prototype.created=function(){(0,n.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.removeClass(this.element,n.aureliaHideClassName):this.animator.addClass(this.element,n.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||l)||l)}),define("aurelia-templating-resources/aurelia-hide-style",["exports","aurelia-pal"],function(e,t){"use strict";function i(){t.DOM.injectStyles(r)}function s(e){t.FEATURE.shadowDOM&&e&&!e.hasAureliaHideStyle&&(e.hasAureliaHideStyle=!0,t.DOM.injectStyles(r,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.aureliaHideClassName=void 0,e.injectAureliaHideStyleAtHead=i,e.injectAureliaHideStyleAtBoundary=s;var n=e.aureliaHideClassName="aurelia-hide",r="."+n+" { display:none !important; }"}),define("aurelia-templating-resources/hide",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hide=void 0;var r,o,l;e.Hide=(r=(0,i.customAttribute)("hide"),o=(0,t.inject)(s.DOM.Element,i.Animator,t.Optional.of(s.DOM.boundary,!0)),r(l=o(l=function(){function e(e,t,i){this.element=e,this.animator=t,this.domBoundary=i}return e.prototype.created=function(){(0,n.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.addClass(this.element,n.aureliaHideClassName):this.animator.removeClass(this.element,n.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||l)||l)}),define("aurelia-templating-resources/sanitize-html",["exports","aurelia-binding","aurelia-dependency-injection","./html-sanitizer"],function(e,t,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SanitizeHTMLValueConverter=void 0;var n,r,o;e.SanitizeHTMLValueConverter=(n=(0,t.valueConverter)("sanitizeHTML"),r=(0,i.inject)(s.HTMLSanitizer),n(o=r(o=function(){function e(e){this.sanitizer=e}return e.prototype.toView=function(e){return null===e||void 0===e?null:this.sanitizer.sanitize(e)},e}())||o)||o)}),define("aurelia-templating-resources/html-sanitizer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HTMLSanitizer=function(){function e(){}return e.prototype.sanitize=function(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")},e}()}),define("aurelia-templating-resources/replaceable",["exports","aurelia-dependency-injection","aurelia-templating"],function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Replaceable=void 0;var s,n,r;e.Replaceable=(s=(0,i.customAttribute)("replaceable"),n=(0,t.inject)(i.BoundViewFactory,i.ViewSlot),s(r=(0,i.templateController)(r=n(r=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null}return e.prototype.bind=function(e,t){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(e,t)},e.prototype.unbind=function(){this.view.unbind()},e}())||r)||r)||r)}),define("aurelia-templating-resources/focus",["exports","aurelia-templating","aurelia-binding","aurelia-dependency-injection","aurelia-task-queue","aurelia-pal"],function(e,t,i,s,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Focus=void 0;var o,l,a;e.Focus=(o=(0,t.customAttribute)("focus",i.bindingMode.twoWay),l=(0,s.inject)(r.DOM.Element,n.TaskQueue),o(a=l(a=function(){function e(e,t){var i=this;this.element=e,this.taskQueue=t,this.isAttached=!1,this.needsApply=!1,this.focusListener=function(e){i.value=!0},this.blurListener=function(e){r.DOM.activeElement!==i.element&&(i.value=!1)}}return e.prototype.valueChanged=function(e){this.isAttached?this._apply():this.needsApply=!0},e.prototype._apply=function(){var e=this;this.value?this.taskQueue.queueMicroTask(function(){e.value&&e.element.focus()}):this.element.blur()},e.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this.focusListener),this.element.addEventListener("blur",this.blurListener)},e.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this.focusListener),this.element.removeEventListener("blur",this.blurListener)},e}())||a)||a)}),define("aurelia-templating-resources/css-resource",["exports","aurelia-templating","aurelia-loader","aurelia-dependency-injection","aurelia-path","aurelia-pal"],function(e,t,i,s,n,r){"use strict";function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if("string"!=typeof t)throw new Error("Failed loading required CSS file: "+e);return t.replace(h,function(t,i){var s=i.charAt(0);return"'"!==s&&'"'!==s||(i=i.substr(1,i.length-2)),"url('"+(0,n.relativeToFile)(i,e)+"')"})}function d(e){var i;return(0,t.resource)(new c(e))(i=function(e){function t(){return o(this,e.apply(this,arguments))}return l(t,e),t}(u))||i}Object.defineProperty(e,"__esModule",{value:!0}),e._createCSSResource=d;var h=/url\((?!['"]data)([^)]+)\)/gi,c=function(){function e(e){this.address=e,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return e.prototype.initialize=function(e,t){this._scoped=new t(this)},e.prototype.register=function(e,t){"scoped"===t?e.registerViewEngineHooks(this._scoped):this._global=!0},e.prototype.load=function(e){var t=this;return e.get(i.Loader).loadText(this.address).catch(function(e){return null}).then(function(e){e=a(t.address,e),t._scoped.css=e,t._global&&(t._alreadyGloballyInjected=!0,r.DOM.injectStyles(e))})},e}(),u=function(){function e(e){this.owner=e,this.css=null}return e.prototype.beforeCompile=function(e,t,i){if(i.targetShadowDOM)r.DOM.injectStyles(this.css,e,!0);else if(r.FEATURE.scopedCSS){var s=r.DOM.injectStyles(this.css,e,!0);s.setAttribute("scoped","scoped")}else this.owner._alreadyGloballyInjected||(r.DOM.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},e}()}),define("aurelia-templating-resources/attr-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttrBindingBehavior=void 0;e.AttrBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,i){e.targetObserver=new t.DataAttributeObserver(e.target,e.targetProperty)},e.prototype.unbind=function(e,t){},e}()}),define("aurelia-templating-resources/binding-mode-behaviors",["exports","aurelia-binding","aurelia-metadata"],function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TwoWayBindingBehavior=e.OneWayBindingBehavior=e.OneTimeBindingBehavior=void 0;var s,n,r,o={bind:function(e,t,i){e.originalMode=e.mode,e.mode=this.mode},unbind:function(e,t){e.mode=e.originalMode,e.originalMode=null}};e.OneTimeBindingBehavior=(0,i.mixin)(o)(s=function(){this.mode=t.bindingMode.oneTime})||s,e.OneWayBindingBehavior=(0,i.mixin)(o)(n=function(){this.mode=t.bindingMode.oneWay})||n,e.TwoWayBindingBehavior=(0,i.mixin)(o)(r=function(){this.mode=t.bindingMode.twoWay})||r}),define("aurelia-templating-resources/throttle-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function i(e){var t=this,i=this.throttleState,s=+new Date-i.last;if(s>=i.delay)return clearTimeout(i.timeoutId),i.timeoutId=null,i.last=+new Date,void this.throttledMethod(e);i.newValue=e,null===i.timeoutId&&(i.timeoutId=setTimeout(function(){i.timeoutId=null,i.last=+new Date,t.throttledMethod(i.newValue)},i.delay-s))}Object.defineProperty(e,"__esModule",{value:!0}),e.ThrottleBindingBehavior=void 0;e.ThrottleBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r="updateTarget";e.callSource?r="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(r="updateSource"),e.throttledMethod=e[r],e.throttledMethod.originalName=r,e[r]=i,e.throttleState={delay:n,last:0,timeoutId:null}},e.prototype.unbind=function(e,t){e[e.throttledMethod.originalName]=e.throttledMethod,e.throttledMethod=null,clearTimeout(e.throttleState.timeoutId),e.throttleState=null},e}()}),define("aurelia-templating-resources/debounce-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function i(e){var t=this,i=this.debounceState;if(i.immediate)return i.immediate=!1,void this.debouncedMethod(e);clearTimeout(i.timeoutId),i.timeoutId=setTimeout(function(){return t.debouncedMethod(e)},i.delay)}Object.defineProperty(e,"__esModule",{value:!0}),e.DebounceBindingBehavior=void 0;e.DebounceBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r="updateTarget";e.callSource?r="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(r="updateSource"),e.debouncedMethod=e[r],e.debouncedMethod.originalName=r,e[r]=i,e.debounceState={delay:n,timeoutId:null,immediate:"updateTarget"===r}},e.prototype.unbind=function(e,t){e[e.debouncedMethod.originalName]=e.debouncedMethod,e.debouncedMethod=null,clearTimeout(e.debounceState.timeoutId),e.debounceState=null},e}()}),define("aurelia-templating-resources/self-binding-behavior",["exports"],function(e){"use strict";function t(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}function i(e){var i=t(e);this.target===i&&this.selfEventCallSource(e)}Object.defineProperty(e,"__esModule",{value:!0});e.SelfBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){if(!e.callSource||!e.targetEvent)throw new Error("Self binding behavior only supports event.");e.selfEventCallSource=e.callSource,e.callSource=i},e.prototype.unbind=function(e,t){e.callSource=e.selfEventCallSource,e.selfEventCallSource=null},e}()}),define("aurelia-templating-resources/signal-binding-behavior",["exports","./binding-signaler"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignalBindingBehavior=void 0;e.SignalBindingBehavior=function(){function e(e){this.signals=e.signals}return e.inject=function(){return[t.BindingSignaler]},e.prototype.bind=function(e,t){if(!e.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");if(3===arguments.length){var i=arguments[2];(this.signals[i]||(this.signals[i]=[])).push(e),e.signalName=i}else{if(!(arguments.length>3))throw new Error("Signal name is required.");for(var s=Array.prototype.slice.call(arguments,2),n=s.length;n--;){var r=s[n];(this.signals[r]||(this.signals[r]=[])).push(e)}e.signalName=s}},e.prototype.unbind=function(e,t){var i=e.signalName;if(e.signalName=null,Array.isArray(i))for(var s=i,n=s.length;n--;){var r=s[n],o=this.signals[r];o.splice(o.indexOf(e),1)}else{var l=this.signals[i];l.splice(l.indexOf(e),1)}},e}()}),define("aurelia-templating-resources/binding-signaler",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingSignaler=void 0;e.BindingSignaler=function(){function e(){this.signals={}}return e.prototype.signal=function(e){var i=this.signals[e];if(i)for(var s=i.length;s--;)i[s].call(t.sourceContext)},e}()}),define("aurelia-templating-resources/update-trigger-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateTriggerBindingBehavior=void 0;var i,s,n="The updateTrigger binding behavior can only be applied to two-way bindings on input/select elements.";e.UpdateTriggerBindingBehavior=(s=i=function(){function e(e){this.eventManager=e}return e.prototype.bind=function(e,i){for(var s=arguments.length,r=Array(s>2?s-2:0),o=2;o<s;o++)r[o-2]=arguments[o];if(0===r.length)throw new Error("The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">");if(e.mode!==t.bindingMode.twoWay)throw new Error(n);var l=e.observerLocator.getObserver(e.target,e.targetProperty);if(!l.handler)throw new Error(n);e.targetObserver=l,l.originalHandler=e.targetObserver.handler;var a=this.eventManager.createElementHandler(r);l.handler=a},e.prototype.unbind=function(e,t){e.targetObserver.handler=e.targetObserver.originalHandler,e.targetObserver.originalHandler=null},e}(),i.inject=[t.EventManager],s)}),define("aurelia-templating-resources/html-resource-plugin",["exports","aurelia-templating","./dynamic-element"],function(e,t,i){"use strict";function s(e){return/([^\/^\?]+)\.html/i.exec(e)[1].toLowerCase()}function n(e){var n=e.container.get(t.ViewEngine),r=e.aurelia.loader;n.addResourcePlugin(".html",{fetch:function(e){return r.loadTemplate(e).then(function(t){var n,r=t.template.getAttribute("bindable"),o=s(e);return r?(r=r.split(",").map(function(e){return e.trim()}),t.template.removeAttribute("bindable")):r=[],n={},n[o]=(0,i._createDynamicElement)(o,e,r),n})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.getElementName=s,e.configure=n}),define("aurelia-templating-resources/dynamic-element",["exports","aurelia-templating"],function(e,t){"use strict";function i(e,i,s){for(var n,r,o,l=(n=(0,t.customElement)(e),r=(0,t.useView)(i),n(o=r(o=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||o)||o),a=0,d=s.length;a<d;++a)(0,t.bindable)(s[a])(l);return l}Object.defineProperty(e,"__esModule",{value:!0}),e._createDynamicElement=i}),define("aurelia-templating-router/route-loader",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-router","aurelia-path","aurelia-metadata","./router-view"],function(e,t,i,s,n,r,o){"use strict";function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){var t,s,n,r=/([^\/^\?]+)\.html/i.exec(e)[1];return t=(0,i.customElement)(r),s=(0,i.useView)(e),t(n=s(n=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||n)||n}Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingRouteLoader=void 0;var h,c;e.TemplatingRouteLoader=(h=(0,t.inject)(i.CompositionEngine))(c=function(e){function t(t){var i=l(this,e.call(this));return i.compositionEngine=t,i}return a(t,e),t.prototype.loadRoute=function(e,t){var i=e.container.createChild(),l=/\.html/.test(t.moduleId)?d(t.moduleId):(0,n.relativeToFile)(t.moduleId,r.Origin.get(e.container.viewModel.constructor).moduleId),a={viewModel:l,childContainer:i,view:t.view||t.viewStrategy,router:e};return i.registerSingleton(o.RouterViewLocator),i.getChildRouter=function(){var t=void 0;return i.registerHandler(s.Router,function(s){return t||(t=e.createChild(i))}),i.get(s.Router)},this.compositionEngine.ensureViewModel(a)},t}(s.RouteLoader))||c}),define("aurelia-templating-router/router-view",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","aurelia-router","aurelia-metadata","aurelia-pal"],function(e,t,i,s,n,r,o){"use strict";function l(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function a(e,t,i,s,n){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.RouterViewLocator=e.RouterView=void 0;var d,h,c,u,p,m,g,f,_=(e.RouterView=(d=(0,s.customElement)("router-view"),h=(0,t.inject)(o.DOM.Element,t.Container,s.ViewSlot,n.Router,s.ViewLocator,s.CompositionTransaction,s.CompositionEngine),d(c=(0,s.noView)(c=h((u=function(){function e(e,t,i,s,n,r,o){l(this,"swapOrder",p,this),l(this,"layoutView",m,this),l(this,"layoutViewModel",g,this),l(this,"layoutModel",f,this),this.element=e,this.container=t,this.viewSlot=i,this.router=s,this.viewLocator=n,this.compositionTransaction=r,this.compositionEngine=o,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in r||(r.initialComposition=!0,this.compositionTransactionNotifier=r.enlist())}return e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.container.viewModel=e,this.overrideContext=t},e.prototype.process=function(e,t){var i=this,n=e.component,o=n.childContainer,l=n.viewModel,a=n.viewModelResource,d=a.metadata,h=n.router.currentInstruction.config,c=h.viewPorts?h.viewPorts[e.name]:{};o.get(_)._notify(this);var u={viewModel:c.layoutViewModel||h.layoutViewModel||this.layoutViewModel,view:c.layoutView||h.layoutView||this.layoutView,model:c.layoutModel||h.layoutModel||this.layoutModel,router:e.component.router,childContainer:o,viewSlot:this.viewSlot},p=this.viewLocator.getViewStrategy(n.view||l);return p&&n.view&&p.makeRelativeTo(r.Origin.get(n.router.container.viewModel.constructor).moduleId),d.load(o,a.value,null,p,!0).then(function(n){i.compositionTransactionNotifier||(i.compositionTransactionOwnershipToken=i.compositionTransaction.tryCapture()),(u.viewModel||u.view)&&(e.layoutInstruction=u),e.controller=d.create(o,s.BehaviorInstruction.dynamic(i.element,l,n)),t||i.swap(e)})},e.prototype.swap=function(e){var t=this,n=e.layoutInstruction,r=this.view,o=function(){var e=s.SwapStrategies[t.swapOrder]||s.SwapStrategies.after,i=t.viewSlot;e(i,r,function(){return Promise.resolve(i.add(t.view))}).then(function(){t._notify()})},l=function(i){return e.controller.automate(t.overrideContext,i),
t.compositionTransactionOwnershipToken?t.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return t.compositionTransactionOwnershipToken=null,o()}):o()};return n?(n.viewModel||(n.viewModel={}),this.compositionEngine.createController(n).then(function(r){return s.ShadowDOM.distributeView(e.controller.view,r.slots||r.view.slots),r.automate((0,i.createOverrideContext)(n.viewModel),t.owningView),r.view.children.push(e.controller.view),r.view||r}).then(function(e){return t.view=e,l(e)})):(this.view=e.controller.view,l(this.owningView))},e.prototype._notify=function(){this.compositionTransactionNotifier&&(this.compositionTransactionNotifier.done(),this.compositionTransactionNotifier=null)},e}(),p=a(u.prototype,"swapOrder",[s.bindable],{enumerable:!0,initializer:null}),m=a(u.prototype,"layoutView",[s.bindable],{enumerable:!0,initializer:null}),g=a(u.prototype,"layoutViewModel",[s.bindable],{enumerable:!0,initializer:null}),f=a(u.prototype,"layoutModel",[s.bindable],{enumerable:!0,initializer:null}),c=u))||c)||c)||c),e.RouterViewLocator=function(){function e(){var e=this;this.promise=new Promise(function(t){return e.resolve=t})}return e.prototype.findNearest=function(){return this.promise},e.prototype._notify=function(e){this.resolve(e)},e}())}),define("aurelia-templating-router/route-href",["exports","aurelia-templating","aurelia-dependency-injection","aurelia-router","aurelia-pal","aurelia-logging"],function(e,t,i,s,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RouteHref=void 0;var o,l,a,d,h,c,u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r),p=u.getLogger("route-href");e.RouteHref=(o=(0,t.customAttribute)("route-href"),l=(0,t.bindable)({name:"route",changeHandler:"processChange"}),a=(0,t.bindable)({name:"params",changeHandler:"processChange"}),d=(0,t.bindable)({name:"attribute",defaultValue:"href"}),h=(0,i.inject)(s.Router,n.DOM.Element),o(c=l(c=a(c=d(c=h(c=function(){function e(e,t){this.router=e,this.element=t}return e.prototype.bind=function(){this.isActive=!0,this.processChange()},e.prototype.unbind=function(){this.isActive=!1},e.prototype.attributeChanged=function(e,t){t&&this.element.removeAttribute(t),this.processChange()},e.prototype.processChange=function(){var e=this;return this.router.ensureConfigured().then(function(){if(!e.isActive)return null;var t=e.router.generate(e.route,e.params);return e.element.au.controller?e.element.au.controller.viewModel[e.attribute]=t:e.element.setAttribute(e.attribute,t),null}).catch(function(e){p.error(e)})},e}())||c)||c)||c)||c)||c)}),define("aurelia-templating-binding",["exports","aurelia-logging","aurelia-binding","aurelia-templating"],function(e,t,i,s){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if("style"===t)f.getLogger("templating-binding").info('Internet Explorer does not support interpolation in "style" attributes.  Use the style attribute\'s alias, "css" instead.');else if(e.parentElement&&"TEXTAREA"===e.parentElement.nodeName&&"textContent"===t)throw new Error('Interpolation binding cannot be used in the content of a textarea element.  Use <textarea value.bind="expression"></textarea> instead.')}function l(e){e.container.registerSingleton(s.BindingLanguage,x),e.container.registerAlias(s.BindingLanguage,x)}Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingBindingLanguage=e.SyntaxInterpreter=e.ChildInterpolationBinding=e.InterpolationBinding=e.InterpolationBindingExpression=e.AttributeMap=void 0,e.configure=l;var a,d,h,c,u,p,m,g,f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(t),_=e.AttributeMap=(d=a=function(){function e(e){this.elements=Object.create(null),this.allElements=Object.create(null),this.svg=e,this.registerUniversal("accesskey","accessKey"),this.registerUniversal("contenteditable","contentEditable"),this.registerUniversal("tabindex","tabIndex"),this.registerUniversal("textcontent","textContent"),this.registerUniversal("innerhtml","innerHTML"),this.registerUniversal("scrolltop","scrollTop"),this.registerUniversal("scrollleft","scrollLeft"),this.registerUniversal("readonly","readOnly"),this.register("label","for","htmlFor"),this.register("img","usemap","useMap"),this.register("input","maxlength","maxLength"),this.register("input","minlength","minLength"),this.register("input","formaction","formAction"),this.register("input","formenctype","formEncType"),this.register("input","formmethod","formMethod"),this.register("input","formnovalidate","formNoValidate"),this.register("input","formtarget","formTarget"),this.register("textarea","maxlength","maxLength"),this.register("td","rowspan","rowSpan"),this.register("td","colspan","colSpan"),this.register("th","rowspan","rowSpan"),this.register("th","colspan","colSpan")}return e.prototype.register=function(e,t,i){e=e.toLowerCase(),t=t.toLowerCase(),(this.elements[e]=this.elements[e]||Object.create(null))[t]=i},e.prototype.registerUniversal=function(e,t){e=e.toLowerCase(),this.allElements[e]=t},e.prototype.map=function(e,t){if(this.svg.isStandardSvgAttribute(e,t))return t;e=e.toLowerCase(),t=t.toLowerCase();var s=this.elements[e];return void 0!==s&&t in s?s[t]:t in this.allElements?this.allElements[t]:/(?:^data-)|(?:^aria-)|:/.test(t)?t:(0,i.camelCase)(t)},e}(),a.inject=[i.SVGAnalyzer],d),v=e.InterpolationBindingExpression=function(){function e(e,t,i,s,n,r){this.observerLocator=e,this.targetProperty=t,this.parts=i,this.mode=s,this.lookupFunctions=n,this.attribute=this.attrToRemove=r,this.discrete=!1}return e.prototype.createBinding=function(e){return 3===this.parts.length?new y(e,this.observerLocator,this.parts[1],this.mode,this.lookupFunctions,this.targetProperty,this.parts[0],this.parts[2]):new b(this.observerLocator,this.parts,e,this.targetProperty,this.mode,this.lookupFunctions)},e}(),b=e.InterpolationBinding=function(){function e(e,t,i,s,n,r){o(i,s),this.observerLocator=e,this.parts=t,this.target=i,this.targetProperty=s,this.targetAccessor=e.getAccessor(i,s),this.mode=n,this.lookupFunctions=r}return e.prototype.interpolate=function(){if(this.isBound){for(var e="",t=this.parts,i=0,s=t.length;i<s;i++)e+=i%2==0?t[i]:this["childBinding"+i].value;this.targetAccessor.setValue(e,this.target,this.targetProperty)}},e.prototype.updateOneTimeBindings=function(){for(var e=1,t=this.parts.length;e<t;e+=2){var s=this["childBinding"+e];s.mode===i.bindingMode.oneTime&&s.call()}},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.source=e;for(var t=this.parts,i=1,s=t.length;i<s;i+=2){var n=new y(this,this.observerLocator,t[i],this.mode,this.lookupFunctions);n.bind(e),this["childBinding"+i]=n}this.isBound=!0,this.interpolate()},e.prototype.unbind=function(){if(this.isBound){this.isBound=!1,this.source=null;for(var e=this.parts,t=1,i=e.length;t<i;t+=2){this["childBinding"+t].unbind()}}},e}(),y=e.ChildInterpolationBinding=(h=(0,i.connectable)())(c=function(){function e(e,t,i,s,n,r,l,a){e instanceof b?this.parent=e:(o(e,r),this.target=e,this.targetProperty=r,this.targetAccessor=t.getAccessor(e,r)),this.observerLocator=t,this.sourceExpression=i,this.mode=s,this.lookupFunctions=n,this.left=l,this.right=a}return e.prototype.updateTarget=function(e){(e=null===e||void 0===e?"":e.toString())!==this.value&&(this.value=e,this.parent?this.parent.interpolate():this.targetAccessor.setValue(this.left+e+this.right,this.target,this.targetProperty))},e.prototype.call=function(){this.isBound&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode!==i.bindingMode.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue),this.unobserve(!1)))},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e;var t=this.sourceExpression;t.bind&&t.bind(this,e,this.lookupFunctions),this.rawValue=t.evaluate(e,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode===i.bindingMode.oneWay&&(0,i.enqueueBindingConnect)(this)},e.prototype.unbind=function(){if(this.isBound){this.isBound=!1;var e=this.sourceExpression;e.unbind&&e.unbind(this,this.source),this.source=null,this.value=null,this.rawValue=null,this.unobserve(!0)}},e.prototype.connect=function(e){this.isBound&&(e&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue)),this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue))},e}())||c,w=e.SyntaxInterpreter=(p=u=function(){function e(e,t,i,s){this.parser=e,this.observerLocator=t,this.eventManager=i,this.attributeMap=s}return e.prototype.interpret=function(e,t,i,s,n){return i.command in this?this[i.command](e,t,i,s,n):this.handleUnknownCommand(e,t,i,s,n)},e.prototype.handleUnknownCommand=function(e,t,i,s,n){return f.getLogger("templating-binding").warn("Unknown binding command.",i),s},e.prototype.determineDefaultBindingMode=function(e,t,s){var n=e.tagName.toLowerCase();return"input"===n&&("value"===t||"files"===t)&&"checkbox"!==e.type&&"radio"!==e.type||"input"===n&&"checked"===t&&("checkbox"===e.type||"radio"===e.type)||("textarea"===n||"select"===n)&&"value"===t||("textcontent"===t||"innerhtml"===t)&&"true"===e.contentEditable||"scrolltop"===t||"scrollleft"===t?i.bindingMode.twoWay:s&&t in s.attributes&&s.attributes[t]&&s.attributes[t].defaultBindingMode>=i.bindingMode.oneTime?s.attributes[t].defaultBindingMode:i.bindingMode.oneWay},e.prototype.bind=function(e,t,n,r,o){var l=r||s.BehaviorInstruction.attribute(n.attrName);return l.attributes[n.attrName]=new i.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),n.defaultBindingMode||this.determineDefaultBindingMode(t,n.attrName,o),e.lookupFunctions),l},e.prototype.trigger=function(e,t,s){return new i.ListenerExpression(this.eventManager,s.attrName,this.parser.parse(s.attrValue),i.delegationStrategy.none,!0,e.lookupFunctions)},e.prototype.capture=function(e,t,s){return new i.ListenerExpression(this.eventManager,s.attrName,this.parser.parse(s.attrValue),i.delegationStrategy.capturing,!0,e.lookupFunctions)},e.prototype.delegate=function(e,t,s){return new i.ListenerExpression(this.eventManager,s.attrName,this.parser.parse(s.attrValue),i.delegationStrategy.bubbling,!0,e.lookupFunctions)},e.prototype.call=function(e,t,n,r){var o=r||s.BehaviorInstruction.attribute(n.attrName);return o.attributes[n.attrName]=new i.CallExpression(this.observerLocator,n.attrName,this.parser.parse(n.attrValue),e.lookupFunctions),o},e.prototype.options=function(e,t,i,n,r){var o=n||s.BehaviorInstruction.attribute(i.attrName),l=i.attrValue,a=this.language,d=null,h="",c=void 0,u=void 0,p=void 0,m=!1,g=!1,f=!1;for(u=0,p=l.length;u<p;++u){if(";"!==(c=l[u])||m)if(":"===c&&null===d)f=!0,d=h.trim(),h="";else{if("\\"===c){h+=c,g=!0;continue}h+=c,null!==d&&g===!1&&"'"===c&&(m=!m)}else f||(d=this._getPrimaryPropertyName(e,r)),i=a.inspectAttribute(e,"?",d,h.trim()),a.createAttributeInstruction(e,t,i,o,r),o.attributes[i.attrName]||(o.attributes[i.attrName]=i.attrValue),h="",d=null;g=!1}return f||(d=this._getPrimaryPropertyName(e,r)),null!==d&&(i=a.inspectAttribute(e,"?",d,h.trim()),a.createAttributeInstruction(e,t,i,o,r),o.attributes[i.attrName]||(o.attributes[i.attrName]=i.attrValue)),o},e.prototype._getPrimaryPropertyName=function(e,t){var i=e.getAttribute(t.attributeName);return i&&i.primaryProperty?i.primaryProperty.name:null},e.prototype.for=function(e,t,n,r){var o=void 0,l=void 0,a=void 0,d=void 0,h=void 0;if(d=n.attrValue,h=d.match(/^ *[[].+[\]]/),o=h?d.split("of "):d.split(" of "),2!==o.length)throw new Error('Incorrect syntax for "for". The form is: "$local of $items" or "[$key, $value] of $items".');return a=r||s.BehaviorInstruction.attribute(n.attrName),h?(l=o[0].replace(/[[\]]/g,"").replace(/,/g," ").replace(/\s+/g," ").trim().split(" "),a.attributes.key=l[0],a.attributes.value=l[1]):a.attributes.local=o[0],a.attributes.items=new i.BindingExpression(this.observerLocator,"items",this.parser.parse(o[1]),i.bindingMode.oneWay,e.lookupFunctions),a},e.prototype["two-way"]=function(e,t,n,r){var o=r||s.BehaviorInstruction.attribute(n.attrName);return o.attributes[n.attrName]=new i.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),i.bindingMode.twoWay,e.lookupFunctions),o},e.prototype["one-way"]=function(e,t,n,r){var o=r||s.BehaviorInstruction.attribute(n.attrName);return o.attributes[n.attrName]=new i.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),i.bindingMode.oneWay,e.lookupFunctions),o},e.prototype["one-time"]=function(e,t,n,r){var o=r||s.BehaviorInstruction.attribute(n.attrName);return o.attributes[n.attrName]=new i.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),i.bindingMode.oneTime,e.lookupFunctions),o},e}(),u.inject=[i.Parser,i.ObserverLocator,i.EventManager,_],p),C={},x=e.TemplatingBindingLanguage=(g=m=function(e){function t(t,i,s,r){var o=n(this,e.call(this));return o.parser=t,o.observerLocator=i,o.syntaxInterpreter=s,o.emptyStringExpression=o.parser.parse("''"),s.language=o,o.attributeMap=r,o}return r(t,e),t.prototype.inspectAttribute=function(e,t,s,n){var r=s.split(".");if(C.defaultBindingMode=null,2===r.length)C.attrName=r[0].trim(),C.attrValue=n,C.command=r[1].trim(),"ref"===C.command?(C.expression=new i.NameExpression(this.parser.parse(n),C.attrName,e.lookupFunctions),C.command=null,C.attrName="ref"):C.expression=null;else if("ref"===s)C.attrName=s,C.attrValue=n,C.command=null,C.expression=new i.NameExpression(this.parser.parse(n),"element",e.lookupFunctions);else{C.attrName=s,C.attrValue=n,C.command=null;var o=this.parseInterpolation(e,n);C.expression=null===o?null:new v(this.observerLocator,this.attributeMap.map(t,s),o,i.bindingMode.oneWay,e.lookupFunctions,s)}return C},t.prototype.createAttributeInstruction=function(e,t,i,n,r){var o=void 0;if(i.expression){if("ref"===i.attrName)return i.expression;o=n||s.BehaviorInstruction.attribute(i.attrName),o.attributes[i.attrName]=i.expression}else i.command&&(o=this.syntaxInterpreter.interpret(e,t,i,n,r));return o},t.prototype.inspectTextContent=function(e,t){var s=this.parseInterpolation(e,t);return null===s?null:new v(this.observerLocator,"textContent",s,i.bindingMode.oneWay,e.lookupFunctions,"textContent")},t.prototype.parseInterpolation=function(e,t){for(var i=t.indexOf("${",0),s=t.length,n=void 0,r=0,o=0,l=null,a=void 0,d=void 0,h=0;i>=0&&i<s-2;){o=1,a=i,i+=2;do{n=t[i],i++,"'"!==n&&'"'!==n?"\\"!==n?null===l&&("{"===n?o++:"}"===n&&o--):i++:null===l?l=n:l===n&&(l=null)}while(o>0&&i<s);if(0!==o)break;d=d||[],"\\"===t[a-1]&&"\\"!==t[a-2]?(d[h]=t.substring(r,a-1)+t.substring(a,i),h++,d[h]=this.emptyStringExpression,h++):(d[h]=t.substring(r,a),h++,d[h]=this.parser.parse(t.substring(a+2,i-1)),h++),r=i,i=t.indexOf("${",i)}return 0===h?null:(d[h]=t.substr(r),d)},t}(s.BindingLanguage),m.inject=[i.Parser,i.ObserverLocator,w,_],g)}),define("text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function i(e,i,s,n){if(i===n)return!0;if(e===s){if("http"===e)return t(i,"80")===t(n,"80");if("https"===e)return t(i,"443")===t(n,"443")}return!1}var s,n,r,o,l,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],d="undefined"!=typeof location&&location.href,h=d&&location.protocol&&location.protocol.replace(/\:/,""),c=d&&location.hostname,u=d&&(location.port||void 0),p={},m=e.config&&e.config()||{};return s={version:"2.0.15",strip:function(e){if(e){e=e.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var t=e.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=a[t];try{e=new ActiveXObject(i)}catch(e){}if(e){a=[i];break}}return e},parseName:function(e){var t,i,s,n=!1,r=e.lastIndexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return r!==-1&&(!o||r>1)?(t=e.substring(0,r),i=e.substring(r+1)):t=e,s=i||t,r=s.indexOf("!"),r!==-1&&(n="strip"===s.substring(r+1),s=s.substring(0,r),i?i=s:t=s),{moduleName:t,ext:i,strip:n}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var o,l,a,d=s.xdRegExp.exec(e);return!d||(o=d[2],l=d[3],l=l.split(":"),a=l[1],l=l[0],(!o||o===t)&&(!l||l.toLowerCase()===n.toLowerCase())&&(!a&&!l||i(o,a,t,r)))},finishLoad:function(e,t,i,n){i=t?s.strip(i):i,m.isBuild&&(p[e]=i),n(i)},load:function(e,t,i,n){if(n&&n.isBuild&&!n.inlineText)return void i();m.isBuild=n&&n.isBuild;var r=s.parseName(e),o=r.moduleName+(r.ext?"."+r.ext:""),l=t.toUrl(o),a=m.useXhr||s.useXhr;if(0===l.indexOf("empty:"))return void i();!d||a(l,h,c,u)?s.get(l,function(t){s.finishLoad(e,r.strip,t,i)},function(e){i.error&&i.error(e)}):t([o],function(e){s.finishLoad(r.moduleName+"."+r.ext,r.strip,e,i)})},write:function(e,t,i,n){if(p.hasOwnProperty(t)){var r=s.jsEscape(p[t]);i.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,i,n,r){var o=s.parseName(t),l=o.ext?"."+o.ext:"",a=o.moduleName+l,d=i.toUrl(o.moduleName+l)+".js";s.load(a,i,function(t){var i=function(e){return n(d,e)};i.asModule=function(e,t){return n.asModule(e,d,t)},s.write(e,a,i,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),s.get=function(e,t,i){try{var s=n.readFileSync(e,"utf8");"\ufeff"===s[0]&&(s=s.substring(1)),t(s)}catch(e){i&&i(e)}}):"xhr"===m.env||!m.env&&s.createXhr()?s.get=function(e,t,i,n){var r,o=s.createXhr();if(o.open("GET",e,!0),n)for(r in n)n.hasOwnProperty(r)&&o.setRequestHeader(r.toLowerCase(),n[r]);m.onXhr&&m.onXhr(o,e),o.onreadystatechange=function(s){var n,r;4===o.readyState&&(n=o.status||0,n>399&&n<600?(r=new Error(e+" HTTP status: "+n),r.xhr=o,i&&i(r)):t(o.responseText),m.onXhrComplete&&m.onXhrComplete(o,e))},o.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?s.get=function(e,t){var i,s,n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),l="";try{for(i=new java.lang.StringBuffer,s=o.readLine(),s&&s.length()&&65279===s.charAt(0)&&(s=s.substring(1)),null!==s&&i.append(s);null!==(s=o.readLine());)i.append(r),i.append(s);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,o=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),l="@mozilla.org/windows-registry-key;1"in r,s.get=function(e,t){var i,s,n,a={};l&&(e=e.replace(/\//g,"\\")),n=new FileUtils.File(e);try{i=r["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(n,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),s.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(i.available(),a),s.close(),i.close(),t(a.value)}catch(e){throw new Error((n&&n.path||"")+": "+e)}}),s}),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e,t){t=t||ie;var i=t.createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function s(e){var t=!!e&&"length"in e&&e.length,i=me.type(e);return"function"!==i&&!me.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function r(e,t,i){return me.isFunction(t)?me.grep(e,function(e,s){return!!t.call(e,s,e)!==i}):t.nodeType?me.grep(e,function(e){return e===t!==i}):"string"!=typeof t?me.grep(e,function(e){return le.call(t,e)>-1!==i}):we.test(t)?me.filter(t,e,i):(t=me.filter(t,e),me.grep(e,function(e){return le.call(t,e)>-1!==i&&1===e.nodeType}))}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return me.each(e.match(ke)||[],function(e,i){t[i]=!0}),t}function a(e){return e}function d(e){throw e}function h(e,t,i,s){var n;try{e&&me.isFunction(n=e.promise)?n.call(e).done(t).fail(i):e&&me.isFunction(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(s))}catch(e){i.apply(void 0,[e])}}function c(){ie.removeEventListener("DOMContentLoaded",c),e.removeEventListener("load",c),me.ready()}function u(){this.expando=me.expando+u.uid++}function p(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:je.test(e)?JSON.parse(e):e)}function m(e,t,i){var s;if(void 0===i&&1===e.nodeType)if(s="data-"+t.replace(Ee,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(s))){try{i=p(i)}catch(e){}Me.set(e,t,i)}else i=void 0;return i}function g(e,t,i,s){var n,r=1,o=20,l=s?function(){return s.cur()}:function(){return me.css(e,t,"")},a=l(),d=i&&i[3]||(me.cssNumber[t]?"":"px"),h=(me.cssNumber[t]||"px"!==d&&+a)&&Ae.exec(me.css(e,t));if(h&&h[3]!==d){d=d||h[3],i=i||[],h=+a||1;do{r=r||".5",h/=r,me.style(e,t,h+d)}while(r!==(r=l()/a)&&1!==r&&--o)}return i&&(h=+h||+a||0,n=i[1]?h+(i[1]+1)*i[2]:+i[2],s&&(s.unit=d,s.start=h,s.end=n)),n}function f(e){var t,i=e.ownerDocument,s=e.nodeName,n=ze[s];return n||(t=i.body.appendChild(i.createElement(s)),n=me.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),ze[s]=n,n)}function _(e,t){for(var i,s,n=[],r=0,o=e.length;r<o;r++)s=e[r],s.style&&(i=s.style.display,t?("none"===i&&(n[r]=Pe.get(s,"display")||null,n[r]||(s.style.display="")),""===s.style.display&&Ne(s)&&(n[r]=f(s))):"none"!==i&&(n[r]="none",Pe.set(s,"display",i)));for(r=0;r<o;r++)null!=n[r]&&(e[r].style.display=n[r]);return e}function v(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&n(e,t)?me.merge([e],i):i}function b(e,t){for(var i=0,s=e.length;i<s;i++)Pe.set(e[i],"globalEval",!t||Pe.get(t[i],"globalEval"))}function y(e,t,i,s,n){for(var r,o,l,a,d,h,c=t.createDocumentFragment(),u=[],p=0,m=e.length;p<m;p++)if((r=e[p])||0===r)if("object"===me.type(r))me.merge(u,r.nodeType?[r]:r);else if(We.test(r)){for(o=o||c.appendChild(t.createElement("div")),l=(Be.exec(r)||["",""])[1].toLowerCase(),a=qe[l]||qe._default,o.innerHTML=a[1]+me.htmlPrefilter(r)+a[2],h=a[0];h--;)o=o.lastChild;me.merge(u,o.childNodes),o=c.firstChild,o.textContent=""}else u.push(t.createTextNode(r));for(c.textContent="",p=0;r=u[p++];)if(s&&me.inArray(r,s)>-1)n&&n.push(r);else if(d=me.contains(r.ownerDocument,r),o=v(c.appendChild(r),"script"),d&&b(o),i)for(h=0;r=o[h++];)Ue.test(r.type||"")&&i.push(r);return c}function w(){return!0}function C(){return!1}function x(){try{return ie.activeElement}catch(e){}}function S(e,t,i,s,n,r){var o,l;if("object"==typeof t){"string"!=typeof i&&(s=s||i,i=void 0);for(l in t)S(e,l,i,s,t[l],r);return e}if(null==s&&null==n?(n=i,s=i=void 0):null==n&&("string"==typeof i?(n=s,s=void 0):(n=s,s=i,i=void 0)),n===!1)n=C;else if(!n)return e;return 1===r&&(o=n,n=function(e){return me().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=me.guid++)),e.each(function(){me.event.add(this,t,n,s,i)})}function T(e,t){return n(e,"table")&&n(11!==t.nodeType?t:t.firstChild,"tr")?me(">tbody",e)[0]||e:e}function k(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function D(e){var t=Je.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function I(e,t){var i,s,n,r,o,l,a,d;if(1===t.nodeType){if(Pe.hasData(e)&&(r=Pe.access(e),o=Pe.set(t,r),d=r.events)){delete o.handle,o.events={};for(n in d)for(i=0,s=d[n].length;i<s;i++)me.event.add(t,n,d[n][i])}Me.hasData(e)&&(l=Me.access(e),a=me.extend({},l),Me.set(t,a))}}function O(e,t){var i=t.nodeName.toLowerCase();"input"===i&&He.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function R(e,t,s,n){t=re.apply([],t);var r,o,l,a,d,h,c=0,u=e.length,p=u-1,m=t[0],g=me.isFunction(m);if(g||u>1&&"string"==typeof m&&!pe.checkClone&&Xe.test(m))return e.each(function(i){var r=e.eq(i);g&&(t[0]=m.call(this,i,r.html())),R(r,t,s,n)});if(u&&(r=y(t,e[0].ownerDocument,!1,e,n),o=r.firstChild,1===r.childNodes.length&&(r=o),o||n)){for(l=me.map(v(r,"script"),k),a=l.length;c<u;c++)d=r,c!==p&&(d=me.clone(d,!0,!0),a&&me.merge(l,v(d,"script"))),s.call(e[c],d,c);if(a)for(h=l[l.length-1].ownerDocument,me.map(l,D),c=0;c<a;c++)d=l[c],Ue.test(d.type||"")&&!Pe.access(d,"globalEval")&&me.contains(h,d)&&(d.src?me._evalUrl&&me._evalUrl(d.src):i(d.textContent.replace(Ze,""),h))}return e}function P(e,t,i){for(var s,n=t?me.filter(t,e):e,r=0;null!=(s=n[r]);r++)i||1!==s.nodeType||me.cleanData(v(s)),s.parentNode&&(i&&me.contains(s.ownerDocument,s)&&b(v(s,"script")),s.parentNode.removeChild(s));return e}function M(e,t,i){var s,n,r,o,l=e.style;return i=i||it(e),i&&(o=i.getPropertyValue(t)||i[t],""!==o||me.contains(e.ownerDocument,e)||(o=me.style(e,t)),!pe.pixelMarginRight()&&tt.test(o)&&et.test(t)&&(s=l.width,n=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=i.width,l.width=s,l.minWidth=n,l.maxWidth=r)),void 0!==o?o+"":o}function j(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e){if(e in at)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=lt.length;i--;)if((e=lt[i]+t)in at)return e}function F(e){var t=me.cssProps[e];return t||(t=me.cssProps[e]=E(e)||e),t}function A(e,t,i){var s=Ae.exec(t);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):t}function L(e,t,i,s,n){var r,o=0;for(r=i===(s?"border":"content")?4:"width"===t?1:0;r<4;r+=2)"margin"===i&&(o+=me.css(e,i+Le[r],!0,n)),s?("content"===i&&(o-=me.css(e,"padding"+Le[r],!0,n)),"margin"!==i&&(o-=me.css(e,"border"+Le[r]+"Width",!0,n))):(o+=me.css(e,"padding"+Le[r],!0,n),"padding"!==i&&(o+=me.css(e,"border"+Le[r]+"Width",!0,n)));return o}function N(e,t,i){var s,n=it(e),r=M(e,t,n),o="border-box"===me.css(e,"boxSizing",!1,n);return tt.test(r)?r:(s=o&&(pe.boxSizingReliable()||r===e.style[t]),"auto"===r&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)]),(r=parseFloat(r)||0)+L(e,t,i||(o?"border":"content"),s,n)+"px")}function V(e,t,i,s,n){return new V.prototype.init(e,t,i,s,n)}function z(){ht&&(ie.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(z):e.setTimeout(z,me.fx.interval),me.fx.tick())}function H(){return e.setTimeout(function(){dt=void 0}),dt=me.now()}function B(e,t){var i,s=0,n={height:e};for(t=t?1:0;s<4;s+=2-t)i=Le[s],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function U(e,t,i){for(var s,n=($.tweeners[t]||[]).concat($.tweeners["*"]),r=0,o=n.length;r<o;r++)if(s=n[r].call(i,t,e))return s}function q(e,t,i){var s,n,r,o,l,a,d,h,c="width"in t||"height"in t,u=this,p={},m=e.style,g=e.nodeType&&Ne(e),f=Pe.get(e,"fxshow");i.queue||(o=me._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,u.always(function(){u.always(function(){o.unqueued--,me.queue(e,"fx").length||o.empty.fire()})}));for(s in t)if(n=t[s],ct.test(n)){if(delete t[s],r=r||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!f||void 0===f[s])continue;g=!0}p[s]=f&&f[s]||me.style(e,s)}if((a=!me.isEmptyObject(t))||!me.isEmptyObject(p)){c&&1===e.nodeType&&(i.overflow=[m.overflow,m.overflowX,m.overflowY],d=f&&f.display,null==d&&(d=Pe.get(e,"display")),h=me.css(e,"display"),"none"===h&&(d?h=d:(_([e],!0),d=e.style.display||d,h=me.css(e,"display"),_([e]))),("inline"===h||"inline-block"===h&&null!=d)&&"none"===me.css(e,"float")&&(a||(u.done(function(){m.display=d}),null==d&&(h=m.display,d="none"===h?"":h)),m.display="inline-block")),i.overflow&&(m.overflow="hidden",u.always(function(){m.overflow=i.overflow[0],m.overflowX=i.overflow[1],m.overflowY=i.overflow[2]})),a=!1;for(s in p)a||(f?"hidden"in f&&(g=f.hidden):f=Pe.access(e,"fxshow",{display:d}),r&&(f.hidden=!g),g&&_([e],!0),u.done(function(){g||_([e]),Pe.remove(e,"fxshow");for(s in p)me.style(e,s,p[s])})),a=U(g?f[s]:0,s,u),s in f||(f[s]=a.start,g&&(a.end=a.start,a.start=0))}}function W(e,t){var i,s,n,r,o;for(i in e)if(s=me.camelCase(i),n=t[s],r=e[i],Array.isArray(r)&&(n=r[1],r=e[i]=r[0]),i!==s&&(e[s]=r,delete e[i]),(o=me.cssHooks[s])&&"expand"in o){r=o.expand(r),delete e[s];for(i in r)i in e||(e[i]=r[i],t[i]=n)}else t[s]=n}function $(e,t,i){var s,n,r=0,o=$.prefilters.length,l=me.Deferred().always(function(){delete a.elem}),a=function(){if(n)return!1;for(var t=dt||H(),i=Math.max(0,d.startTime+d.duration-t),s=i/d.duration||0,r=1-s,o=0,a=d.tweens.length;o<a;o++)d.tweens[o].run(r);return l.notifyWith(e,[d,r,i]),r<1&&a?i:(a||l.notifyWith(e,[d,1,0]),l.resolveWith(e,[d]),!1)},d=l.promise({elem:e,props:me.extend({},t),opts:me.extend(!0,{specialEasing:{},easing:me.easing._default},i),originalProperties:t,originalOptions:i,startTime:dt||H(),duration:i.duration,tweens:[],createTween:function(t,i){var s=me.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(s),s},stop:function(t){var i=0,s=t?d.tweens.length:0;if(n)return this;for(n=!0;i<s;i++)d.tweens[i].run(1);return t?(l.notifyWith(e,[d,1,0]),l.resolveWith(e,[d,t])):l.rejectWith(e,[d,t]),this}}),h=d.props;for(W(h,d.opts.specialEasing);r<o;r++)if(s=$.prefilters[r].call(d,e,h,d.opts))return me.isFunction(s.stop)&&(me._queueHooks(d.elem,d.opts.queue).stop=me.proxy(s.stop,s)),s;return me.map(h,U,d),me.isFunction(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),me.fx.timer(me.extend(a,{elem:e,anim:d,queue:d.opts.queue})),d}function G(e){return(e.match(ke)||[]).join(" ")}function K(e){return e.getAttribute&&e.getAttribute("class")||""}function Y(e,t,i,s){var n;if(Array.isArray(t))me.each(t,function(t,n){i||wt.test(e)?s(e,n):Y(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,i,s)});else if(i||"object"!==me.type(t))s(e,t);else for(n in t)Y(e+"["+n+"]",t[n],i,s)}function Q(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var s,n=0,r=t.toLowerCase().match(ke)||[];if(me.isFunction(i))for(;s=r[n++];)"+"===s[0]?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(i)):(e[s]=e[s]||[]).push(i)}}function X(e,t,i,s){function n(l){var a;return r[l]=!0,me.each(e[l]||[],function(e,l){var d=l(t,i,s);return"string"!=typeof d||o||r[d]?o?!(a=d):void 0:(t.dataTypes.unshift(d),n(d),!1)}),a}var r={},o=e===It;return n(t.dataTypes[0])||!r["*"]&&n("*")}function J(e,t){var i,s,n=me.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:s||(s={}))[i]=t[i]);return s&&me.extend(!0,e,s),e}function Z(e,t,i){for(var s,n,r,o,l=e.contents,a=e.dataTypes;"*"===a[0];)a.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"))
;if(s)for(n in l)if(l[n]&&l[n].test(s)){a.unshift(n);break}if(a[0]in i)r=a[0];else{for(n in i){if(!a[0]||e.converters[n+" "+a[0]]){r=n;break}o||(o=n)}r=r||o}if(r)return r!==a[0]&&a.unshift(r),i[r]}function ee(e,t,i,s){var n,r,o,l,a,d={},h=e.dataTypes.slice();if(h[1])for(o in e.converters)d[o.toLowerCase()]=e.converters[o];for(r=h.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!a&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=r,r=h.shift())if("*"===r)r=a;else if("*"!==a&&a!==r){if(!(o=d[a+" "+r]||d["* "+r]))for(n in d)if(l=n.split(" "),l[1]===r&&(o=d[a+" "+l[0]]||d["* "+l[0]])){o===!0?o=d[n]:d[n]!==!0&&(r=l[0],h.unshift(l[1]));break}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+a+" to "+r}}}return{state:"success",data:t}}var te=[],ie=e.document,se=Object.getPrototypeOf,ne=te.slice,re=te.concat,oe=te.push,le=te.indexOf,ae={},de=ae.toString,he=ae.hasOwnProperty,ce=he.toString,ue=ce.call(Object),pe={},me=function(e,t){return new me.fn.init(e,t)},ge=function(e,t){return t.toUpperCase()};me.fn=me.prototype={jquery:"3.2.1",constructor:me,length:0,toArray:function(){return ne.call(this)},get:function(e){return null==e?ne.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=me.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return me.each(this,e)},map:function(e){return this.pushStack(me.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(ne.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:oe,sort:te.sort,splice:te.splice},me.extend=me.fn.extend=function(){var e,t,i,s,n,r,o=arguments[0]||{},l=1,a=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[l]||{},l++),"object"==typeof o||me.isFunction(o)||(o={}),l===a&&(o=this,l--);l<a;l++)if(null!=(e=arguments[l]))for(t in e)i=o[t],s=e[t],o!==s&&(d&&s&&(me.isPlainObject(s)||(n=Array.isArray(s)))?(n?(n=!1,r=i&&Array.isArray(i)?i:[]):r=i&&me.isPlainObject(i)?i:{},o[t]=me.extend(d,r,s)):void 0!==s&&(o[t]=s));return o},me.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===me.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=me.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==de.call(e))&&(!(t=se(e))||"function"==typeof(i=he.call(t,"constructor")&&t.constructor)&&ce.call(i)===ue)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ae[de.call(e)]||"object":typeof e},globalEval:function(e){i(e)},camelCase:function(e){return e.replace(/^-ms-/,"ms-").replace(/-([a-z])/g,ge)},each:function(e,t){var i,n=0;if(s(e))for(i=e.length;n<i&&t.call(e[n],n,e[n])!==!1;n++);else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(s(Object(e))?me.merge(i,"string"==typeof e?[e]:e):oe.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:le.call(t,e,i)},merge:function(e,t){for(var i=+t.length,s=0,n=e.length;s<i;s++)e[n++]=t[s];return e.length=n,e},grep:function(e,t,i){for(var s=[],n=0,r=e.length,o=!i;n<r;n++)!t(e[n],n)!==o&&s.push(e[n]);return s},map:function(e,t,i){var n,r,o=0,l=[];if(s(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&l.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&l.push(r);return re.apply([],l)},guid:1,proxy:function(e,t){var i,s,n;if("string"==typeof t&&(i=e[t],t=e,e=i),me.isFunction(e))return s=ne.call(arguments,2),n=function(){return e.apply(t||this,s.concat(ne.call(arguments)))},n.guid=e.guid=e.guid||me.guid++,n},now:Date.now,support:pe}),"function"==typeof Symbol&&(me.fn[Symbol.iterator]=te[Symbol.iterator]),me.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ae["[object "+t+"]"]=t.toLowerCase()});var fe=function(e){function t(e,t,i,s){var n,r,o,l,a,h,u,p=t&&t.ownerDocument,m=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return i;if(!s&&((t?t.ownerDocument||t:V)!==P&&R(t),t=t||P,j)){if(11!==m&&(a=ge.exec(e)))if(n=a[1]){if(9===m){if(!(o=t.getElementById(n)))return i;if(o.id===n)return i.push(o),i}else if(p&&(o=p.getElementById(n))&&L(t,o)&&o.id===n)return i.push(o),i}else{if(a[2])return Q.apply(i,t.getElementsByTagName(e)),i;if((n=a[3])&&y.getElementsByClassName&&t.getElementsByClassName)return Q.apply(i,t.getElementsByClassName(n)),i}if(y.qsa&&!q[e+" "]&&(!E||!E.test(e))){if(1!==m)p=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(be,ye):t.setAttribute("id",l=N),h=S(e),r=h.length;r--;)h[r]="#"+l+" "+c(h[r]);u=h.join(","),p=fe.test(e)&&d(t.parentNode)||t}if(u)try{return Q.apply(i,p.querySelectorAll(u)),i}catch(e){}finally{l===N&&t.removeAttribute("id")}}}return k(e.replace(re,"$1"),t,i,s)}function i(){function e(i,s){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=s}var t=[];return e}function s(e){return e[N]=!0,e}function n(e){var t=P.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),s=i.length;s--;)w.attrHandle[i[s]]=t}function o(e,t){var i=t&&e,s=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(s)return s;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function l(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function a(e){return s(function(t){return t=+t,s(function(i,s){for(var n,r=e([],i.length,t),o=r.length;o--;)i[n=r[o]]&&(i[n]=!(s[n]=i[n]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function h(){}function c(e){for(var t=0,i=e.length,s="";t<i;t++)s+=e[t].value;return s}function u(e,t,i){var s=t.dir,n=t.next,r=n||s,o=i&&"parentNode"===r,l=H++;return t.first?function(t,i,n){for(;t=t[s];)if(1===t.nodeType||o)return e(t,i,n);return!1}:function(t,i,a){var d,h,c,u=[z,l];if(a){for(;t=t[s];)if((1===t.nodeType||o)&&e(t,i,a))return!0}else for(;t=t[s];)if(1===t.nodeType||o)if(c=t[N]||(t[N]={}),h=c[t.uniqueID]||(c[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[s]||t;else{if((d=h[r])&&d[0]===z&&d[1]===l)return u[2]=d[2];if(h[r]=u,u[2]=e(t,i,a))return!0}return!1}}function p(e){return e.length>1?function(t,i,s){for(var n=e.length;n--;)if(!e[n](t,i,s))return!1;return!0}:e[0]}function m(e,i,s){for(var n=0,r=i.length;n<r;n++)t(e,i[n],s);return s}function g(e,t,i,s,n){for(var r,o=[],l=0,a=e.length,d=null!=t;l<a;l++)(r=e[l])&&(i&&!i(r,s,n)||(o.push(r),d&&t.push(l)));return o}function f(e,t,i,n,r,o){return n&&!n[N]&&(n=f(n)),r&&!r[N]&&(r=f(r,o)),s(function(s,o,l,a){var d,h,c,u=[],p=[],f=o.length,_=s||m(t||"*",l.nodeType?[l]:l,[]),v=!e||!s&&t?_:g(_,u,e,l,a),b=i?r||(s?e:f||n)?[]:o:v;if(i&&i(v,b,l,a),n)for(d=g(b,p),n(d,[],l,a),h=d.length;h--;)(c=d[h])&&(b[p[h]]=!(v[p[h]]=c));if(s){if(r||e){if(r){for(d=[],h=b.length;h--;)(c=b[h])&&d.push(v[h]=c);r(null,b=[],d,a)}for(h=b.length;h--;)(c=b[h])&&(d=r?J(s,c):u[h])>-1&&(s[d]=!(o[d]=c))}}else b=g(b===o?b.splice(f,b.length):b),r?r(null,o,b,a):Q.apply(o,b)})}function _(e){for(var t,i,s,n=e.length,r=w.relative[e[0].type],o=r||w.relative[" "],l=r?1:0,a=u(function(e){return e===t},o,!0),d=u(function(e){return J(t,e)>-1},o,!0),h=[function(e,i,s){var n=!r&&(s||i!==D)||((t=i).nodeType?a(e,i,s):d(e,i,s));return t=null,n}];l<n;l++)if(i=w.relative[e[l].type])h=[u(p(h),i)];else{if(i=w.filter[e[l].type].apply(null,e[l].matches),i[N]){for(s=++l;s<n&&!w.relative[e[s].type];s++);return f(l>1&&p(h),l>1&&c(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(re,"$1"),i,l<s&&_(e.slice(l,s)),s<n&&_(e=e.slice(s)),s<n&&c(e))}h.push(i)}return p(h)}function v(e,i){var n=i.length>0,r=e.length>0,o=function(s,o,l,a,d){var h,c,u,p=0,m="0",f=s&&[],_=[],v=D,b=s||r&&w.find.TAG("*",d),y=z+=null==v?1:Math.random()||.1,C=b.length;for(d&&(D=o===P||o||d);m!==C&&null!=(h=b[m]);m++){if(r&&h){for(c=0,o||h.ownerDocument===P||(R(h),l=!j);u=e[c++];)if(u(h,o||P,l)){a.push(h);break}d&&(z=y)}n&&((h=!u&&h)&&p--,s&&f.push(h))}if(p+=m,n&&m!==p){for(c=0;u=i[c++];)u(f,_,o,l);if(s){if(p>0)for(;m--;)f[m]||_[m]||(_[m]=K.call(a));_=g(_)}Q.apply(a,_),d&&!s&&_.length>0&&p+i.length>1&&t.uniqueSort(a)}return d&&(z=y,D=v),f};return n?s(o):o}var b,y,w,C,x,S,T,k,D,I,O,R,P,M,j,E,F,A,L,N="sizzle"+1*new Date,V=e.document,z=0,H=0,B=i(),U=i(),q=i(),W=function(e,t){return e===t&&(O=!0),0},$={}.hasOwnProperty,G=[],K=G.pop,Y=G.push,Q=G.push,X=G.slice,J=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",se=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ne=new RegExp(ee+"+","g"),re=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),oe=new RegExp("^"+ee+"*,"+ee+"*"),le=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ae=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),de=new RegExp(se),he=new RegExp("^"+te+"$"),ce={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},ue=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fe=/[+~]/,_e=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ve=function(e,t,i){var s="0x"+t-65536;return s!==s||i?t:s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ye=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){R()},Ce=u(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(G=X.call(V.childNodes),V.childNodes),G[V.childNodes.length].nodeType}catch(e){Q={apply:G.length?function(e,t){Y.apply(e,X.call(t))}:function(e,t){for(var i=e.length,s=0;e[i++]=t[s++];);e.length=i-1}}}y=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=t.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:V;return s!==P&&9===s.nodeType&&s.documentElement?(P=s,M=P.documentElement,j=!x(P),V!==P&&(i=P.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",we,!1):i.attachEvent&&i.attachEvent("onunload",we)),y.attributes=n(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=n(function(e){return e.appendChild(P.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=me.test(P.getElementsByClassName),y.getById=n(function(e){return M.appendChild(e).id=N,!P.getElementsByName||!P.getElementsByName(N).length}),y.getById?(w.filter.ID=function(e){var t=e.replace(_e,ve);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&j){var i=t.getElementById(e);return i?[i]:[]}}):(w.filter.ID=function(e){var t=e.replace(_e,ve);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&j){var i,s,n,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(n=t.getElementsByName(e),s=0;r=n[s++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),w.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,s=[],n=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[n++];)1===i.nodeType&&s.push(i);return s}return r},w.find.CLASS=y.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&j)return t.getElementsByClassName(e)},F=[],E=[],(y.qsa=me.test(P.querySelectorAll))&&(n(function(e){M.appendChild(e).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&E.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||E.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+N+"-]").length||E.push("~="),e.querySelectorAll(":checked").length||E.push(":checked"),e.querySelectorAll("a#"+N+"+*").length||E.push(".#.+[+~]")}),n(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=P.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&E.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&E.push(":enabled",":disabled"),M.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&E.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),E.push(",.*:")})),(y.matchesSelector=me.test(A=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&n(function(e){y.disconnectedMatch=A.call(e,"*"),A.call(e,"[s!='']:x"),F.push("!=",se)}),E=E.length&&new RegExp(E.join("|")),F=F.length&&new RegExp(F.join("|")),t=me.test(M.compareDocumentPosition),L=t||me.test(M.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,s=t&&t.parentNode;return e===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):e.compareDocumentPosition&&16&e.compareDocumentPosition(s)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return O=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!y.sortDetached&&t.compareDocumentPosition(e)===i?e===P||e.ownerDocument===V&&L(V,e)?-1:t===P||t.ownerDocument===V&&L(V,t)?1:I?J(I,e)-J(I,t):0:4&i?-1:1)}:function(e,t){if(e===t)return O=!0,0;var i,s=0,n=e.parentNode,r=t.parentNode,l=[e],a=[t];if(!n||!r)return e===P?-1:t===P?1:n?-1:r?1:I?J(I,e)-J(I,t):0;if(n===r)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;l[s]===a[s];)s++;return s?o(l[s],a[s]):l[s]===V?-1:a[s]===V?1:0},P):P},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==P&&R(e),i=i.replace(ae,"='$1']"),y.matchesSelector&&j&&!q[i+" "]&&(!F||!F.test(i))&&(!E||!E.test(i)))try{var s=A.call(e,i);if(s||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return s}catch(e){}return t(i,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&R(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&R(e);var i=w.attrHandle[t.toLowerCase()],s=i&&$.call(w.attrHandle,t.toLowerCase())?i(e,t,!j):void 0;return void 0!==s?s:y.attributes||!j?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},t.escape=function(e){return(e+"").replace(be,ye)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],s=0,n=0;if(O=!y.detectDuplicates,I=!y.sortStable&&e.slice(0),e.sort(W),O){for(;t=e[n++];)t===e[n]&&(s=i.push(n));for(;s--;)e.splice(i[s],1)}return I=null,e},C=t.getText=function(e){var t,i="",s=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=C(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[s++];)i+=C(t);return i},w=t.selectors={cacheLength:50,createPseudo:s,match:ce,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,ve),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,ve),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ce.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&de.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,ve).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,s){return function(n){var r=t.attr(n,e);return null==r?"!="===i:!i||(r+="","="===i?r===s:"!="===i?r!==s:"^="===i?s&&0===r.indexOf(s):"*="===i?s&&r.indexOf(s)>-1:"$="===i?s&&r.slice(-s.length)===s:"~="===i?(" "+r.replace(ne," ")+" ").indexOf(s)>-1:"|="===i&&(r===s||r.slice(0,s.length+1)===s+"-"))}},CHILD:function(e,t,i,s,n){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),l="of-type"===t;return 1===s&&0===n?function(e){return!!e.parentNode}:function(t,i,a){var d,h,c,u,p,m,g=r!==o?"nextSibling":"previousSibling",f=t.parentNode,_=l&&t.nodeName.toLowerCase(),v=!a&&!l,b=!1;if(f){if(r){for(;g;){for(u=t;u=u[g];)if(l?u.nodeName.toLowerCase()===_:1===u.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[o?f.firstChild:f.lastChild],o&&v){for(u=f,c=u[N]||(u[N]={}),h=c[u.uniqueID]||(c[u.uniqueID]={}),d=h[e]||[],p=d[0]===z&&d[1],b=p&&d[2],u=p&&f.childNodes[p];u=++p&&u&&u[g]||(b=p=0)||m.pop();)if(1===u.nodeType&&++b&&u===t){h[e]=[z,p,b];break}}else if(v&&(u=t,c=u[N]||(u[N]={}),h=c[u.uniqueID]||(c[u.uniqueID]={}),d=h[e]||[],p=d[0]===z&&d[1],b=p),b===!1)for(;(u=++p&&u&&u[g]||(b=p=0)||m.pop())&&((l?u.nodeName.toLowerCase()!==_:1!==u.nodeType)||!++b||(v&&(c=u[N]||(u[N]={}),h=c[u.uniqueID]||(c[u.uniqueID]={}),h[e]=[z,b]),u!==t)););return(b-=n)===s||b%s==0&&b/s>=0}}},PSEUDO:function(e,i){var n,r=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[N]?r(i):r.length>1?(n=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,t){for(var s,n=r(e,i),o=n.length;o--;)s=J(e,n[o]),e[s]=!(t[s]=n[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:s(function(e){var t=[],i=[],n=T(e.replace(re,"$1"));return n[N]?s(function(e,t,i,s){for(var r,o=n(e,null,s,[]),l=e.length;l--;)(r=o[l])&&(e[l]=!(t[l]=r))}):function(e,s,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}}),has:s(function(e){return function(i){return t(e,i).length>0}}),contains:s(function(e){return e=e.replace(_e,ve),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:s(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,ve).toLowerCase(),function(t){var i;do{if(i=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return ue.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,i){return[i<0?i+t:i]}),even:a(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:a(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:a(function(e,t,i){for(var s=i<0?i+t:i;--s>=0;)e.push(s);return e}),gt:a(function(e,t,i){for(var s=i<0?i+t:i;++s<t;)e.push(s);return e})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(b);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,S=t.tokenize=function(e,i){var s,n,r,o,l,a,d,h=U[e+" "];if(h)return i?0:h.slice(0);for(l=e,a=[],d=w.preFilter;l;){s&&!(n=oe.exec(l))||(n&&(l=l.slice(n[0].length)||l),a.push(r=[])),s=!1,(n=le.exec(l))&&(s=n.shift(),r.push({value:s,type:n[0].replace(re," ")}),l=l.slice(s.length));for(o in w.filter)!(n=ce[o].exec(l))||d[o]&&!(n=d[o](n))||(s=n.shift(),r.push({value:s,type:o,matches:n}),l=l.slice(s.length));if(!s)break}return i?l.length:l?t.error(e):U(e,a).slice(0)},T=t.compile=function(e,t){var i,s=[],n=[],r=q[e+" "];if(!r){for(t||(t=S(e)),i=t.length;i--;)r=_(t[i]),r[N]?s.push(r):n.push(r);r=q(e,v(n,s)),r.selector=e}return r},k=t.select=function(e,t,i,s){var n,r,o,l,a,h="function"==typeof e&&e,u=!s&&S(e=h.selector||e);if(i=i||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&9===t.nodeType&&j&&w.relative[r[1].type]){if(!(t=(w.find.ID(o.matches[0].replace(_e,ve),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(n=ce.needsContext.test(e)?0:r.length;n--&&(o=r[n],!w.relative[l=o.type]);)if((a=w.find[l])&&(s=a(o.matches[0].replace(_e,ve),fe.test(r[0].type)&&d(t.parentNode)||t))){if(r.splice(n,1),!(e=s.length&&c(r)))return Q.apply(i,s),i;break}}return(h||T(e,u))(s,t,!j,i,!t||fe.test(e)&&d(t.parentNode)||t),i},y.sortStable=N.split("").sort(W).join("")===N,y.detectDuplicates=!!O,R(),y.sortDetached=n(function(e){return 1&e.compareDocumentPosition(P.createElement("fieldset"))}),n(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&n(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),n(function(e){return null==e.getAttribute("disabled")})||r(Z,function(e,t,i){var s;if(!i)return e[t]===!0?t.toLowerCase():(s=e.getAttributeNode(t))&&s.specified?s.value:null}),t}(e);me.find=fe,me.expr=fe.selectors,me.expr[":"]=me.expr.pseudos,me.uniqueSort=me.unique=fe.uniqueSort,me.text=fe.getText,me.isXMLDoc=fe.isXML,me.contains=fe.contains,me.escapeSelector=fe.escape;var _e=function(e,t,i){for(var s=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&me(e).is(i))break;s.push(e)}return s},ve=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},be=me.expr.match.needsContext,ye=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,we=/^.[^:#\[\.,]*$/;me.filter=function(e,t,i){var s=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===s.nodeType?me.find.matchesSelector(s,e)?[s]:[]:me.find.matches(e,me.grep(t,function(e){return 1===e.nodeType}))},me.fn.extend({find:function(e){var t,i,s=this.length,n=this;if("string"!=typeof e)return this.pushStack(me(e).filter(function(){for(t=0;t<s;t++)if(me.contains(n[t],this))return!0}));for(i=this.pushStack([]),t=0;t<s;t++)me.find(e,n[t],i);return s>1?me.uniqueSort(i):i},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&be.test(e)?me(e):e||[],!1).length}});var Ce,xe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(me.fn.init=function(e,t,i){var s,n;if(!e)return this;if(i=i||Ce,"string"==typeof e){if(!(s="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:xe.exec(e))||!s[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof me?t[0]:t,me.merge(this,me.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),ye.test(s[1])&&me.isPlainObject(t))for(s in t)me.isFunction(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return n=ie.getElementById(s[2]),n&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):me.isFunction(e)?void 0!==i.ready?i.ready(e):e(me):me.makeArray(e,this)}).prototype=me.fn,Ce=me(ie);var Se=/^(?:parents|prev(?:Until|All))/,Te={children:!0,contents:!0,next:!0,prev:!0};me.fn.extend({has:function(e){var t=me(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(me.contains(this,t[e]))return!0})},closest:function(e,t){var i,s=0,n=this.length,r=[],o="string"!=typeof e&&me(e);if(!be.test(e))for(;s<n;s++)for(i=this[s];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&me.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?me.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?le.call(me(e),this[0]):le.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(me.uniqueSort(me.merge(this.get(),me(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),me.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _e(e,"parentNode")},parentsUntil:function(e,t,i){return _e(e,"parentNode",i)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return _e(e,"nextSibling")},prevAll:function(e){return _e(e,"previousSibling")},nextUntil:function(e,t,i){return _e(e,"nextSibling",i)},prevUntil:function(e,t,i){return _e(e,"previousSibling",i)},siblings:function(e){return ve((e.parentNode||{}).firstChild,e)},children:function(e){return ve(e.firstChild)},contents:function(e){return n(e,"iframe")?e.contentDocument:(n(e,"template")&&(e=e.content||e),me.merge([],e.childNodes))}},function(e,t){me.fn[e]=function(i,s){var n=me.map(this,t,i);return"Until"!==e.slice(-5)&&(s=i),s&&"string"==typeof s&&(n=me.filter(s,n)),this.length>1&&(Te[e]||me.uniqueSort(n),Se.test(e)&&n.reverse()),this.pushStack(n)}});var ke=/[^\x20\t\r\n\f]+/g;me.Callbacks=function(e){e="string"==typeof e?l(e):me.extend({},e);var t,i,s,n,r=[],o=[],a=-1,d=function(){for(n=n||e.once,s=t=!0;o.length;a=-1)for(i=o.shift();++a<r.length;)r[a].apply(i[0],i[1])===!1&&e.stopOnFalse&&(a=r.length,i=!1);e.memory||(i=!1),t=!1,n&&(r=i?[]:"")},h={add:function(){return r&&(i&&!t&&(a=r.length-1,o.push(i)),function t(i){me.each(i,function(i,s){me.isFunction(s)?e.unique&&h.has(s)||r.push(s):s&&s.length&&"string"!==me.type(s)&&t(s)})}(arguments),i&&!t&&d()),this},remove:function(){return me.each(arguments,function(e,t){for(var i;(i=me.inArray(t,r,i))>-1;)r.splice(i,1),i<=a&&a--}),this},has:function(e){return e?me.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return n=o=[],r=i="",this},disabled:function(){return!r},lock:function(){return n=o=[],i||t||(r=i=""),this},locked:function(){return!!n},fireWith:function(e,i){return n||(i=i||[],i=[e,i.slice?i.slice():i],o.push(i),t||d()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},me.extend({Deferred:function(t){var i=[["notify","progress",me.Callbacks("memory"),me.Callbacks("memory"),2],["resolve","done",me.Callbacks("once memory"),me.Callbacks("once memory"),0,"resolved"],["reject","fail",me.Callbacks("once memory"),me.Callbacks("once memory"),1,"rejected"]],s="pending",n={state:function(){return s},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return me.Deferred(function(t){me.each(i,function(i,s){var n=me.isFunction(e[s[4]])&&e[s[4]];r[s[1]](function(){var e=n&&n.apply(this,arguments);e&&me.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[s[0]+"With"](this,n?[e]:arguments)})}),e=null}).promise()},then:function(t,s,n){function r(t,i,s,n){return function(){var l=this,h=arguments,c=function(){var e,c;if(!(t<o)){if((e=s.apply(l,h))===i.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,me.isFunction(c)?n?c.call(e,r(o,i,a,n),r(o,i,d,n)):(o++,c.call(e,r(o,i,a,n),r(o,i,d,n),r(o,i,a,i.notifyWith))):(s!==a&&(l=void 0,h=[e]),(n||i.resolveWith)(l,h))}},u=n?c:function(){try{c()}catch(e){me.Deferred.exceptionHook&&me.Deferred.exceptionHook(e,u.stackTrace),t+1>=o&&(s!==d&&(l=void 0,h=[e]),i.rejectWith(l,h))}};t?u():(me.Deferred.getStackHook&&(u.stackTrace=me.Deferred.getStackHook()),e.setTimeout(u))}}var o=0;return me.Deferred(function(e){i[0][3].add(r(0,e,me.isFunction(n)?n:a,e.notifyWith)),i[1][3].add(r(0,e,me.isFunction(t)?t:a)),i[2][3].add(r(0,e,me.isFunction(s)?s:d))}).promise()},promise:function(e){return null!=e?me.extend(e,n):n}},r={};return me.each(i,function(e,t){var o=t[2],l=t[5];n[t[1]]=o.add,l&&o.add(function(){s=l},i[3-e][2].disable,i[0][2].lock),o.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=o.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,i=t,s=Array(i),n=ne.call(arguments),r=me.Deferred(),o=function(e){return function(i){s[e]=this,n[e]=arguments.length>1?ne.call(arguments):i,--t||r.resolveWith(s,n)}};if(t<=1&&(h(e,r.done(o(i)).resolve,r.reject,!t),"pending"===r.state()||me.isFunction(n[i]&&n[i].then)))return r.then();for(;i--;)h(n[i],o(i),r.reject);return r.promise()}});var De=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;me.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&De.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},me.readyException=function(t){e.setTimeout(function(){throw t})};var Ie=me.Deferred();me.fn.ready=function(e){return Ie.then(e).catch(function(e){me.readyException(e)}),this},me.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--me.readyWait:me.isReady)||(me.isReady=!0,e!==!0&&--me.readyWait>0||Ie.resolveWith(ie,[me]))}}),me.ready.then=Ie.then,"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll?e.setTimeout(me.ready):(ie.addEventListener("DOMContentLoaded",c),e.addEventListener("load",c));var Oe=function(e,t,i,s,n,r,o){var l=0,a=e.length,d=null==i;if("object"===me.type(i)){n=!0;for(l in i)Oe(e,t,l,i[l],!0,r,o)}else if(void 0!==s&&(n=!0,me.isFunction(s)||(o=!0),d&&(o?(t.call(e,s),t=null):(d=t,t=function(e,t,i){return d.call(me(e),i)})),t))for(;l<a;l++)t(e[l],i,o?s:s.call(e[l],l,t(e[l],i)));return n?e:d?t.call(e):a?t(e[0],i):r
},Re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};u.uid=1,u.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var s,n=this.cache(e);if("string"==typeof t)n[me.camelCase(t)]=i;else for(s in t)n[me.camelCase(s)]=t[s];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][me.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,s=e[this.expando];if(void 0!==s){if(void 0!==t){Array.isArray(t)?t=t.map(me.camelCase):(t=me.camelCase(t),t=t in s?[t]:t.match(ke)||[]),i=t.length;for(;i--;)delete s[t[i]]}(void 0===t||me.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!me.isEmptyObject(t)}};var Pe=new u,Me=new u,je=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/[A-Z]/g;me.extend({hasData:function(e){return Me.hasData(e)||Pe.hasData(e)},data:function(e,t,i){return Me.access(e,t,i)},removeData:function(e,t){Me.remove(e,t)},_data:function(e,t,i){return Pe.access(e,t,i)},_removeData:function(e,t){Pe.remove(e,t)}}),me.fn.extend({data:function(e,t){var i,s,n,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(n=Me.get(r),1===r.nodeType&&!Pe.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(s=o[i].name,0===s.indexOf("data-")&&(s=me.camelCase(s.slice(5)),m(r,s,n[s])));Pe.set(r,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each(function(){Me.set(this,e)}):Oe(this,function(t){var i;if(r&&void 0===t){if(void 0!==(i=Me.get(r,e)))return i;if(void 0!==(i=m(r,e)))return i}else this.each(function(){Me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Me.remove(this,e)})}}),me.extend({queue:function(e,t,i){var s;if(e)return t=(t||"fx")+"queue",s=Pe.get(e,t),i&&(!s||Array.isArray(i)?s=Pe.access(e,t,me.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,t){t=t||"fx";var i=me.queue(e,t),s=i.length,n=i.shift(),r=me._queueHooks(e,t),o=function(){me.dequeue(e,t)};"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===t&&i.unshift("inprogress"),delete r.stop,n.call(e,o,r)),!s&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Pe.get(e,i)||Pe.access(e,i,{empty:me.Callbacks("once memory").add(function(){Pe.remove(e,[t+"queue",i])})})}}),me.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?me.queue(this[0],e):void 0===t?this:this.each(function(){var i=me.queue(this,e,t);me._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&me.dequeue(this,e)})},dequeue:function(e){return this.each(function(){me.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,s=1,n=me.Deferred(),r=this,o=this.length,l=function(){--s||n.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=Pe.get(r[o],e+"queueHooks"))&&i.empty&&(s++,i.empty.add(l));return l(),n.promise(t)}});var Fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ae=new RegExp("^(?:([+-])=|)("+Fe+")([a-z%]*)$","i"),Le=["Top","Right","Bottom","Left"],Ne=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&me.contains(e.ownerDocument,e)&&"none"===me.css(e,"display")},Ve=function(e,t,i,s){var n,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];n=i.apply(e,s||[]);for(r in t)e.style[r]=o[r];return n},ze={};me.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ne(this)?me(this).show():me(this).hide()})}});var He=/^(?:checkbox|radio)$/i,Be=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ue=/^$|\/(?:java|ecma)script/i,qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td;var We=/<|&#?\w+;/;!function(){var e=ie.createDocumentFragment(),t=e.appendChild(ie.createElement("div")),i=ie.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),pe.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",pe.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var $e=ie.documentElement,Ge=/^key/,Ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ye=/^([^.]*)(?:\.(.+)|)/;me.event={global:{},add:function(e,t,i,s,n){var r,o,l,a,d,h,c,u,p,m,g,f=Pe.get(e);if(f)for(i.handler&&(r=i,i=r.handler,n=r.selector),n&&me.find.matchesSelector($e,n),i.guid||(i.guid=me.guid++),(a=f.events)||(a=f.events={}),(o=f.handle)||(o=f.handle=function(t){return void 0!==me&&me.event.triggered!==t.type?me.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ke)||[""],d=t.length;d--;)l=Ye.exec(t[d])||[],p=g=l[1],m=(l[2]||"").split(".").sort(),p&&(c=me.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,c=me.event.special[p]||{},h=me.extend({type:p,origType:g,data:s,handler:i,guid:i.guid,selector:n,needsContext:n&&me.expr.match.needsContext.test(n),namespace:m.join(".")},r),(u=a[p])||(u=a[p]=[],u.delegateCount=0,c.setup&&c.setup.call(e,s,m,o)!==!1||e.addEventListener&&e.addEventListener(p,o)),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),n?u.splice(u.delegateCount++,0,h):u.push(h),me.event.global[p]=!0)},remove:function(e,t,i,s,n){var r,o,l,a,d,h,c,u,p,m,g,f=Pe.hasData(e)&&Pe.get(e);if(f&&(a=f.events)){for(t=(t||"").match(ke)||[""],d=t.length;d--;)if(l=Ye.exec(t[d])||[],p=g=l[1],m=(l[2]||"").split(".").sort(),p){for(c=me.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,u=a[p]||[],l=l[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=u.length;r--;)h=u[r],!n&&g!==h.origType||i&&i.guid!==h.guid||l&&!l.test(h.namespace)||s&&s!==h.selector&&("**"!==s||!h.selector)||(u.splice(r,1),h.selector&&u.delegateCount--,c.remove&&c.remove.call(e,h));o&&!u.length&&(c.teardown&&c.teardown.call(e,m,f.handle)!==!1||me.removeEvent(e,p,f.handle),delete a[p])}else for(p in a)me.event.remove(e,p+t[d],i,s,!0);me.isEmptyObject(a)&&Pe.remove(e,"handle events")}},dispatch:function(e){var t,i,s,n,r,o,l=me.event.fix(e),a=new Array(arguments.length),d=(Pe.get(this,"events")||{})[l.type]||[],h=me.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,l)!==!1){for(o=me.event.handlers.call(this,l,d),t=0;(n=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(s=((me.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,a))&&(l.result=s)===!1&&(l.preventDefault(),l.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,s,n,r,o,l=[],a=t.delegateCount,d=e.target;if(a&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||d.disabled!==!0)){for(r=[],o={},i=0;i<a;i++)s=t[i],n=s.selector+" ",void 0===o[n]&&(o[n]=s.needsContext?me(n,this).index(d)>-1:me.find(n,this,null,[d]).length),o[n]&&r.push(s);r.length&&l.push({elem:d,handlers:r})}return d=this,a<t.length&&l.push({elem:d,handlers:t.slice(a)}),l},addProp:function(e,t){Object.defineProperty(me.Event.prototype,e,{enumerable:!0,configurable:!0,get:me.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[me.expando]?e:new me.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==x()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===x()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&n(this,"input"))return this.click(),!1},_default:function(e){return n(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},me.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},me.Event=function(e,t){if(!(this instanceof me.Event))return new me.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?w:C,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&me.extend(this,t),this.timeStamp=e&&e.timeStamp||me.now(),this[me.expando]=!0},me.Event.prototype={constructor:me.Event,isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},me.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ge.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ke.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},me.event.addProp),me.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){me.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,s=this,n=e.relatedTarget,r=e.handleObj;return n&&(n===s||me.contains(s,n))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),me.fn.extend({on:function(e,t,i,s){return S(this,e,t,i,s)},one:function(e,t,i,s){return S(this,e,t,i,s,1)},off:function(e,t,i){var s,n;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,me(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return t!==!1&&"function"!=typeof t||(i=t,t=void 0),i===!1&&(i=C),this.each(function(){me.event.remove(this,e,i,t)})}});var Qe=/<script|<style|<link/i,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Je=/^true\/(.*)/,Ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;me.extend({htmlPrefilter:function(e){return e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,"<$1></$2>")},clone:function(e,t,i){var s,n,r,o,l=e.cloneNode(!0),a=me.contains(e.ownerDocument,e);if(!(pe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||me.isXMLDoc(e)))for(o=v(l),r=v(e),s=0,n=r.length;s<n;s++)O(r[s],o[s]);if(t)if(i)for(r=r||v(e),o=o||v(l),s=0,n=r.length;s<n;s++)I(r[s],o[s]);else I(e,l);return o=v(l,"script"),o.length>0&&b(o,!a&&v(e,"script")),l},cleanData:function(e){for(var t,i,s,n=me.event.special,r=0;void 0!==(i=e[r]);r++)if(Re(i)){if(t=i[Pe.expando]){if(t.events)for(s in t.events)n[s]?me.event.remove(i,s):me.removeEvent(i,s,t.handle);i[Pe.expando]=void 0}i[Me.expando]&&(i[Me.expando]=void 0)}}}),me.fn.extend({detach:function(e){return P(this,e,!0)},remove:function(e){return P(this,e)},text:function(e){return Oe(this,function(e){return void 0===e?me.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return R(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){T(this,e).appendChild(e)}})},prepend:function(){return R(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(me.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return me.clone(this,e,t)})},html:function(e){return Oe(this,function(e){var t=this[0]||{},i=0,s=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Qe.test(e)&&!qe[(Be.exec(e)||["",""])[1].toLowerCase()]){e=me.htmlPrefilter(e);try{for(;i<s;i++)t=this[i]||{},1===t.nodeType&&(me.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return R(this,arguments,function(t){var i=this.parentNode;me.inArray(this,e)<0&&(me.cleanData(v(this)),i&&i.replaceChild(t,this))},e)}}),me.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){me.fn[e]=function(e){for(var i,s=[],n=me(e),r=n.length-1,o=0;o<=r;o++)i=o===r?this:this.clone(!0),me(n[o])[t](i),oe.apply(s,i.get());return this.pushStack(s)}});var et=/^margin/,tt=new RegExp("^("+Fe+")(?!px)[a-z%]+$","i"),it=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)};!function(){function t(){if(l){l.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",l.innerHTML="",$e.appendChild(o);var t=e.getComputedStyle(l);i="1%"!==t.top,r="2px"===t.marginLeft,s="4px"===t.width,l.style.marginRight="50%",n="4px"===t.marginRight,$e.removeChild(o),l=null}}var i,s,n,r,o=ie.createElement("div"),l=ie.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",pe.clearCloneStyle="content-box"===l.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(l),me.extend(pe,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return t(),s},pixelMarginRight:function(){return t(),n},reliableMarginLeft:function(){return t(),r}}))}();var st=/^(none|table(?!-c[ea]).+)/,nt=/^--/,rt={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"},lt=["Webkit","Moz","ms"],at=ie.createElement("div").style;me.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=M(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,r,o,l=me.camelCase(t),a=nt.test(t),d=e.style;if(a||(t=F(l)),o=me.cssHooks[t]||me.cssHooks[l],void 0===i)return o&&"get"in o&&void 0!==(n=o.get(e,!1,s))?n:d[t];r=typeof i,"string"===r&&(n=Ae.exec(i))&&n[1]&&(i=g(e,t,n),r="number"),null!=i&&i===i&&("number"===r&&(i+=n&&n[3]||(me.cssNumber[l]?"":"px")),pe.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,s))||(a?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,s){var n,r,o,l=me.camelCase(t);return nt.test(t)||(t=F(l)),o=me.cssHooks[t]||me.cssHooks[l],o&&"get"in o&&(n=o.get(e,!0,i)),void 0===n&&(n=M(e,t,s)),"normal"===n&&t in ot&&(n=ot[t]),""===i||i?(r=parseFloat(n),i===!0||isFinite(r)?r||0:n):n}}),me.each(["height","width"],function(e,t){me.cssHooks[t]={get:function(e,i,s){if(i)return!st.test(me.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?N(e,t,s):Ve(e,rt,function(){return N(e,t,s)})},set:function(e,i,s){var n,r=s&&it(e),o=s&&L(e,t,s,"border-box"===me.css(e,"boxSizing",!1,r),r);return o&&(n=Ae.exec(i))&&"px"!==(n[3]||"px")&&(e.style[t]=i,i=me.css(e,t)),A(e,i,o)}}}),me.cssHooks.marginLeft=j(pe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),me.each({margin:"",padding:"",border:"Width"},function(e,t){me.cssHooks[e+t]={expand:function(i){for(var s=0,n={},r="string"==typeof i?i.split(" "):[i];s<4;s++)n[e+Le[s]+t]=r[s]||r[s-2]||r[0];return n}},et.test(e)||(me.cssHooks[e+t].set=A)}),me.fn.extend({css:function(e,t){return Oe(this,function(e,t,i){var s,n,r={},o=0;if(Array.isArray(t)){for(s=it(e),n=t.length;o<n;o++)r[t[o]]=me.css(e,t[o],!1,s);return r}return void 0!==i?me.style(e,t,i):me.css(e,t)},e,t,arguments.length>1)}}),me.Tween=V,V.prototype={constructor:V,init:function(e,t,i,s,n,r){this.elem=e,this.prop=i,this.easing=n||me.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=r||(me.cssNumber[i]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,i=V.propHooks[this.prop];return this.options.duration?this.pos=t=me.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=me.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){me.fx.step[e.prop]?me.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[me.cssProps[e.prop]]&&!me.cssHooks[e.prop]?e.elem[e.prop]=e.now:me.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},me.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},me.fx=V.prototype.init,me.fx.step={};var dt,ht,ct=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;me.Animation=me.extend($,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return g(i.elem,e,Ae.exec(t),i),i}]},tweener:function(e,t){me.isFunction(e)?(t=e,e=["*"]):e=e.match(ke);for(var i,s=0,n=e.length;s<n;s++)i=e[s],$.tweeners[i]=$.tweeners[i]||[],$.tweeners[i].unshift(t)},prefilters:[q],prefilter:function(e,t){t?$.prefilters.unshift(e):$.prefilters.push(e)}}),me.speed=function(e,t,i){var s=e&&"object"==typeof e?me.extend({},e):{complete:i||!i&&t||me.isFunction(e)&&e,duration:e,easing:i&&t||t&&!me.isFunction(t)&&t};return me.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in me.fx.speeds?s.duration=me.fx.speeds[s.duration]:s.duration=me.fx.speeds._default),null!=s.queue&&s.queue!==!0||(s.queue="fx"),s.old=s.complete,s.complete=function(){me.isFunction(s.old)&&s.old.call(this),s.queue&&me.dequeue(this,s.queue)},s},me.fn.extend({fadeTo:function(e,t,i,s){return this.filter(Ne).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(e,t,i,s){var n=me.isEmptyObject(e),r=me.speed(t,i,s),o=function(){var t=$(this,me.extend({},e),r);(n||Pe.get(this,"finish"))&&t.stop(!0)};return o.finish=o,n||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(e,t,i){var s=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",r=me.timers,o=Pe.get(this);if(n)o[n]&&o[n].stop&&s(o[n]);else for(n in o)o[n]&&o[n].stop&&ut.test(n)&&s(o[n]);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(r[n].anim.stop(i),t=!1,r.splice(n,1));!t&&i||me.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=Pe.get(this),s=i[e+"queue"],n=i[e+"queueHooks"],r=me.timers,o=s?s.length:0;for(i.finish=!0,me.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)s[t]&&s[t].finish&&s[t].finish.call(this);delete i.finish})}}),me.each(["toggle","show","hide"],function(e,t){var i=me.fn[t];me.fn[t]=function(e,s,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(B(t,!0),e,s,n)}}),me.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){me.fn[e]=function(e,i,s){return this.animate(t,e,i,s)}}),me.timers=[],me.fx.tick=function(){var e,t=0,i=me.timers;for(dt=me.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||me.fx.stop(),dt=void 0},me.fx.timer=function(e){me.timers.push(e),me.fx.start()},me.fx.interval=13,me.fx.start=function(){ht||(ht=!0,z())},me.fx.stop=function(){ht=null},me.fx.speeds={slow:600,fast:200,_default:400},me.fn.delay=function(t,i){return t=me.fx?me.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,s){var n=e.setTimeout(i,t);s.stop=function(){e.clearTimeout(n)}})},function(){var e=ie.createElement("input"),t=ie.createElement("select"),i=t.appendChild(ie.createElement("option"));e.type="checkbox",pe.checkOn=""!==e.value,pe.optSelected=i.selected,e=ie.createElement("input"),e.value="t",e.type="radio",pe.radioValue="t"===e.value}();var pt,mt=me.expr.attrHandle;me.fn.extend({attr:function(e,t){return Oe(this,me.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){me.removeAttr(this,e)})}}),me.extend({attr:function(e,t,i){var s,n,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?me.prop(e,t,i):(1===r&&me.isXMLDoc(e)||(n=me.attrHooks[t.toLowerCase()]||(me.expr.match.bool.test(t)?pt:void 0)),void 0!==i?null===i?void me.removeAttr(e,t):n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:(e.setAttribute(t,i+""),i):n&&"get"in n&&null!==(s=n.get(e,t))?s:(s=me.find.attr(e,t),null==s?void 0:s))},attrHooks:{type:{set:function(e,t){if(!pe.radioValue&&"radio"===t&&n(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,s=0,n=t&&t.match(ke);if(n&&1===e.nodeType)for(;i=n[s++];)e.removeAttribute(i)}}),pt={set:function(e,t,i){return t===!1?me.removeAttr(e,i):e.setAttribute(i,i),i}},me.each(me.expr.match.bool.source.match(/\w+/g),function(e,t){var i=mt[t]||me.find.attr;mt[t]=function(e,t,s){var n,r,o=t.toLowerCase();return s||(r=mt[o],mt[o]=n,n=null!=i(e,t,s)?o:null,mt[o]=r),n}});var gt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;me.fn.extend({prop:function(e,t){return Oe(this,me.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[me.propFix[e]||e]})}}),me.extend({prop:function(e,t,i){var s,n,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&me.isXMLDoc(e)||(t=me.propFix[t]||t,n=me.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:e[t]=i:n&&"get"in n&&null!==(s=n.get(e,t))?s:e[t]},propHooks:{tabIndex:{get:function(e){var t=me.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),pe.optSelected||(me.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),me.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){me.propFix[this.toLowerCase()]=this}),me.fn.extend({addClass:function(e){var t,i,s,n,r,o,l,a=0;if(me.isFunction(e))return this.each(function(t){me(this).addClass(e.call(this,t,K(this)))});if("string"==typeof e&&e)for(t=e.match(ke)||[];i=this[a++];)if(n=K(i),s=1===i.nodeType&&" "+G(n)+" "){for(o=0;r=t[o++];)s.indexOf(" "+r+" ")<0&&(s+=r+" ");l=G(s),n!==l&&i.setAttribute("class",l)}return this},removeClass:function(e){var t,i,s,n,r,o,l,a=0;if(me.isFunction(e))return this.each(function(t){me(this).removeClass(e.call(this,t,K(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ke)||[];i=this[a++];)if(n=K(i),s=1===i.nodeType&&" "+G(n)+" "){for(o=0;r=t[o++];)for(;s.indexOf(" "+r+" ")>-1;)s=s.replace(" "+r+" "," ");l=G(s),n!==l&&i.setAttribute("class",l)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):me.isFunction(e)?this.each(function(i){me(this).toggleClass(e.call(this,i,K(this),t),t)}):this.each(function(){var t,s,n,r;if("string"===i)for(s=0,n=me(this),r=e.match(ke)||[];t=r[s++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==e&&"boolean"!==i||(t=K(this),t&&Pe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Pe.get(this,"__className__")||""))})},hasClass:function(e){var t,i,s=0;for(t=" "+e+" ";i=this[s++];)if(1===i.nodeType&&(" "+G(K(i))+" ").indexOf(t)>-1)return!0;return!1}});me.fn.extend({val:function(e){var t,i,s,n=this[0];{if(arguments.length)return s=me.isFunction(e),this.each(function(i){var n;1===this.nodeType&&(n=s?e.call(this,i,me(this).val()):e,null==n?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=me.map(n,function(e){return null==e?"":e+""})),(t=me.valHooks[this.type]||me.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))});if(n)return(t=me.valHooks[n.type]||me.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(n,"value"))?i:(i=n.value,"string"==typeof i?i.replace(/\r/g,""):null==i?"":i)}}}),me.extend({valHooks:{option:{get:function(e){var t=me.find.attr(e,"value");return null!=t?t:G(me.text(e))}},select:{get:function(e){var t,i,s,r=e.options,o=e.selectedIndex,l="select-one"===e.type,a=l?null:[],d=l?o+1:r.length;for(s=o<0?d:l?o:0;s<d;s++)if(i=r[s],(i.selected||s===o)&&!i.disabled&&(!i.parentNode.disabled||!n(i.parentNode,"optgroup"))){if(t=me(i).val(),l)return t;a.push(t)}return a},set:function(e,t){for(var i,s,n=e.options,r=me.makeArray(t),o=n.length;o--;)s=n[o],(s.selected=me.inArray(me.valHooks.option.get(s),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),me.each(["radio","checkbox"],function(){me.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=me.inArray(me(e).val(),t)>-1}},pe.checkOn||(me.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var _t=/^(?:focusinfocus|focusoutblur)$/;me.extend(me.event,{trigger:function(t,i,s,n){var r,o,l,a,d,h,c,u=[s||ie],p=he.call(t,"type")?t.type:t,m=he.call(t,"namespace")?t.namespace.split("."):[];if(o=l=s=s||ie,3!==s.nodeType&&8!==s.nodeType&&!_t.test(p+me.event.triggered)&&(p.indexOf(".")>-1&&(m=p.split("."),p=m.shift(),m.sort()),d=p.indexOf(":")<0&&"on"+p,t=t[me.expando]?t:new me.Event(p,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),i=null==i?[t]:me.makeArray(i,[t]),c=me.event.special[p]||{},n||!c.trigger||c.trigger.apply(s,i)!==!1)){if(!n&&!c.noBubble&&!me.isWindow(s)){for(a=c.delegateType||p,_t.test(a+p)||(o=o.parentNode);o;o=o.parentNode)u.push(o),l=o;l===(s.ownerDocument||ie)&&u.push(l.defaultView||l.parentWindow||e)}for(r=0;(o=u[r++])&&!t.isPropagationStopped();)t.type=r>1?a:c.bindType||p,h=(Pe.get(o,"events")||{})[t.type]&&Pe.get(o,"handle"),h&&h.apply(o,i),(h=d&&o[d])&&h.apply&&Re(o)&&(t.result=h.apply(o,i),t.result===!1&&t.preventDefault());return t.type=p,n||t.isDefaultPrevented()||c._default&&c._default.apply(u.pop(),i)!==!1||!Re(s)||d&&me.isFunction(s[p])&&!me.isWindow(s)&&(l=s[d],l&&(s[d]=null),me.event.triggered=p,s[p](),me.event.triggered=void 0,l&&(s[d]=l)),t.result}},simulate:function(e,t,i){var s=me.extend(new me.Event,i,{type:e,isSimulated:!0});me.event.trigger(s,null,t)}}),me.fn.extend({trigger:function(e,t){return this.each(function(){me.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return me.event.trigger(e,t,i,!0)}}),me.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){me.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),me.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),pe.focusin="onfocusin"in e,pe.focusin||me.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){me.event.simulate(t,e.target,me.event.fix(e))};me.event.special[t]={setup:function(){var s=this.ownerDocument||this,n=Pe.access(s,t);n||s.addEventListener(e,i,!0),Pe.access(s,t,(n||0)+1)},teardown:function(){var s=this.ownerDocument||this,n=Pe.access(s,t)-1;n?Pe.access(s,t,n):(s.removeEventListener(e,i,!0),Pe.remove(s,t))}}});var vt=e.location,bt=me.now(),yt=/\?/;me.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||me.error("Invalid XML: "+t),i};var wt=/\[\]$/,Ct=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;me.param=function(e,t){var i,s=[],n=function(e,t){var i=me.isFunction(t)?t():t;s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!me.isPlainObject(e))me.each(e,function(){n(this.name,this.value)});else for(i in e)Y(i,e[i],t,n);return s.join("&")},me.fn.extend({serialize:function(){return me.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=me.prop(this,"elements");return e?me.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!me(this).is(":disabled")&&xt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!He.test(e))}).map(function(e,t){var i=me(this).val();return null==i?null:Array.isArray(i)?me.map(i,function(e){return{name:t.name,value:e.replace(/\r?\n/g,"\r\n")}}):{name:t.name,value:i.replace(/\r?\n/g,"\r\n")}}).get()}});var St=/^(.*?):[ \t]*([^\r\n]*)$/gm,Tt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kt=/^(?:GET|HEAD)$/,Dt={},It={},Ot="*/".concat("*"),Rt=ie.createElement("a");Rt.href=vt.href,me.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:Tt.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ot,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":me.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?J(J(e,me.ajaxSettings),t):J(me.ajaxSettings,e)},ajaxPrefilter:Q(Dt),ajaxTransport:Q(It),ajax:function(t,i){function s(t,i,s,l){var d,u,p,y,w,C=i;h||(h=!0,a&&e.clearTimeout(a),n=void 0,o=l||"",x.readyState=t>0?4:0,d=t>=200&&t<300||304===t,s&&(y=Z(m,x,s)),y=ee(m,y,x,d),d?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(me.lastModified[r]=w),(w=x.getResponseHeader("etag"))&&(me.etag[r]=w)),204===t||"HEAD"===m.type?C="nocontent":304===t?C="notmodified":(C=y.state,u=y.data,p=y.error,
d=!p)):(p=C,!t&&C||(C="error",t<0&&(t=0))),x.status=t,x.statusText=(i||C)+"",d?_.resolveWith(g,[u,C,x]):_.rejectWith(g,[x,C,p]),x.statusCode(b),b=void 0,c&&f.trigger(d?"ajaxSuccess":"ajaxError",[x,m,d?u:p]),v.fireWith(g,[x,C]),c&&(f.trigger("ajaxComplete",[x,m]),--me.active||me.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var n,r,o,l,a,d,h,c,u,p,m=me.ajaxSetup({},i),g=m.context||m,f=m.context&&(g.nodeType||g.jquery)?me(g):me.event,_=me.Deferred(),v=me.Callbacks("once memory"),b=m.statusCode||{},y={},w={},C="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(h){if(!l)for(l={};t=St.exec(o);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?o:null},setRequestHeader:function(e,t){return null==h&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==h&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)x.always(e[x.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),s(0,t),this}};if(_.promise(x),m.url=((t||m.url||vt.href)+"").replace(/^\/\//,vt.protocol+"//"),m.type=i.method||i.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(ke)||[""],null==m.crossDomain){d=ie.createElement("a");try{d.href=m.url,d.href=d.href,m.crossDomain=Rt.protocol+"//"+Rt.host!=d.protocol+"//"+d.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=me.param(m.data,m.traditional)),X(Dt,m,i,x),h)return x;c=me.event&&m.global,c&&0==me.active++&&me.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!kt.test(m.type),r=m.url.replace(/#.*$/,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(/%20/g,"+")):(p=m.url.slice(r.length),m.data&&(r+=(yt.test(r)?"&":"?")+m.data,delete m.data),m.cache===!1&&(r=r.replace(/([?&])_=[^&]*/,"$1"),p=(yt.test(r)?"&":"?")+"_="+bt+++p),m.url=r+p),m.ifModified&&(me.lastModified[r]&&x.setRequestHeader("If-Modified-Since",me.lastModified[r]),me.etag[r]&&x.setRequestHeader("If-None-Match",me.etag[r])),(m.data&&m.hasContent&&m.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ot+"; q=0.01":""):m.accepts["*"]);for(u in m.headers)x.setRequestHeader(u,m.headers[u]);if(m.beforeSend&&(m.beforeSend.call(g,x,m)===!1||h))return x.abort();if(C="abort",v.add(m.complete),x.done(m.success),x.fail(m.error),n=X(It,m,i,x)){if(x.readyState=1,c&&f.trigger("ajaxSend",[x,m]),h)return x;m.async&&m.timeout>0&&(a=e.setTimeout(function(){x.abort("timeout")},m.timeout));try{h=!1,n.send(y,s)}catch(e){if(h)throw e;s(-1,e)}}else s(-1,"No Transport");return x},getJSON:function(e,t,i){return me.get(e,t,i,"json")},getScript:function(e,t){return me.get(e,void 0,t,"script")}}),me.each(["get","post"],function(e,t){me[t]=function(e,i,s,n){return me.isFunction(i)&&(n=n||s,s=i,i=void 0),me.ajax(me.extend({url:e,type:t,dataType:n,data:i,success:s},me.isPlainObject(e)&&e))}}),me._evalUrl=function(e){return me.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},me.fn.extend({wrapAll:function(e){var t;return this[0]&&(me.isFunction(e)&&(e=e.call(this[0])),t=me(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return me.isFunction(e)?this.each(function(t){me(this).wrapInner(e.call(this,t))}):this.each(function(){var t=me(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=me.isFunction(e);return this.each(function(i){me(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){me(this).replaceWith(this.childNodes)}),this}}),me.expr.pseudos.hidden=function(e){return!me.expr.pseudos.visible(e)},me.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},me.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Pt={0:200,1223:204},Mt=me.ajaxSettings.xhr();pe.cors=!!Mt&&"withCredentials"in Mt,pe.ajax=Mt=!!Mt,me.ajaxTransport(function(t){var i,s;if(pe.cors||Mt&&!t.crossDomain)return{send:function(n,r){var o,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)l[o]=t.xhrFields[o];t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)l.setRequestHeader(o,n[o]);i=function(e){return function(){i&&(i=s=l.onload=l.onerror=l.onabort=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?r(0,"error"):r(l.status,l.statusText):r(Pt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=i(),s=l.onerror=i("error"),void 0!==l.onabort?l.onabort=s:l.onreadystatechange=function(){4===l.readyState&&e.setTimeout(function(){i&&s()})},i=i("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),me.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),me.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return me.globalEval(e),e}}}),me.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),me.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(s,n){t=me("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&n("error"===e.type?404:200,e.type)}),ie.head.appendChild(t[0])},abort:function(){i&&i()}}}});var jt=[],Et=/(=)\?(?=&|$)|\?\?/;me.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||me.expando+"_"+bt++;return this[e]=!0,e}}),me.ajaxPrefilter("json jsonp",function(t,i,s){var n,r,o,l=t.jsonp!==!1&&(Et.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Et.test(t.data)&&"data");if(l||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=me.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(Et,"$1"+n):t.jsonp!==!1&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||me.error(n+" was not called"),o[0]},t.dataTypes[0]="json",r=e[n],e[n]=function(){o=arguments},s.always(function(){void 0===r?me(e).removeProp(n):e[n]=r,t[n]&&(t.jsonpCallback=i.jsonpCallback,jt.push(n)),o&&me.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),pe.createHTMLDocument=function(){var e=ie.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),me.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var s,n,r;return t||(pe.createHTMLDocument?(t=ie.implementation.createHTMLDocument(""),s=t.createElement("base"),s.href=ie.location.href,t.head.appendChild(s)):t=ie),n=ye.exec(e),r=!i&&[],n?[t.createElement(n[1])]:(n=y([e],t,r),r&&r.length&&me(r).remove(),me.merge([],n.childNodes))},me.fn.load=function(e,t,i){var s,n,r,o=this,l=e.indexOf(" ");return l>-1&&(s=G(e.slice(l)),e=e.slice(0,l)),me.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),o.length>0&&me.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){r=arguments,o.html(s?me("<div>").append(me.parseHTML(e)).find(s):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},me.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){me.fn[t]=function(e){return this.on(t,e)}}),me.expr.pseudos.animated=function(e){return me.grep(me.timers,function(t){return e===t.elem}).length},me.offset={setOffset:function(e,t,i){var s,n,r,o,l,a,d,h=me.css(e,"position"),c=me(e),u={};"static"===h&&(e.style.position="relative"),l=c.offset(),r=me.css(e,"top"),a=me.css(e,"left"),d=("absolute"===h||"fixed"===h)&&(r+a).indexOf("auto")>-1,d?(s=c.position(),o=s.top,n=s.left):(o=parseFloat(r)||0,n=parseFloat(a)||0),me.isFunction(t)&&(t=t.call(e,i,me.extend({},l))),null!=t.top&&(u.top=t.top-l.top+o),null!=t.left&&(u.left=t.left-l.left+n),"using"in t?t.using.call(e,u):c.css(u)}},me.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){me.offset.setOffset(this,e,t)});var t,i,s,n,r=this[0];if(r)return r.getClientRects().length?(s=r.getBoundingClientRect(),t=r.ownerDocument,i=t.documentElement,n=t.defaultView,{top:s.top+n.pageYOffset-i.clientTop,left:s.left+n.pageXOffset-i.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var e,t,i=this[0],s={top:0,left:0};return"fixed"===me.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n(e[0],"html")||(s=e.offset()),s={top:s.top+me.css(e[0],"borderTopWidth",!0),left:s.left+me.css(e[0],"borderLeftWidth",!0)}),{top:t.top-s.top-me.css(i,"marginTop",!0),left:t.left-s.left-me.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===me.css(e,"position");)e=e.offsetParent;return e||$e})}}),me.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;me.fn[e]=function(s){return Oe(this,function(e,s,n){var r;if(me.isWindow(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[t]:e[s];r?r.scrollTo(i?r.pageXOffset:n,i?n:r.pageYOffset):e[s]=n},e,s,arguments.length)}}),me.each(["top","left"],function(e,t){me.cssHooks[t]=j(pe.pixelPosition,function(e,i){if(i)return i=M(e,t),tt.test(i)?me(e).position()[t]+"px":i})}),me.each({Height:"height",Width:"width"},function(e,t){me.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,s){me.fn[s]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),l=i||(n===!0||r===!0?"margin":"border");return Oe(this,function(t,i,n){var r;return me.isWindow(t)?0===s.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?me.css(t,i,l):me.style(t,i,n,l)},t,o?n:void 0,o)}})}),me.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),me.holdReady=function(e){e?me.readyWait++:me.ready(!0)},me.isArray=Array.isArray,me.parseJSON=JSON.parse,me.nodeName=n,"function"==typeof define&&define.amd&&define("jquery",[],function(){return me});var Ft=e.jQuery,At=e.$;return me.noConflict=function(t){return e.$===me&&(e.$=At),t&&e.jQuery===me&&(e.jQuery=Ft),me},t||(e.jQuery=e.$=me),me}),define("aurelia-templating-resources/aurelia-templating-resources",["exports","aurelia-pal","./compose","./if","./with","./repeat","./show","./hide","./sanitize-html","./replaceable","./focus","aurelia-templating","./css-resource","./html-sanitizer","./attr-binding-behavior","./binding-mode-behaviors","./throttle-binding-behavior","./debounce-binding-behavior","./self-binding-behavior","./signal-binding-behavior","./binding-signaler","./update-trigger-binding-behavior","./abstract-repeater","./repeat-strategy-locator","./html-resource-plugin","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy","./repeat-utilities","./analyze-view-factory","./aurelia-hide-style"],function(e,t,i,s,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T,k,D,I,O,R,P,M){"use strict";function j(e){(0,M.injectAureliaHideStyleAtHead)(),e.globalResources(t.PLATFORM.moduleName("./compose"),t.PLATFORM.moduleName("./if"),t.PLATFORM.moduleName("./with"),t.PLATFORM.moduleName("./repeat"),t.PLATFORM.moduleName("./show"),t.PLATFORM.moduleName("./hide"),t.PLATFORM.moduleName("./replaceable"),t.PLATFORM.moduleName("./sanitize-html"),t.PLATFORM.moduleName("./focus"),t.PLATFORM.moduleName("./binding-mode-behaviors"),t.PLATFORM.moduleName("./self-binding-behavior"),t.PLATFORM.moduleName("./throttle-binding-behavior"),t.PLATFORM.moduleName("./debounce-binding-behavior"),t.PLATFORM.moduleName("./signal-binding-behavior"),t.PLATFORM.moduleName("./update-trigger-binding-behavior"),t.PLATFORM.moduleName("./attr-binding-behavior")),(0,S.configure)(e),e.container.get(c.ViewEngine).addResourcePlugin(".css",{fetch:function(e){var t;return t={},t[e]=(0,u._createCSSResource)(e),t}})}Object.defineProperty(e,"__esModule",{value:!0}),e.viewsRequireLifecycle=e.unwrapExpression=e.updateOneTimeBinding=e.isOneTime=e.getItemsSourceExpression=e.updateOverrideContext=e.createFullOverrideContext=e.NumberRepeatStrategy=e.SetRepeatStrategy=e.MapRepeatStrategy=e.ArrayRepeatStrategy=e.NullRepeatStrategy=e.RepeatStrategyLocator=e.AbstractRepeater=e.UpdateTriggerBindingBehavior=e.BindingSignaler=e.SignalBindingBehavior=e.SelfBindingBehavior=e.DebounceBindingBehavior=e.ThrottleBindingBehavior=e.TwoWayBindingBehavior=e.OneWayBindingBehavior=e.OneTimeBindingBehavior=e.AttrBindingBehavior=e.configure=e.Focus=e.Replaceable=e.SanitizeHTMLValueConverter=e.HTMLSanitizer=e.Hide=e.Show=e.Repeat=e.With=e.If=e.Compose=void 0,e.Compose=i.Compose,e.If=s.If,e.With=n.With,e.Repeat=r.Repeat,e.Show=o.Show,e.Hide=l.Hide,e.HTMLSanitizer=p.HTMLSanitizer,e.SanitizeHTMLValueConverter=a.SanitizeHTMLValueConverter,e.Replaceable=d.Replaceable,e.Focus=h.Focus,e.configure=j,e.AttrBindingBehavior=m.AttrBindingBehavior,e.OneTimeBindingBehavior=g.OneTimeBindingBehavior,e.OneWayBindingBehavior=g.OneWayBindingBehavior,e.TwoWayBindingBehavior=g.TwoWayBindingBehavior,e.ThrottleBindingBehavior=f.ThrottleBindingBehavior,e.DebounceBindingBehavior=_.DebounceBindingBehavior,e.SelfBindingBehavior=v.SelfBindingBehavior,e.SignalBindingBehavior=b.SignalBindingBehavior,e.BindingSignaler=y.BindingSignaler,e.UpdateTriggerBindingBehavior=w.UpdateTriggerBindingBehavior,e.AbstractRepeater=C.AbstractRepeater,e.RepeatStrategyLocator=x.RepeatStrategyLocator,e.NullRepeatStrategy=T.NullRepeatStrategy,e.ArrayRepeatStrategy=k.ArrayRepeatStrategy,e.MapRepeatStrategy=D.MapRepeatStrategy,e.SetRepeatStrategy=I.SetRepeatStrategy,e.NumberRepeatStrategy=O.NumberRepeatStrategy,e.createFullOverrideContext=R.createFullOverrideContext,e.updateOverrideContext=R.updateOverrideContext,e.getItemsSourceExpression=R.getItemsSourceExpression,e.isOneTime=R.isOneTime,e.updateOneTimeBinding=R.updateOneTimeBinding,e.unwrapExpression=R.unwrapExpression,e.viewsRequireLifecycle=P.viewsRequireLifecycle}),define("aurelia-templating-resources",["aurelia-templating-resources/aurelia-templating-resources"],function(e){return e}),define("aurelia-templating-router/aurelia-templating-router",["exports","aurelia-pal","aurelia-router","./route-loader","./router-view","./route-href"],function(e,t,i,s,n,r){"use strict";function o(e){e.singleton(i.RouteLoader,s.TemplatingRouteLoader).singleton(i.Router,i.AppRouter).globalResources(t.PLATFORM.moduleName("./router-view"),t.PLATFORM.moduleName("./route-href")),e.container.registerAlias(i.Router,i.AppRouter)}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=e.RouteHref=e.RouterView=e.TemplatingRouteLoader=void 0,e.TemplatingRouteLoader=s.TemplatingRouteLoader,e.RouterView=n.RouterView,e.RouteHref=r.RouteHref,e.configure=o}),define("aurelia-templating-router",["aurelia-templating-router/aurelia-templating-router"],function(e){return e}),define("aurelia-syncfusion-bridge/index",["exports","./config-builder"],function(e,t){"use strict";function i(e,i){var s=new t.EjConfigBuilder;void 0!==i&&"function"==typeof i&&i(s);var n=s.resources;s.useGlobalResources&&e.globalResources(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=i}),define("aurelia-syncfusion-bridge",["aurelia-syncfusion-bridge/index"],function(e){return e}),define("aurelia-syncfusion-bridge/config-builder",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.EjConfigBuilder=function(){function e(){t(this,e),this.resources=[],this.useGlobalResources=!0}return e.prototype.useAll=function(){return this.ejGrid().ejChart().ejSunburstChart().ejMap().ejTreeMap().ejRangeNavigator().ejDiagram().ejHeatMap().ejHeatMapLegend().ejSparkline().ejSymbolPalette().ejOverview().ejPager().ejBulletGraph().ejCircularGauge().ejLinearGauge().ejDigitalGauge().ejSplitter().ejDatePicker().ejGantt().ejTreeGrid().ejColorPicker().ejDialog().ejScroller().ejBarcode().ejPdfViewer().ejNumericTextbox().ejCurrencyTextbox().ejPercentageTextbox().ejTimePicker().ejToolbar().ejMenu().ejMaskEdit().ejTreeView().ejKanban().ejRibbon().ejSpreadsheet().ejRating().ejListBox().ejListView().ejNavigationDrawer().ejRotator().ejRTE().ejDropDownList().ejAutocomplete().ejRadialMenu().ejRadialSlider().ejTile().ejAccordion().ejTab().ejCheckBox().ejRadioButton().ejToggleButton().ejSplitButton().ejGroupButton().ejDateTimePicker().ejProgressBar().ejTagCloud().ejButton().ejSlider().ejFileExplorer().ejPivotGrid().ejPivotChart().ejPivotGauge().ejPivotSchemaDesigner().ejPivotTreeMap().ejWaitingPopup().ejReportViewer().ejSchedule().ejUploadbox().ejSignature().ejTooltip().ejTemplate(),this},e.prototype.withoutGlobalResources=function(){return this.useGlobalResources=!1,this},e.prototype.ejGrid=function(){return this.resources.push("./grid/grid"),this.resources.push("./grid/column"),this},e.prototype.ejChart=function(){return this.resources.push("./chart/chart"),this.resources.push("./chart/series"),this},e.prototype.ejSunburstChart=function(){return this.resources.push("./sunburstchart/sunburstchart"),this.resources.push("./sunburstchart/sunburstlevels"),this},e.prototype.ejMap=function(){return this.resources.push("./map/map"),this.resources.push("./map/layer"),this},e.prototype.ejTreeMap=function(){return this.resources.push("./treemap/treemap"),this.resources.push("./treemap/level"),this},e.prototype.ejRangeNavigator=function(){return this.resources.push("./rangenavigator/rangenavigator"),this.resources.push("./rangenavigator/rangeseries"),this},e.prototype.ejDiagram=function(){return this.resources.push("./diagram/diagram"),this},e.prototype.ejHeatMap=function(){return this.resources.push("./heatmap/heatmap"),this},e.prototype.ejHeatMapLegend=function(){return this.resources.push("./heatmaplegend/heatmaplegend"),this},e.prototype.ejSparkline=function(){return this.resources.push("./sparkline/sparkline"),this},e.prototype.ejSymbolPalette=function(){return this.resources.push("./symbolpalette/symbolpalette"),this},e.prototype.ejOverview=function(){return this.resources.push("./overview/overview"),this},e.prototype.ejPager=function(){return this.resources.push("./pager/pager"),this},e.prototype.ejBulletGraph=function(){return this.resources.push("./bulletgraph/bulletgraph"),this.resources.push("./bulletgraph/qualitativerange"),this},e.prototype.ejCircularGauge=function(){return this.resources.push("./circulargauge/circulargauge"),this},e.prototype.ejLinearGauge=function(){return this.resources.push("./lineargauge/lineargauge"),this},e.prototype.ejDigitalGauge=function(){return this.resources.push("./digitalgauge/digitalgauge"),this},e.prototype.ejSplitter=function(){return this.resources.push("./splitter/splitter"),this},e.prototype.ejDatePicker=function(){return this.resources.push("./datepicker/datepicker"),this},e.prototype.ejGantt=function(){return this.resources.push("./gantt/gantt"),this},e.prototype.ejTreeGrid=function(){return this.resources.push("./treegrid/treegrid"),this.resources.push("./treegrid/treegridcolumn"),this},e.prototype.ejColorPicker=function(){return this.resources.push("./colorpicker/colorpicker"),this},e.prototype.ejDialog=function(){return this.resources.push("./dialog/dialog"),this},e.prototype.ejScroller=function(){return this.resources.push("./scroller/scroller"),this},e.prototype.ejBarcode=function(){return this.resources.push("./barcode/barcode"),this},e.prototype.ejPdfViewer=function(){return this.resources.push("./pdfviewer/pdfviewer"),this},e.prototype.ejNumericTextbox=function(){return this.resources.push("./numerictextbox/numerictextbox"),this},e.prototype.ejCurrencyTextbox=function(){return this.resources.push("./currencytextbox/currencytextbox"),this},e.prototype.ejPercentageTextbox=function(){return this.resources.push("./percentagetextbox/percentagetextbox"),this},e.prototype.ejTimePicker=function(){return this.resources.push("./timepicker/timepicker"),this},e.prototype.ejToolbar=function(){return this.resources.push("./toolbar/toolbar"),this},e.prototype.ejMenu=function(){return this.resources.push("./menu/menu"),this},e.prototype.ejMaskEdit=function(){return this.resources.push("./maskedit/maskedit"),this},e.prototype.ejTreeView=function(){return this.resources.push("./treeview/treeview"),this},e.prototype.ejKanban=function(){return this.resources.push("./kanban/kanban"),this.resources.push("./kanban/kanbancolumn"),this},e.prototype.ejRibbon=function(){return this.resources.push("./ribbon/ribbon"),this},e.prototype.ejSpreadsheet=function(){return this.resources.push("./spreadsheet/spreadsheet"),this.resources.push("./spreadsheet/sheet"),this},e.prototype.ejRating=function(){return this.resources.push("./rating/rating"),this},e.prototype.ejListBox=function(){return this.resources.push("./listbox/listbox"),this},e.prototype.ejListView=function(){return this.resources.push("./listview/listview"),this},e.prototype.ejNavigationDrawer=function(){return this.resources.push("./navigationdrawer/navigationdrawer"),this},e.prototype.ejRotator=function(){return this.resources.push("./rotator/rotator"),this},e.prototype.ejRTE=function(){return this.resources.push("./rte/rte"),this},e.prototype.ejDropDownList=function(){return this.resources.push("./dropdownlist/dropdownlist"),this},e.prototype.ejAutocomplete=function(){return this.resources.push("./autocomplete/autocomplete"),this},e.prototype.ejRadialMenu=function(){return this.resources.push("./radialmenu/radialmenu"),this.resources.push("./radialmenu/item"),this},e.prototype.ejRadialSlider=function(){return this.resources.push("./radialslider/radialslider"),this},e.prototype.ejTile=function(){return this.resources.push("./tile/tile"),this},e.prototype.ejAccordion=function(){return this.resources.push("./accordion/accordion"),this},e.prototype.ejTab=function(){return this.resources.push("./tab/tab"),this},e.prototype.ejCheckBox=function(){return this.resources.push("./checkbox/checkbox"),this},e.prototype.ejRadioButton=function(){return this.resources.push("./radiobutton/radiobutton"),this},e.prototype.ejToggleButton=function(){return this.resources.push("./togglebutton/togglebutton"),this},e.prototype.ejSplitButton=function(){return this.resources.push("./splitbutton/splitbutton"),this},e.prototype.ejGroupButton=function(){return this.resources.push("./groupbutton/groupbutton"),this},e.prototype.ejDateTimePicker=function(){return this.resources.push("./datetimepicker/datetimepicker"),this},e.prototype.ejProgressBar=function(){return this.resources.push("./progressbar/progressbar"),this},e.prototype.ejTagCloud=function(){return this.resources.push("./tagcloud/tagcloud"),this},e.prototype.ejButton=function(){return this.resources.push("./button/button"),this},e.prototype.ejSlider=function(){return this.resources.push("./slider/slider"),this},e.prototype.ejFileExplorer=function(){return this.resources.push("./fileexplorer/fileexplorer"),this},e.prototype.ejPivotGrid=function(){return this.resources.push("./pivotgrid/pivotgrid"),this},e.prototype.ejPivotChart=function(){return this.resources.push("./pivotchart/pivotchart"),this},e.prototype.ejPivotGauge=function(){return this.resources.push("./pivotgauge/pivotgauge"),this},e.prototype.ejPivotSchemaDesigner=function(){return this.resources.push("./pivotschemadesigner/pivotschemadesigner"),this},e.prototype.ejPivotTreeMap=function(){return this.resources.push("./pivottreemap/pivottreemap"),this},e.prototype.ejWaitingPopup=function(){return this.resources.push("./waitingpopup/waitingpopup"),this},e.prototype.ejReportViewer=function(){return this.resources.push("./reportviewer/reportviewer"),this},e.prototype.ejSchedule=function(){return this.resources.push("./schedule/schedule"),this.resources.push("./schedule/scheduleresource"),this},e.prototype.ejUploadbox=function(){return this.resources.push("./uploadbox/uploadbox"),this},e.prototype.ejSignature=function(){return this.resources.push("./signature/signature"),this},e.prototype.ejTooltip=function(){return this.resources.push("./tooltip/tooltip"),this},e.prototype.ejTemplate=function(){return this.resources.push("./common/template"),this},e}()}),define("aurelia-syncfusion-bridge/common/widget-base",["exports","./events","../common/util","../common/decorators"],function(e,t,i,s){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.WidgetBase=void 0;var r,o,l={};e.WidgetBase=(r=(0,s.delayed)(),o=function(){function e(){n(this,e)}return e.prototype.createWidget=function(e){var t=this;this.allOption=this.getWidgetOptions(e.element),this.ejOptions||this.isEditor||this.createTwoWays(),this.eWidget=this.widget=jQuery($(e.element))[this.controlName](this.allOption).data(this.controlName),this.templateProcessor&&this.templateProcessor.initWidgetDependancies(),this.isEditor&&(this.widget.model._change=function(e){"eValue"in t&&(t[t.util.getBindablePropertyName("value")]=e.value)})},e.prototype.createTwoWays=function(){for(var e=this.allOption,t=this.twoWays,i=t.length,s=0;s<i;s++){var n=t[s];ej.createObject(n,this.addTwoways(n),e)}},e.prototype.addTwoways=function(e){var t=this,i=l;return function(s,n){if(i===l){var r=t.util.getBindablePropertyName(e);return i=t[r],void 0===i&&(i=this.defaults[e]),i}if(void 0===s)return i;if(i===s)return null;if(i=s,!n&&t.util.hasValue(s)){var o=t.util.getBindablePropertyName(e);t[o]=s}return null}},e.prototype.getWidgetOptions=function(e){var i=void 0;i=this.ejOptions?this.ejOptions:this.util.getOptions(this,this.controlProperties);var s=(0,t.getEventOption)(e);return this.hasChildProperty&&this.getChildProperties(i),Object.assign({},i,s)},e.prototype.getChildProperties=function(e){var t=this.childPropertyName,i=this[t],s=i.length;if(s){e[t]=[];for(var n=i[0].controlProperties,r=0;r<s;r++)e[t].push(this.util.getOptions(i[r],n))}},e.prototype.attached=function(){this.templateProcessor&&this[this.childPropertyName].forEach(function(e){return e.setTemplates()}),this.util=new i.Util,this.createWidget({element:this.element})},e.prototype.propertyChanged=function(e,t,i){if(this.widget){var s=void 0,n=this.util.getControlPropertyName(this,e);if(n){if("widget"===n)return;if("options"!==n){s=this.widget.model[n];var r="function"==typeof s;r&&(s=s()),s!==t&&(r&&(t=this.addTwoways(n)),this.widget.option(n,t))}else this.widget.option(t)}}},e.prototype.detached=function(){this.templateProcessor&&this.templateProcessor.clearTempalte(),this.widget&&this.widget.destroy()},e}(),function(e,t,i,s,n){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}(o.prototype,"attached",[r],Object.getOwnPropertyDescriptor(o.prototype,"attached"),o.prototype),o)}),define("aurelia-syncfusion-bridge/common/events",["exports","./util","aurelia-dependency-injection","./constants"],function(e,t,i,s){"use strict";function n(e){for(var n=void 0,o=void 0,l=e.attributes,a={},d=i.Container.instance||new i.Container,h=d.get(t.Util),c=0,u=l.length;c<u;c++){(function(t,i){if(o=l[t],n=o.name,!n.startsWith(s.constants.eventPrefix))return"continue";var d=n.split(".")[0],c=h._unhyphenate(d.split(s.constants.eventPrefix)[1]);a[c]=function(t){return r(e,d,t)}})(c)}return a}function r(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=new CustomEvent(t,{detail:i,bubbles:!0});return e.dispatchEvent(s),s}Object.defineProperty(e,"__esModule",{value:!0}),e.getEventOption=n,e.fireEvent=r}),define("aurelia-syncfusion-bridge/common/util",["exports","./constants"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;e.Util=function(){function e(){i(this,e)}return e.prototype.getBindablePropertyName=function(e){var i=""+t.constants.bindablePrefix+e;return this._unhyphenate(i)},e.prototype._unhyphenate=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},e.prototype.getOptions=function(e,t){for(var i={},s=void 0,n=t,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var l;if(r){if(o>=n.length)break;l=n[o++]}else{if(o=n.next(),o.done)break;l=o.value}var a=l;s=e.abbrevProperties&&a in e.abbrevProperties?e[this.getBindablePropertyName(e.abbrevProperties[a])]:e[this.getBindablePropertyName(a)],this.hasValue(s)&&("string"==typeof s&&(s=this.processData(s)),i[a]=s)}return i},e.prototype.getControlPropertyName=function(e,t){for(var i=void 0,s=e.controlProperties,n=Array.isArray(s),r=0,s=n?s:s[Symbol.iterator]();;){var o;if(n){if(r>=s.length)break;o=s[r++]}else{if(r=s.next(),r.done)break;o=r.value}var l=o;if(t===this.getBindablePropertyName(l)){i=l;break}}return i},e.prototype.hasValue=function(e){return void 0!==e&&null!==e},e.prototype.processData=function(e){return"true"===e||"false"!==e&&(+e+""===e?+e:e)},e}()}),define("aurelia-syncfusion-bridge/common/constants",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.constants={eventPrefix:"e-on-",bindablePrefix:"e-",attributePrefix:"ej-",elementPrefix:"ej-",aureliaTemplateString:"<template><slot></slot></template>"}}),define("aurelia-syncfusion-bridge/common/decorators",["exports","aurelia-templating","aurelia-dependency-injection","aurelia-metadata","aurelia-task-queue","aurelia-binding","./util"],function(e,t,i,s,n,r,o){"use strict";function l(e,n,l,a){return function(d,h,c){var u=s.metadata.getOrCreateOwn(s.metadata.resource,t.HtmlBehaviorResource,d),p=i.Container.instance||new i.Container,m=p.get(o.Util);n.push("options"),n.push("widget");var g=n.length;if(d.prototype.controlName=e,d.prototype.twoWays=l||[],d.prototype.abbrevProperties=a||[],g){d.prototype.controlProperties=n;for(var f=0;f<g;f++){var _=n[f];a&&_ in a&&(_=a[_]);var v={name:m.getBindablePropertyName(_)};"widget"===_&&(v.defaultBindingMode=r.bindingMode.twoWay);new t.BindableProperty(v).registerWith(d,u,c)}}}}function a(){return function(e,t,s){var r=(i.Container.instance||new i.Container).get(n.TaskQueue),o=s.value;return s.value=function(){for(var e=this,t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];this.childPropertyName?r.queueTask(function(){return o.apply(e,i)}):o.apply(this,i)},s}}Object.defineProperty(e,"__esModule",{value:!0}),e.generateBindables=l,e.delayed=a}),define("aurelia-syncfusion-bridge/common/common",["exports","aurelia-templating","aurelia-dependency-injection"],function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingEngine=e.children=e.customElement=e.inlineView=e.inject=e.bindable=e.customAttribute=void 0,
e.customAttribute=t.customAttribute,e.bindable=t.bindable,e.inject=i.inject,e.inlineView=t.inlineView,e.customElement=t.customElement,e.children=t.children,e.TemplatingEngine=t.TemplatingEngine}),define("aurelia-syncfusion-bridge/common/template-processor",["exports","aurelia-dependency-injection","../common/util","aurelia-templating"],function(e,t,i,s){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateProcessor=void 0;var r,o;e.TemplateProcessor=(r=(0,t.inject)(s.TemplatingEngine,i.Util))(o=function(){function e(t,s){n(this,e),this.context=t,this.templatingEngine=s,this.util=new i.Util}return e.prototype.initTemplate=function(){var e=this;ej.template.render=function(t,i,s,n){return e.renderStringTemplate(t,i,s,n)}},e.prototype.initWidgetDependancies=function(){this.context.widget.aureliaTemplate&&this.compileTemplate(this.context.widget.element);var e=this.context,t=this.context.widget.element;t.on(this.context.widget.pluginName+"refresh",function(){e.widget.aureliaTemplate&&e.templateProcessor.compileTemplate(t)})},e.prototype.renderStringTemplate=function(e,t,i,s){var n=e.aureliaTemplate;n&&n[t]||(n=n||{},n[t]={key:ej.getGuid("aurtmpl"),itemData:[],views:[]},e.aureliaTemplate=n);var r=n[t];this.util.hasValue(s)?r.itemData[s]=i:r.itemData=[i];var o=$(t).html();return"<div ej-prop='"+s+"' class='"+n[t].key+" ej-aurelia-template'>"+o+"</div>"},e.prototype.compileTemplate=function(e){var t=$(e).find(".ej-aurelia-template"),i=this.context.widget.aureliaTemplate;for(var s in i){var n=t.filter("."+i[s].key);if(n.length)for(var r=0;r<n.length;r++){var o=parseInt($(n[r]).attr("ej-prop")),l=this.templatingEngine.enhance(n[r]);l.bind(i[s].itemData[o]),i[s].views[o]=l}else this.unbindViews(i[s]),delete i[s]}},e.prototype.clearTempalte=function(){var e=this.context.widget.aureliaTemplate;if(e&&Object.keys(e).length)for(var t in e)this.unbindViews(e[t]),delete e[t]},e.prototype.unbindViews=function(e){for(var t=0;t<e.views.length;t++){e.views[t].unbind()}},e}())||o}),define("aurelia-syncfusion-bridge/grid/grid",["exports","../common/widget-base","../common/constants","../common/decorators","../common/common","../common/template-processor","syncfusion-javascript/Scripts/ej/web/ej.grid.min"],function(e,t,i,s,n,r){"use strict";function o(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ejGrid=void 0;var h,c,u,p,m,g,f,_;e.ejGrid=(h=(0,n.customElement)(i.constants.elementPrefix+"grid"),c=(0,n.inlineView)(""+i.constants.aureliaTemplateString),u=(0,s.generateBindables)("ejGrid",["allowCellMerging","allowGrouping","allowKeyboardNavigation","allowFiltering","allowSorting","allowMultiSorting","allowPaging","allowReordering","allowResizeToFit","allowResizing","allowRowDragAndDrop","allowScrolling","allowSearching","allowSelection","allowTextWrap","allowMultipleExporting","commonWidth","gridLines","childGrid","columnLayout","columns","contextMenuSettings","cssClass","dataSource","detailsTemplate","editSettings","enableAltRow","enableAutoSaveOnSelectionChange","enableHeaderHover","enablePersistence","enableResponsiveRow","enableRowHover","enableRTL","enableTouch","enableToolbarItems","exportToExcelAction","exportToPdfAction","exportToWordAction","filterSettings","groupSettings","isResponsive","keySettings","locale","minWidth","pageSettings","query","resizeSettings","rowTemplate","rowDropSettings","searchSettings","selectedRecords","selectedRowIndex","selectedRowIndices","selectionSettings","selectionType","scrollSettings","showColumnChooser","showStackedHeader","showSummary","sortSettings","stackedHeaderRows","summaryRows","textWrapSettings","toolbarSettings"],["dataSource","selectedRowIndices"],{enableRTL:"enableRtl"}),p=(0,n.inject)(Element,n.TemplatingEngine),m=(0,n.children)(i.constants.elementPrefix+"column"),h(g=c(g=u(g=p((f=function(e){function t(i,s){l(this,t);var n=a(this,e.call(this));return o(n,"columns",_,n),n.element=i,n.hasChildProperty=!0,n.childPropertyName="columns",n.templateProcessor=new r.TemplateProcessor(n,s),n.templateProcessor.initTemplate(),n}return d(t,e),t}(t.WidgetBase),_=function(e,t,i,s,n){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}(f.prototype,"columns",[m],{enumerable:!0,initializer:function(){return[]}}),g=f))||g)||g)||g)||g)}),define("aurelia-syncfusion-bridge/grid/column",["exports","../common/constants","../common/decorators","../common/common","../common/util"],function(e,t,i,s,n){"use strict";function r(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Column=void 0;var l,a,d,h,c,u,p;e.Column=(l=(0,s.inlineView)(""+t.constants.aureliaTemplateString),a=(0,s.customElement)(t.constants.elementPrefix+"column"),d=(0,i.generateBindables)("columns",["clipMode","allowEditing","allowFiltering","allowGrouping","allowSorting","allowResizing","commands","cssClass","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","editParams","editTemplate","editType","enableGroupByFormat","field","filterBarTemplate","filterType","foreignKeyField","foreignKeyValue","format","headerTemplateID","headerText","headerTextAlign","headerTooltip","isFrozen","isIdentity","isPrimaryKey","priority","showInColumnChooser","template","textAlign","tooltip","type","validationRules","visible","width"]),h=(0,s.children)(t.constants.elementPrefix+"template"),l(c=a(c=d((u=function(){function e(){o(this,e),r(this,"template",p,this)}return e.prototype.setTemplates=function(){if(this.template[0]){this[(new n.Util).getBindablePropertyName("template")]=this.template[0].template}},e}(),p=function(e,t,i,s,n){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}(u.prototype,"template",[h],{enumerable:!0,initializer:function(){return[]}}),c=u))||c)||c)||c)}),define("aurelia-syncfusion-bridge/common/template",["exports","aurelia-dependency-injection","aurelia-templating","./constants"],function(e,t,i,s){"use strict";function n(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0;var o,l,a,d,h,c,u;e.Template=(o=(0,i.customElement)(s.constants.elementPrefix+"template"),l=(0,i.noView)(),a=(0,i.processContent)(function(e,t,i,s){var n=i.innerHTML;""!==n&&(s.template=n),i.innerHTML=""}),d=(0,t.inject)(i.TargetInstruction),o(h=l(h=a(h=d((c=function e(t){r(this,e),n(this,"template",u,this),this.template=t.elementInstruction.template},u=function(e,t,i,s,n){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}(c.prototype,"template",[i.bindable],{enumerable:!0,initializer:null}),h=c))||h)||h)||h)||h)}),define("syncfusion-javascript",[],function(){}),define("syncfusion-javascript",[],function(){}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.grid.min",["./../common/ej.globalize.min","jsrender","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.touch.min","./../common/ej.draggable.min","./../common/ej.scroller.min","./ej.button.min","./ej.checkbox.min","./ej.menu.min","./ej.waitingpopup.min","./ej.radiobutton.min","./ej.autocomplete.min","./ej.datepicker.min","./ej.datetimepicker.min","./ej.dropdownlist.min","./ej.dialog.min","./ej.editor.min","./ej.pager.min","./ej.toolbar.min","./ej.excelfilter.min"],e):e()}(function(){(function(e,t,s){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.common={refreshContent:function(e){e&&(this.refreshTemplate(),this.refreshHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFilterBarTemplate();var i={};this._initialRenderings(),i.requestType=t.Grid.Actions.Refresh,this._processBindings(i)},rowHeightRefresh:function(){var i,s,n;if(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.model.currentViewData)&&this.model.currentViewData.length){var r=this.getContentTable().get(0).rows,o=this.getContentTable().get(1).rows,l=0;if(this.getContent().find(".e-frozencontentdiv").is(":visible"))for(i=0;i<r.length;i++)"none"!=e(r[i]).css("display")&&(l=t.max([r[i].getClientRects()[0].height,o[i].getClientRects()[0].height]),e(r[i]).height(l),e(o[i]).height(l),i&&(i==this.model.scrollSettings.frozenRows-1||i==r.length-1)&&(l+=1),this.model.allowTextWrap||i&&i!=this.model.scrollSettings.frozenRows-1||(l-=1),this.model.isEdit&&e(r[i]).find("#"+this._id+"EditForm").length&&i&&e(r[i]).find("#"+this._id+"EditForm td").css("height",l),e(o[i]).find("#"+this._id+"EditForm td").css("height",l));if(this.model.showSummary&&this.model.summaryRows.length>0){var a=this.getFooterTable().get(0).rows,d=this.getFooterTable().get(1).rows,h=0;for(s=0;s<a.length;s++)h=t.max([a[s].getClientRects()[0].height,d[s].getClientRects()[0].height]),e(a[s]).height(h),e(d[s]).height(h)}this._getRowHeights(),!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&(null!=this.getScrollObject()._vScrollbar||this.getScrollObject().isVScroll())&&(n=this.getScrollObject()._vScrollbar,(t.isNullOrUndefined(n)||n.value()!=n.model.maximum)&&this._scrollObject.refresh(this.model.scrollSettings.frozenColumns>0))}},dataSource:function(e,t){t&&(this._templateRefresh=!0),this._dataSource(e),this.model.scrollSettings.enableVirtualization||(e.length>0?this._currentPage(1):this._currentPage(0)),this._updateDataSource=!0,this._refreshDataSource(e,t);var i=this._refreshVirtualPagerInfo();(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling)&&this._showPagerInformation(i),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData?this._refreshVirtualView():this._refreshVirtualContent(),this.getContent().ejScroller("isHScroll")&&this.getContent().ejScroller("scrollX",0,!0),this.getContent().ejScroller("isVScroll")?(this.model.scrollSettings.enableVirtualization||this.getContent().ejScroller("scrollY",0,!0),this.element.find(".e-gridheader").addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss")),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow(),this._trigger("dataBound",{})},_refreshDataSource:function(e,i){this._dataManager=e instanceof t.DataManager?e:t.DataManager(e),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataManager.dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._virtualDataRefresh=!0,this._isLocalData&&this._refreshVirtualViewDetails(!0)),this.refreshContent(!!t.isNullOrUndefined(i)||i),t.isNullOrUndefined(this.getPager())||(this.getPager().ejPager("model.currentPage",1),this._refreshGridPager())},hideColumns:function(i){var s,n,r,o,l,a,d,h=0,c={},u=[],p=0;"string"==typeof i?this.getColumnByHeaderText(i):this.getColumnByHeaderText(i[0]),n="string"==typeof i?this.getColumnByField(i):this.getColumnByField(i[0]),this._showHideColumns=!0;var m=this._isDuplicate(e.merge(e.merge([],this._visibleColumns),this._hiddenColumns)),g=m?"_hiddenColumnsField":"_hiddenColumns",f=m?"_visibleColumnsField":"_visibleColumns";if(!m&&null!=n)if(e.isArray(i))for(r=0;r<i.length;r++)o=this.getColumnByField(i[r]),i[r]=null!=o?o.headerText:i[r];else i=n.headerText;if(e.isArray(i))for(r=0;r<i.length;r++)s=e.inArray(i[r],this[f]),s!=-1?(this[g].push(i[r]),this[f].splice(s,1)):s==-1&&"_visibleColumnsField"==f&&e.inArray(i[r],this[g])==-1&&t.isNullOrUndefined(this.getColumnByField(i[r]))&&(this[g].push(this.getColumnByHeaderText(i[r]).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(i[r]).field),this[f].splice(e.inArray(this.getColumnByHeaderText(i[r]).field,this[f]),1)&&this._visibleColumns.splice(e.inArray(i[r],this._visibleColumns),1));else s=e.inArray(i,this[f]),s!=-1?(this[g].push(i),this[f].splice(s,1)):s==-1&&"_visibleColumnsField"==f&&e.inArray(i,this[g])==-1&&t.isNullOrUndefined(this.getColumnByField(i))&&(this[g].push(this.getColumnByHeaderText(i).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(i).field),this[f].splice(e.inArray(this.getColumnByHeaderText(i).field,this[f]),1)&&this._visibleColumns.splice(e.inArray(i,this._visibleColumns),1));for(r=0;r<this.model.columns.length&&(l=m?"field":"headerText",e.inArray(t.isNullOrUndefined(this.model.columns[r][l])||""==this.model.columns[r][l]?this.model.columns[r].headerText:this.model.columns[r][l],this[g])!=-1&&(this.model.columns[r].visible&&u.push(this.model.columns[r]),this.model.columns[r].visible=!1,this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&this.model.columns.indexOf(this.model.columns[r])<this.model.scrollSettings.frozenColumns&&p++,h++),this[g].length!=h);r++);c.requestType="refresh",this._hideHeaderColumn(this[g],m),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(a=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(a[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&(0!=this.model.scrollSettings.frozenColumns||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||(d=this._calculateWidth(),this.getHeaderTable().width(d),this.getContentTable().width(d)),t.isNullOrUndefined(this._scrollObject)||this.getScrollObject().refresh()),this.model.showColumnChooser&&this._refreshColumnChooserList(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(p==this.model.scrollSettings.frozenColumns&&this._frozenPaneRefresh(),this.getScrollObject().refresh()),this._showHideColumns=!1},showColumns:function(i){var s,n,r,o,l,a,d,h=0,c={},u=[];"string"==typeof i?this.getColumnByHeaderText(i):this.getColumnByHeaderText(i[0]),s="string"==typeof i?this.getColumnByField(i):this.getColumnByField(i[0]),this._showHideColumns=!0;var p=this._isDuplicate(e.merge(e.merge([],this._visibleColumns),this._hiddenColumns)),m=p?"_hiddenColumnsField":"_hiddenColumns",g=p?"_visibleColumnsField":"_visibleColumns";if(!p&&null!=s)if(e.isArray(i))for(a=0;a<i.length;a++)n=this.getColumnByField(i[a]),i[a]=null!=n?n.headerText:i[a];else i=s.headerText;if(e.isArray(i))for(a=0;a<i.length;a++)l=e.inArray(i[a],this[m]),l!=-1?(this[m].splice(l,1),this[g].push(i[a])):l==-1&&"_hiddenColumnsField"==m&&e.inArray(i[a],this[g])==-1&&t.isNullOrUndefined(this.getColumnByField(i[a]))&&(this[g].push(this.getColumnByHeaderText(i[a]).field)&&this._visibleColumns.push(i[a]),this[m].splice(e.inArray(this.getColumnByHeaderText(i[a]).field,this[m]),1)&&this._hiddenColumns.splice(e.inArray(i[a],this._hiddenColumns),1));else l=e.inArray(i,this[m]),l!=-1?(this[m].splice(l,1),this[g].push(i)):l==-1&&"_hiddenColumnsField"==m&&e.inArray(i,this[g])==-1&&t.isNullOrUndefined(this.getColumnByField(i))&&(this[g].push(this.getColumnByHeaderText(i).field)&&this._visibleColumns.push(i),this[m].splice(e.inArray(this.getColumnByHeaderText(i).field,this[m]),1)&&this._hiddenColumns.splice(e.inArray(i,this._hiddenColumns),1));for(a=0;a<this.model.columns.length&&(r=p?"field":"headerText",e.inArray(t.isNullOrUndefined(this.model.columns[a][r])||""==this.model.columns[a][r]?this.model.columns[a].headerText:this.model.columns[a][r],this[g])!=-1&&(this.model.columns[a].visible||u.push(this.model.columns[a]),this.model.columns[a].visible=!0,h++),this[g].length!=h);a++);if(this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0){for(o=!1,a=0;a<u.length;a++)(l=this.model.columns.indexOf(u[a]))<this.model.scrollSettings.frozenColumns&&(o=!0);if(o){for(a=0;a<this.model.columns.length;a++)e.inArray(this.model.columns[a].headerText,this._hiddenColumns)!=-1?this.model.columns[a].visible=!1:e.inArray(this.model.columns[a].headerText,this._visibleColumns)!=-1&&(this.model.columns[a].visible=!0);d=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(d[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()}}c.requestType="refresh",this._showHeaderColumn(this[g],p),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&!t.isNullOrUndefined(this._scrollObject)&&this.getScrollObject().refresh(),this.model.showColumnChooser&&this._refreshColumnChooserList(),this._showHideColumns=!1},_virtualShowHide:function(e){this._currentPage(1),this.model.query=this.commonQuery.clone(),this._ensureDataSource(e),this._loadedJsonData=[],this._prevPage=this._currentPage()},resizeColumns:function(e,t){var i,s;if(e instanceof Array)for(i=0;i<e.length;i++)s=t instanceof Array?t[i]:t,this._setWidthColumnCollection(e[i],s);else this._setWidthColumnCollection(e,t);this.setWidthToColumns(),this.model.scrollSettings.frozenColumns&&(this._frozenAlign(),this.rowHeightRefresh())},_setWidthColumnCollection:function(t,i){var s=this.getColumnByHeaderText(t)||this.getColumnByField(t);s.width=i,e.inArray(s.field,this._disabledResizingColumns)==-1&&(this.columnsWidthCollection[e.inArray(s,this.model.columns)]=i)},refreshTemplate:function(){this.addInitTemplate(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.model.allowGrouping&&this.addGroupingTemplate()},refreshHeader:function(){var e=this.element.find(".e-gridheader");this.element[0].replaceChild(this._renderGridHeader()[0],e[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowGrouping&&this._headerCellgDragDrop(),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.showColumnChooser&&this._renderColumnChooserData(!0),"both"!=this.model.gridLines&&this._showHeaderGridLines()},set_dropColumn:function(i,n){var r,o,l,a,d,h,c,u,p,m,g,f,_,v,b;if(this.model.allowReordering&&i!=n){this.model.columns.splice(n,0,this.model.columns.splice(i,1)[0]);var y=this.model.columns,w=this.getHeaderTable().find(".e-columnheader:last .e-headercell").not(".e-stackedHeaderCell"),C=w.find(".e-headercelldiv");this.model.scrollSettings.frozenColumns||this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),r=function(t){var i,n,r,o=[];if(t!=s){["",s].indexOf(t.value)==-1&&(o.push({name:"value",value:t.value}),t.value="");for(var l=0,a=t.attributes,d=a.length;l<d;l++)i=/^jQuery[0-9]+$/,a[l].name.match(i)||o.push({name:a[l].name,value:a[l].value});for(n=0,r=o.length;n<r;n++)e(t).removeAttr(o[n].name);return o}},o=function(t,i){if(i!=s)for(var n=0,r=t.length;n<r;n++)"value"==t[n].name&&(i.value=t[n].value),e(i).attr(t[n].name,t[n].value)},0==this.getHeaderTable().find(".e-fltrtempdiv").length&&this.getHeaderTable().find(".e-filterdiv").length>0&&(l=this.getHeaderTable().find(".e-filterdiv input"));var x=t.isNullOrUndefined(l),S={cellattributes:[],headerattributes:[],filtercellattributes:[],filterThattributes:[]},T=i<n?i:n,k=i<n?n:i;for(_=T,v=0;_<=k;_++)a=null!=this.model.detailsTemplate||null!=this.model.childGrid?_+1:_,S.headerattributes[v]=r(w[a]),S.cellattributes[v]=r(C[_]),S.filtercellattributes[v]=x?[]:r(l[_]),S.filterThattributes[v]=x?[]:r(e(l[_]).closest("th")[0]),v++;d=i<n?S.cellattributes.length-1:0,h=i<n?0:S.cellattributes.length-1;for(c in S)S[c].splice(d,0,S[c].splice(h,1)[0]);for(_=T,v=0;_<=k;_++)u=null!=this.model.detailsTemplate||null!=this.model.childGrid?_+1:_,o(S.headerattributes[v],w[u]),o(S.cellattributes[v],C[_]),x||o(S.filtercellattributes[v],l[_]),x||o(S.filterThattributes[v],e(l[_]).closest("th")[0]),v++;if(this.model.allowFiltering&&["menu","excel"].indexOf(this.model.filterSettings.filterType)!=-1){for(this._$fDlgIsOpen&&this._closeFDialog(),p=this.model.columns,w.find(".e-filtericon").remove(),_=0;_<p.length;_++)(p[_].allowFiltering||t.isNullOrUndefined(p[_].allowFiltering))&&(m=w.find(".e-headercelldiv[ej-mappingname="+p[_].field+"]").closest(".e-headercell"),m.append(t.buildTag("div.e-filtericon e-icon e-filterset")));this._refreshFilterIcon()}for(this.columnsWidthCollection.splice(n,0,this.columnsWidthCollection.splice(i,1)[0]),this._fieldColumnNames=this._headerColumnNames=[],f=0;f<y.length;f++)this._fieldColumnNames[y[f].headerText]=y[f].field,this._headerColumnNames[y[f].field]=y[f].headerText,g=e(C[f]),t.isNullOrUndefined(y[f].headerTemplateID)?"checkbox"==y[f].type?g.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"):y[f].disableHtmlEncode?g.text(y[f].headerText):g.html(y[f].headerText):g.html(e(y[f].headerTemplateID).html()),this.model.groupSettings.showToggleButton&&(t.isNullOrUndefined(y[f].allowGrouping)||y[f].allowGrouping)&&(e.inArray(y[f].field,this.model.groupSettings.groupedColumns)!=-1?g.append(this._getToggleButton().addClass("e-toggleungroup")):g.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.allowGrouping&&1!=this.model.allowSorting)for(_=0;_<this.model.sortSettings.sortedColumns.length;_++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[_].field,this.model.sortSettings.sortedColumns[_].direction);if(this.model.allowSorting)for(_=0;_<this.model.sortSettings.sortedColumns.length;_++){var D=1,I=this.model.sortSettings.sortedColumns[_],O=this.getsortColumnByField(I.field),R=this.getColumnIndexByField(I.field),P=e.inArray(O,this.model.sortSettings.sortedColumns);if(imageDirection="descending"!=I.direction?"e-rarrowup-2x":"e-rarrowdown-2x",this.model.allowMultiSorting){for(v=1;v<=P;v++)D+=1;"right"==C.eq(R).css("text-align")?(this.model.sortSettings.sortedColumns.length>1&&C.eq(R).prepend(this._createSortNumber(D,C.eq(R)).addClass("e-sortnumber")),C.eq(R).append(this._createSortElement().addClass("e-"+(I.direction||"ascending")+" "+imageDirection))):(C.eq(R).append(this._createSortElement().addClass("e-"+(I.direction||"ascending")+" "+imageDirection)),this.model.sortSettings.sortedColumns.length>1&&C.eq(R).append(this._createSortNumber(D,C.eq(R)).addClass("e-sortnumber")))}else imageDirection="descending"!=I.direction?"e-rarrowup-2x":"e-rarrowdown-2x",C.eq(R).append(this._createSortElement().addClass("e-"+(I.direction||"ascending")+" "+imageDirection))}this.getHeaderTable().find(".e-fltrtempdiv").length>0&&(this.getHeaderTable().find(".e-filterbar").first().remove(),this._renderFiltering(),this._renderFilterBarTemplate()),b={},b.requestType=t.Grid.Actions.Reorder,this._isReorder=!0,this.refreshTemplate(),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(b),this._isAddNew=!1),this.sendDataRenderingRequest(b),this._isReorder=!1}},getPager:function(){return this._gridPager},getFooterTable:function(){return this._gridFooterTable},setGridFooterTable:function(e){this._gridFooterTable=e},getFooterContent:function(){return this._gridFooterContent},setGridFooterContent:function(e){this._gridFooterContent=e},getScrollObject:function(){return(null==this._scrollObject||t.isNullOrUndefined(this._scrollObject.model))&&(this._scrollObject=this.getContent().ejScroller("instance")),this._scrollObject},setGridPager:function(e){this._gridPager=e},getRowHeight:function(){var i,s,n,r,o=-1;if(null!=this.getContentTable())i=this.getContentTable().find("tr:not(.e-virtualrow)"),s=i.length>2?1:0,i.length&&(n=i[s].getBoundingClientRect()),i.length>1&&(o=n&&n.height?n.height:i[s].offsetHeight);else if(!t.isNullOrUndefined(this.model.rowTemplate)&&!t.isNullOrUndefined(this._dataSource())&&this._dataSource().length>0){var l=document.createElement("div"),a=e.templates(this.model.rowTemplate),d=this._dataSource()[0];l.innerHTML=['<table class="e-template-table">',a.render(d),"</table>"].join(""),e("body").append(l.firstChild),r=e("body").find(".e-template-table").find("tr")[0],o=r.offsetHeight,e("body").find(".e-template-table").remove()}return o==-1?32:o},getCurrentIndex:function(){return(this._currentPage()-1)*this.model.pageSettings.pageSize},getColumnByIndex:function(e){return e<this.model.columns.length?this.model.columns[e]:null},set_currentPageIndex:function(e){var i,s=this.model.pageSettings,n=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;return null==s.totalPages&&(s.totalPages=Math.ceil(n/s.pageSize)),!(e>s.totalPages||e<1||e==this._currentPage())&&(t.isNullOrUndefined(this._prevPageNo)&&(this._prevPageNo=this._currentPage()),this._currentPage(e),this._currentPage()!=this._prevPageNo&&(i={},i.requestType="paging",this.gotoPage(this._currentPage(),i),!0))},set_currentVirtualIndex:function(e){var t,i;return!(e<1||1!=e&&e!=this._totalVirtualViews&&e==this._currentVirtualIndex&&this._checkCurrentVirtualView(this._virtualLoadedRows,e))&&(this._prevVirtualIndex=this._currentVirtualIndex,this._currentVirtualIndex=e,t=this._calculateCurrentViewPage(),t<=this.model.pageSettings.totalPages&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)?this._prevVirtualIndex<e&&1!=e?(i=this._isThumbScroll&&1!=t?t:t+1,!this._virtualPageRecords[i]&&i<=this.model.pageSettings.totalPages?this._setCurrentViewPage(i):this._renderVirtulViewContent(t)):this._prevVirtualIndex>e?(i=this._isThumbScroll?t:t-1,this._virtualPageRecords[i]&&!this._virtualLoadedRecords[e-1]&&(i=t-1),!this._virtualPageRecords[i]&&i>=1&&this._setCurrentViewPage(i)):this._renderVirtulViewContent(t):this._renderVirtulViewContent(t),!0)},_setCurrentViewPage:function(e){this._needPaging=!0,this._prevPageNo=this._currentPage(),this.gotoPage(e)},_renderVirtulViewContent:function(){this._needPaging=!1,this._refreshVirtualView(this._currentVirtualIndex),this.element.ejWaitingPopup("hide")},_checkCurrentVirtualView:function(t,i){var s,n=this._virtualRowCount,r=i-1,o=i+1;if(t instanceof Array){if(t.length&&((0==r||o==this._totalVirtualViews+1)&&e.inArray(i,t)!=-1||e.inArray(r,t)!=-1&&e.inArray(i,t)!=-1&&e.inArray(o,t)!=-1))return!0}else if(s=o==this._totalVirtualViews?this._lastViewData:n,!this.initialRender&&1==i&&this._virtualLoadedRows[i]||i==this._totalVirtualViews&&t==this._virtualLoadedRows&&t[i]||0==r&&t[i]&&t[i].length==n||o==this._totalVirtualViews+1&&t[i]&&t[i].length==this._lastViewData||t[r]&&t[r].length==n&&t[i]&&t[i].length==n&&t[o]&&t[o].length==s)return!0;return!1},expandCollapse:function(i){var n,r,o,l,a,d,h,c,u,p,m;if("DIV"==i.prop("tagName")&&(i.parent().hasClass("e-recordplusexpand")||i.parent().hasClass("e-recordpluscollapse")||i.parent().hasClass("e-detailrowcollapse")||i.parent().hasClass("e-detailrowexpand"))&&(i=i.parent()),n=-1,this.model.allowGrouping&&(t.isOnWebForms||this.initialRender))for(r=i.attr("ej-mappingname"),fieldValue=i.attr("ej-mappingvalue"),i.parents(".e-tabletd").length&&(o=i.parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand").attr("ej-mappingvalue")),l=this.model._groupingCollapsed,m=0;m<l.length;m++)if(l[m].key==r&&l[m].value==fieldValue&&(l[m].parent==s||l[m].parent==o)){n=m;break}if(i.hasClass("e-recordplusexpand")||i.hasClass("e-recordpluscollapse")||i.hasClass("e-detailrowcollapse")||i.hasClass("e-detailrowexpand")){if(i.hasClass("e-recordplusexpand")&&this.model.groupSettings.groupedColumns.length)a=i.index(),d=i.closest("tr").next(),d.hide(),i.removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),(t.isOnWebForms||this.initialRender)&&n==-1&&this.model._groupingCollapsed.push({key:r,value:fieldValue,parent:o});else if(i.hasClass("e-recordpluscollapse")&&this.model.groupSettings.groupedColumns.length){var a=i.index(),d=i.closest("tr").next(),c=[],u=d;for(e(u[0].cells[a]).hasClass("e-indentcell")&&u.children(".e-indentcell").length==i.parent().children(".e-indentcell").length+1&&(u.show(),null!=(p=u.children(".e-recordplusexpand"))&&p.length>0&&c.push(p)),i.removeClass("e-recordpluscollapse").addClass("e-recordplusexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),m=0;m<c.length;m++)c[m].removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(c[m]);(t.isOnWebForms||this.initialRender)&&n!=-1&&this.model._groupingCollapsed.splice(n,1)}else if(i.hasClass("e-detailrowexpand")){var a=i.index(),g=this,f=this.getIndexByRow(i.closest("tr")),d=i.closest("tr").next();d.hide(0,function(){var e={masterRow:i.closest("tr"),detailsRow:d,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(e.masterData);t.isNullOrUndefined(s)||(e.foreignKeyData=s),g._trigger("detailsCollapse",e),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),i.removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").addClass("e-gnextforward").removeClass("e-gdiagonalnext")}else if(i.hasClass("e-detailrowcollapse")){var a=i.index(),g=this,f=this.getIndexByRow(i.closest("tr")),_=i.closest("tr").next();if(_.hasClass("e-detailrow"))d=_;else{
var v=t.buildTag("tr.e-detailrow","",{display:"none"},{}),b=t.buildTag("td.e-detailindentcell"),y=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,w=t.buildTag("td.e-detailcell","",{},{colspan:this._visibleColumns.length-y}),C=t.buildTag("div"),x=e(i.closest("tr")).parents(".e-grid").length;C.attr("id","child"+x+"_grid"+f+Math.round(1e3*Math.random())),e(v).append(b),e(v).append(w),h=this._currentJsonData[f],this.model.detailsTemplate&&e(v).append(w.append(this._renderEjTemplate(this.model.detailsTemplate,h))),e(i.closest("tr")).after(v),this.model.childGrid&&(this.model.childGrid.parentDetails={parentID:this._id,parentPrimaryKeys:this.getPrimaryKeyFieldNames(),parentKeyField:this.model.childGrid.queryString,parentKeyFieldValue:h[this.model.childGrid.queryString],parentRowData:h},e(v).append(w.append(C))),d=v}for(this._showGridLines(),c=[],u=d,e(u[0].cells[a]).hasClass("e-detailindentcell")&&(u.show(0,function(){var e={masterRow:i.closest("tr"),detailsRow:d,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(e.masterData);t.isNullOrUndefined(s)||(e.foreignKeyData=s),g._trigger("detailsExpand",e),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),_.hasClass("e-detailrow")||(this._trigger("detailsDataBound",{detailsElement:v,data:h}),this._trigger("refresh")),this.model.childGrid&&!t.isNullOrUndefined(C)&&C.ejGrid(this.model.childGrid),null!=(p=u.children(".e-detailrowexpand"))&&p.length>0&&c.push(p)),i.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").addClass("e-gdiagonalnext").removeClass("e-gnextforward"),m=0;m<c.length;m++)c[m].removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(c[m])}!this.model.allowScrolling||t.isNullOrUndefined(this._scrollObject&&this._scrollObject.model)||i.closest(".e-hscroll").length||this.getScrollObject().refresh(),this.model.isResponsive&&this.windowonresize()}},_refreshGridPager:function(){var e,i,s;null!=this.getPager()&&(e=this.getPager().ejPager("model"),i={},i.currentPage=this._currentPage(),0==this._filteredRecordsCount&&0==this.model.currentViewData.length&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)?(i.currentPage=0,this._prevPageNo=e.currentPage,this.model.pageSettings.currentPage=0):0==e.currentPage&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)&&(i.currentPage=this._prevPageNo),s=this.model.editSettings.showAddNewRow&&0==this.model.groupSettings.groupedColumns.length?1:0,i.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount-s:this._searchCount:this._filteredRecordsCount,t.util.isNullOrUndefined(i.currentPage)&&(i.currentPage=this._currentPage()),this.getPager().ejPager("option",i).ejPager("refreshPager"),this.model.pageSettings.totalPages=e.totalPages||null,this.model.pageSettings.totalRecordsCount=e.totalRecordsCount||null)},_showHeaderColumn:function(i,s){for(var n,r,o,l,a,d=this.getHeaderTable().find("thead"),h=d.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),c=d.find(".e-filterbar").find(".e-filterbarcell"),u=this.getHeaderTable().find("colgroup").find("col"),p=0;p<i.length;p++)a=s?t.isNullOrUndefined(this.getColumnByField(i[p]))?this.getColumnByHeaderText(i[p],t.isNullOrUndefined(this.getColumnByField(i[p]))):this.getColumnByField(i[p]):this.getColumnByHeaderText(i[p]),n=e.inArray(a,this.model.columns),n=null!=this.model.detailsTemplate||this.model.childGrid?n+1:n,r=this.model.scrollSettings.frozenColumns,o=0!=r&&n>=r?h.eq(n).removeClass("e-hide").index()+r:h.eq(n).removeClass("e-hide").index(),c.eq(o).removeClass("e-hide"),u.length>this.model.columns.length&&this.model.groupSettings.groupedColumns.length&&(l=u.length-this.model.columns.length,u=u.slice(this.model.detailsTemplate||this.model.childGrid?l+1:l)),u.eq(n).css("display","");this.model.showStackedHeader&&this._refreshStackedHeader()},_hideHeaderColumn:function(i,s){for(var n,r,o=this.getHeaderTable().find("thead"),l=o.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),a=o.find(".e-filterbar").find(".e-filterbarcell"),d=this.getHeaderTable().find("colgroup").find("col"),h=0;h<i.length;h++){r=s?t.isNullOrUndefined(this.getColumnByField(i[h]))?this.getColumnByHeaderText(i[h],t.isNullOrUndefined(this.getColumnByField(i[h]))):this.getColumnByField(i[h]):this.getColumnByHeaderText(i[h]);var c=e.inArray(r,this.model.columns),u=null!=this.model.detailsTemplate||this.model.childGrid?c+1:c,p=this.model.scrollSettings.frozenColumns;n=0!=p&&c>=p?l.eq(u).addClass("e-hide").index()+p:l.eq(u).addClass("e-hide").index(),a.eq(n).addClass("e-hide"),d.length>this.model.columns.length&&(d=d.slice(d.length-this.model.columns.length)),d.eq(c).css("display","none")}this.model.showStackedHeader&&(this._refreshStackedHeader(),this._colgroupRefresh())},_refreshStackedHeader:function(){var t,i,s,n;if(this.model.showStackedHeader){for(t=this.model.stackedHeaderRows,n=0;n<t.length;n++)if(0!=this.model.scrollSettings.frozenColumns){var r=e(this.getHeaderContent().find(".e-frozenheaderdiv")),o=e(this.getHeaderContent().find(".e-movableheader")),l=this._createStackedRow(t[n],!0),a=this._createStackedRow(t[n],!1);e(r.find("tr.e-stackedHeaderRow")[n]).replaceWith(l),e(o.find("tr.e-stackedHeaderRow")[n]).replaceWith(a)}else i=this._createStackedRow(t[n],!1),this.getHeaderTable().find("tr.e-stackedHeaderRow")[n]?e(this.getHeaderTable().find("tr.e-stackedHeaderRow")[n]).replaceWith(i):i.insertBefore(this.getHeaderTable().find("tr.e-columnheader:last"));if(s={},s.requestType="refresh",this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0)for(n=0;n<this.model.groupSettings.groupedColumns.length;n++)this.getHeaderTable().find(".e-stackedHeaderRow").prepend(this._getGroupTopLeftCell());this.model.allowScrolling&&this._refreshScroller(s)}},_getStackedColumnByTarget:function(e){var i=(e.get(0)||{}).className,s=/e-row([0-9])-column([0-9])/.exec(i),n=s[1],r=s[2],o=[n,"stackedHeaderColumns",r].join(".");return t.getObject(o,this.model.stackedHeaderRows)},_checkSkipAction:function(e){switch(e.requestType){case t.Grid.Actions.Save:case t.Grid.Actions.Delete:return!0}return!1},_unboundTemplateRendering:function(t){return e("#"+t).html()},_processBindings:function(i){var s,n,r;if(this._requestType=i.requestType,this.model.query=this.commonQuery.clone(),!this._checkSkipAction(i)&&this._trigger("actionBegin",i))return!0;if("batch"==this.model.editSettings.editMode&&"batchsave"!=i.requestType&&"cancel"!=i.requestType&&!this._confirmedValue&&this._bulkChangesAcquired()&&this.model.editSettings.showConfirmDialog)return this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveLostChanges),this._confirmDialog.ejDialog("open"),this._requestArgs=i,!1;if(!t.isNullOrUndefined(this.model.dataSource)&&"refresh"==i.requestType&&this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this._scrollValue=0,this._loadedJsonData=[],this._prevPage=this._currentPage()),this._ensureDataSource(i),this.model.scrollSettings.allowVirtualScrolling&&("virtualscroll"==i.requestType?(this._loadedJsonData.push({pageIndex:this._prevPage,data:this._currentJsonData}),this._prevPage=this._currentPage()):this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=t.isNullOrUndefined(this._currentPageData)?this.model.currentViewData:this._currentPageData,this._currentPageData=null),"filtering"==i.requestType&&(this._loadedJsonData=[],this._prevPage=this._currentPage(),e("#"+this._id+"_externalEdit").remove()),(i.requestType==t.Grid.Actions.Delete||i.requestType==t.Grid.Actions.Add)&&this._refreshVirtualViewDetails()),this.model.scrollSettings.allowVirtualScrolling&&"filtering"==i.requestType&&this.model.filterSettings.filteredColumns.length>0&&this.getScrollObject().scrollY(0),this.model.enableRTL?this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"):this.element.hasClass("e-rtl")&&this.element.removeClass("e-rtl"),i.requestType==t.Grid.Actions.Delete&&0==this.model.groupSettings.groupedColumns.length&&(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").remove(),i.tr.remove()),this._editForm=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):e("#"+this._id+"EditForm"),!(this.model.editSettings.showAddNewRow&&"beginedit"==i.requestType)&&0!=this._editForm.length)for(s=0;s<this._editForm.length;s++)e(this._editForm[s]).find("select.e-dropdownlist").ejDropDownList("destroy"),e(this._editForm[s]).find(".e-datepicker").ejDatePicker("destroy"),e(this._editForm[s]).find(".e-datetimepicker").ejDateTimePicker("destroy"),e(this._editForm[s]).find(".e-numerictextbox").ejNumericTextbox("destroy");if(!(this._dataSource()instanceof t.DataManager)||this._isRemoteSaveAdaptor||i.requestType==t.Grid.Actions.BeginEdit||i.requestType==t.Grid.Actions.Cancel||i.requestType==t.Grid.Actions.Add||this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(i.requestType==t.Grid.Actions.Save||i.requestType==t.Grid.Actions.Delete))this._isRelationalRendering(i)?this._setForeignKeyData(i):this.sendDataRenderingRequest(i);else{this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage&&this.virtualLoadedPages.indexOf((this._prevPageNo-1)*this.model.pageSettings.pageSize)==-1&&(n=t.pvt.filterQueries(this.model.query.queries,"onPage"),this.model.query.queries.splice(e.inArray(n[0],this.model.query.queries),1),this.model.query.page(this._currentPage()-1,this.model.pageSettings.pageSize),r=this._dataSource().executeQuery(this.model.query),this.model.query.queries.splice(e.inArray(n[0],this.model.query.queries),1),this.model.query.page(this._currentPage(),this.model.pageSettings.pageSize)),this._virtualSelectedRows&&this._virtualSelectedRows.length>0&&this.model.query.addParams("virtualSelectRecords",this._virtualSelectedRows);var o=this._queryPromise=this._dataSource().executeQuery(this.model.query),l=(this.element.ejWaitingPopup("instance"),this);this.element.ejWaitingPopup("show"),l._dataSource().ready?l._dataSource().ready.done(function(){l._processDataRequest(l,i,o,r)}):l._processDataRequest(l,i,o,r)}},_processDataRequest:function(e,i,s,n){s.done(t.proxy(function(s){var r,o,l;if(!t.isNullOrUndefined(e.element)){if(0==e._relationalColumns.length&&e.element.ejWaitingPopup("hide"),n&&!e._previousPageRendered)e._processLastPageData(e,i,s.result,n),e.model.previousViewData&&0!=e.model.previousViewData.length&&(e.model.previousViewData.splice(0,s.result.length),e._previousPageLength=s.result.length,e._currentPageData=s.result,t.merge(e.model.previousViewData,s.result),e.model.currentViewData=e.model.previousViewData,e._remoteLastPageRendered=!0);else if(e._remoteLastPageRendered&&e.model.pageSettings.currentPage==e.model.pageSettings.totalPages-1&&!e.model.scrollSettings.enableVirtualization){for(r=e.model.pageSettings.pageSize-e._previousPageLength,o=0;o<r;o++)l=e.getRows()[e.getRows().length-(e.model.pageSettings.pageSize-o)],l.remove();e._tempPageRendered=!0,e.model.currentViewData=s.result}else e._identityKeys.length&&"add"==i.action&&this.adaptor instanceof t.ODataAdaptor&&e._processIdentityField(s.result,i),e.model.pageSettings.currentPage!=e.model.pageSettings.totalPages-1||e._remoteLastPageRendered||(e._previousPageRendered=!0),e.model.currentViewData=null==s.result?[]:s.result,e._$fkColumn&&"excel"==e.model.filterSettings.filterType&&e.model.filterSettings.filteredColumns.length>0&&(e._fkParentTblData=s.result);e.model.allowScrolling&&e.model.scrollSettings.allowVirtualScrolling&&e.model.scrollSettings.enableVirtualization&&("filtering"==i.requestType&&(e._gridRecordsCount=e._filteredRecordsCount=s.count,e._refreshVirtualViewDetails()),s.result.length?(e._isInitNextPage||e._isLastVirtualpage?(e._setInitialCurrentIndexRecords(s.result,e._currentPage()),e._isInitNextPage=e._isLastVirtualpage=!1):(e._gridRecordsCount=s.count,e._refreshVirtualViewDetails(),e._setVirtualLoadedRecords(s.result,e._currentPage())),e._isThumbScroll&&!e._checkCurrentVirtualView(e._virtualLoadedRecords,e._currentVirtualIndex)&&e._checkPrevNextViews(),e._remoteRefresh=!0):e.getContent().find(".e-virtualtop, .e-virtualbottom").remove()),t.isNullOrUndefined(s.aggregates)||(e._remoteSummaryData=s.aggregates),e._processData(s,i),t.isNullOrUndefined(e._unboundRow)||i.selectedRow==e._unboundRow||"save"!=i.requestType||(e._unboundRow.find(".e-editbutton").trigger("click"),e._unboundRow=null)}})),s.fail(t.proxy(function(s){t.isNullOrUndefined(e.element)||(e.element.ejWaitingPopup("hide"),i.error=s.error,s=[],e.model.currentViewData=[],e._processData(s,i),t.isNullOrUndefined(e.getPager())||e.getPager().ejPager({currentPage:0,totalRecordsCount:0}),e._trigger("actionFailure",i))}))},_processIdentityField:function(i,s){var n=this._primaryKeys[0],r=t.distinct(i,n),o=t.distinct(this.model.currentViewData,n),l=e.grep(r,function(t){return e.inArray(t,o)==-1}),a=t.DataManager(i).executeLocal((new t.Query).where(n,"equal",l))[0];s.data=t.isNullOrUndefined(a)?s.data:a},_processLastPageData:function(e,i,s,n){n.done(t.proxy(function(t){e.model.previousViewData=t.result})),n.fail(t.proxy(function(t){e.element.ejWaitingPopup("hide"),i.error=t.error,t=[],e.model.previousViewData=[],e._processData(t,i),e._trigger("actionFailure",i)}))},_createUnboundElement:function(i,s){var n,r,o,l,a=document.createElement("div");for(i.headerText=t.isNullOrUndefined(i.headerText)?i.field:i.headerText,t.isNullOrUndefined(i.headerText)||(a.id=this._id+i.headerText.replace(/[^a-z0-9|s_]/gi,"")+s+"_UnboundTemplate"),n=t.buildTag("div.e-unboundcelldiv"),r=i.commands,o=0;o<r.length;o++)l=t.buildTag("button.e-flat e-"+r[o].type.replace(/\s+/g,"")+"button","",{},{type:"button"}),l.val(r[o].type),("save"==r[o].type||"edit"==r[o].type)&&l.addClass("e-btnsub"),("cancel"==r[o].type||"delete"==r[o].type)&&l.addClass("e-btncan"),n.append(l);return e("body").append(e(a).html(n).hide()),a},_refreshUnboundTemplate:function(i){var s,n,r,o,l,a;if(this._isUnboundColumn)for(0,s=0;s<this.model.columns.length;s++){if(!this.model.columns[s].commands)continue;for(n=i.find(".e-unboundcell.e-"+this.model.columns[s].headerText.replace(/[^a-z0-9|s_]/gi,"")+s).find(".e-unboundcelldiv"),r=e.extend(!0,[],this.model.columns[s].commands),o=0;o<r.length;o++){for(t.isNullOrUndefined(r[o].buttonOptions)&&(r[o].buttonOptions={}),r[o].buttonOptions.width=t.isNullOrUndefined(r[o].buttonOptions.width)?"52":r[o].buttonOptions.width,r[o].buttonOptions.height=t.isNullOrUndefined(r[o].buttonOptions.height)?"28":r[o].buttonOptions.height,r[o].buttonOptions.cssClass=t.isNullOrUndefined(r[o].buttonOptions.cssClass)?this.model.cssClass:r[o].buttonOptions.cssClass,r[o].buttonOptions.enableRTL=this.model.enableRTL,l=n.find(".e-"+r[o].type.replace(/\s+/g,"")+"button"),this.model.isEdit&&"cancel"!=this._requestType||(i.closest(".e-editcell").length?"save"==r[o].type||"cancel"==r[o].type?l.show():(l.hasClass("e-deletebutton")&&l.hide(),l.hasClass("e-editbutton")&&l.hide()):"save"==r[o].type||"cancel"==r[o].type?l.hide():(l.hasClass("e-deletebutton")&&l.show(),l.hasClass("e-editbutton")&&l.show())),a=0;a<l.length;a++)e(l[a]).data("ejButton")&&e(l[a]).ejButton("destroy");l.ejButton(r[o].buttonOptions)}}},_gridTemplate:function(e,t,i){var s=e.model.columns[i];return e.model.scrollSettings.enableVirtualization&&(this.index+=e._currentVirtualRowIndex),e._isGrouping&&(this.index=e._currentJsonData.indexOf(this.data)),e._renderEjTemplate("#"+t,this.data,this.index,s)},_createTemplateElement:function(i,s,n){var r,o=i["templateID"in i?"templateID":"template"],l=/^#([\w-]*)/.exec(o),s=s||e("body"),a=n?"Pager":i.headerText+e.inArray(i,this.model.columns)+"_Template",d={name:"SCRIPT",type:"text/x-template",text:o,id:(this._id+a).replace(/[^0-9A-z-_]/g,"")};return r=l&&l[1]?document.getElementById(l[1]):/^<script/i.test(o)?e(o).get(0):t.buildTag(d.name,d.text).get(0),r.id=r.id||d.id,r.type=r.type||d.type,s.append(n?r.innerHTML:r),r},_renderGridPager:function(){var t=e(document.createElement("div")),i={};return this.model.pageSettings.click=this._gPagerClickHandler,this.model.pageSettings.totalRecordsCount=this._gridRecordsCount||null,this.model.pageSettings.enableRTL=this.model.enableRTL,this.model.pageSettings.locale=this.model.locale,this.model.pageSettings.enableQueryString=this.model.pageSettings.enableQueryString,this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(i.enableExternalMessage=this.model.filterSettings.showFilterBarStatus),e.extend(i,this.model.pageSettings),i.currentPage=this._currentPage(),i.masterObject=this,this.setGridPager(t),t.ejPager(i),t.ejPager("refreshPager"),i=t.ejPager("model"),this.model.pageSettings.totalPages=i.totalPages||null,this._currentPage()!==i.currentPage&&this._currentPage(i.currentPage),this._renderPagerTemplate(t),t},_renderPagerTemplate:function(e,i){var s,n=this.model.pageSettings,r=0==e.find(".e-pagercontainer").not(".e-template").length;e.find(".e-pagercontainer.e-template").remove(),(i||!n.enableTemplates)&&r&&e.ejPager("renderPager"),n.enableTemplates&&(n.showDefaults||e.children().remove(),s=t.buildTag("div",null,null,{class:"e-pagercontainer e-template"}),this._createTemplateElement(this.model.pageSettings,s,!0),e.append(s))},_renderContext:function(){var i,s,n,r,o,l,a,d,h,c=this.model.contextMenuSettings.contextMenuItems,u=0,p=t.buildTag("ul","",{},{id:this._id+"_Context"});if(!this.model.contextMenuSettings.disableDefaultItems)for(u;u<c.length;u++)i=c[u],s=this._items(i,"contextMenuItem"),p.append(s);var m,g,f=this.model.contextMenuSettings.customContextMenuItems,_=this.model.contextMenuSettings.subContextMenu,v=0;for(v;v<f.length;v++){for(m=f[v],g=this._items(m,"customContextMenuItem"),n=0;n<_.length;n++)if("string"==typeof m&&m==_[n].contextMenuItem||"object"==typeof m&&m.id==_[n].contextMenuItem){for(r=t.buildTag("ul","",{},{id:this._id+"_subMenuContext"+n}),o=0;o<_[n].subMenu.length;o++)menuItem=_[n].subMenu[o],menuItem1=this._items(menuItem,"subMenuItems"),r.append(menuItem1);g.append(r)}p.append(g)}p.find("li").length>0&&(this.element.append(p),l=this.element.parents("div.e-grid"),a=t.Menu.prototype._showContextMenu,t.Menu.prototype._showContextMenu=function(t,i,s,n){e(this.model.contextMenuTarget).hasClass("e-grid")&&(++t,++i),a.apply(this,[t,i,s,n])},e(p).ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+this._id,click:e.proxy(this._clickevent,this),width:"auto",beforeOpen:e.proxy(this._menu,this)}),l.length&&(d=e("#"+l[0].id+"_Context"),h=d.ejMenu("model.excludeTarget"),d.ejMenu({excludeTarget:t.isNullOrUndefined(h)||0==h.length?"#"+this._id:h.concat(",#"+this._id)})),this._conmenu=p.data("ejMenu"))},_clickevent:function(i){var s,n,r=i.events.text,o=e(this._contexttarget.parentNode),l=e(this._contexttarget);if(l.hasClass("e-filterset")?l=l.siblings():(l.hasClass("e-icon")||l.hasClass("e-number"))&&(l=l.parent()),s=l.attr("ej-mappingname")||l.find(".e-headercelldiv").attr("ej-mappingname"),!this._trigger("contextClick",i))switch(r){case this.localizedLabels.AddRecord:this._startAdd();break;case this.localizedLabels.EditRecord:if("batch"==this.model.editSettings.editMode){var a=e(this._contexttarget.parentNode).find(".e-rowcell").index(l),d=this._excludeDetailRows().index(o),h=this.model.columns[a].field;this.editCell(d,h)}else this.startEdit(o);break;case this.localizedLabels.DeleteRecord:this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):this.multiDeleteMode&&this.selectedRowsIndexes.length>1?this._multiRowDelete():this.deleteRow(o);break;case this.localizedLabels.Save:this.endEdit();break;case this.localizedLabels.Cancel:this.cancelEdit();break;case this.localizedLabels.SortInDescendingOrder:n=t.sortOrder.Descending,this.sortColumn(s,n);break;case this.localizedLabels.SortInAscendingOrder:n=t.sortOrder.Ascending,this.sortColumn(s,n);break;case this.localizedLabels.Grouping:this.groupColumn(s);break;case this.localizedLabels.Ungrouping:this.ungroupColumn(s);break;case this.localizedLabels.NextPage:case this.localizedLabels.PreviousPage:case this.localizedLabels.LastPage:case this.localizedLabels.FirstPage:this._page(i)}},_menu:function(i){var s,n,r,o,l,a,d,h,c,u,p,m,g,f,_=this._conmenu.element;if(this._contexttarget=i.target,s=e(i.target),o=e(this._contexttarget),this.model.allowSelection&&(o.hasClass("e-rowcell")||o.closest(".e-rowcell").length)&&!s.hasClass("e-selectionbackground")&&(l=o.hasClass("e-rowcell")?o.parent():o.closest(".e-rowcell").parent(),this.model.isEdit||this.selectRows(this.getIndexByRow(l),null,o)),(s.hasClass("e-ascending")||s.hasClass("e-descending"))&&!s.parent().hasClass("e-headercelldiv"))return!1;n=s.hasClass("e-filtericon")||s.hasClass("e-headercelldiv")?i.target.parentNode.getAttribute("aria-sort"):s.hasClass("e-headercell")?i.target.getAttribute("aria-sort"):s.parent().parent().attr("aria-sort"),i.target.className,a=e(_),r=s.hasClass("e-filterset")?s.siblings().attr("ej-mappingname"):s.hasClass("e-icon")||s.hasClass("e-number")?s.parent().attr("ej-mappingname"):s.hasClass("e-headercell")?s.find(".e-headercelldiv").attr("ej-mappingname"):s.attr("ej-mappingname"),_.css("visibility","visible");var v=s.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,b=s.closest(".e-rowcell"),y=s.closest(".e-headercell"),w=b.index()!=-1?b.index():y.index()-this.model.groupSettings.groupedColumns.length,C=s.hasClass("e-rowcell")?s.index()-v:w-v;C=null!=this.model.detailsTemplate||null!=this.model.childGrid?C-1:C,d=this.model.columns[C],h={allowGrouping:".e-contextgrouping",allowSorting:".e-contextascending, .e-contextdescending","editSettings.allowAdding":".e-contextadd","editSettings.allowEditing":".e-contextedit","editSettings.allowDeleting":".e-contextdelete"};for(c in h)u=_.find(h[c]).parent(),0==t.getObject(c,this.model)||t.getObject(c,d)===!1?u.css("display","none"):"none"==u.css("display")&&u.css("display","block");if(s.closest(".e-grid").attr("id")!==this._id||s.is("input"))return void _.css("visibility","hidden");if(this.getHeaderTable().find(s).length>0){if(0==y.length||!y.children().hasClass("e-headercelldiv"))return void _.css("visibility","hidden");f=e(_.find(".e-head")),_.find(".e-page").css("display","none"),_.find(".e-content").css("display","none"),_.find(".e-savcan").css("display","none"),f.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&(f.css("display","none"),0==_.find(".e-customitem").length&&_.css("visibility","hidden")),g={columnIndex:C,headerText:d.headerText},e.extend(i,g)}else if(this.getContentTable().find(s).length>0){if(p=this.getIndexByRow(e(i.target.parentElement)),m="batch"==this.model.editSettings.editMode?this.getDataByIndex(p):this.getSelectedRecords(),0==b.length)return void _.css("visibility","hidden");f=e(_.find(".e-content")),_.find(".e-head").css("display","none"),_.find(".e-page").css("display","none"),_.find(".e-savcan").css("display","none"),f.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&"batch"==this.model.editSettings.editMode&&(f.css("display","none"),0==_.find(".e-customitem").length&&_.css("visibility","hidden")),g="batch"==this.model.editSettings.editMode?{columnIndex:C,rowIndex:p,rowData:m,headerText:d.headerText,cellValue:t.getObject(t.isNullOrUndefined(d.field)?"":d.field,m)}:{columnIndex:C,rowIndex:p,rowData:m,headerText:d.headerText},e.extend(i,g)}else{if(!(this.getPager().find(s).length>0||s.hasClass("e-pager")))return f=e(_),_.css("visibility","hidden"),!1;f=e(_.find(".e-page")),_.find(".e-head").css("display","none"),_.find(".e-content").css("display","none"),_.find(".e-savcan").css("display","none"),f.css("display","block")}switch(n){case"ascending":a.find(".ascending").parent().css("display","none");break;case"descending":a.find(".descending").parent().css("display","none")}s.hasClass("e-rowcell")&&this.model.editSettings.showAddNewRow&&(f=e(_.find(".e-savcan")),_.find(".e-contextadd").parent().css("display","none"),f.css("display","block")),this.model.isEdit&&s.hasClass("e-rowcell")&&(!this.model.editSettings.showAddNewRow||e(".e-editedrow").length>0)&&(f=e(_.find(".e-savcan")),_.find(".e-head").css("display","none"),_.find(".e-content").css("display","none"),_.find(".e-page").css("display","none"),f.css("display","block")),1==this.model.pageSettings.totalPages&&f.hasClass("e-page")?0==_.find(".e-customitem").length?_.css("visibility","hidden"):_.find(".e-page").css("display","none"):1==this.model.pageSettings.currentPage?(a.find(".previous").parent().css("display","none"),a.find(".first").parent().css("display","none")):this.model.pageSettings.currentPage==this.model.pageSettings.totalPages&&(a.find(".last").parent().css("display","none"),a.find(".nextpage").parent().css("display","none")),this.model.groupSettings.groupedColumns.indexOf(r)!=-1?f.find(".group").parent().css("display","none"):this.model.groupSettings.groupedColumns.indexOf(r)==-1&&f.find(".ungroup").parent().css("display","none"),this.model.contextOpen&&this._trigger("contextOpen",i)},_items:function(i,s){var n,r,o,l;return""!=i&&("contextMenuItem"==s&&(i.indexOf("Record")!=-1?(r=t.buildTag("li","",{},{class:"e-content"}),r.css("display","none")):i.indexOf("Page")!=-1?(r=t.buildTag("li","",{},{class:"e-page"}),i.indexOf("Next")!=-1?n=t.buildTag("div","",{},{class:"nextpage"}):i.indexOf("Previous")!=-1?n=t.buildTag("div","",{},{class:"previous"}):i.indexOf("Last")!=-1?n=t.buildTag("div","",{},{class:"last"}):i.indexOf("First")!=-1&&(n=t.buildTag("div","",{},{class:"first"})),r.css("display","none")):"Save"==i||"Cancel"==i?(r=t.buildTag("li","",{},{class:"e-savcan"}),r.css("display","none")):(i.indexOf("Order")!=-1||"Grouping"==i||"Ungrouping"==i)&&(r=t.buildTag("li","",{},{class:"e-head"}),i.indexOf("Ascending")!=-1?n=t.buildTag("div","",{},{class:"ascending"}):i.indexOf("Descending")!=-1?n=t.buildTag("div","",{},{class:"descending"}):"Grouping"==i?n=t.buildTag("div","",{},{class:"group"}):"Ungrouping"==i&&(n=t.buildTag("div","",{},{class:"ungroup"})),r.css("display","none"))),t.isNullOrUndefined(r)&&(r=t.buildTag("li","",{},{class:"e-customitem"}),r.css("display","block")),r.append(n),o=document.createElement("a"),l="","string"==typeof i&&(l=i.indexOf("Ascending")!=-1?"ascending":i.indexOf("Descending")!=-1?"descending":i.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[i.replace(/\s+/g,"")])?i:this.localizedLabels[i.replace(/\s+/g,"")]),"object"==typeof i&&(l="Ascending"==i.id?"ascending":"Descending"==i.id?"descending":i.id.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[i.text.replace(/\s+/g,"")])?i.text:this.localizedLabels[i.text.replace(/\s+/g,"")],r.attr("id",i.id)),e(o).append(t.buildTag("span","",{},{class:"e-gridcontext e-icon e-context"+l})),r.append(o),r)},_page:function(e){var t;e.events.text==this.localizedLabels.NextPage?(t=this.model.pageSettings.currentPage,++t,this.gotoPage(t)):e.events.text==this.localizedLabels.PreviousPage?(t=this.model.pageSettings.currentPage,t>1?(--t,this.gotoPage(t)):this.gotoPage(t)):e.events.text==this.localizedLabels.LastPage?(t=this.model.pageSettings.totalPages,this.gotoPage(t)):this.gotoPage(1)},gotoPage:function(e){var i,s,n;(this.model.allowPaging||this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling)&&(i={},i.previousPage=this._currentPage(),this._currentPage(e),i.endIndex=this._currentPage()*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:this._currentPage()*this.model.pageSettings.pageSize,i.startIndex=this._currentPage()*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=e,this.model.allowPaging&&(i.requestType=t.Grid.Actions.Paging),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this._isVirtualRecordsLoaded=!1,n=this._refreshVirtualPagerInfo(),this._showPagerInformation(n),i.requestType=t.Grid.Actions.VirtualScroll),s=this._processBindings(i),s&&this._currentPage(i.previousPage),this._primaryKeyValues=[])},_gPagerClickHandler:function(e){if(this._prevPageNo!=e.currentPage)return this.model.masterObject.gotoPage(e.currentPage),!1},_processData:function(i,s){var n,r;if(this.initialRender)this._initDataProcessed=!0,this._initDataProcess(i,s);else{if(this._gridRecordsCount=0==i.count&&this.model.currentViewData.length?i.result.length:i.count,null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),(s.requestType==t.Grid.Actions.Filtering||t.Grid.Actions.Save||this.model.filterSettings.filteredColumns.length>0&&s.requestType==t.Grid.Actions.Refresh)&&(this._filteredRecordsCount=i.count),this.model.allowScrolling&&this.model.scrollSettings.enableVirtualization)for(this.model.currentViewData=[],n=0;n<this._currentLoadedIndexes.length;n++)r=this._currentLoadedIndexes[n],e.merge(this.model.currentViewData,this._virtualLoadedRecords[r]||[]);this._setForeignKeyData(s),0==this._relationalColumns.length&&this.sendDataRenderingRequest(s)}},_frozenCell:function(t,i){var s=i,n=0,r=this.getRowByIndex(t);return i>=this.model.scrollSettings.frozenColumns&&(n=1,s-=this.model.scrollSettings.frozenColumns),e(r.eq(n).find(".e-rowcell:eq("+s+")"))},_frozenColumnSelection:function(t,i,s){var n,r,o=i,l=0;if(s)for(r=i;r<s;r++){for(o=r,r>=this.model.scrollSettings.frozenColumns&&(l=1,o=r-this.model.scrollSettings.frozenColumns),n=0;n<t[l].length;n++)e(t[l][n].cells[o]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell")[r]).addClass("e-columnselection"),this.selectedColumnIndexes.push(r)}else for(i>=this.model.scrollSettings.frozenColumns&&(l=1,o=i-this.model.scrollSettings.frozenColumns),r=0;r<t[l].length;r++)e(t[l][r].cells[o]).addClass("e-columnselection")},_renderGridFooter:function(){var e,i;if(this.model.summaryRows.length>0){if(e=t.buildTag("div.e-gridfooter"),i=t.buildTag("table.e-gridsummary","",{},{cellspacing:"0.25px"}),this.setGridFooterContent(e),this.model.scrollSettings.frozenColumns>0){var s=t.buildTag("div.e-frozenfooterdiv"),n=t.buildTag("div.e-movablefooter"),r=i.clone(),o=t.buildTag("div.e-movablefooterdiv");n.append(o),i.append(this.getHeaderTable().first().find("colgroup").clone()),r.append(this.getHeaderTable().last().find("colgroup").clone()),s.append(i),o.append(r),this.setGridFooterTable(i.add(r)),this._createSummaryRows(this.getFooterTable()),e.append(s.add(n)),e.find(".e-frozenfooterdiv").outerWidth(this.getHeaderContent().find(".e-frozenheaderdiv").width()).end().find(".e-movablefooterdiv").outerWidth(this.getContent().find(".e-movablecontentdiv").width())}else i.append(this.getHeaderTable().find("colgroup").clone()),this.setGridFooterTable(i),this._createSummaryRows(this.getFooterTable()),e.append(i);return e}throw"summary row collection is missing"},_setSummaryAggregate:function(e){for(var t,i,s,n=this.model.summaryRows,r=0,o=n.length;r<o;r++)for(s=n[r].summaryColumns,t=0,i=s.length;t<i;t++)e.aggregate(s[t].summaryType,s[t].dataMember)},_createSummaryRows:function(i,s,n,r,o){var l=i.find("col");i.find("tbody").length>0&&i.find("tbody").remove();var a=t.buildTag("tbody"),d=this,h=a.clone(),c=this.model.summaryRows;!t.isNullOrUndefined(s)&&this._isCaptionSummary&&(c=this._captionSummary(o)),e.each(c,function(c,u){var p,m,g,f,_,v;if(u.showTotalSummary===!1&&t.isNullOrUndefined(s)||u.showGroupSummary===!1&&o&&!t.isNullOrUndefined(s))return!0;if(p=t.buildTag("tr.e-gridSummaryRows"),t.isNullOrUndefined(r&&r.level))for(v=0;v<d.model.groupSettings.groupedColumns.length;v++)p.prepend(t.buildTag("td").addClass("e-indentcell"));m=o?" e-gcsummary":"",
(null!=d.model.detailsTemplate||null!=d.model.childGrid)&&(0!=d.model.groupSettings.groupedColumns.length?p.children("td.e-indentcell").last().after("<td class='e-summaryrow"+m+"'></td>"):p.prepend("<td class='e-summaryrow'></td>"));var b=d.getHeaderTable().find("td").clone().addClass("e-summaryrow"+m),g=0;if(t.isNullOrUndefined(u.titleColumn)||(g=d.getColumnIndexByField(u.titleColumn))==-1&&(g=d.getColumnIndexByHeaderText(u.titleColumn)),g!=-1&&(b=d._assignTitleColumn(g,u.title,b,0)),d._hideSummaryColumn(b,l),d.model.scrollSettings.frozenColumns>0)f=p.clone(),a.append(p.append(b.slice(0,d.model.scrollSettings.frozenColumns))),h.append(f.append(b.slice(d.model.scrollSettings.frozenColumns)));else if(d._isCaptionSummary&&!o||t.isNullOrUndefined(r&&r.level))a.append(p.append(b));else{var y=d.model.groupSettings.groupedColumns.length-r.level+1,w=i.clone().addClass("e-groupsummary"),C={};for(C.data={items:r},p.prepend("<td class='e-summaryrow"+m+"' colspan="+d._colSpanAdjust(null,null,C)+" style = 'padding:0;' ></td>"),e(p[0].cells).filter(".e-summaryrow").html(w.append(t.buildTag("tr",b))),_=w.find("col").length-(d.model.columns.length+y),v=0;v<_;v++)w.find("col").first().remove();for(v=0;v<y;v++)e(w[0].rows).prepend("<td class='e-indentcell'></td>"),e(w.find("col")[v]).addClass("e-summary");a.append(p)}e.each(u.summaryColumns,function(i,r){var o,l,a,h;o="custom"!=r.summaryType?n?n[r.dataMember+" - "+r.summaryType]:d._remoteSummaryData[r.dataMember+" - "+r.summaryType]:d.getSummaryValues(r,s),prefix=r.prefix?r.prefix:"",l=d.getColumnIndexByField(r.displayColumn),a=r.suffix?r.suffix:"",d.model.allowScrolling&&e(b[l]).addClass("e-scroller"),""!=e(b[l]).html()&&""==prefix&&(prefix=e(b[l]).html()),t.isNullOrUndefined(r.template)?l!=-1&&e(b[l]).html(prefix+(r.format?d.formatting(r.format,o,d.model.locale):o)+a).css("text-align",d.model.columns[l].textAlign):(h={summaryValue:r.format?d.formatting(r.format,o,d.model.locale):o,summaryColumn:r},e(b[l]).html(e.render[d._id+"_summaryTemplate"+r.template](h)).css("text-align",d.model.columns[l].textAlign),e(b[l]).addClass("e-summarytemplate"))})}),this.model.scrollSettings.frozenColumns>0?(i.first().append(a),i.last().append(h)):i.append(a)},_assignTitleColumn:function(e,t,i,s){for(var n,r=e;r<this.model.columns.length;r++)if(n=this.model.columns[r],0==s&&0!=n.visible){i.eq(r).html(t);break}return i},getSummaryValues:function(i,s){var n,r,o,l,a,d;switch(r=t.isNullOrUndefined(s)?this.model.filterSettings.filteredColumns.length>0?this._filteredRecords:this._dataSource():s,r instanceof t.DataManager?(o=r,r=r.dataSource.json):o=t.DataManager(r),i.summaryType){case t.Grid.SummaryType.Maximum:l=t.max(r,i.dataMember),n=t.getObject(i.dataMember,l);break;case t.Grid.SummaryType.Minimum:l=t.min(r,i.dataMember),n=t.getObject(i.dataMember,l);break;case t.Grid.SummaryType.Average:n=t.avg(r,i.dataMember);break;case t.Grid.SummaryType.Sum:n=t.sum(r,i.dataMember);break;case t.Grid.SummaryType.Count:n=r.length;break;case t.Grid.SummaryType.TrueCount:a=t.Predicate(i.dataMember,"equal",!0),n=o.executeLocal(t.Query().where(a)).length;break;case t.Grid.SummaryType.FalseCount:a=t.Predicate(i.dataMember,"equal",!1),n=o.executeLocal(t.Query().where(a)).length;break;case t.Grid.SummaryType.Custom:d=i.customSummaryValue,d&&("string"==typeof d&&(d=t.util.getObject(d,window)),e.isFunction(d)&&(n=d.call(this,i,r)))}return n},_hideCaptionSummaryColumn:function(){var e,t,s,n=this.getHeaderTable().find(".e-headercelldiv[ej-mappingname]").first(),r=this.getContentTable().find(".e-groupcaption").clone(),o=this.getContentTable().find(".e-groupcaption").parent(),l=this.model.columns.length-1;if(this._isCaptionSummary&&(this.getContentTable().find(".e-summaryrow:not(.e-gcsummary)").remove(),this.getFooterTable().find("tbody td").slice(-l).removeClass("e-groupcaptionsummary").addClass("e-summaryrow"),null!=this.getFooterTable()&&this.getContentTable().find(".e-recordplusexpand").parent().children(".e-indentcell").remove(),!this.model.groupSettings.showGroupedColumn&&this.getContentTable().find(".e-groupcaptionsummary").not(".e-hide").length&&(e=+this.getContentTable().find(".e-recordtable:first").parents("tbody:first").find(".e-groupcaption").attr("colspan"),this._hiddenColumnsField.length==this.model.columns.length-1&&n.parent().hasClass("e-hide")||!e)))for(i=0;i<r.length;i++)o.eq(i).children().not(".e-hide,.e-recordplusexpand").filter("td.e-groupcaptionsummary:first").addClass("e-hide"),t=o.eq(i).find(".e-groupcaption"),s=parseInt(t.attr("colspan")),t.attr("colspan",++s);this.getContentTable().find(".e-recordtable").find(".e-indentcell").remove()},_hideSummaryColumn:function(t,s){if(s.length>this.model.columns.length&&(s=s.slice(s.length-this.model.columns.length)),!this.model.groupSettings.showGroupedColumn&&this.model.showSummary)for(i=0;i<this.model.columns.length;i++)for(j=0;j<this.model.groupSettings.groupedColumns.length||j<this._hiddenColumnsField.length;j++){var n=this.getHeaderTable().find(".e-headercelldiv:not(.e-emptyCell)");if(!n.eq(i).is(":visible")){s.eq(i).css("display","none"),e(t[i]).addClass("e-hide");break}"none"==s.eq(i).css("display")&&s.eq(i).css("display","")}else for(i=0;i<this.model.columns.length;i++)this.model.columns[i].visible?"none"==s.eq(i).css("display")&&s.eq(i).css("display",""):(s.eq(i).css("display","none"),e(t[i]).addClass("e-hide"))},_initScrolling:function(){var i,s,n=[],r=[],o=0;for(this.model.scrollSettings.enableVirtualization&&(this.model.scrollSettings.allowVirtualScrolling=!0),i=0;i<this.model.columns.length;i++)this.model.columns[i].visible===!1&&i<this.model.scrollSettings.frozenColumns&&o++,this.model.columns[i].isFrozen===!0?n.push(this.model.columns[i]):r.push(this.model.columns[i]);if(n.length>0&&(s=this.model.scrollSettings.frozenColumns,this.model.columns=e.merge(e.merge([],n),r),this.model.scrollSettings.frozenColumns=n.length,n.length!=s&&0!=s&&(this.model.scrollSettings.frozenColumns=s)),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&(this.model.allowGrouping||null!=this.model.rowTemplate||null!=this.model.detailsTemplate||null!=this.model.childGrid||this.model.scrollSettings.allowVirtualScrolling||"batch"==this.model.editSettings.editMode))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels().FrozenNotSupportedException),void this._alertDialog.ejDialog("open");this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this.model.scrollSettings.enableVirtualization?(this._vRowHeight=Math.floor(this.getRowHeight()+1),this._virtualRowCount=Math.round(this.model.scrollSettings.height/this._vRowHeight)+1,this.model.pageSettings.pageSize<5*this._virtualRowCount&&(this.model.pageSettings.pageSize=5*this._virtualRowCount)):(this.model.pageSettings.pageSize=12==this.model.pageSettings.pageSize?Math.round(this.model.scrollSettings.height/32)+1:this.model.pageSettings.pageSize,this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize))),(this.model.width||this.model.height)&&(this.model.allowScrolling=!0,this.model.width&&(this.model.scrollSettings.width=this.model.width),this.model.height&&(this.model.scrollSettings.height=this.model.height)),this._originalScrollWidth=t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)?this.model.scrollSettings.width:this.model.scrollSettings.previousStateWidth},_checkScrollActions:function(e){return!(this.model.scrollSettings.allowVirtualScrolling||e!=t.Grid.Actions.Sorting&&e!=t.Grid.Actions.Reorder)||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Add||e==t.Grid.Actions.Cancel||e==t.Grid.Actions.Save||e==t.Grid.Actions.BatchSave||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Paging||e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Search},_frozenAlign:function(){var e,i=this.getContent().first(),s=!t.isIOSWebView()&&this.getBrowserDetails();e=this.model.enableRTL?"margin-right":"margin-left",i.find(".e-movablecontent").css(e,s&&"safari"===s.browser?"auto":i.find(".e-frozencontentdiv").width()+"px"),this.getHeaderContent().find(".e-movableheader").removeAttr("style").css(e,s&&"safari"===s.browser?"auto":this.getHeaderContent().find(".e-frozenheaderdiv").width()+"px")},_refreshScroller:function(e){var i,s,n,r,o,l,a,d=this.getContent().first();if(!t.isNullOrUndefined(d.data("ejScroller"))){if(this.model.scrollSettings.frozenColumns>0){if(this._isFrozenColumnVisible())if(this._visibleColumns.length<=this.model.scrollSettings.frozenColumns){for(i=!1,s=this.model.scrollSettings.frozenColumns;s<this.model.columns.length;s++)if(this._visibleColumns.indexOf(this.model.columns[s].headerText)!=-1){i=!0;break}i||(d.find(".e-frozencontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-frozenheaderdiv").removeAttr("style"),d.find(".e-movablecontent").width(0),d.find(".e-movablecontentdiv").width(0),d.find(".e-movablecontent").height(0),d.find(".e-movablecontentdiv").height(0))}else this._frozenAlign(),d.find(".e-movablecontent").scrollLeft(this.getHeaderContent().find(".e-movableheader").scrollLeft()),!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.getScrollObject()._vScrollbar.value()>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum);else d.find(".e-movablecontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-movableheaderdiv").removeAttr("style"),d.find(".e-frozencontent").width(0),d.find(".e-frozencontentdiv").width(0),d.find(".e-frozencontent").height(0),d.find("e-frozencontentdiv").height(0);this.refreshScrollerEvent()}this.model.scrollSettings.frozenRows>0&&(this._initFrozenRows(),!this.initialRender&&t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.element.height()>this.model.scrollSettings.height&&this.getContent().attr("tabindex","0").ejScroller(this.model.scrollSettings),n=this.getScrollObject().model.scrollTop,!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&n>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum),("cancel"==e.requestType||"save"==e.requestType)&&n>this._editFormHeight&&this.model.editSettings.editMode.indexOf("inlineform")!=-1&&(n-=this._editFormHeight),e.requestType==t.Grid.Actions.Add&&this.getScrollObject().scrollY(0,!0),t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),"beginedit"==e.requestType&&(n=this.getScrollObject().model.scrollTop,this.getScrollObject().scrollY(0,!0)),!t.isNullOrUndefined(this.model.dataSource)&&("refresh"==e.requestType||"searching"==e.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData&&this._gridRecordsCount>0?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(1),1==this._currentVirtualIndex&&this.getScrollObject().scrollY(0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.getScrollObject().refresh(),d.ejScroller("model.enableRTL",this.model.enableRTL),this.model.isResponsive&&("searching"==e.requestType||"filtering"==e.requestType)&&(r=this.getScrollObject(),o=r.isHScroll()?this.getContentTable().height()+r.model.buttonSize:this.getContentTable().height(),o="string"==typeof this.model.scrollSettings.height||o>this.model.scrollSettings.height?this.model.scrollSettings.height:o,l="string"==typeof this.model.scrollSettings.width?this.element.width():this.model.scrollSettings.width,width=l,this.getContent().ejScroller({height:o,width:width})),this.getScrollObject().isVScroll()&&!this.getScrollObject().model.autoHide?(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width()),this.getHeaderContent().find(".e-headercontent").hasClass("e-hscrollcss")||this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):this._showHideScroller(),!this.model.allowPaging||this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll()||this.getContentTable().width()==this.getContent().width()||(this.getContentTable().width(this.getContent().width()),this.getHeaderTable().width(this.getContentTable().width())),this._getRowHeights(),n&&!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&e.requestType!=t.Grid.Actions.Add&&(this._currentTopFrozenRow=0,n>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum),this.getScrollObject()._vScrollbar.scroll(n)),"virtualscroll"==e.requestType&&(a=this.getScrollObject().model.scrollTop+this.getScrollObject().model.height-.3*this.getScrollObject().model.height,this.getScrollObject().scrollY(a,!0))}},_isFrozenColumnVisible:function(){for(var e=0;e<this.model.scrollSettings.frozenColumns;e++)if(this.model.columns[e].visible)return!0;return!1},_frozenPaneRefresh:function(){this.getContent().find(".e-frozencontentdiv").css("display","none"),this.getHeaderContent().find(".e-frozenheaderdiv").css("display","none"),this.getHeaderContent().find(".e-movableheader")[0].style["margin-left"]="",this.getContent().find(".e-movablecontent")[0].style["margin-left"]="";var e=t.isNullOrUndefined(this._scrollObject._vScrollbar)?0:this._scrollObject._vScrollbar["e-vscroll"].width(),i=this.model.scrollSettings.width-e-1;this.model.scrollSettings.width>this.getContent().find(".e-movablecontentdiv").width()&&(this.getContent().find(".e-movablecontentdiv").width(i),this.getHeaderContent().find(".e-movableheaderdiv").width(i)),this._scrollObject.option("scrollLeft",0)},_renderScroller:function(){var i,s,n,r,o,l,a,d;if(this.model.scrollSettings||(this.model.scrollSettings={}),this.model.enablePersistence&&(t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)||!this.model.scrollSettings.previousStateWidth)&&this.model.isResponsive&&(this.model.scrollSettings.previousStateWidth=this.model.scrollSettings.width),"string"!=typeof this._originalScrollWidth||this.model.isResponsive||(this.element.css("width","auto"),s=this.element.width(),("auto"==this.model.scrollSettings.width||"auto"==this._originalScrollWidth)&&(this._originalScrollWidth="100%"),this.model.scrollSettings.width=s*(parseFloat(this._originalScrollWidth)/100)),"string"!=typeof this.model.scrollSettings.height||this.model.isResponsive||(i=this.element.height(),"auto"==this.model.scrollSettings.height&&(this.model.scrollSettings.height="100%"),this.model.scrollSettings.height=i*(parseFloat(this.model.scrollSettings.height)/100)),(this.model.scrollSettings.width||this.model.width)&&!this._mediaQuery&&(s=this.model.scrollSettings.width||this.model.width,"string"==typeof s?this.element.css("width",this.model.scrollSettings.width||this.model.width):this.element.width(this.model.scrollSettings.width||this.model.width)),n=this.getContent().attr("tabindex","0"),this.getRows(),this.model.scrollSettings.frozenColumns>0){if(scrollWidth=this.getContent().find(".e-frozencontentdiv").width()+20,scrollWidth>this.model.scrollSettings.width)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsViewAlert),void this._alertDialog.ejDialog("open");r=this.getContent().find(".e-frozencontentdiv").width(),o=this.model.enableRTL?"margin-right":"margin-left",this.getContent().find(".e-movablecontent").css(o,r+"px"),this.getHeaderContent().find(".e-movableheader").css(o,r+"px"),this.model.scrollSettings.targetPane=".e-movablecontent"}this._initFrozenRows(),this.model.scrollSettings.autoHide&&(this.model.scrollSettings.show=e.proxy(this._showHideScroller,this)),l=this,this.model.scrollSettings.frozenRows||(this.model.scrollSettings.scroll=function(e){t.isNullOrUndefined(e.scrollData)||"e-hhandle"!=e.scrollData.handler?(l._scrollValue=e.scrollTop,l.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/l._vRowHeight)):(l.model.allowFiltering&&("menu"==l.model.filterSettings.filterType||l._isExcelFilter)&&(l._isExcelFilter?l._excelFilter.closeXFDialog():l._closeFilterDlg()),l._checkScroller(e,this))}),!this.model.scrollSettings.allowVirtualScrolling&&this.model.currentIndex>0&&!this.model.scrollSettings.scrollTop&&(a=this.model.currentIndex*this.getRowHeight(),this.model.scrollSettings.scrollTop=a),n.ejScroller(this.model.scrollSettings),this.model.allowRowDragAndDrop&&this.model.allowScrolling&&t.gridFeatures.dragAndDrop&&n.ejScroller({thumbStart:function(){return!1}}),null==this.model.rowTemplate||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser&&"safari"!=this.getBrowserDetails().browser||this.getScrollObject().refresh(),this.model.scrollSettings.frozenColumns>0&&0==this.model.scrollSettings.frozenRows&&this.getScrollObject()._vScrollbar&&this.getScrollObject()._hScrollbar&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=this.getScrollObject()._hScrollbar._scrollData.skipChange=!0),this.model.scrollSettings.autoHide||this._showHideScroller(),!t.isIOSWebView()&&"safari"==this.getBrowserDetails().browser&&this.model.scrollSettings.frozenColumns>0&&this.getHeaderContent().find(".e-movableheader").add(this.getContent().find(".e-movablecontent")).css(o,"auto"),this.refreshScrollerEvent(),this.model.scrollSettings.frozenColumns>0&&!this._isFrozenColumnVisible()&&this._frozenPaneRefresh(),l.model.scrollSettings.allowVirtualScrolling&&(d=this._refreshVirtualPagerInfo(),this._showPagerInformation(d),n.ejScroller({scroll:function(i){if(l.model.scrollSettings.enableVirtualization&&null!=i.scrollData&&"e-hhandle"!=i.scrollData.handler){if(i.reachedEnd=i.scrollData.scrollable-i.scrollTop==0,"thumb"==i.source){var s=t._getObjectKeys(l._virtualLoadedRows),n=(l._currentVirtualIndex+2).toString();"continuous"==l.model.scrollSettings.virtualScrollMode&&e.inArray(n,s)==-1&&n<l._totalVirtualViews?l._isContinuous=!0:(i.model.scrollTop=i.scrollTop,l._isContinuous=!1,i.cancel=!0)}("button"==i.source||"key"==i.source||"wheel"==i.source)&&(e("#"+l._id+"_WaitingPopup").is(":visible")?i.cancel=!0:(l._isThumbScroll=!1,l._virtualViewScroll(i)),"continuous"==l.model.scrollSettings.virtualScrollMode&&i.reachedEnd&&this.refresh()),l.model.currentIndex=0==i.scrollTop?i.scrollTop:Math.floor(i.scrollTop/l._vRowHeight)}else!t.isNullOrUndefined(i.scrollData)&&"e-hhandle"==i.scrollData.handler&&l.model.allowFiltering&&("menu"==l.model.filterSettings.filterType||l._isExcelFilter)&&(l._isExcelFilter?l._excelFilter.closeXFDialog():l._closeFilterDlg()),i.reachedEnd=this.content()[0].scrollHeight-i.scrollTop==this.content()[0].clientHeight,("button"==i.source||"key"==i.source||"wheel"==i.source)&&null!=l.model&&l._virtualScroll(i),"wheel"==i.source&&i.scrollTop!=l._scrollValue&&(i.scrollTop=l._scrollValue),l._checkScroller(i,this)},thumbEnd:function(t){l.model.scrollSettings.enableVirtualization&&"continuous"==l.model.scrollSettings.virtualScrollMode?t.reachedEnd=t.scrollData.scrollable-t.model.scrollTop==0:t.originalEvent&&!e(t.originalEvent.target).hasClass("e-rowcell")&&(t.reachedEnd=this.content()[0].scrollHeight-t.scrollData.sTop==this.content()[0].clientHeight),"e-hhandle"!=t.scrollData.handler&&null!=l.model&&t.originalEvent&&(l.model.scrollSettings.enableVirtualization?(l._isThumbScroll=!0,l._virtualViewScroll(t),"continuous"==l.model.scrollSettings.virtualScrollMode&&t.reachedEnd&&this.refresh(),l._isLocalData&&l.element.ejWaitingPopup("hide")):l._virtualScroll(t))},scrollEnd:function(t){if("mousewheel"!=t.scrollData.type&&(null==t.scrollData.model||"horizontal"!=t.scrollData.model.orientation)&&l.model.scrollSettings.enableVirtualization&&!l._isContinuous){var i=l._calculateCurrentViewPage(t.model),s=e.inArray(i,l._virtualLoadedPages)!=-1;s?(l._isThumbScroll=!0,l._virtualViewScroll(t),l.element.ejWaitingPopup("hide"),l._totalVirtualViews<=3*l._maxViews&&(this._content[0].scrollTop=t.scrollData.scrollTop)):(s||l.element.ejWaitingPopup("show"),t.cancel=!0)}}}))},_checkScroller:function(e,t){var i,s=e.scrollLeft>0?e.scrollLeft:Math.abs(e.scrollLeft);"thumb"==e.source&&(t.content()[0].scrollWidth-s==t.content()[0].clientWidth||0==s)&&(this.model.enableRTL&&(i=0==s?e.scrollData.scrollable:0,e.scrollData.sTop=e.model.scrollLeft=i,t.content().scrollLeft(i)),t._hScrollbar.refresh())},_showHideScroller:function(){this.getScrollObject().isVScroll()?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this.model.scrollSettings.autoHide||this.getHeaderContent().addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss"),0!=this.model.scrollSettings.frozenColumns||this._mediaQuery||(!this.element.find(".e-gridheader").hasClass("e-scrollcss")&&(this.model.filterSettings.filteredColumns.length||this._hiddenColumns.length&&!this.model.minWidth)?(this.getHeaderTable().removeAttr("style"),this.getContentTable().removeAttr("style")):(this.getHeaderContent().find("div table").first().width(this.getContentTable().width()),this.getContent().find("div table").first().width(this.getContentTable().width()),this.getHeaderTable().width(this.getContentTable().width()))),this._isHscrollcss()},_isHscrollcss:function(){var e=this.getContent().data("ejScroller"),t=e&&(e.isHScroll()||e.isVScroll())?"addClass":"removeClass";this.getHeaderContent().find(".e-headercontent")[t]("e-hscrollcss")},_initFrozenRows:function(){var i,s=this.getRows();this.model.currentViewData&&0!=this.model.currentViewData.length&&(this.model.scrollSettings.frozenRows>0&&null!=s?(this.model.scrollSettings.scroll=e.proxy(this._scroll,this),this.getContent().find(".e-frozeny").removeClass("e-frozeny").end().find(".e-frozenrow").removeClass("e-frozenrow"),!t.isNullOrUndefined(s[0][this.model.scrollSettings.frozenRows-1])&&!t.isNullOrUndefined(s[1][this.model.scrollSettings.frozenRows-1])&&this.model.scrollSettings.frozenColumns>0?e(s[0][this.model.scrollSettings.frozenRows-1].cells).add(s[1][this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"):t.isNullOrUndefined(this.getRowByIndex(this.model.scrollSettings.frozenRows-1)[0])||e(s[this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"),this.getContent().height()>this.model.scrollSettings.height&&(i=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),this.initialRender||t.isNullOrUndefined(i)||!t.isNullOrUndefined(i._vScrollbar)||this._getRowHeights(),this.model.scrollSettings.height=this._rowHeightCollection[Math.floor(this.model.scrollSettings.height/this._rowHeightCollection[1])]+18)):delete this.model.scrollSettings.scroll)},refreshScrollerEvent:function(){this.getContent().find(".e-content:first,.e-movablecontent").scroll(t.proxy(function(t){if(this.model.scrollSettings.targetPane?($movablecontent=e(t.currentTarget).hasClass("e-movablecontent")||!this.model.currentViewData||0==this.model.currentViewData.length?e(t.currentTarget):e(t.currentTarget).find(".e-movablecontent"),this.getHeaderContent().find(".e-movableheader").scrollLeft($movablecontent.scrollLeft())):this.getHeaderContent().find("div").first().scrollLeft(e(t.currentTarget).scrollLeft()),this.model.scrollSettings.frozenRows>0&&this.model.editSettings.editMode.indexOf("inlineform")!=-1&&this.model.isEdit){var i=t.target.scrollTop;this.getContent().find(".e-content").scrollTop(0),this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop+i,!0)}},this)),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").scroll(t.proxy(function(t){var i=e(t.currentTarget);this.model.scrollSettings.targetPane?(this.getContent().find(".e-movablecontent").scrollLeft(i.scrollLeft()),this.model.showSummary&&this.getFooterContent().find(".e-movablefooter").scrollLeft(i.scrollLeft())):(this.model.showSummary&&this.getFooterContent().scrollLeft(i.scrollLeft()),this.getContent().find(".e-content").first().scrollLeft(i.scrollLeft()))},this))},clearFiltering:function(e){var t,i;if(e){if(this._clearFilter(e),"filterbar"!=this.model.filterSettings.filterType)for(i=0;i<this.filterColumnCollection.length;i++)this.filterColumnCollection[i].field==e&&this.filterColumnCollection.splice(i,1)}else{for(t=this.model.filterSettings.filteredColumns,i=0;i<t.length;)this._clearFilter(t[i].field);this.filterColumnCollection=[],("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this.getHeaderTable().find(".e-filtericon").removeClass("e-filteredicon e-filternone")}},_clearFilter:function(i){var s,n=this.model.filterSettings.filterType;switch(t.isNullOrUndefined(this.getColumnByField(i).filterType)||(n=this.getColumnByField(i).filterType),n){case t.Grid.FilterType.FilterBar:e.inArray(this.getColumnByField(i),this.filterColumnCollection)!=-1&&(this.getHeaderTable().find("#"+i+"_filterBarcell").val(""),this._currentFilterbarValue="",e.inArray(i,this.filterColumnCollection),this._currentFilterColumn=this.getColumnByField(i),this._showFilterMsg());break;case t.Grid.FilterType.Menu:s="#"+this._id+"_"+this._$colType+"Dlg","boolean"==this._$colType?e(s).find(".e-value .e-js").ejCheckBox("model.checked",!1):"number"==this._$colType?e(s).find(".e-numerictextbox").ejNumericTextbox("model.value",""):e(s).find(".e-value input").val(""),(this._excelFilterRendered||this._isExcelFilter)&&delete this._excelFilter._predicates[0][i],this._$curFieldName=i;break;case t.Grid.FilterType.Excel:delete this._excelFilter._predicates[0][i],this._excelFilter.closeXFDialog(),this._$curFieldName=i}this.filterColumn(i,"","","or")},clearSearching:function(){this.element.find(".e-gridtoolbar #"+this._id+"_search").val(""),this.search(""),e.extend(this.model.searchSettings,this.defaults.searchSettings)},_renderByFrozenDesign:function(){var i=e(document.createElement("div")),s=this._getMetaColGroup().find("col"),n={};n.colgroup1=i.append(t.buildTag("colgroup").append(s.splice(0,this.model.scrollSettings.frozenColumns))).html(),n.colgroup2=i.html(t.buildTag("colgroup").append(s)).html(),this.getContent().find("div").first().get(0).innerHTML=e.render[this._id+"_FrozenTemplate"]({datas:this.model.currentViewData},n),this.setGridContentTable(this.getContent().find(".e-table").attr("role","grid"))},addFrozenTemplate:function(){var t="<div class='e-frozencontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup1}}<tbody>{{for datas tmpl='"+this._id+"_JSONFrozenTemplate'/}}</tbody></table></div><div class='e-movablecontent'><div class='e-movablecontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup2}}<tbody>{{for datas tmpl='"+this._id+"_JSONTemplate'/}}</tbody></table></div></div>",i={};i[this._id+"_FrozenTemplate"]=t,e.templates(i)},_getTopRow:function(e){var t=this.model.scrollSettings.frozenRows,i=0;if(e>10)for(i=0;i<this._rowHeightCollection.length;i++)if(this._rowHeightCollection[i]>e){t=this.model.scrollSettings.frozenRows+i-1;break}return{imaginaryIndex:t,actualIndex:i}},_showHideRow:function(t,i,s,n){var r=this.getRows();this.model.scrollSettings.frozenColumns>0?e(r[0]).slice(t,i).add(e(r[1]).slice(t,i).toArray())[s]():e(r).slice(t,i)[s](),this._currentTopFrozenRow="show"==s?t:i,this.getScrollObject()._changevHandlerPosition(n)},_scroll:function(e){var i,s,n,r,o;if(null!=e.scrollData&&"width"!=e.scrollData.dimension){e.cancel=!0;var l=(this.getRows(),this._getTopRow(e.scrollTop)),a=l.imaginaryIndex;if(a>this._currentTopFrozenRow?this._showHideRow(this.model.scrollSettings.frozenRows,a,"hide",e.scrollTop):a<this._currentTopFrozenRow&&this._showHideRow(a,this._currentTopFrozenRow+1,"show",e.scrollTop),i=this.getContentTable().last().find("tr"),s=2*parseInt(i.last().find("td:first").css("border-top-width"))+1,e.scrollTop==this.getScrollObject()._vScrollbar.model.maximum&&i.last()[0].offsetTop+i.last().height()-s>this.element.find(".e-content").height()){for(n=i.last().prev()[0].offsetTop+i.last().prev().height(),r=1,o=i.length-2;n-s>this.element.find(".e-content").height();o++){n=i[o].offsetTop+i.eq(o).height(),r++;break}this._showHideRow(this.model.scrollSettings.frozenRows,a+r,"hide",e.scrollTop)}e.model.scrollTop=e.scrollTop}else t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)},_renderAlertDialog:function(){var i=t.buildTag("div.e-content",this._getLocalizedLabels().frozenColumnsMessage),s=t.buildTag("span.e-buttons","<input type='button' class='e-flat' id="+this._id+"ConfirmDialogOK value='"+this._getLocalizedLabels().OkButton+"'/>");this._alertDialog=t.buildTag("div#"+this._id+"AlertDialog"),this._alertDialog.append(i).append(s),this.element.append(this._alertDialog),s.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:e.proxy(function(){this._alertDialog.ejDialog("close")},this)}),this._renderFDialog(this._id+"AlertDialog"),this._alertDialog.ejDialog({width:"auto",enableModal:!0})},_renderFDialog:function(t){e("#"+t).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_virtualScroll:function(t){var i,n;if(null!=t){var r=0,o=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,l=this.model.pageSettings,a=this.getContentTable()[0].tBodies[0],d=e(a).find("tr.e-virtualrow");if(l.totalPages=Math.ceil(o/l.pageSize),t.scrollTop!==s&&(t.model.scrollTop=t.scrollTop),t.reachedEnd!=s&&(t.model.reachedEnd=t.reachedEnd),i=this._calculateCurrenPage(d,this.getContentTable(),t.model),i>l.totalPages&&(i=l.totalPages),l.currentPage!=i&&e.inArray((i-1)*l.pageSize,this.virtualLoadedPages)==-1&&0==this.element.find(".gridform:visible").length&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded)l.currentPage=i;else{if(e.inArray((i-1)*l.pageSize,this.virtualLoadedPages)==-1){if("continuous"==this.model.scrollSettings.virtualScrollMode&&!t.reachedEnd)return;i==l.totalPages&&e.inArray((i-2)*l.pageSize,this.virtualLoadedPages)==-1&&(r++,this.set_currentPageIndex(i)),1==r&&(this._lastRow=!0),this.set_currentPageIndex(i)}l.currentPage=i}n=this._refreshVirtualPagerInfo(),this._showPagerInformation(n)}},_virtualViewScroll:function(t){if(null!=t){t.scrollTop!==s&&(t.model.scrollTop=t.scrollTop),t.reachedEnd!=s&&(t.model.reachedEnd=t.reachedEnd);var i=this._calculateCurrentVirtualIndex(t);this.model.isEdit&&this.cancelEdit(),e.inArray(i,this._currentLoadedIndexes)==-1&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded||this.set_currentVirtualIndex(i)}},_createPagerStatusBar:function(){var e,i,s=this.element.find(".e-pagerstatusbar");s.length&&s.remove(),e=t.buildTag("div.e-pagermsgdiv"),this.$pagerStatusBarDiv=t.buildTag("div.e-pagerstatusbar").append(e),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(i=t.buildTag("div.e-pagerfiltermsg").css("display","none"),this.$pagerStatusBarDiv.append(i)),this.$pagerStatusBarDiv.appendTo(this.element),this.$pagerStatusBarDiv.css("display","none")},_refreshVirtualContent:function(t){var i,s,n,r,o,l,a,d,h=this.getRowHeight(),c=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;null!=t&&(this._currentPage(t),i=this._refreshVirtualPagerInfo(),this._showPagerInformation(i)),s=0,this.model.scrollSettings.enableVirtualization&&(s=1),n=1==s?this.getCurrentIndex()+1:this.getCurrentIndex(),r=this.getContentTable()[0].tBodies[0],n>1&&(o=document.createElement("tr"),e(o).addClass("e-virtualrow").css("height",h*n).prependTo(r)),
n+this.model.pageSettings.pageSize<=c&&1!=this.getContentTable().find("tr").last().hasClass("e-virtualrow")&&0==this.model.scrollSettings.frozenColumns&&(l=document.createElement("tr"),a="normal"==this.model.scrollSettings.virtualScrollMode?h*(c-(n+this.model.pageSettings.pageSize)):1,e(l).addClass("e-virtualrow").css("height",a).appendTo(e(r))),this.virtualLoadedPages=[],this.orderedVirtualLoadedPage=[],this.virtualLoadedPages.push(n>=s?n:s),this.orderedVirtualLoadedPage.push(n>=s?n:s),(d=e(r).find("tr:not(.e-virtualrow)").attr("name",n>=s?n:s)[0])&&d.previousSibling&&(e(d.previousSibling).hasClass("e-virtualrow")||d.previousSibling.offsetTop>n*this.getContent().height())&&(this.getContent().children("div").first().scrollTop(this.getContent().find(".content").scrollTop()-(this.getContent().find(".content").scrollTop()-d.offsetTop)),this._isVirtualRecordsLoaded=!0)},isIntermediate:function(){return this.model.currentIndex<this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1)},_refreshVirtualView:function(t){var i,s,n,r,o,l,a,d,h;if(this._singleView)this._singleView=!1,this._addLastRow(),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),d=this._currentVirtualIndex.toString(32),e(this._gridRows).attr("name",d),this._virtualLoadedRows[this._currentVirtualIndex]=this._gridRows,this._eventBindings();else{if(i=this._virtualRowCount,t)t>this._totalVirtualViews&&(t=1,s=!0),this._currentVirtualIndex=t,this._virtualLoadedRecords[t]?(r=this.getScrollObject(),n=Math.ceil((r.scrollTop()+this.model.scrollSettings.height)/this._vRowHeight/this.model.pageSettings.pageSize)):(this._virtualDataRefresh||this._currentVirtualIndex==this._totalVirtualViews||(s=!0),n=Math.ceil(t*this._virtualRowCount/this.model.pageSettings.pageSize)),this._refreshVirtualViewScroller(s),n>this.model.pageSettings.totalPages&&(n=this.model.pageSettings.totalPages),n<=0&&(n=1),e.inArray(n,this._virtualLoadedPages)==-1?this.gotoPage(n):(this._currentPage(n),this._needPaging=!this._checkCurrentVirtualView(this._virtualLoadedRecords,t),this._getVirtualLoadedRecords(this.model.query),this._replacingVirtualContent());else{if(this._refreshVirtualViewDetails(),o=e(this.getContentTable()[0].rows),this._setVirtualTopBottom(),this.initialRender){for(h=0;h<this._currentLoadedIndexes.length;h++)l=this._currentLoadedIndexes[h],viewIndex=(h+1)*i,viewCount=h*i,e(o[viewIndex-1]).addClass("e-virtualview"+l),d=l.toString(32),a=o.slice(viewCount,viewCount+i).attr("name",d).detach(),this._virtualLoadedRows[l]=a,a.appendTo(this.getContentTable());this._currentVirtualIndex>1&&this._refreshVirtualViewScroller()}this._eventBindings()}e.inArray(this._currentPage(),this._virtualLoadedPages)==-1&&this._virtualLoadedPages.push(this._currentPage())}if(!t&&(this.model.queryCellInfo||this.model.rowDataBound))for(h=0;h<this._currentLoadedIndexes.length;h++)e.inArray(this._currentLoadedIndexes[h],this._queryCellView)==-1&&this._queryCellView.push(this._currentLoadedIndexes[h]);this._isThumbScroll=!1,this._virtualDataRefresh=!1},_refreshVirtualViewData:function(){this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualLoadedPages=[],this._virtualPageRecords={},this._queryCellView=[],null!=this.model.pageSettings.totalPages&&this._currentPage()>this.model.pageSettings.totalPages&&(this._currentPage(1),this._currentVirtualIndex=1)},setCurrentPageData:function(e){this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._refreshVirtualViewDetails(),this._setVirtualLoadedRecords(e,this._currentPage()),this._refreshVirtualView(this._currentVirtualIndex))},_refreshVirtualViewScroller:function(e){var t;this.initialRender&&!this.model.scrollSettings.scrollTop||e?(this._vRowHeight,t=this.model.currentIndex*this._vRowHeight):t=this._scrollObject.model.scrollTop,this.getContent().ejScroller("model.scrollTop",t),this._scrollValue=t},_calculateCurrentViewPage:function(e){e||(e=this._scrollObject.model);var t=this.model.pageSettings.pageSize,i=Math.ceil((e.scrollTop+this.model.scrollSettings.height)/this._vRowHeight/t);return null==this.model.pageSettings.totalPages&&(this.model.pageSettings.totalPages=Math.ceil(this._getVirtualTotalRecord()/t)),i>this.model.pageSettings.totalPages&&(i=this.model.pageSettings.totalPages),this.model.pageSettings.currentPage=i,i},_calculateCurrentVirtualIndex:function(t){var i,s,n,r,o,l,a,d,h,c=t.model,u=(this._getVirtualTotalRecord(),[]),p=c.scrollTop,m=p+this.model.scrollSettings.height;if(i=m/this._vRowHeight/this._virtualRowCount,i=this._prevVirtualIndex>this._currentVirtualIndex&&p<=this._scrollValue?Math.floor(i):Math.ceil(i),p>=this._scrollValue&&"continuous"==c.virtualScrollMode&&c.reachedEnd&&(i+=1),i>this._totalVirtualViews&&(i=this._totalVirtualViews),i<=0&&(i=1),e.inArray(i,this._currentLoadedIndexes)!==-1&&this._virtualLoadedRows[i]&&p!=t.scrollData.scrollable){for(a=this.getContentTable()[0].rows,l=a.length,d=this.getContent().find(".e-virtualtop").height(),n=p>=this._scrollValue,h=0;h<l;h++){if(r=a[h],(o=r.offsetHeight+r.offsetTop+d)>p+this.model.scrollSettings.height){0===u.length&&0!==h&&(u=[a[r.offsetTop<=p+this.model.scrollSettings.height?h:h-1]]);break}if(o>=p&&o<=p+this.model.scrollSettings.height&&(u.push(r),n===!1&&u.length>1))break}s=e(p>=this._scrollValue?u[u.length-1]:u[0]),s.length&&(i=parseInt(s.attr("name"),32))}return this._scrollValue=p,i},_calculateCurrenPage:function(t,i,s){var n,r,o,l,a,d,h,c,u,p,m,g,f,_=this.model.pageSettings.pageSize,v=this,b=[],y=this.getRowHeight();if(n=(s.scrollTop+this.model.scrollSettings.height)/y/_,h=this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1),c=this.getContentTable().find("tr[name="+h+"]").eq(0),n=c.length&&c.offset().top>0&&n>=1&&s.scrollTop<this._scrollValue&&this.virtualLoadedPages.indexOf(Math.ceil(n-1)*_)!==-1?Math.floor(n):Math.ceil(n),s.scrollTop>=this._scrollValue&&"continuous"==s.virtualScrollMode&&s.reachedEnd&&(n=this.virtualLoadedPages[this.virtualLoadedPages.length-1]/_+2),e.inArray((n-1)*_,this.virtualLoadedPages)!==-1){for(u=this.getContentTable().children("tbody").children("tr"),d=u.length,o=s.scrollTop>=this._scrollValue,p=0;p<d;p++){if(l=u[p],(a=l.offsetHeight+l.offsetTop)>s.scrollTop+v.model.scrollSettings.height){0===b.length&&0!==p&&(b=[u[l.offsetTop<=s.scrollTop+v.model.scrollSettings.height?p:p-1]]);break}if(a>=s.scrollTop&&a<=s.scrollTop+v.model.scrollSettings.height&&(b.push(l),o===!1&&b.length>1))break}r=e(s.scrollTop>=this._scrollValue?b[b.length-1]:b[0]),r.hasClass("e-virtualrow")?1===b.length&&n++:n=parseInt(r.attr("name"),10)/_+1}for(this._scrollValue=s.scrollTop,m=0;m<t.length;m++)if(g=t[m],g.offsetTop+g.offsetHeight>=s.scrollTop)return f=this._calculatePrevPage(t,i,s),this._prevPageNo=f,0==n&&(n=1),n>this.model.pageSettings.totalPages?this.model.pageSettings.totalPages:n;return n},_calculatePrevPage:function(t,i,s){for(var n,r,o=0;o<t.length;o++)if(n=t[o],n.offsetTop+n.offsetHeight>=s.scrollTop&&null!=(r=e(n).prevAll("tr[name]")[0]))return Math.ceil(parseInt(e(r).attr("name"),10)/this.model.pageSettings.pageSize)+1;return-1},_refreshVirtualPagerInfo:function(){var e={};return e.pageSize=this.model.pageSettings.pageSize,e.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,0==e.totalRecordsCount&&this._currentPage(0),e.currentPage=this._currentPage(),e.totalPages=Math.ceil(e.totalRecordsCount/e.pageSize),e},_showPagerInformation:function(t){var i=(t.currentPage-1)*t.pageSize;e(this.$pagerStatusBarDiv).find("div:first").html(String.format(this.localizedLabels.PagerInfo,t.currentPage,t.totalPages,t.totalRecordsCount),i,i+t.pageSize),e(this.$pagerStatusBarDiv).css("display","block")},_cellMerging:function(i){i.colMerge=function(e){if(this.cell.className.indexOf("e-colmerge")==-1){this.cell.className+=" e-colmerge",this.model.columns.length-this.cell.cellIndex<e&&(e=this.model.columns.length-this.cell.cellIndex),this.cell.colSpan=e;for(var i=1;i<e;i++)t.isNullOrUndefined(this.cell.parentElement.children[this.cell.cellIndex+i])||(this.cell.parentElement.children[this.cell.cellIndex+i].className+=" e-hide")}},i.rowMerge=function(i){var s,n;if(this.cell.className.indexOf("e-rowmerge")==-1)for(this.cell.className+=" e-rowmerge",s=this.cell.parentNode.parentNode,s.rows.length-this.cell.parentElement.rowIndex<i&&(i=s.rows.length-this.cell.parentElement.rowIndex),this.cell.rowSpan=i,n=0;n<i-1&&!t.isNullOrUndefined(s.children[this.cell.parentElement.rowIndex+n].nextSibling);n++)(!e(".e-grid").children().is(".e-dialog")||e(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")!=-1||this.model.allowFiltering)&&(s.children[this.cell.parentElement.rowIndex+n].nextSibling.children[this.cell.cellIndex].className+=" e-merged e-hide")},i.merge=function(s,n){var r,o,l,a;if(s>1&&n>1){if(this.cell.className.indexOf("e-colmerge")==-1){if(this.cell.className+=" e-colmerge",r=this.cell.parentNode.parentNode,r.rows.length-this.cell.parentElement.rowIndex<n&&(n=r.rows.length-this.cell.parentElement.rowIndex),!e(".e-grid").children().is(".e-dialog")||e(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")!=-1||this.model.allowFiltering)for(o=0;o<n&&!t.isNullOrUndefined(r.children[this.cell.parentElement.rowIndex+o]);o++)for(l=r.children[this.cell.parentElement.rowIndex+o].children[this.cell.cellIndex],this.model.columns.length-l.cellIndex<s&&(s=this.model.columns.length-l.cellIndex),l.colSpan=s,a=1;a<s;a++)t.isNullOrUndefined(l.parentElement.children[this.cell.cellIndex+a])||(l.parentElement.children[this.cell.cellIndex+a].className+=" e-hide");else for(this.cell.colSpan=s,a=1;a<s;a++)t.isNullOrUndefined(this.cell.nextSibling)||(this.cell.parentElement.children[this.cell.cellIndex+a].className+=" e-hide");i.rowMerge(n)}}else s>1&&i.colMerge(s),n>1&&i.rowMerge(n)}},_replacingContent:function(){var i,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S=document.createElement("div"),T=0;this.model.scrollSettings.enableVirtualization&&(T=1);var k=1==T?this.getCurrentIndex()+1:this.getCurrentIndex(),D=this.getContentTable()[0],I=e(D).find("colgroup").first(),O=this.getRowHeight();I.replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&I.prepend(this._getIndentCol()),i=D.tBodies[0],n=this.model.currentViewData,t.isNullOrUndefined(this._currentPageData)?this._virtualLoadedRecords[this._currentPage()]=n:(this._virtualLoadedRecords[this._currentPage()]=this._currentPageData,this._currentPageData=null);var R=e("<tbody></tbody>").append(e.render[this._id+"_JSONTemplate"](n)),P=this,M=R.children("tr");if(this._allowcolumnSelection&&this.selectedColumnIndexes.length>0)for(b=0;b<this.selectedColumnIndexes.length;b++)r=this.selectedColumnIndexes[b]+1,M.find("td:nth-of-type("+r+")").addClass("e-columnselection");for(this.virtualLoadedPages.push(k>=T?k:T),o=t.dataUtil.mergeSort(t.distinct(this.virtualLoadedPages)),e(M).attr("name",k),l=t.dataUtil.min(o),a=t.dataUtil.max(o),e(i).children(".e-virtualrow").remove(),v=0;v<o.length;v++)d=o[v],h=o[v-1],(d!=this.orderedVirtualLoadedPage[v]||this.orderedVirtualLoadedPage[v]==s)&&(h!=s?M.insertAfter(e(i).children("[name="+h+"]:last")):M.insertBefore(e(i).children("[name="+this.orderedVirtualLoadedPage[v]+"]:first")),this.orderedVirtualLoadedPage=o),0!=d&&(c=d==l?l:h,(u=d-c-P.model.pageSettings.pageSize)>0&&(p=document.createElement("tr"),e(p).addClass("e-virtualrow").css("height",O*u).insertBefore(e(i).children("[name="+d+"]:first")))),d==a&&(m=P._gridRecordsCount-a-P.model.pageSettings.pageSize)>0&&(g=document.createElement("tr"),e(g).addClass("e-virtualrow").css("height",O*m).appendTo(i));l>0&&(f=document.createElement("tr"),e(f).addClass("e-virtualrow").css("height",O*l).prependTo(i));var j=this.getContent(),E=e(i).children("tr[name="+k+"]")[0],F=E.previousSibling,A=j.height(),L=E.offsetTop;if(this._virtaulUnSel)for(_=e.extend(!0,[],this._virtaulUnSel),v=0;v<_.length;v++){var N=_[v],V=this.model.pageSettings.currentPage,z=N%this.model.pageSettings.pageSize==0?parseInt(N/this.model.pageSettings.pageSize):parseInt(N/this.model.pageSettings.pageSize)+1;z==V&&(b=N%this.model.pageSettings.pageSize,y=e(i).find("tr[name="+k+"]").eq(b),y.attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),(w=this._virtaulUnSel.indexOf(N))!=-1&&this._virtaulUnSel.splice(w,1))}(E&&F&&(this._virIndex||e(F).hasClass("e-virtualrow")||F.offsetTop>k*A)&&(this._gridRecordsCount-k>=this.model.pageSettings.pageSize||E.offsetParent.offsetHeight-L<A)||this._lastRow)&&(this._lastRow&&(this._lastRow=!1),this._virIndex&&(this._virIndex=!1),this._isVirtualRecordsLoaded=!0,j.find(".e-content").scrollTop(L),this._scrollValue=this.getContent()[0].firstChild.scrollTop),e(D).get(0),S.firstChild,this._currentJsonData=n,this._gridRows=e(D).get(0).rows,C=e(D).find(".e-virtualrow").last(),x="normal"==this.model.scrollSettings.virtualScrollMode?C.height()-(e(D).height()-this._gridRecordsCount*O):1,C.css("height",x),this._eventBindings()},_replacingVirtualContent:function(){var t,i,s,n,r,o,l,a,d=this.getContentTable()[0],h=this._currentLoadedIndexes,c=e("<tbody></tbody>");if(this._checkCurrentVirtualView(this._virtualLoadedRows,this._currentVirtualIndex)){for(t=[],a=0;a<h.length;a++)e.merge(t,this._virtualLoadedRows[h[a]]);e(c).append(t)}else for(i=e("<tbody></tbody>"),a=0;a<h.length;a++)if(s=h[a],n=this._virtualLoadedRows[s])s<this._currentVirtualIndex?(l=c.find(".e-virtualview"+s),l.length?e(n).insertBefore(l):c.prepend(n)):e(n).insertAfter(c.find(".e-virtualview"+(s-1)));else{this._currentVirtualRowIndex=s>0?(s-1)*this._virtualRowCount:0;var i=e("<tbody></tbody>").append(e.render[this._id+"_JSONTemplate"](this._virtualLoadedRecords[s])),u=i[0].rows,p=u.length-1;e(u[p]).addClass("e-virtualview"+s),r=s.toString(32),o=e(u).attr("name",r),(o.length==this._virtualRowCount||s==this._totalVirtualViews)&&(this._virtualLoadedRows[s]=o,c.append(u))}if(d.replaceChild(c[0],d.lastChild),e(d.rows).removeClass("e-hover"),this._setVirtualTopBottom(),(this._isThumbScroll||this._remoteRefresh)&&(this._scrollObject._content[0].scrollTop=this._scrollObject.scrollTop(),this._isThumbScroll=this._remoteRefresh=!1),this.model.allowSelection&&this._checkVirtualSelection(),this._gridRows=d.rows,this._currentJsonData=this.model.currentViewData,this._checkCurrentVirtualView(this._queryCellView,this._currentVirtualIndex)||this._eventBindings(),this.model.queryCellInfo||this.model.rowDataBound)for(a=0;a<this._currentLoadedIndexes.length;a++)e.inArray(this._currentLoadedIndexes[a],this._queryCellView)==-1&&this._queryCellView.push(this._currentLoadedIndexes[a]);this._trigger("refresh")},_setVirtualTopBottom:function(){var i,s,n,r,o,l,a,d,h,c=this.getContentTable()[0],u=this._vRowHeight,p=t.dataUtil.mergeSort(t.distinct(this._currentLoadedIndexes)),m=t.dataUtil.min(p),g=t.dataUtil.max(p),f=this._getVirtualTotalRecord();if("continuous"==this.model.scrollSettings.virtualScrollMode&&this._virtualLoadedRows[g+1]&&(n=Object.keys(this._virtualLoadedRows),s=parseInt(t.dataUtil.max(n),10),g=s-g),i=g*this._virtualRowCount*u,e.inArray(this._totalVirtualViews,this._currentLoadedIndexes)!=-1&&this._currentVirtualIndex!=this._totalVirtualViews&&(i=(f-(this._virtualRowCount-this._lastViewData))*u),r=f*u-i,"continuous"!=this.model.scrollSettings.virtualScrollMode||this._virtualLoadedRows[g+1]||(r=s&&s<=g+1?r:1),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),o=1e6,r>0&&this._getVirtualTotalRecord()>2*this._virtualRowCount)if(Math.round(r).toString().length<7)t.buildTag("div.e-virtualbottom","",{height:r}).insertAfter(c);else for(t.buildTag("div.e-virtualbottom").insertAfter(c),a=Math.ceil(r/o),d=0;d<a;d++)h=o,d==a-1&&(h=r%o),e(c).next().append(t.buildTag("div","",{height:h}));if(m>1)if(l=(m-1)*this._virtualRowCount*u,Math.round(l).toString().length<7)t.buildTag("div.e-virtualtop","",{height:l}).insertBefore(c);else for(t.buildTag("div.e-virtualtop").insertBefore(c),a=Math.ceil(l/o),d=0;d<a;d++)h=o,d==a-1&&(h=l%o),e(c).prev().append(t.buildTag("div","",{height:h}));this._scrollObject.model.scrollTop!=this._scrollValue&&this.getContent().ejScroller("model.scrollTop",this._scrollValue)},_checkVirtualSelection:function(){for(var t,i,s,n,r,o,l,a,d,h=this.getContentTable()[0],c=0;c<this.selectedRowsIndexes.length;c++)i=this.selectedRowsIndexes[c],s=this._getSelectedViewData(i).viewIndex,e.inArray(s,this._currentLoadedIndexes)!=-1&&(t=i%this._virtualRowCount+this._currentLoadedIndexes.indexOf(s)*this._virtualRowCount,e(h.rows[t].cells).hasClass("e-selectionbackground")||(e(e(h.rows[t]).attr("aria-selected","true")[0].cells).addClass("e-selectionbackground e-active"),this.model.selectedRecords[c]=this._virtualLoadedRecords[s][t%this._virtualRowCount]));for(c=0;c<this._rowIndexesColl.length;c++)if(i=this._rowIndexesColl[c],s=this._getSelectedViewData(i).viewIndex,e.inArray(s,this._currentLoadedIndexes)!=-1&&e.inArray(i,this._virtualRowCellSelIndex)==-1||this._virtualDataRefresh)for(n=e.inArray(i,this._rowIndexesColl),r=this.selectedRowCellIndexes[n].cellIndex,o=0;o<r.length;o++)this._selectMultipleCells(i,r[o]);for(l=e(h.rows).find(".e-active, .e-cellselectionbackground").closest("tr"),c=0;c<l.length;c++){var u=parseInt(e(l[c]).attr("name"),32)*this._virtualRowCount,p=this._virtualRowCount-e(l[c]).index()%this._virtualRowCount,m=u-p,g=e(l[c]).index();this.selectedRowsIndexes.length&&e.inArray(m,this.selectedRowsIndexes)==-1&&(this._clearVirtualSelection=!0,this.clearSelection(g)),this._rowIndexesColl.length&&e.inArray(m,this._rowIndexesColl)==-1&&e(this.getRowByIndex(g)[0].cells).removeClass("e-cellselectionbackground e-activecell")}for(e(h.rows).find(".e-columnselection").removeClass("e-columnselection"),a=0;a<this.selectedColumnIndexes.length;a++)d=this.selectedColumnIndexes[a]+1,e(h.rows).find("td:nth-of-type("+d+")").addClass("e-columnselection");this._clearVirtualSelection=!1},_refreshPagerTotalRecordsCount:function(){this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()})},_maxZindex:function(){var t=1;return t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),(t==s||null==t)&&(t=1),t},_keyPressed:function(i,n,r,o){var l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C=e(n);if(C.hasClass("e-tooltxt")&&13==r.code)return l={currentTarget:n,target:n.firstChild},a=e(n).closest(".e-gridtoolbar"),a.ejToolbar("instance")._trigger("click",l),!1;if(!this._allowcellSelection||this._previousRowCellIndex&&0!=this._previousRowCellIndex.length||(this._previousRowCellIndex=[],this._previousRowCellIndex.push([0,[0]])),C.hasClass("e-ddl")&&13==r.code&&e(document.activeElement).parents("td").hasClass("e-templatecell")||!this.model.allowKeyboardNavigation||"INPUT"==n.tagName&&this.model.keyConfigs[i].indexOf(",")==-1&&40!=r.code&&38!=r.code&&13!=r.code&&27!=r.code&&9!=r.code||String.fromCharCode(r.code).toLowerCase()==this.element[0].accessKey.toLowerCase()||"checkbox"==e(n).prop("type")&&13!=r.code&&9!=r.code&&27!=r.code||"batch"==this.model.editSettings.editMode&&"INPUT"==n.tagName&&13!=r.code&&9!=r.code&&27!=r.code&&(0!=n.selectionStart&&"moveCellRight"!=i||n.selectionEnd!=n.value.length&&"moveCellLeft"!=i)||this.model.allowFiltering&&C.hasClass("e-filtertext")&&13==r.code||C.hasClass("e-fltrbtn")&&13==r.code||("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode)&&e(n).closest("#"+this._id+"EditForm").length||e(n).parent().siblings("#"+this._id+"EditForm").length||13==r.code&&C.parent().hasClass("e-unboundcelldiv"))return!0;if(13==r.code&&"INPUT"==n.tagName&&C.closest("#"+this._id+"_search").length&&(i="searchRequest"),13==r.code&&null!=this._excelFilter&&!t.isNullOrUndefined(this._excelFilter._openedFltr)&&this._excelFilter._openedFltr.length&&this._excelFilter._openedFltr.is(":visible")&&(i="excelfilter"),13==r.code&&e(n).hasClass("e-gridtoolbar")&&(toolbarId=C.find(".e-hover").attr("Id"),i="toolbarOperationRequest"),!this.model.isEdit&&"cancelRequest"==i)return this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),!0;if("true"==e(n).find("input.e-dropdownlist").attr("aria-expanded")&&this.model.isEdit&&"saveRequest"==i)return!0;if(null!=this.getPager()&&(d=this.getPager().ejPager("model"),h=d.currentPage),c=!1,C=e(n),C.closest(".e-grid").attr("Id")===this._id){switch(i){case"insertRecord":!t.gridFeatures.edit||this.model.isEdit||this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||this._toolbarOperation(this._id+"_add");break;case"toolbarOperationRequest":this._toolbarOperation(toolbarId),this.element.focus();break;case"searchRequest":this.search(C.val());break;case"excelfilter":p=this._id+this._excelFilter._$colType,this._excelFilter._openedFltr.hasClass("e-dlgcustom")&&(p+="Custom"),this._excelFilter._openedFltr.find("#"+p+"_OkBtn").trigger("click");break;case"saveRequest":t.gridFeatures.edit&&(C.blur(),"batch"==this.model.editSettings.editMode?(m=e(this.getRowByIndex(this._bulkEditCellDetails.rowIndex)),this.model.isEdit&&m.hasClass("e-insertedrow")&&this._batchCellValidation(this._bulkEditCellDetails.rowIndex),this._moveCurrentCell("down")):this._toolbarOperation(this._id+"_update"),o.stopPropagation());break;case"cancelRequest":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_cancel");break;case"deleteRecord":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_delete");break;case"editRecord":t.gridFeatures.edit&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&this._toolbarOperation(this._id+"_edit");break;case"totalGroupCollapse":t.gridFeatures.group&&(this.collapseAll(),this.element.focus());break;case"totalGroupExpand":t.gridFeatures.group&&(this.expandAll(),this.element.focus());break;case"selectedGroupExpand":t.gridFeatures.group&&(this._$currentTr=e(this.getRows()).eq(this._selectedRow()),u=this._$currentTr.parents("tr").first().prev().find(".e-recordpluscollapse"),this.expandCollapse(u));break;case"selectedGroupCollapse":t.gridFeatures.group&&(this._$currentTr=e(this.getRows()).eq(this._selectedRow()),u=this._$currentTr.parents("tr").first().prev().find(".e-recordplusexpand"),this.expandCollapse(u));break;case"firstRowSelection":t.gridFeatures.selection&&this.selectRows(0);break;case"lastRowSelection":t.gridFeatures.selection&&(b=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?e(this.getRows()[0]).length-1:e(this._excludeDetailRows()).length-1),this.selectRows(b);break;case"rowUpSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),g=null!=this._traverseRow?this._traverseRow:this._selectedRow(),g>0&&(this._nextRow=g,this._prevRow=g-1,f=e(this.getContent().find("tr.e-traverse")[0]),f.removeClass("e-traverse"),this.getRowByIndex(this._prevRow).addClass("e-traverse"),_=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(_));break;case"rowDownSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),g=null!=this._traverseRow?this._traverseRow:this._selectedRow(),(g+1<this.model.currentViewData.length||this.model.scrollSettings.allowVirtualScrolling)&&(this._prevRow=g,this._nextRow=g+1,f=e(this.getContent().find("tr.e-traverse")[0]),f.removeClass("e-traverse"),this.getRowByIndex(this._nextRow).addClass("e-traverse"),_=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(_));break;case"randomSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),"multiple"==this.model.selectionType&&(this.multiSelectCtrlRequest=!0),_=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(_),this._traverseRow!=-1&&(this.model.selectionSettings.enableToggle&&1==this.getSelectedRecords().length&&e.inArray(this._traverseRow,this.selectedRowsIndexes)!=-1?this.clearSelection(selectedIndex):this.selectRows(this._traverseRow)),this.getRowByIndex(g).removeClass("e-traverse"),this.multiSelectCtrlRequest=!1;break;case"upArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&C.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(this._selectedRow()!=-1||this._previousRowCellIndex!=s)&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==n.type||"checkbox"==n.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._selectedRow()>0&&!this.model.scrollSettings.enableVirtualization&&(this._enableCheckSelect||this.selectRows(this._selectedRow()-1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("up")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&0!=this._previousRowCellIndex[0][0]&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]-1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"downArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&C.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==n.type||"checkbox"==n.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._selectedRow()==-1&&(this.model.selectedRowIndex=0),b=this._excludeDetailRows().length-1,this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(b=this.getRows()[0].length-1),this._selectedRow()==b||this._selectedRow()==-1||this.model.scrollSettings.enableVirtualization||(this._enableCheckSelect||this.selectRows(this._selectedRow()+1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&this._previousRowCellIndex[0][0]!=b&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]+1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"rightArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==n.type||"checkbox"==n.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;b=e(this.getRows()).length-1,this._previousRowCellIndex&&this._previousRowCellIndex[0][1]==this.model.columns.length-1&&this._previousRowCellIndex[0][0]!=b?this.selectCells([[this._previousRowCellIndex[0][0]+1,[0]]]):this._previousRowCellIndex&&this._previousRowCellIndex[0][1]!=this.model.columns.length-1&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])+1]]])}break;case"leftArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==n.type||"checkbox"==n.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._previousRowCellIndex&&0==this._previousRowCellIndex[0][1]&&0!=this._previousRowCellIndex[0][0]?this.selectCells([[this._previousRowCellIndex[0][0]-1,[this.model.columns.length-1]]]):this._previousRowCellIndex&&0!=this._previousRowCellIndex[0][1]&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])-1]]])}break;case"firstCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==n.type||"checkbox"==n.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;b=e(this.getRows()).length-1,b>-1&&this.selectCells([[0,[0]]])}break;case"lastCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==n.type||"checkbox"==n.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;b=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?this.getRows()[0].length-1:e(this._excludeDetailRows()).length-1,b>-1&&this.selectCells([[b,[this.model.columns.length-1]]])}break;case"nextPage":null!=this.getPager()&&(h+=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"previousPage":null!=this.getPager()&&(h-=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"lastPage":null!=this.getPager()&&(h=d.totalPages);break;case"firstPage":null!=this.getPager()&&(h=1);break;case"nextPager":null!=this.getPager()&&(h=Math.ceil(d.currentPage/d.pageCount)*d.pageCount+1);break;case"previousPager":null!=this.getPager()&&(h=(Math.floor(d.currentPage/d.pageCount)-1)*d.pageCount+1);break;case"moveCellLeft":"batch"==this.model.editSettings.editMode?(this._tabKey=!0,c=this._moveCurrentCell("left")):c=!0;break;case"moveCellRight":"batch"==this.model.editSettings.editMode&&C?(this._tabKey=!0,c=this._moveCurrentCell("right")):c=!0;break;case"multiSelectionByDownArrow":t.gridFeatures.selection&&(this._selectedRow()!=-1||this._previousRowCellIndex!=s)&&(b=this._excludeDetailRows().length-1,C=this.element.find(".e-gridcontent").find(".e-rowcell"),this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(b=this.getRows()[0].length-1),this._selectedRow()<=b&&this._selectedRow()!=-1&&(y=this._selectedRow()+1,w=this._previousIndex,this.selectRows(w,y,C),y-1==b&&(this.selectRows(w,b),y=b)),this._selectedRow(y),this._previousIndex=w),"batch"==this.model.editSettings.editMode&&this.element.focus();break;case"multiSelectionByUpArrow":v=0,t.gridFeatures.selection&&(this._selectedRow()!=-1||this._previousRowCellIndex!=s)&&(b=this._excludeDetailRows().length-1,C=this.element.find(".e-gridcontent").find(".e-rowcell"),this._selectedRow()>=0&&this._selectedRow()>=-1&&(y=this._selectedRow()-1,w=this._previousIndex,this.selectRows(w,y,C),y<0&&(this.selectRows(w,v),y=v)),this._selectedRow(y),this._previousIndex=w),"batch"==this.model.editSettings.editMode&&this.element.focus();break;default:c=!0}return null!=this.getPager()&&h<=d.totalPages&&d.currentPage!==h&&"searchRequest"!=i&&"deleteRecord"!==i&&this.getPager().ejPager("goToPage",h),c}},_findColumnsWidth:function(){for(var e=this.getHeaderTable().find(".e-headercell").not(".e-stackedHeaderCell, .e-detailheadercell"),t=0;t<this.model.columns.length;t++)this.model.columns[t].visible&&(this.columnsWidthCollection[t]=e.eq(t+0).outerWidth())},_calculateWidth:function(){for(var e=this.getHeaderTable().find(".e-columnheader").last().find("th:visible"),t=0,i=0;i<e.length;i++)t+=e.eq(i).outerWidth();return t},_initIndicators:function(){var t=this._id+"_ColumnDropIndicator";e("#"+t).length&&e("#"+t).remove(),this._Indicator=document.createElement("DIV"),e(this._Indicator).attr("id",t).addClass("e-columndropindicator").addClass("e-dropAcceptor").appendTo(document.body),e(this._Indicator).css({display:"none"})},_refreshGroupSummary:function(){var t,i,s=this.getHeaderContent().find("colgroup col").clone();for(s.splice(0,this.model.groupSettings.groupedColumns.length),t=this.getContentTable().find(".e-groupsummary colgroup"),i=0;i<t.length;i++)e(t[i]).find(".e-summary").is("visible")||e(t[i]).find(".e-summary").show(),e(t[i]).find("col:not('.e-summary')").remove(),e(t[i]).append(s.clone())},reorderColumns:function(e,t){var i,s;"string"==typeof e&&"string"==typeof t?(i=this.getColumnIndexByField(e),s=this.getColumnIndexByField(t)):(i=e,s=t),
i!=-1&&s!=-1&&"string"!=typeof i&&"string"!=typeof s&&(this.set_dropColumn(i,s),this.model.showStackedHeader&&this._refreshStackedHeader(),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualDataRefresh=!0,this._queryCellView=[],this._virtualLoadedRows={},this._refreshVirtualView(this._currentVirtualIndex)):this._refreshVirtualContent()))},columns:function(s,n){var r,o,l,a,d;if(!t.isNullOrUndefined(s)){for(r=!1,"string"==typeof s?(s=[s],r=!0):s instanceof Array&&s.length&&"string"==typeof s[0]&&(r=!0),i=0;i<s.length;i++)o=r?s[i]:s[i].field,l=r?s[i]:s[i].headerText,a=!t.isNullOrUndefined(o)&&""!=o||!t.isNullOrUndefined(l)&&""!=l?t.isNullOrUndefined(o)||""==o?e.inArray(this.getColumnByHeaderText(l),this.model.columns):e.inArray(this.getColumnByField(o),this.model.columns):-1,"add"==n||t.isNullOrUndefined(n)?a==-1?this.model.columns.push(r?{field:s[i]}:s[i]):this.model.columns[a]=r?{field:s[i]}:s[i]:a!=-1&&this.model.columns.splice(a,1);for(this.columnsWidthCollection=[],tooltip=!1,d=0;d<this.model.columns.length;d++)this.columnsWidthCollection.push(this.model.columns[d].width),t.isNullOrUndefined(tooltip)||(tooltip=!0);this._enableRowHover(tooltip),this.refreshHeader(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.refreshContent(!0),this.model.allowScrolling&&(this.refreshScrollerEvent(),this.model.allowResizeToFit&&this.getContent().ejScroller("isVScroll")&&this._showHideScroller())}},_enableRowHover:function(e){var i,s=!0;if(t.isNullOrUndefined(e)){for(i=0;i<this.model.columns.length;i++)if(!t.isNullOrUndefined(this.model.columns[i].tooltip)){s=!0;break}}else s=e;this.model.enableRowHover||s?this._on(this.element,"mouseenter mouseleave",".e-gridcontent tr td",this._rowHover):this._off(this.element,"mouseenter mouseleave",".e-gridcontent tr td")},_rowHover:function(i){var s,n,r=e(i.target);if(s=this.model.scrollSettings.frozenColumns?e(this.getRows()):this.element.find(".e-row.e-hover,.e-alt_row.e-hover"),(!r.closest("#"+this._id+"EditForm").length||!r.hasClass("e-rowcell"))&&r.hasClass("e-rowcell"))return"mouseenter"==i.type&&r.hasClass("e-gridtooltip")&&this._showTooltip(r),this.model.enableRowHover&&(this.element.find(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,"mouseenter"!=i.type||this._dragActive?(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(s[0])&&!t.isNullOrUndefined(s[1])&&(s=e(s[0]).add(s[1])),s.removeClass("e-hover")):this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(s[0])&&!t.isNullOrUndefined(s[1])?(s=e(s[0]).add(s[1]),s.removeClass("e-hover"),(n=this.getIndexByRow(r.parent()))!=-1&&this.getRowByIndex(n).addClass("e-hover")):(s.removeClass("e-hover"),(r.parent().hasClass("e-row")||r.parent().hasClass("e-alt_row"))&&r.parent().addClass("e-hover"))),!1},_showTooltip:function(i,s){var n,r,o,l,a,d,h,c,u=i.index(),p=i.hasClass("e-stackedHeaderCell"),m={};if(i.hasClass("e-headercelldiv")&&(u=i.parent(".e-headercell").index()-this.model.groupSettings.groupedColumns.length),!p&&(this.model.childGrid||this.model.detailsTemplate)&&u--,this.model.scrollSettings.frozenColumns>0&&(i.closest(".e-movableheaderdiv").length||i.closest(".e-movablecontentdiv").length)&&(u+=this.model.scrollSettings.frozenColumns),n=p?this._getStackedColumnByTarget(i):this.getColumnByIndex(u),n.clipMode!=t.Grid.ClipMode.Ellipsis){if(n.clipMode==t.Grid.ClipMode.EllipsisWithTooltip&&(r=i,i.find("span").hasClass("e-tooltip")||($span=t.buildTag("span.e-tooltip",{},{}),$span.html(i.html()),r.append($span)),r.find("span.e-tooltip").css("display","inline-block"),o=r.find("span:first")[0].getBoundingClientRect().width,r.find("span.e-tooltip").remove(),i.width()>o))return void i.removeAttr("title");if(l=document.createElement("script"),t.isNullOrUndefined(n.tooltip)&&t.isNullOrUndefined(n.headerTooltip))return;l.id=(this._id+n.headerText+e.inArray(n,this.model.columns)+"_TemplateToolTip").split(" ").join(""),l.type="text/x-template",d=s?"headerTooltip":"tooltip",t.isNullOrUndefined(n[d])||"#"===n[d].slice(0,1)?a=e(n[d]):l.text=n[d],a&&(l.text=a.html(),l.type=a.attr("type")||l.type),e("body").append(l),h=i.closest("tr"),e(h).hasClass("e-columnheader")||(u=this.getIndexByRow(h),m=this.getCurrentViewData()[u]),m.value=i.text(),c=e(l).render(m),i.attr("title",c)}else i.removeAttr("title")},_rightClickHandler:function(i){var s,n,r,o;if(i.preventDefault(),s=t.browserInfo(),3==i.which||"msie"==s.name&&"8.0"==s.version){if(n={},$target=e(i.target),$gridRow=e(this.getRows()),this.getContentTable().has($target).length){var o=$gridRow.index($target.parent()),l=this.getRowByIndex(o),a=this._currentJsonData[o];if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(r=this._getSelectedViewData(o,$target),a=r.data,o=r.rowIndex),o==-1)return;n={rowIndex:o,row:l,data:a,cellIndex:$target.index(),cellValue:$target.html(),cell:$target}}else if(this.getHeaderTable().has($target).length){if(o=0,$th=this.getHeaderTable().find("th").not(".e-detailheadercell,.e-grouptopleftcell,.e-filterbarcell"),(o=$target.is(".e-headercelldiv")?$th.index($target.closest(".e-headercell")):$th.index($target))==-1)return;n={headerIndex:o,headerText:this.getColumnFieldNames()[o],headerCell:$th.eq(o),column:this.getColumnByIndex(o)}}else($target.is(".e-pager")||null!=this.getPager()&&this.getPager().has($target).length)&&(n={pager:this.model.pageSettings});this._trigger("rightClick",n)}},_touchGrid:function(e){var t,i=this._currentPage(),s=!0;switch((this.model.allowScrolling||this.model.isResponsive&&0!=this.model.minWidth)&&(t=(this.getScrollObject()||{})._scrollXdata)&&(s="swipeleft"==e.type?t.scrollable-t.sTop==0:0==t.sTop),e.type){case"swipeleft":this.model.allowPaging&&i!=this.model.pageSettings.totalPages&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i+1);break;case"swiperight":this.model.allowPaging&&i>1&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i-1)}},_recorddblClickHandler:function(e){this._recordClickProcess(e,this,"recordDoubleClick")},_recordClickProcess:function(t,i,s){var n,r,o,l,a,d={},h=e(t.target).is(".e-rowcell")?e(t.target):e(t.target).closest("td");if(h.closest(".e-grid").attr("id")===i._id&&(h.is(".e-rowcell")||h.closest("td").is(".e-rowcell"))&&!(h.closest(".e-editcell,.e-insertedrow").length>0)&&(n=null!=i.model.detailsTemplate||null!=i.model.childGrid?h.index()-1:h.index(),r=i.getColumnByIndex(n),"batch"!=i.model.editSettings.editMode||0==r.allowEditing||1==r.isPrimaryKey)){var c=i.getIndexByRow(h.closest("tr")),u=i.getRowByIndex(c),p=i._currentJsonData[c];i.model.scrollSettings.allowVirtualScrolling&&(i.model.scrollSettings.enableVirtualization?(o=i._getSelectedViewData(c,h),p=o.data,c=o.rowIndex):(l=c%i.model.pageSettings.pageSize,a=(parseFloat(u.attr("name"))-(this.model.scrollSettings.enableVirtualization?1:0))/i.model.pageSettings.pageSize+1,p=i._virtualLoadedRecords[a][l])),d={rowIndex:c,row:u,data:p,cell:h,cellIndex:n,columnName:r.headerText,cellValue:h.text()},i._trigger(s,d)}},_invokeRecordClick:function(e,t){this._recordClickProcess(e,t,"recordClick")},_recordClick:function(i){this._click++;var s=this,n=null;1==s._click?e.inArray("recordClick",this.model.serverEvents)!==-1&&e.inArray("recordDoubleClick",this.model.serverEvents)!==-1?n=setTimeout(function(){s._click=0,s._invokeRecordClick(i,s)},400):(s._click=0,t.isNullOrUndefined(n)||clearTimeout(n),s._invokeRecordClick(i,s)):2==s._click&&(t.isNullOrUndefined(n)||clearTimeout(n),s._click=0)},_headerMouseDown:function(t){if(e(t.target).hasClass("e-headercelldiv")&&!e(t.target).parent().hasClass("e-grouptopleftcell")||e(t.target).hasClass("e-headercell")){var i=e(t.target).hasClass("e-headercelldiv")?e(t.target).parent():e(t.target);this.model.enableHeaderHover&&i.removeClass("e-hover e-headercell-hover").addClass("e-headercellactive e-active")}if(this.model.allowResizing)return this._resizer._mouseDown(t)},_contentMouseDown:function(i){var s,n,r;e(i.target).closest("td").hasClass("e-selectionbackground")||e(i.target).closest("tr").length&&(s="touchstart"==i.type?i.originalEvent.touches[0].pageX:i.pageX,n="touchstart"==i.type?i.originalEvent.touches[0].pageY:i.pageY,this._dragDiv=t.buildTag("div.e-griddragarea","",{position:"absolute",width:"0px",height:"0px"}),this.getContent().append(this._dragDiv),r=e(i.target).closest("tr.e-row"),r.length||(r=e(i.target).closest("tr.e-alt_row")),this._startIndex=r.length?this.getIndexByRow(r):null,this._on(e(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._on(this.element,"contextmenu",function(e){e.preventDefault()}),this._on(e(document),"touchend mouseup",this._mouseUpDragHandler),this._startDrag={_x:s,_y:n})},_mouseMoveDragHandler:function(i){var s,n,r,o;if(i.pageY!=this._startDrag._y){s="touchmove"==i.type?i.originalEvent.touches[0].pageX:i.pageX,n="touchmove"==i.type?i.originalEvent.touches[0].pageY:i.pageY,this._selectDrag=!0;var l,a=(this._dragDiv[0].offsetLeft,this._dragDiv[0].offsetTop,this._startDrag._x),d=this._startDrag._y,h=s,c=n,u=n+2;a>h&&(l=h,h=a,a=l),d>c&&(l=c,c=d,d=l,u=n-2),this._dragDiv.height(),this._dragDiv.css({left:a,top:d,width:h-a,height:c-d}),r=e(document.elementFromPoint(s,u)),o=r.closest("tr.e-row"),o.length||(o=r.closest("tr.e-alt_row")),o.length&&(this._endIndex=this.getIndexByRow(o),t.isNullOrUndefined(this._startIndex)&&(this._startIndex=this._endIndex),this.selectRows(this._startIndex,this._endIndex))}},_mouseUpDragHandler:function(i){this._off(e(document),"touchend mouseup",this._mouseUpDragHandler),this._off(e(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._off(this.element,"contextmenu",function(e){e.preventDefault()}),i.stopPropagation(),this._selectDrag=!1,this._dragDiv.remove()},_headerHover:function(t){var i=e(t.target);"mouseover"==t.type||"mousemove"==t.type||"touchmove"==t.type||"MSPointerMove"==t.type?((this.model.allowResizing||this.model.allowResizeToFit)&&this._resizer._mouseHover(t),this.model.enableHeaderHover&&!this._dragActive&&(i.hasClass("e-headercelldiv")&&!i.parent().hasClass("e-grouptopleftcell")||i.hasClass("e-headercell"))&&(i.hasClass("e-headercelldiv")&&(i=i.parent()),this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover"),i.addClass("e-headercell-hover e-hover")),i.hasClass("e-gridtooltip")&&this._showTooltip(i),i.hasClass("e-headertooltip")&&this._showTooltip(i,!0),"mouseover"==t.type&&this._addCursor()):this.model.enableHeaderHover&&this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover")},_addCursor:function(){var e,i,s,n=this.model.allowResizing||this.model.allowResizeToFit||this.model.allowGrouping||this.model.allowFiltering||this.model.allowSorting||this.model.allowReordering||this.model.contextMenuSettings.enableContextMenu||this._allowcolumnSelection;if(n){if(this.getHeaderTable().find(".e-columnheader").removeClass("e-defaultcursor"),!(this.model.contextMenuSettings.enableContextMenu||"column"==this.model.selectionSettings.selectionMode)){for(e=[{val:this.model.allowSorting,str:"sort"},{val:this.model.allowGrouping,str:"group"},{val:this.model.allowReordering,str:"reorder"},{val:this.model.allowFiltering,str:"filter"}],i=0,s=0;s<e.length;s++)0==e[s].val&&(e.splice(s,1),s--);for(s=0;s<this.model.columns.length&&e.length>0;s++){for(j=0;j<e.length;j++)switch(e[j].str){case"sort":t.isNullOrUndefined(this.model.columns[s].allowSorting)||this.model.columns[s].allowSorting||i++;break;case"group":t.isNullOrUndefined(this.model.columns[s].allowGrouping)||this.model.columns[s].allowGrouping||i++;break;case"reorder":t.isNullOrUndefined(this.model.columns[s].allowReordering)||this.model.columns[s].allowReordering||i++;break;case"filter":t.isNullOrUndefined(this.model.columns[s].allowFiltering)||this.model.columns[s].allowFiltering||i++}isTempCol=!t.isNullOrUndefined(this.model.columns[s].template)||!t.isNullOrUndefined(this.model.columns[s].templateID),i!=e.length||isTempCol||this.getHeaderTable().find(".e-headercell").eq(s).addClass("e-defaultcursor"),i=0}}}else this.getHeaderTable().find(".e-columnheader").addClass("e-defaultcursor"),this.getHeaderTable().find(".e-headercell").removeClass("e-defaultcursor")},_colgroupRefresh:function(){var t,i,s,n;(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(t=e(this.getHeaderTable()).find("colgroup"),i=e(this.getContentTable()).find("colgroup")):(t=e(this.getHeaderTable()).find("colgroup")[0],i=e(this.getContentTable()).find("colgroup")[0]),s=e(t).clone(),n=e(i).clone(),e(i).remove(),e(t).remove(),(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(e(s[0]).prependTo(this.getHeaderTable()[0]),e(s[1]).prependTo(this.getHeaderTable()[1]),e(n[0]).prependTo(this.getContentTable()[0]),e(n[1]).prependTo(this.getContentTable()[1])):(e(s).prependTo(this.getHeaderTable()),e(n).prependTo(this.getContentTable()))},_detailColsRefresh:function(){this._$headerCols=this.getHeaderTable().children("colgroup").find("col"),this._$contentCols=this.getContentTable().children("colgroup").find("col");var e=this.model.columns.length;this._$headerCols.length>e&&this._$headerCols.splice(0,this._$headerCols.length-e),this._$contentCols.length>e&&this._$contentCols.splice(0,this._$contentCols.length-e)},_summaryColRrefresh:function(){for(var e=this.getFooterContent().find(".e-gridsummary"),t=0;t<this.columnsWidthCollection.length;t++)e.find("col").eq(t).width(this.columnsWidthCollection[t])},_headerdblClickHandler:function(e){this.model.allowResizeToFit&&this._resizer._columnResizeToFit(e),this.model.allowScrolling&&this.getScrollObject().refresh(this.model.scrollSettings.frozenColumns>0)},_mouseUp:function(e){this.model.allowResizing&&this._resizer._mouseUp(e)},_mouseMove:function(e){this.model.allowResizing&&this._resizer._mouseMove(e)},_setModel:function(i){var n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T;for(n in i)switch(n){case"enableResponsiveRow":i[n]?(this.element.addClass("e-responsive"),this.model.minWidth&&(this._removeMedia(),this._scrollerAddedOnMedia=!1),this.model.allowFiltering&&(this.element.find(".e-filterDialoge").remove(),this._renderFilterDialogs(),this._renderResponsiveFilter(),this.element.find(".e-gridtoolbar").remove())):(this.model.allowFiltering&&(e("body").find(".e-filterDialoge").remove(),this._renderFilterDialogs()),"none"==this.element.css("display")&&this.element.css("display","block"),this.element.removeClass("e-responsive"),this.model.minWidth&&this._addMedia(),this.model.allowScrolling&&(this.getScrollObject().refresh(),this.getScrollObject().isVScroll()?this.getScrollObject().isVScroll()&&(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):(this.getHeaderContent().removeClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").removeClass("e-hscrollcss")))),this._tdsOffsetWidth=[],(this.model.allowFiltering||this.model.allowSorting)&&(r=this.model.toolbarSettings.toolbarItems.indexOf("responsiveFilter"),r!=-1&&this.model.toolbarSettings.toolbarItems.splice(r,1),o=this.model.toolbarSettings.toolbarItems.indexOf("responsiveSorting"),o!=-1&&this.model.toolbarSettings.toolbarItems.splice(o,1),this.element.find(".e-gridtoolbar").remove(),this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first()));break;case"showColumnChooser":i[n]?(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._renderGridHeaderInternalDesign(this.model.columns),this._renderColumnChooser()):(l=e("#"+this._id+"ccDiv").data("ejDialog"),l.isOpened()&&e("#"+this._id+"_ccTail").remove(),a=0,t.isNullOrUndefined(this.element.find(".e-ccButton").outerHeight())||(a+=this.element.find(".e-ccButton").outerHeight()),this.element.find(".e-ccButton").remove(),e("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-a));break;case"gridLines":this.getContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this.getHeaderContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this._showHeaderGridLines(),this._showGridLines();break;case"showDeleteConfirmDialog":this.model.editSettings.showDeleteConfirmDialog=i[n],i[n]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"showConfirmDialog":this.model.editSettings.showConfirmDialog=i[n],i[n]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"pageSettings":if(d=this.getPager().ejPager("model"),t.isNullOrUndefined(i[n].currentPage)||d.currentPage!=this._currentPage()){for(h in i[n])"currentPage"!=h&&i[n][h]===d[h]&&delete i[n][h];if(e.isEmptyObject(i[n]))break;i[n].currentPage=this._currentPage(),this.getPager().ejPager("option",i[n]),this._renderPagerTemplate(this.getPager(),i[n].showDefaults),this._currentPage(this._currentPage()>d.totalPages?d.totalPages:this._currentPage()),this.refreshContent()}break;case"columns":c=i.columns,this.model.columns=[],this.columns(c,"add");break;case"allowPaging":this.model.allowPaging=i[n],i[n]&&0==this.element.children(".e-pager").length?(this.element.append(this._renderGridPager()),this.refreshContent(),this.getPager().ejPager("refreshPager")):(this.getPager().remove(),this.setGridPager(null),this.refreshContent(),"filterbar"==this.model.filterSettings.filterType&&this.model.allowFiltering&&this._createPagerStatusBar());break;case"allowSearching":this.model.allowSearching=i[n];break;case"searchSettings":e.extend(this.model.searchSetings,i[n]),this.refreshContent();break;case"allowGrouping":i[n]&&0==this.element.children(".e-groupdroparea").length?(this.model.allowGrouping=i[n],this.addGroupingTemplate(),this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),this._enableGroupingEvents(),this._headerCellgDragDrop(),this._off(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)):this.element.children(".e-groupdroparea").remove(),this.model.allowGrouping&&(t.isNullOrUndefined(i.groupSettings)||e.extend(this.model.groupSettings,i.groupSettings),this._enableGrouping());break;case"groupSettings":e.extend(this.model.groupSettings,i[n]),this.model.allowGrouping&&t.isNullOrUndefined(i.allowGrouping)&&this._enableGrouping(),t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation);break;case"cssClass":this.element.removeClass(this.model.cssClass).addClass(i[n]);break;case"allowFiltering":case"filterSettings":if("filterSettings"==n?e.extend(this.model.filterSettings,i[n]):this.model.allowFiltering=i[n],this.filterColumnCollection=[],this._$fDlgIsOpen&&this._closeFDialog(),this.model.allowFiltering){if(this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar)for(this.getHeaderTable().find(".e-filterbar").remove(),this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this._renderFiltering(),this._renderFilterBarTemplate(),this.model.filterSettings.showFilterBarStatus&&!this.model.allowPaging?this._createPagerStatusBar():this.model.allowPaging&&this.getPager().ejPager({enableExternalMessage:this.model.filterSettings.showFilterBarStatus}),u=this.getHeaderTable().find(".e-filterbar"),y=0;y<this.model.groupSettings.groupedColumns.length;y++)u.prepend(this._getEmptyFilterBarCell());else if(!p&&(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)){for(p=1,this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this.getHeaderTable().find(".e-filterbar").remove(),m=this.getHeaderTable().find(".e-columnheader").find(".e-headercell").not(".e-detailheadercell"),y=0;y<m.length;y++)g=m.eq(y).find(".e-headercelldiv").attr("ej-mappingname"),t.isNullOrUndefined(g)||(f=this.getColumnByField(g),!t.isNullOrUndefined(f)&&(t.isNullOrUndefined(f.allowFiltering)||f.allowFiltering)&&m.eq(y).addClass("e-headercellfilter").append(t.buildTag("div.e-filtericon e-icon e-filterset")));this.model.filterSettings.filterType==t.Grid.FilterType.Excel?(this._isExcelFilter=!0,this._renderExcelFilter()):this._isExcelFilter&&(this._isExcelFilter=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this.model.filterSettings.filterType==t.Grid.FilterType.Menu&&this._renderFilterDialogs(),this.model.filterSettings.filteredColumns=[],this.refreshContent()}this._enableFilterEvents()}else this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar?this.getHeaderTable().find(".e-filterbar").remove():(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)&&this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),(this._isExcelFilter||this._excelFilterRendered)&&(this._isExcelFilter=this._excelFilterRendered=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this.model.filterSettings.filteredColumns=[],this.refreshContent();this.model.isResponsive&&this.model.allowScrolling&&(_={},_.requestType="filtering",this._refreshScroller(_));break;case"enableRowHover":this.model.enableRowHover=i[n],this._enableRowHover();break;case"allowScrolling":case"scrollSettings":if(b=this.getContent(),"allowScrolling"!=n){if(!t.util.isNullOrUndefined(i.scrollSettings)){if(e.isEmptyObject(i.scrollSettings))break;t.util.isNullOrUndefined(i.scrollSettings.enableVirtualization)||t.util.isNullOrUndefined(i.scrollSettings.allowVirtualScrolling)||(i.scrollSettings.allowVirtualScrolling=i.scrollSettings.enableVirtualization),e.extend(this.model.scrollSettings,i.scrollSettings)}this._initHeight=this.model.scrollSettings.height,this._isHeightResponsive="100%"==this.model.scrollSettings.height,this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this.model.currentIndex=1,this.model.scrollSettings.enableVirtualization?(this._virtualRowCount=Math.round(this.model.scrollSettings.height/this.getRowHeight())+1,this._refreshVirtualViewDetails(),this._refreshVirtualViewData()):(this._createPagerStatusBar(),this._showPagerInformation(this.model.pageSettings))),i.scrollSettings.frozenColumns!==s||i.scrollSettings.frozenRows!==s||i.scrollSettings.allowVirtualScrolling!==s||i.scrollSettings.virtualScrollMode!==s||i.scrollSettings.enableVirtualization!=s?(S=this.model,S.query=this.commonQuery.clone(),this._selectedRow()!=-1&&this.clearSelection(this._selectedRow()),i.scrollSettings.virtualScrollMode!=s&&(S.pageSettings.currentPage=1),this.element.ejGrid("destroy").ejGrid(S)):(t.util.isNullOrUndefined(i.allowScrolling)||(this.model.allowScrolling=i.allowScrolling),t.util.isNullOrUndefined(b.data("ejScroller"))||b.ejScroller("destroy"),this.model.allowScrolling?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this._originalScrollWidth=this.model.scrollSettings.width,this._renderScroller(),this.setWidthToColumns(),t.util.isNullOrUndefined(b.data("ejScroller"))||this.getScrollObject().refresh(),this.refreshScrollerEvent()):(this.element.children(".e-gridheader").removeClass("e-scrollcss"),0==this.element.get(0).style.width.length&&this.element.css("width","auto"),this.setWidthToColumns()),this._addLastRow())}break;case"currentIndex":this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(v=Math.ceil(i.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._refreshVirtualView(v),this._refreshVirtualViewScroller(!0)):this._scrollObject.option("scrollTop",i.currentIndex*this.getRowHeight());break;case"locale":this.model.locale=i[n],this.model.query=this.commonQuery.clone(),this._destroy(),this.element.css("margin-top","0px").addClass("e-grid"+this.model.cssClass),this._init();break;case"dataSource":for(b=this.element.find(".e-gridcontent").first(),e.isFunction(i.dataSource)||this.resetModelCollections(),1==this._gridRecordsCount&&!t.isNullOrUndefined(this._cDeleteData)&&e.inArray(this._cDeleteData[0],this._dataSource())==-1&&this.model.editSettings.allowDeleting&&(this._gridRecordsCount=this._dataSource().length),y=0;y<this.model.columns.length;y++)this.model.columns[y].template!==s&&(this._columntemplaterefresh=!0);this._refreshDataSource(this._dataSource()),this.element.children(".e-gridfooter").remove(),this.model.showSummary&&this.model.currentViewData.length>0&&this._renderGridFooter().insertAfter(b),this._gridRecordsCount&&this.model.allowFiltering&&(this._initColumns(this.model.currentViewData[0]!=s?this.model.currentViewData[0]:this.model.currentViewData.value),this._renderFilterDialogs()),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow();break;case"selectedRowIndex":this._selectedRow()!=-1&&e.inArray(this._selectedRow(),this.selectedRowsIndexes)==-1?(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())):this._selectedRow()==-1&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"selectedRowIndices":1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0?(this.model.selectedRowIndices=i[n],this._selectingMultipleRows(this.model.selectedRowIndices)):0==this._selectedMultipleRows().length&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"editType":this._selectedRow()!=-1&&e.inArray(this._selectedRow(),this.selectedRowsIndexes)==-1&&this.selectRows(this._selectedRow());break;case"editSettings":e.extend(this.model.editSettings,i[n]),this.refreshToolbar(),this.refreshContent(!0),this.refreshBatchEditMode(),this._tdsOffsetWidth=[],e("#"+this._id+"_dialogEdit").data("ejDialog")&&e("#"+this._id+"_dialogEdit").ejDialog("destroy"),e("#"+this._id+"_dialogEdit_wrapper,#"+this._id+"_dialogEdit").remove(),e("#"+this._id+"_externalEdit").remove(),this.getContentTable().find(".e-insertedrow").remove(),this.model.isEdit=!1,"normal"!=this.model.editSettings.editMode&&(this.model.editSettings.showAddNewRow=!1),this.model.editSettings.showAddNewRow||this.getContentTable().find(".e-addedrow").length&&this.cancelEdit(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),(this.model.editSettings.allowDeleting&&this.model.editSettings.showDeleteConfirmDialog||"batch"==this.model.editSettings.editMode&&this.model.editSettings.showConfirmDialog)&&t.isNullOrUndefined(this._confirmDialog)&&this._renderConfirmDialog(),this._enableEditingEvents(),this.refreshToolbar();break;case"allowResizing":this.model.allowResizing=i[n],this.model.allowResizing?(this._on(this.element,t.eventType.mouseMove,this._mouseMove),this._on(this.element,"mouseup",this._mouseUp),this._resizer=this._resizer||new t.gridFeatures.gridResize(this)):(this._off(this.element,t.eventType.mouseMove,this._mouseMove),this._off(this.element,"mouseup",this._mouseUp),this.model.allowResizeToFit||(this._resizer=null));break;case"allowResizeToFit":this.model.allowResizeToFit?(this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this._resizer=this._resizer||new t.gridFeatures.gridResize(this),this.setWidthToColumns()):(this._off(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing||(this._resizer=null));break;case"allowReordering":this.model.allowReordering=i[n],this.model.allowReordering&&this._headerCellreorderDragDrop();break;case"allowRowDragAndDrop":this.model.allowRowDragAndDrop?(this._rowsDragAndDrop(),"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this.model.allowScrolling&&this.getContent().ejScroller({thumbStart:function(){return!1}})):(this._off(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this.getContentTable().ejDroppable("destroy"),e(this.getRows()).ejDraggable("destroy"),this.getContent().ejScroller({thumbStart:null}));break;case"showSummary":case"summaryRows":if("showSummary"==n&&i[n]&&this.addSummaryTemplate(),"showSummary"!=n||i[n]){if("summaryRows"==n&&this.model.showSummary||"showSummary"==n){this.element.children(".e-gridfooter").remove(),this.element.children(".e-gridfooter").remove();var b=this.element.find(".e-gridcontent").first(),k=this.model.query.queries,D=[];for(y=0;y<k.length;y++)"onPage"===k[y].fn&&(D=k.splice(y,1));w=this.model.query,this._setSummaryAggregate(w),D.length&&w.queries.push(D[0]),this.model.currentViewData.length&&(this._isLocalData?(this._remoteSummaryData=this._dataManager.executeLocal(w).aggregates,this._renderGridFooter().insertAfter(b)):(C=this,x=this._dataManager.executeQuery(w),x.done(function(e){C.element.children(".e-gridfooter").remove(),C._remoteSummaryData=e.aggregates,C._renderGridFooter().insertAfter(b)}))),this.model.allowGrouping&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0,this.refreshContent(!0))}}else this.element.children(".e-gridfooter").remove();break;case"enableAltRow":this.model.enableAltRow=i[n],this.addInitTemplate(),this.refreshContent();break;case"toolbarSettings":e.extend(this.model.toolbarSettings,i[n]),this.element.children(".e-gridtoolbar").remove(),this.model.toolbarSettings.showToolbar&&this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first());break;case"allowSorting":this.model.allowSorting=i[n],this.model.allowSorting||this.clearSorting();break;case"selectionSettings":e.extend(this.model.selectionSettings,i[n]),this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection();break;case"sortSettings":e.extend(this.model.sortSettings,i[n]),this.refreshContent();break;case"contextMenuSettings":e.extend(this.model.contextMenuSettings,i[n]),!t.isNullOrUndefined(e("#"+this._id+"_Context").data("ejMenu"))&&e("#"+this._id+"_Context").ejMenu("destroy")&&e("#"+this._id+"_Context").remove(),this.model.contextMenuSettings.enableContextMenu&&this._renderContext();break;case"enableRTL":this.model.enableRTL=i[n],S=this.model,S.query=this.commonQuery.clone(),this.element.ejGrid("destroy"),S.enableRTL?e("#"+this._id).addClass("e-rtl"):e("#"+this._id).removeClass("e-rtl"),e("#"+this._id).ejGrid(S);break;case"enableTouch":this.model.enableTouch=i[n],this.model.enableTouch?(this._on(this.element,"swipeleft swiperight",".e-gridcontent .e-table",e.proxy(this._touchGrid,this)),this.element.removeClass("e-touch")):(this.element.addClass("e-touch"),this._off(this.element,"swipeleft swiperight",".e-gridcontent .e-table"));break;case"allowSelection":
i[n]?(this._off(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,"click",this._clickHandler),this._initSelection()):(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1);break;case"query":this.commonQuery=e.extend(!0,{},i[n]);break;case"showStackedHeader":case"stackedHeaderRows":this.model.showStackedHeader&&i.stackedHeaderRows&&i.stackedHeaderRows.length>0?(t.getObject("stackedHeaderRows.length",i)&&(this.model.stackedHeaderRows=i.stackedHeaderRows),this._refreshStackedHeader()):this.getHeaderTable().find(".e-stackedHeaderRow").remove();break;case"allowTextWrap":case"textWrapSettings":e.extend(this.model.textWrapSettings,i[n]),this._setTextWrap();break;case"rowTemplate":this.refreshContent(!0);break;case"detailsTemplate":this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?(this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels("FrozenNotSupportedException")),this._alertDialog.ejDialog("open")):(T=this.element.children(".e-gridheader"),T.find("div").first().empty().append(this._renderGridHeader().find("table")),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.setGridHeaderContent(T),this.refreshContent(!0),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.allowGrouping&&this._headerCellgDragDrop())}},resetModelCollections:function(){this.model.groupSettings.groupedColumns=[],this.model.filterSettings.filteredColumns=[],this.filterColumnCollection=[],this.model.sortSettings.sortedColumns=[],this.model.pageSettings.currentPage=this.defaults.pageSettings.currentPage},_enableGrouping:function(){var i,s,n,r,o;if(this.refreshTemplate(),this.model.groupSettings.showToggleButton)for(i=0;i<this.model.columns.length;i++)s=this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").eq(i),n=this.model.columns[i].field,e.inArray(n,this._disabledGroupableColumns)!=-1||t.isNullOrUndefined(n)||""==n||s.find(".e-gridgroupbutton").length||(e.inArray(n,this.model.groupSettings.groupedColumns)!=-1?s.append(this._getToggleButton().addClass("e-toggleungroup")):s.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.groupSettings.showToggleButton||this.getHeaderTable().find(".e-gridgroupbutton").remove(),this.element.find(".e-groupdroparea").remove(),this.model.groupSettings.showDropArea&&(this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),t.gridFeatures.dragAndDrop&&(this._groupHeaderCelldrag(),this._headerCellgDragDrop())),!t.isNullOrUndefined(this.model.groupSettings.groupedColumns.length)&&this.model.groupSettings.groupedColumns.length){for(r={},r.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],r.requestType=t.Grid.Actions.Grouping,e(".e-grid").find(".e-groupdroparea").empty(),o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[o]);for(o=0;o<this.model.groupSettings.groupedColumns.length;o++)t.isNullOrUndefined(this.getsortColumnByField(this.model.groupSettings.groupedColumns[o]))&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[o],direction:t.sortOrder.Ascending});this._processBindings(r)}},addIgnoreOnExport:function(e){"string"==typeof e?this.ignoreOnExport.push(e):this.ignoreOnExport=this.ignoreOnExport.concat(e)},addIgnoreOnToolbarServerClick:function(e){"string"==typeof e?this.ignoreOnToolbarServerClick.push(e):this.ignoreOnToolbarServerClick=this.ignoreOnToolbarServerClick.concat(e)},_decode:function(t){return e("<div/>").html(t).text()},_htmlEscape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},_mappingSelection:function(){var e,i;if(t.gridFeatures.selection&&this._enableCheckSelect){for(this.multiSelectCtrlRequest=!0,e=[],i=0;i<this._currentJsonData.length;i++)1==t.pvt.getObject(this._selectionMapColumn,this._currentJsonData[i])&&e.push(i);this.selectedRowsIndexes=[],this._selectedRow(-1),this._selectionByGrid=!0,e.length&&this.selectRows(e),this._selectionByGrid=!1}},_headerCheckUpdateAll:function(e){for(var i=[],i=this._isLocalData?this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource():this._currentJsonData,s=0;s<i.length;s++)i[s][this._selectionMapColumn]=e,this.batchChanges.changed.push(i[s]);this.batchSave()},_getForeignKeyData:function(e){var s,n,r=this,o={};for(i=0;i<this.model.columns.length;i++)this.model.columns[i].foreignKeyValue&&this.model.columns[i].dataSource&&(s=t.isNullOrUndefined(r.model.columns[i].foreignKeyField)?r.model.columns[i].field:r.model.columns[i].foreignKeyField,n=this.model.columns[i].dataSource instanceof t.DataManager?this.model.columns[i].foreignKeyData:this.model.columns[i].dataSource,n.filter(function(t){var n=e[r.model.columns[i].field],l=!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):n;t[s]==l&&(o[s]=t)}));return o},_foreignKeyBinding:function(i,s,n){var r,o,l,a=e("#"+n).ejGrid("instance");return i=a.model.columns[i],l=i.dataSource instanceof t.DataManager?i.foreignKeyData:i.dataSource,l.filter(function(e){if(t.getObject(i.foreignKeyField,e)==s)return o=t.getObject(i.foreignKeyValue,e),r="date"==i.type?new Date(o):o}),i.format&&(r=a.formatting(i.format,r,a.model.locale)),r},_checkForeignKeyBinding:function(){if(this.model.columns.length){var e,i,s,n;for(e=0,i=this.model.columns,s=i.length;e<s;e++)n=i[e],n.hasOwnProperty("foreignKeyField")&&n.dataSource instanceof t.DataManager&&this._relationalColumns.push({field:n.field,key:n.foreignKeyField,value:n.foreignKeyValue,dataSource:n.dataSource});this._$fkColumn=!0}},_setForeignKeyData:function(i){var n,r,o,l;if(this._relationalColumns.length){var a,d,h,c,u=this._relationalColumns,p=this._relationalColumns.length,m=[],g=this.model.currentViewData,f={},_=this;if(0==g.length)for(n=0,r=this.model.columns.length;n<r;n++)column=this.model.columns[n],!t.isNullOrUndefined(column.foreignKeyField)&&column.dataSource instanceof t.DataManager&&(column.foreignKeyData=[]);for(o=t.proxy(function(e){this._trigger("actionFailure",{requestType:"fetchingforeigndata",error:e.error})},this),this.element.ejWaitingPopup("model.showOnInit")||this.element.ejWaitingPopup("show"),l=0;l<p;l++)if(0 in g){if(a=u[l],f.field=a.field,f.keyField=a.key,f.valueField=a.value,f.dataSource=a.dataSource,f.query=(new t.Query).select([f.valueField,f.keyField]).foreignKey(f.keyField),h=t.distinct(g.level?g.records:g,f.keyField,!0),d=t.UrlAdaptor.prototype.getFiltersFrom(h,f.query),f.query.where(d),this._trigger("actionBegin",e.extend(f,{requestType:"fetchingforeigndata",column:this.getColumnByField(f.field)})))return;c=f.dataSource.ready===s?f.dataSource.executeQuery(f.query,null,o):f.dataSource.ready.fail(o),m.push(c)}e.when.apply(this,m).then(function(){var e,t,s,n,r,o;for(_.element.ejWaitingPopup("hide"),e=[].slice.call(arguments,0,arguments.length),s=0,n=m.length;s<n;s++)for(a=u[s],r=0,o=_.model.columns.length;r<o;r++)t=_.model.columns[r],t.foreignKeyField==a.key&&t.foreignKeyValue==a.value&&(t.foreignKeyData=e[s].result);_.initialRender?_._initGridRender():_.sendDataRenderingRequest(i)})}},_isRelationalRendering:function(e){return 0 in this._relationalColumns&&["add","beginedit","cancel"].indexOf(e.requestType)==-1}}})(jQuery,Syncfusion),function(e,t,s){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.edit={_processEditing:function(){var i,n,r,o,l,a,d,h,c,u=this._columnToSelect(),p=u.query,m=[],g=u.fields,f=[],_=this._relationalColumns,v=_.length;if(""!=this.model.query._fromTable&&p.from(this.model.query._fromTable),n=g.length,n&&f.push(this._dataManager.executeQuery(p)),0!=v)for(r=0;r<v;r++)obj=_[r],qry=(new t.Query).select([obj.key,obj.value]),i=obj.dataSource.ready===s?obj.dataSource.executeQuery(qry):obj.dataSource.ready,f.push(i);if(u.fieldsDrop.length)for(o=u.fieldsDrop.length,l=u.fieldsDrop,a=0;a<o;a++)d=[],h=this.getColumnByField(l[a]),t.isNullOrUndefined(t.getObject("editParams.fields.text",h))?m.push(l[a]):(c=h.editParams,m.push(c.fields)),m[a]instanceof Object?(d.push(m[a].text),d.push(m[a].value)):d.push(m[a]),p=(new t.Query).select(d),f.push(h.dataSource.executeQuery(p));0!=f.length?e.when.apply(this,f).then(t.proxy(function(){for(var e,i=[].slice.call(arguments,0,arguments.length),s=0,r=0,o=0,l=n,a=f.length;s<a;s++){for(;l>0;)t.createObject(g[--l],i[s].result,this._dropDownManager),e=!0;if(!e||0!=s){if(_.length!=r){obj=_[r],key=obj.key+"."+obj.value,t.createObject(key,i[s].result,this._dropDownManager),r++;continue}_.length==r&&m.length&&(m[o]instanceof Object?(t.createObject(m[o].text,i[s].result,this._dropDownManager),t.createObject(m[o].value,i[s].result,this._dropDownManager)):t.createObject(m[o],i[s].result,this._dropDownManager),o++)}}this._initiateTemplateRendering()},this)):this._initiateTemplateRendering()},_initiateTemplateRendering:function(){"normal"==this.model.editSettings.editMode?this.addEditingTemplate():"batch"==this.model.editSettings.editMode?this.addBatchEditTemplate():"dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode?this.addDialogEditingTemplate():this.addExternalDialogEditingTemplate(),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&this._startAdd()},addEditingTemplate:function(){var i,n,r,o,l,a,d,h;if(0!=this.model.columns.length){var c=t.buildTag("tbody"),u=t.buildTag("tr"),p=t.buildTag("td","",{},{colSpan:this.model.scrollSettings.frozenColumns>0?this.model.scrollSettings.frozenColumns:this.model.columns.length}),m=t.buildTag("form","",{},{id:this._id+"EditForm",class:"gridform"}),g=t.buildTag("table.e-table","",{},{cellspacing:.25}),f=t.buildTag("tbody"),_=t.buildTag("tr");for(c.append(u),u.append(p),p.append(m),i=e(document.createElement("colgroup")),m.append(g),g.append(i),f.append(_).appendTo(g),this.model.scrollSettings.frozenColumns>0&&(n=c.clone(),n.find("td").first().prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns)),r=0;r<this.model.columns.length;r++)o=t.buildTag("td.e-rowcell"),_.append(o.get(0)),("checkbox"!=this.model.columns[r].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[r].commands)&&(!this.model.columns[r].template||this.model.columns[r].template&&0!=this.model.columns[r].allowEditing&&this.model.columns[r].field)?this._initCellEditType(r,o):this.model.columns[r].template?(d={},l=this.model.columns[r].headerText,d["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(d),t.isNullOrUndefined(l)||t.isNullOrUndefined(l.match(/[^0-9\s\w]/g))||(l=l.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+l+r+"_Template").remove(),a=this._createTemplateElement(this.model.columns[r]),o.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+a.id+"')}}")):this.model.columns[r].commands&&(d={},d["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(d),e("#"+this._id+this.model.columns[r].headerText.replace(/[^a-z0-9|s_]/gi,"")+r+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[r],r),o.addClass("e-unboundcell").addClass("e-"+this.model.columns[r].headerText.replace(/[^a-z0-9|s_]/gi,"")+r).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&o.addClass("e-frozenunbound"),this._isUnboundColumn=!0),this.model.columns[r].textAlign!=s&&o.css("text-align",this.model.columns[r].textAlign),0==this.model.columns[r].allowEditing&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),this.model.columns[r].isPrimaryKey===!0&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),this.model.columns[r].isIdentity===!0&&(o.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[r].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),h=e(document.createElement("col")),this.model.columns[r].priority&&(o.addClass("e-table-priority-"+this.model.columns[r].priority),h.addClass("e-table-priority-"+this.model.columns[r].priority)),this.model.columns[r].visible===!1&&(h.css("display","none"),o.addClass("e-hide")),t.isNullOrUndefined(this.model.columns[r].cssClass)||o.addClass(this.model.columns[r].cssClass),!this.model.groupSettings.showGroupedColumn&&o.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[r].field+"'}}e-hide{{/if}}{{/for}}")&&h.css("display","none"),i.append(h),r==this.model.scrollSettings.frozenColumns-1&&(_=n.find("tr").last(),i=n.find("colgroup"),e.templates(this._id+"_JSONFrozenEditingTemplate",c.html()),c=n));e.templates(this._id+"_JSONEditingTemplate",c.html())}},addDialogEditingTemplate:function(){var i,n,r,o;if(0!=this.model.columns.length){var l,a,d,h,c,u=t.buildTag("div"),p=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),m=t.buildTag("table","",{},{cellspacing:"14px"});for(i=0;i<this.model.columns.length;i++)("checkbox"!=this.model.columns[i].type||this._isMapSelection)&&("dialog"==this.model.editSettings.editMode?(h="tr",c="td"):h=c="div",l=t.buildTag(h),a=t.buildTag(c,"",{"text-align":"right"}).addClass("e-label"),d=t.buildTag(c,"",{"text-align":"left"}).addClass("e-rowcell"),this.model.columns[i].priority&&"inlineform"==this.model.editSettings.editMode&&l.addClass("e-table-priority-"+this.model.columns[i].priority),l.append(a.get(0)).append(d.get(0)),this.model.columns[i].headerText==s&&(this.model.columns[i].headerText=this.model.columns[i].field),a.append("<label for='"+this.model.columns[i].field+"'>"+this.model.columns[i].headerText+"</label>"),t.isNullOrUndefined(this.model.columns[i].commands)&&(!this.model.columns[i].template||this.model.columns[i].template&&0!=this.model.columns[i].allowEditing&&this.model.columns[i].field)?this._initCellEditType(i,d):this.model.columns[i].template?(o={},n=this.model.columns[i].headerText,o["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(o),t.isNullOrUndefined(n)||t.isNullOrUndefined(n.match(/[^0-9\s\w]/g))||(n=n.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+n+i+"_Template").remove(),r=this._createTemplateElement(this.model.columns[i]),d.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+r.id+"')}}")):this.model.columns[i].commands&&(o={},o["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(o),e("#"+this._id+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[i],i),d.addClass("e-unboundcell").addClass("e-"+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&d.addClass("e-frozenunbound"),this._isUnboundColumn=!0,l.addClass("e-hide")),0==this.model.columns[i].allowEditing&&d.find(".e-field").attr("disabled",!0).addClass("e-disable"),this.model.columns[i].isIdentity===!0&&(d.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[i].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),this.model.columns[i].visible===!1&&l.addClass("e-hide"),t.isNullOrUndefined(this.model.columns[i].cssClass)||d.addClass(this.model.columns[i].cssClass),"dialog"==this.model.editSettings.editMode?(p.append(m),m.append(l)):p.append(l),p.appendTo(u),this.model.columns[i].isPrimaryKey===!0&&(d.find(".e-field").attr("disabled",!0).addClass("e-disable"),this._primaryKeys.push(e.trim(this.model.columns[i].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));"dialog"==this.model.editSettings.editMode&&p.append(m),u=this.renderDiaglogButton(p,u),e.templates(this._id+"_JSONDialogEditingTemplate",u.html())}},_editEventTrigger:function(e){if("save"==e.requestType||"delete"==e.requestType){var i={data:e.data,previousData:e.previousData,action:e.action!==s?e.action:e.requestType};t.isNullOrUndefined(e.foreignKeyData)||(i.foreignKeyData=e.foreignKeyData),this._trigger("end"+i.action.charAt(0).toUpperCase()+i.action.slice(1),i)}},_compiledDropDownTemplate:function(i,s,n,r){var o,l,a={_gridFormatting:this.formatting};return e.views.helpers(a),o=t.buildTag("select"),l=t.buildTag("option",null!=r?"{{:~_gridFormatting('"+r+"',"+s+",'"+this.model.locale+"')}}":"{{:"+s+"}}",{},{value:"{{:"+i+"}}"}),o.append(l),e.templates(o.html())},_initCellEditType:function(i,n){var r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x=this.model.columns[i].field;this.model.columns[i].foreignKeyValue&&(this.model.columns[i].editType="dropdownedit"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(v=e.inArray(this.model.columns[i].field,this._dataSource().adaptor.value))!=-1&&(r=this._dataSource().adaptor.value[v],o=this._dataSource().adaptor.key[v]),this.model.columns[i].editTemplate&&(this.model.columns[i].editType="edittemplate"),t.isNullOrUndefined(this.model.columns[i].editType)&&(this.model.columns[i].editType="date"==this.model.columns[i].type||"datetime"==this.model.columns[i].type?this.model.columns[i].type+"picker":"stringedit"),this.model.isResponsive&&n.attr("data-cell",this._decode(this.model.columns[i].headerText));var S=(x||"").split("."),T=S.length-1,k="";for(t.isNullOrUndefined(x)||(x=x.replace(/[^a-z0-9\s_]/gi,""));T;)k+="(",T--;switch(this.model.columns[i].editType){case"edittemplate":l=this.model.columns[i].editTemplate.create,"string"==typeof l?(a=t.util.getObject(l,window),d=e.isFunction(a)?e(a()).attr({id:this._id+x,name:this.model.columns[i].field}):1==e(l).length&&"SCRIPT"==e(l).get(0).tagName?e(e(l).html()).attr({id:this._id+x,name:this.model.columns[i].field}):e(l).attr({id:this._id+x,name:this.model.columns[i].field})):d=e(l()).attr({id:this._id+x,name:this.model.columns[i].field}),n.append(d);break;case"stringedit":n.html(t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{html:"+k+"#data['"+S.join("'] || {})['")+"']}}",id:this._id+x,name:this.model.columns[i].field}));break;case"booleanedit":n.html('{{if #data["'+S.join('"]["')+'"]}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+x+" name="+this.model.columns[i].field+' checked="checkbox"></input>{{else}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+x+" name="+this.model.columns[i].field+" > {{/if}}"),"normal"==this.model.editSettings.editMode&&n.addClass("e-boolcell");break;case"numericedit":h=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:"+k+"#data['"+S.join("'] || {})['")+"']}}",id:this._id+x,name:this.model.columns[i].field}),n.append(h);break;case"datepicker":case"datetimepicker":c=t.buildTag("input.e-"+this.model.columns[i].editType+" e-field","",{},{type:"text",value:"{{:"+k+"#data['"+S.join("'] || {})['")+"']}}",id:this._id+x,name:this.model.columns[i].field}),n.append(c);break;case"dropdownedit":if(u=this.model.columns[i],p=[],t.isNullOrUndefined(u.dataSource)){if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==r&&(data=this.model.dataSource.adaptor.foreignData[v],$foreignkeyfield=this.model.dataSource.adaptor.key[v],$foreignkeyvalue=this.model.dataSource.adaptor.value[v],p=data),g=u.field,t.isNullOrUndefined(t.getObject(g,this._dropDownManager)))return;if(m=t.getObject(g,this._dropDownManager),f=0 in m&&"object"==typeof m[0],_=_=t.dataUtil.mergeSort(t.distinct(m,f?g:s,!f&&s)),0==p.length)if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==r)for(v=0;v<_.length;v++)p.push({text:_[v][0],value:_[v][1]});else for(v=0;v<_.length;v++)p.push({text:_[v],value:_[v]})}else if(t.isNullOrUndefined(u.foreignKeyField)&&u.dataSource instanceof t.DataManager){var g=u.field,D=t.getObject(g,this._dropDownManager),f=0 in D&&"object"==typeof D[0],_=_=t.dataUtil.mergeSort(t.distinct(D,f?g:s,!f&&s));if(t.isNullOrUndefined(t.getObject("editParams.fields.text",u))||(p=D),0==p.length)for(v=0;v<_.length;v++)p.push({text:_[v],value:_[v]})}else p=!t.isNullOrUndefined(u.foreignKeyField)&&u.field in this._dropDownManager?t.getObject(u.foreignKeyField+"."+u.foreignKeyValue,this._dropDownManager):u.dataSource;y=t.isNullOrUndefined(u.foreignKeyField)?u.field:u.foreignKeyField,u.foreignKeyValue?b=this._compiledDropDownTemplate(y,u.foreignKeyValue,u.type,u.format):this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==r?b=this._compiledDropDownTemplate($foreignkeyfield||"value",$foreignkeyvalue||"text",u.type,u.format):(w=t.getObject("editParams.fields.value",u)||"value",C=t.getObject("editParams.fields.text",u)||"text",b=this._compiledDropDownTemplate(w,C,u.type,u.format)),n.get(0).innerHTML=!t.isNullOrUndefined(u.editParams)&&this._dataSource()instanceof t.DataManager&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==r?"<input data-value='{{:"+o+"}}'/>":["<select>",b.render(p),"</select>"].join(""),n.find("select,input").prop({id:this._id+x,name:u.field}).addClass("e-field e-dropdownlist")}},addBatchEditTemplate:function(){if(0!=this.model.columns.length){for(var i,s=t.buildTag("div","",{display:"none"},{id:this._id+"_BulkEditTemplate"}),n=0,r=this.model.columns.length;n<r;n++)(t.isNullOrUndefined(this.model.columns[n].commands)&&t.isNullOrUndefined(this.model.columns[n].template)||this.model.columns[n].template&&0!=this.model.columns[n].allowEditing&&this.model.columns[n].field)&&(i=t.buildTag("div","",{},{id:this.model.columns[n].field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit"}),this._initCellEditType(n,i),s.append(i)),this.model.columns[n].isPrimaryKey===!0&&(this._primaryKeys.push(e.trim(this.model.columns[n].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),this.model.columns[n].isIdentity===!0&&(i.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[n].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort()));s.children().length&&(this._bulkEditTemplate=s)}},addExternalDialogEditingTemplate:function(){var i,s,n,r,o;if(0!=this.model.columns.length){for(i=t.buildTag("td","",{"text-align":"left"}).addClass("e-rowcell"),s=0;s<this.model.columns.length;s++)("checkbox"!=this.model.columns[s].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[s].commands)&&!t.isNullOrUndefined(this.model.columns[s].template)&&0!=this.model.columns[s].allowEditing&&this.model.columns[s].field&&!t.isNullOrUndefined(this.model.columns[s].editTemplate)&&this._initCellEditType(s,i),this.model.columns[s].isPrimaryKey===!0&&(this._primaryKeys.push(e.trim(this.model.columns[s].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));n=t.buildTag("div","",{display:"none"}),r=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),"dialogtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.dialogEditorTemplateID?o=this.model.editSettings.dialogEditorTemplateID:"externalformtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.externalFormTemplateID?(o=this.model.editSettings.externalFormTemplateID,r.addClass("e-display")):(o=this.model.editSettings.inlineFormTemplateID,r.addClass("e-display")),r.html(e(o).html()),n=this.renderDiaglogButton(r,n),e.templates(this._id+"_JSONdialogTemplateMode",n.html())}},_editdblClickHandler:function(t){var i=e(t.target);i.closest(".e-grid").attr("id")===this._id&&(i.hasClass("e-rowcell")||i.closest("td").hasClass("e-rowcell"))&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&(this._$currentTr=this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?this.getRowByIndex(i.closest("tr").index()):i.closest("tr"),this.startEdit(this._$currentTr))},_columnToSelect:function(){for(var i=[],s=[],n=this.model.columns,r=0;r<this.model.columns.length;r++)this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&e.inArray(this.model.columns[r].field,this._dataSource().adaptor.value)!=-1&&t.isNullOrUndefined(this.model.columns[r].editType)&&(this.model.columns[r].editType="dropdownedit"),this.model.columns[r].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(this.model.columns[r].dataSource)&&i.push(this.model.columns[r].field),n[r].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(n[r].foreignKeyField)&&n[r].dataSource instanceof t.DataManager&&s.push(this.model.columns[r].field);return i.length?{query:t.Query().select(i),fields:i,fieldsDrop:s}:{query:t.Query(),fields:[],fieldsDrop:s}},_renderExternalForm:function(){var e=t.buildTag("div","",{display:"none"},{id:this._id+"_externalEdit",class:"e-form-container"}),i=t.buildTag("div","","",{id:this._id+"_eFormHeader",class:"e-form-titlebar"}),s=t.buildTag("span","","",{class:"e-form-title"}),n=t.buildTag("div","","",{id:this._id+"_eFormToggleBtn",class:"e-form-togglebtn"}),r=t.buildTag("span","","",{class:"e-form-toggle-icon e-icon"});n.append(r),i.append(s).append(n);var o=t.buildTag("div","","",{id:this._id+"_eFormContent",class:"e-form-content"}),l=t.buildTag("div","","",{id:this._id+"_externalForm",class:"e-externalform"}),a=t.buildTag("div","","",{class:"e-externalformedit"});return l.append(a),o.append(l),e.append(i).append(o)},_buttonClick:function(t){if("close"==t.type){if(!this.model.isEdit)return;return this.model.isEdit=!1,this.element.ejGrid("cancelEdit"),void this.refreshToolbar()}if(t.keyCode!==s&&13!=t.keyCode||null==this.model)return!0;"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?t.target.id=="EditDialog_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="EditDialog_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_dialogEdit").ejDialog("close")):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?e(t.target).hasClass("e-form-toggle-icon")?(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):t.target.id=="EditExternalForm_"+this._id+"_Save"?this.element.ejGrid("endEdit").length!==s&&e("#"+this._id+"_externalEdit").css("display","none"):t.target.id=="EditExternalForm_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?t.target.id=="InlineEditForm_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="InlineEditForm_"+this._id+"_Cancel"&&this.element.ejGrid("cancelEdit"):this.element.ejGrid("cancelEdit")},_enableEditingEvents:function(){this.model.editSettings.allowEditing||this.model.editSettings.allowAdding?(this.model.editSettings.allowEditing&&"batch"!=this.model.editSettings.editMode&&this.model.editSettings.allowEditOnDblClick?this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent",this._editdblClickHandler):(this._off(this.element,"dblclick",".e-gridcontent"),this._off(this.element,"doubletap",".e-gridcontent")),this._off(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this._on(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel",this._buttonClick):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?(this._on(e("#"+this._id+"_externalEdit"),"click ","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel",this._buttonClick),e(this.element).on("click",".e-form-toggle-icon",e.proxy(this._buttonClick,this))):"batch"==this.model.editSettings.editMode?(this._on(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!0):"inlineform"!=this.model.editSettings.editMode&&"inlineformtemplate"!=this.model.editSettings.editMode||e(this.element).on("click ","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel",e.proxy(this._buttonClick,this)),"batch"!=this.model.editSettings.editMode&&this._batchEnabled&&(this._off(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!1)):(this._off(e("#"+this._id+"_dialogEdit"),"click","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),e(this.element).off("click",".e-icon"),this._off(e("#"+this._id+"_externalEdit"),"click","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel"),e(this.element).off("click",".e-form-toggle-icon"),e(this.element).off("click","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel"))},_multiRowDelete:function(){var e,i,s={};if(s.added=[],s.deleted=[],s.changed=[],s.deleted=this.getSelectedRecords(),e={},e.data=this.getSelectedRecords(),e.tr=this.getSelectedRows(),i=this._getForeignKeyData(e.data),t.isNullOrUndefined(i)||(e.foreignKeyData=i),e.requestType="delete",this._trigger("actionBegin",e))return!0;this._sendBulkReuqest(s,e)},deleteRow:function(i){var n,r,o,l,a,d,h;if(this.model.editSettings.allowDeleting&&(!this.model.isEdit||"batch"==this.model.editSettings.editMode||this.model.editSettings.showAddNewRow)){if(this.model.editSettings.showDeleteConfirmDialog&&!this._confirmDialog.is(":visible"))return this._cDeleteData=i,void this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open");if(e.isArray(i))this.selectRows(i),this._multiRowDelete();else if("batch"==this.model.editSettings.editMode)this._bulkDelete(this.getIndexByRow(i));else{if(0==this._primaryKeys.length&&!this.model.editSettings.allowEditing&&!this.model.editSettings.allowAdding)for(o=0;o<this.model.columns.length;o++)this.model.columns[o].isPrimaryKey===!0&&(this._primaryKeys.push(e.trim(this.model.columns[o].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort()));if(this._selectedRow()==-1&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.DeleteOperationAlert);for(t.isNullOrUndefined(i)&&(i=this.model.scrollSettings.enableVirtualization?this.getContentTable().find("tr[aria-selected='true']"):this.getRowByIndex(this._selectedRow())),this._primaryKeyValues=[],this._getPrimaryKeyValues(i),n=t.DataManager(this._currentJsonData),r=new t.Query,o=0;o<this._primaryKeys.length;o++)r=r.where(this._primaryKeys[o],t.FilterOperators.equal,this._primaryKeyValues[o]);if(currentData=n.executeLocal(r),l={},l.tr=i,l.data=currentData[0],a=this._getForeignKeyData(l.data),t.isNullOrUndefined(a)||(l.foreignKeyData=a),l.requestType=t.Grid.Actions.Delete,this._trigger("actionBegin",l))return!0;this._cDeleteData=currentData,
(!t.isOnWebForms||!this.model.serverEvents||this.model.serverEvents.indexOf("endDelete")==-1)&&this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor?(d=this._dataManager.remove(this._primaryKeys[0],this._primaryKeys.length?t.getObject(this._primaryKeys[0],currentData[0]):null,this.model.query),h=this,e.isFunction(d.promise)?(d.done(function(){h._processBindings(l),h._primaryKeyValues=[],h._cDeleteData=null}),d.fail(function(e){l.error=e,h._trigger("actionFailure",l)})):this._processBindings(l)):this._processBindings(l),d!=s&&e.isFunction(d.promise)||(this._primaryKeyValues=[],this._cDeleteData=null)}}},_htmlEncode:function(e){return str=e,t.isNullOrUndefined(str)||(str=isNaN(str)?str.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):str),str},startEdit:function(i){if(this.model.editSettings.allowEditing&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||!this._excludeDetailRows().hasClass("e-editedrow"))&&!this.element.ejWaitingPopup("model.showOnInit")){if(this._selectedRow()==-1&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.EditOperationAlert);if(this.model.scrollSettings.enableVirtualization&&t.isNullOrUndefined(i)&&(i=this.getContentTable().find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(this._currentTrIndex=this._selectedRow(),this._$currentTr=this.getRowByIndex(this._currentTrIndex)):(this._currentTrIndex=this.getIndexByRow(i),this._$currentTr=i),!e(this._$currentTr).is(":visible"))return!1;this._primaryKeyValues=[],this._getPrimaryKeyValues(this._$currentTr);var s=this._editedData=this._currentJsonData[this._currentTrIndex],n={row:this._$currentTr,rowIndex:this._currentTrIndex,primaryKey:this._primaryKeys,primaryKeyValue:this._primaryKeyValues,rowData:s};if(this._trigger("beginEdit",n))return void(this._primaryKeyValues=[]);n.requestType=t.Grid.Actions.BeginEdit,this._processBindings(n)}},_getPrimaryKeyValues:function(i){var s,n,r,o,l,a,d=i.attr("name"),h=!1;for(this._lastVirtualPage=null,a=0;a<this._primaryKeys.length;a++)r=this.getColumnByField(this._primaryKeys[a]),s=this.getIndexByRow(i),n=this._currentJsonData,this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(s%=this._virtualRowCount,o=parseInt(d,32)):(s%=this.model.pageSettings.pageSize,o=parseFloat(d)/this.model.pageSettings.pageSize+1,this._currentJsonData=this._virtualLoadedRecords[o],o!=this.model.pageSettings.totalPages||this._prevPageRendered||this._virtualLoadedRecords[o].length==this.model.pageSettings.pageSize||(n=e.extend(!0,[],this._previousPageRecords),l=e.extend(!0,[],this._virtualLoadedRecords[o]),t.merge(n,l),this._lastVirtualPage=this._currentJsonData=e.extend(!0,[],n),h=!0)),n=h?n:this._virtualLoadedRecords[o],this._vCurrentTrIndex=s,this._currentVIndex=o),this._primaryKeyValues.push(this._htmlEncode(t.getObject(r.field,n[s])))},_startAdd:function(){var i,s,n,r,o,l,a,d,h,c;if(this.model.editSettings.allowAdding)if(this._isAddNew=!0,"batch"==this.model.editSettings.editMode)this._bulkAddRow();else{for(i={},s=this.model.columns,o=0;o<s.length;o++)t.isNullOrUndefined(this.model.parentDetails)||s[o].field!=this.model.parentDetails.parentKeyField||(s[o].defaultValue=this.model.parentDetails.parentKeyFieldValue),!t.isNullOrUndefined(s[o].field)&&s[o].field.indexOf(".")>0?t.createObject(s[o].field,s[o].defaultValue||"",i):i[s[o].field]=t.isNullOrUndefined(s[o].defaultValue)?"date"==s[o].type||"datetime"==s[o].type?null:"":s[o].defaultValue;if(n={},r={},n.data=i,this.model.editSettings.editMode.indexOf("template")!=-1)for(o=0;o<this.model.columns.length;o++)t.isNullOrUndefined(this.model.columns[o].field)||this.model.columns[o].field.indexOf(".")==-1||(l=this.model.columns[o].field.split("."),t.createObject(this.model.columns[o].field,n.data[this.model.columns[o].field],r),n.data[l[0]]=r,delete n.data[this.model.columns[o].field]);a=this._getForeignKeyData(n.data),t.isNullOrUndefined(a)||(n.foreignKeyData=a),n.requestType="add",this.clearSelection(),this.model.scrollSettings.allowVirtualScrolling&&(this._currentVIndex=null,this._lastVirtualPage=null,this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(1):this._virtualLoadedRecords[1]?this._currentPage(1):this.gotoPage(1),this.getScrollObject().scrollY(0)),d=this._processBindings(n),d||(this.model.editSettings.showAddNewRow?this._selectedRow(-1):this._selectedRow(0)),h=this.model.groupSettings.groupedColumns.length,h>1&&(c=this.getContentTable().find(".e-addedrow").find("table").find("colgroup").children(),e(c.slice(0,h-1)).css("width",this.getHeaderTable().find("colgroup").children()[0].style.width))}},endEdit:function(){var i,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v;if(this.model.isEdit){if(o=0,!this.editFormValidate())return!0;if(l={},"batch"==this.model.editSettings.editMode)this.saveCell();else{for(this._isAddNew&&(this._isEditChangesApplied=!0),this.model.editSettings.showAddNewRow&&(r=this.getContentTable().find(".e-editedrow")),i=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(r)||1!=r.length?document.getElementById(this._id+"EditForm"):r[0].lastChild.lastChild,n=e(i),a="normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?n.closest("tr"):n.closest("div"),a.find("td.e-rowcell").removeClass("e-validError"),i=this.model.scrollSettings.frozenColumns>0?i[0]:i,h=0;h<i.length;h++)if(!a.hasClass("e-addedrow")||!e(i[h]).hasClass("e-identity")){var b=i[h].name,y=e(i[h]),w=this.getColumnByField(b);if(!y.hasClass("e-dropdownlist e-input")||y.attr("id").indexOf("_input")==-1||!t.isNullOrUndefined(n[1])){if(b!=s&&((""==b||t.isNullOrUndefined(w))&&(b=i[h].id.indexOf("Save")!=-1||i[h].id.indexOf("Cancel")!=-1?"":i[h].id.replace(this._id,"")),""!=b&&null==l[b])){w=this.getColumnByField(b);var C=i[h].value,x=i[h].type,S=e(i[h]).is(":checked"),d=w?w.originalType:null;if(t.isNullOrUndefined(w)||"edittemplate"!=w.editType)e(i[h]).hasClass("e-datepicker")?(C=y.ejDatePicker("model.value"),this._isEditChangesApplied||(colFormat=t.isNullOrUndefined(w.format)?"{0:MM/dd/yyyy}":w.format,this.formatting(colFormat,C,this.model.locale)!=this.formatting(colFormat,this._editedData[b],this.model.locale)&&(this._isEditChangesApplied=!0))):e(i[h]).hasClass("e-datetimepicker")?(C=y.ejDateTimePicker("model.value"),this._isEditChangesApplied||(colFormat=t.isNullOrUndefined(w.format)?"{0:MM/dd/yyyy hh:mm:ss}":w.format,this.formatting(colFormat,C,this.model.locale)!=this.formatting(colFormat,this._editedData[b],this.model.locale)&&(this._isEditChangesApplied=!0))):y.is(".e-numerictextbox")?(C=y.ejNumericTextbox("getValue"),t.isNullOrUndefined(w)||"string"!=w.type||t.isNullOrUndefined(C)||(C=C.toString()),this._isEditChangesApplied||this._editedData[b]==C||(this._isEditChangesApplied=!0)):y.data("ejDropDownList")&&(C=y.ejDropDownList("getSelectedValue"),t.isNullOrUndefined(w)||t.isNullOrUndefined(w.format)||"date"!=w.type&&"datetime"!=w.type||(C=C.length>0?new Date(C):C),this._isEditChangesApplied||this._editedData[b]==C||(this._isEditChangesApplied=!0));else{if(!e(i[h]).is("#"+this._id+b))continue;c=w.editTemplate.read,y=e(i[h]),"string"==typeof c&&(c=t.util.getObject(c,window)),C=c(y),this._isEditChangesApplied||"object"!=typeof this._editedData[b]||JSON.stringify(this._editedData[b])!=JSON.stringify(C.split(","))&&(this._isEditChangesApplied=!0)}d&&(C="number"==d?+C:"boolean"==d?C===this.localizedLabels.True:"date"===d?new Date(C):C),null==w?C=!isNaN(parseFloat(C))&&isFinite(C)?parseFloat(C):C:"number"==w.type&&!t.isNullOrUndefined(C)&&C.length&&(C=t.parseFloat(C,this.model.locale),this._isEditChangesApplied||this._editedData[b]==C||(this._isEditChangesApplied=!0)),"string"!=typeof C||C.length||(C=null),this._isEditChangesApplied||t.isNullOrUndefined(w)||"string"!=w.type||this._editedData[b]==C||(this._isEditChangesApplied=!0),this._isEditChangesApplied||t.isNullOrUndefined(w)||"date"!=w.type||"stringedit"!=w.editType||null!=w.format&&this.formatting(w.format,this._editedData.OrderDate,this.model.locale)!=C&&(this._isEditChangesApplied=!0),("checkbox"!=x&&!t.isNullOrUndefined(C)&&""!==C||S)&&o++,u="checkbox"!=x||!t.isNullOrUndefined(w)&&"boolean"!=w.type?C:S,this._isEditChangesApplied||t.isNullOrUndefined(w)||"boolean"!=w.type||(p="checkbox"==x?S:JSON.parse(C),this._editedData[b]!=p&&(this._isEditChangesApplied=!0)),b.indexOf(".")!=-1?t.createObject(b,u,l):l[b]=u}h==i.length-1&&n.length>1&&0==n.index(i)&&(i=n[1],h=-1)}}if(m={data:l},g=this._getForeignKeyData(m.data),t.isNullOrUndefined(g)||(m.foreignKeyData=g),m.requestType=t.Grid.Actions.Save,m.selectedRow=this._selectedRow(),m.previousData=jQuery.extend({},this.model.currentViewData[m.selectedRow]),this._trigger("actionBegin",m))return!0;if(a.hasClass("e-editedrow")?(this._cModifiedData=l,m.action="edit"):a.hasClass("e-addedrow")&&(o&&(this._cAddedRecord=l),m.action="add"),"add"==m.action&&this.editFormValidate()&&(t.isNullOrUndefined(this.model.queryString)||(f=this.model.foreignKeyField||this.model.queryString,m.data[f]=this.model.parentDetails.parentRowData[this.model.queryString]),!o))return elements=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm"),_=t.buildTag("div"),v=elements.find("input:visible").not(".e-identity").first(),this._renderValidator(_,v),$errorMessage=t.buildTag("div.e-field-validation-error",this.localizedLabels.EmptyRowValidationMessage),$tail=e(_).find(".e-errortail"),$errorMessage.insertAfter($tail),$errorMessage.css("display","block"),!1;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this._isAddNew||this._isEditChangesApplied?(this._isEditChangesApplied=!1,this._updateAction(m)):this.cancelEdit()}}},_updateAction:function(i){var n,r;this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor?"batch"==this.model.editSettings.editMode?(this.batchChanges.added.push(i.data),this.batchSave()):(t.isNullOrUndefined(this._cModifiedData)||t.isOnWebForms&&this.model.serverEvents&&this.model.serverEvents.indexOf("endEdit")!=-1?t.isOnWebForms&&this.model.serverEvents&&this.model.serverEvents.indexOf("endAdd")!=-1||(n=this._dataManager.insert(i.data,this.model.query)):n=this._dataManager.update(this._primaryKeys[0],i.data,this.model.query),r=this,this.element.ejWaitingPopup("show"),n&&e.isFunction(n.promise)?(n.done(function(s){r.model.isEdit=!1,!t.isNullOrUndefined(s)&&e.isPlainObject(s.record)&&(e.extend(i.data,s.record),"add"==i.action&&(r._cAddedRecord=i.data),"edit"==i.action&&(r._cModifiedData=i.data)),r._processBindings(i),r._isRemoteSaveAdaptor&&(r.element.ejWaitingPopup("hide"),t.isNullOrUndefined(r._unboundRow)||i.selectedRow==r._unboundRow||"save"!=i.requestType||(r._unboundRow.find(".e-editbutton").trigger("click"),r._unboundRow=null)),r._cModifiedData=null,r._cAddedRecord=null,r._primaryKeyValues=[]}),n.fail(function(e){i.error=e&&e.error?e.error:e,r._cModifiedData=null,r._cAddedRecord=null,r.element.ejWaitingPopup("hide"),r._trigger("actionFailure",i)})):(r.model.isEdit=!1,r._processBindings(i))):this._processBindings(i),n!=s&&e.isFunction(n.promise)||(this._cModifiedData=null,this._cAddedRecord=null,this._primaryKeyValues=[])},cancelEdit:function(){var i={};i.requestType=t.Grid.Actions.Cancel,this._cModifiedData=null,this._processBindings(i),this._primaryKeyValues=[],this._currentData=null,("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")},refreshToolbar:function(){var t,i,s=e("#"+this._id+"_toolbarItems"),n=s.find("li");if(s.ejToolbar("enableItem",n),t=this.getContentTable().find(".e-editedrow"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length)this._disabledToolItems.push(n.filter("[id="+this._id+"_add]"));else for(i=0;i<n.length;i++)switch(n[i].id){case this._id+"_add":case this._id+"_edit":case this._id+"_delete":case this._id+"_responsiveFilter":case this._id+"_responsiveSorting":case this._id+"_search":this.model.isEdit?this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length||(e(n[i]).hasClass("e-hover")&&e(n[i]).removeClass("e-hover"),this._disabledToolItems.push(n[i])):(this.model.enableToolbarItems||this.model.editSettings.allowAdding||n[i].id!=this._id+"_add")&&(this.model.enableToolbarItems||this.model.editSettings.allowEditing||n[i].id!=this._id+"_edit")?this.model.enableToolbarItems||this.model.editSettings.allowDeleting||n[i].id!=this._id+"_delete"||this._disabledToolItems.push(n[i]):this._disabledToolItems.push(n[i]);break;case this._id+"_update":case this._id+"_cancel":this.model.isEdit||0!=this.getContentTable().find(".e-updatedtd.e-icon.e-gupdatenotify").length||this._isBatchDeleteApplied||(e(n[i]).hasClass("e-hover")&&e(n[i]).removeClass("e-hover"),this._disabledToolItems.push(n[i]))}s.ejToolbar("disableItem",this._disabledToolItems),s.ejToolbar("model.enableRTL",this.model.enableRTL),this._disabledToolItems=e()},_getHiddenCount:function(e){for(var t=0,i=0;i<e.length;i++)e.eq(i).hasClass("e-hide")&&t++;return t},_refreshTemplateCell:function(t,i){for(var s,n=t.find(".e-templatecell"),r=0;r<n.length;r++)s={cell:n[r],data:i,column:this.model.columns[e(n[r]).index()],rowIndex:t.index()},this._trigger("templateRefresh",s)},_edit:function(i){var s,n,r,o,l,a,d,h,c,u=this.model.scrollSettings.enableVirtualization?t.DataManager(this._virtualLoadedRecords[this._currentVIndex]):t.DataManager(this._currentJsonData),p=new t.Query;for(this.model.allowFiltering&&(this._previousFilterCount=this._filteredRecordsCount),n=0;n<this._primaryKeys.length;n++)p=p.where(this._primaryKeys[n],t.FilterOperators.equal,this._primaryKeyValues[n]);this._currentData=u.executeLocal(p);var m=document.createElement("div"),g=t.isNullOrUndefined(this.model.editSettings.titleColumn)?this._primaryKeys[0]:this.model.editSettings.titleColumn,f=e(m);if("normal"==this.model.editSettings.editMode){m.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("");var _=f.find("tr").first(),l=0,v=this.model.columns.length,b=i.row.first();this.model.scrollSettings.frozenColumns>0&&(f.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),_.splice(0,0,f.find("table").first().find("tr").first().get(0)),$currentTrLa=i.row.last(),$tempLastTR=_.last()),s=f.find("tr").first(),f.find("td").not(".e-rowcell").addClass("e-editcell e-normaledit"),this._setEditDropdownValue(f),this.model.groupSettings.groupedColumns.length>=2&&(r=i.row.find("td.e-indentcell"),f.find("tr").first().prepend(r)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(l++,f.find(".e-editcell").find("tr").prepend(i.row.find("[class*=e-detailrow]").eq(0).removeClass("e-selectionbackground e-active")),"both"!=this.model.gridLines&&f.find(".e-editcell .e-rowcell:first").addClass("e-detailrowvisible")),this.model.scrollSettings.frozenColumns>0&&(f.find(".e-editcell").get(1).colSpan=this.model.columns.length-this.model.scrollSettings.frozenColumns-i.row.last().find(".e-hide").length+l,v=this.model.scrollSettings.frozenColumns,$currentTrLa.hasClass("e-alt_row")&&$tempLastTR.addClass("e-alt_row")),f.find(".e-editcell").get(0).colSpan=v-b.find("td").not(":visible").length+l,b.hasClass("e-alt_row")&&s.addClass("e-alt_row"),b.empty().replaceWith(s.addClass("e-editedrow")),i.row=s,s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0&&($currentTrLa.empty().replaceWith($tempLastTR.addClass("e-editedrow")),i.row=$tempLastTR),this._refreshUnboundTemplate(_.find(".gridform")),this._gridRows=0==this.model.scrollSettings.frozenColumns?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row, tr.e-editedrow").toArray():e(this.getContentTable().get(0).rows).toArray(),this.model.scrollSettings.frozenColumns>0&&(this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop,!0),this._gridRows=[this._gridRows,e(this.getContentTable().get(1).rows).toArray()])}else"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(o=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,l=0,m.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(f),a=t.buildTag("tr"),d=t.buildTag("td"),a.addClass("e-editedrow"),d.addClass("e-inlineformedit"),m=e(m).clone(!0).children(),d.html(m),a.append(d),a.is(":last-child")||a.find(".e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0?(h=a.clone(),h.find("td").empty().prop("colspan",this.model.scrollSettings.frozenColumns),i.row.eq(1).after(a).end().eq(0).after(h),this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]):i.row.after(a),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr").toArray(),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&l++,this.model.scrollSettings.frozenColumns>0?d.prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-a.find("form").children().not(":visible").length-o+l):d.prop("colspan",this.model.columns.length-this._hiddenColumns.length-o+l),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.EditFormTitle+this._currentData[0][g]),i.row.find("input").attr("disabled","disabled").addClass("e-disable")):(f.addClass("e-editedrow"),m.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(f),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(m)),c={},c.cssClass=this.model.cssClass,c.enableRTL=this.model.enableRTL,c.width="auto",c.enableResize=this.phoneMode,c.close=e.proxy(this._buttonClick,this),c.content="#"+this._id,c.enableModal=!0,c.allowKeyboardNavigation=!1,c.title=this.localizedLabels.EditFormTitle+this._currentData[0][g],e("#"+this._id+"_dialogEdit").ejDialog(c),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(m)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.EditFormTitle+this._currentData[0][g]),this._externalFormPosition(),i.row.find("input").attr("disabled","disabled").addClass("e-disable")));"normal"!=this.model.editSettings.editMode&&(s=e(m)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,this.model.currentViewData[s.index()])},_setEditDropdownValue:function(i){for(var s,n,r,o,l,a,d=i.find("select.e-field"),h=i.find("input.e-field.e-dropdownlist"),c=0;c<d.length;c++){if(s={},n="",d[c].name.indexOf(".")!=-1){for(l=1;l<d[c].name.split(".").length;l++)n=n.concat("(");s[this._id+"ddlTemp"]="{{:"+n+"#data['"+d[c].name.split(".").join("'] || {})['")+"']}}"}else s[this._id+"ddlTemp"]="{{:"+d[c].name.replace(/[^a-z0-9\s_]/gi,"")+"}}";e.templates(s),a=e.render[this._id+"ddlTemp"](this._currentData),r=i.find("select:eq("+c+') option[value="'+a+'"]'),d.eq(c).data("ej-value",a),o=this.getColumnByField(d[c].name),this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&this._dataSource().adaptor.value.indexOf(o.field)!=-1&&(r=i.find("select:eq("+c+') option:contains("'+a+'")'),d.eq(c).val(r[0].value),d.eq(c).data("ej-value",r[0].value)),r.attr("selected","selected")}for(l=0;l<h.length;l++)h.eq(l).data("ej-value",t.getObject(h.eq(l).attr("name"),this._currentData[0]))},_add:function(i){var s,n,r,o,l,a,d,h,c,u,p,m,g=document.createElement("div");if(this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(0,1):this._dataSource().splice(0,1)),this._previousFilterCount=this._filteredRecordsCount,"normal"==this.model.editSettings.editMode){for(r=e(g),o=this.model.columns.length,g.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),u=e(g).find("select.e-field"),p=0;p<u.length;p++)u.eq(p).val(i.data[u[p].name]),u.eq(p).data("ej-value",i.data[u[p].name]);if(this.model.scrollSettings.frozenColumns>0&&($tempLastTR=r.find("table").first().find("tr").first(),r.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),e($tempLastTR).find("td").first().addClass("e-editcell")),n=r.find("tr").first(),l=e(g).find(".e-editcell").get(0),e(g).find("td").first().addClass("e-editcell"),this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),0!=this.model.currentViewData.length&&0!=this.getContentTable().find("td.e-rowcell").length||0!=this.model.scrollSettings.frozenColumns?(this.model.scrollSettings.frozenColumns>0&&this._renderByFrozenDesign(),a=this.getContentTable().first().find("tbody").first(),"top"==this.model.editSettings.rowPosition?a.prepend(n.addClass("e-addedrow e-normaledit")):"bottom"==this.model.editSettings.rowPosition&&a.append(n.addClass("e-addedrow e-normaledit")),this.model.scrollSettings.frozenColumns>0&&this.getContentTable().last().find("tbody").first().prepend($tempLastTR.addClass("e-addedrow e-normaledit"))):(this.getContentTable().find("tr").first().replaceWith(e(g).find("tr").first().addClass("e-addedrow e-normaledit")),0==this.getContentTable().find("tr").length&&this.getContentTable().append(e(g).find("tr").first().addClass("e-addedrow e-normaledit"))),s=this.getContentTable().find("tr.e-addedrow"),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&s.attr("name",0),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&s.find("tr").first().prepend(t.buildTag("td.e-detailrowcollapse")),d=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length){for(p=0;p<this.model.groupSettings.groupedColumns.length;p++)0==p?s.prepend(t.buildTag("td.e-indentcell")):s.find("tr").prepend(t.buildTag("td.e-indentcell"));this.model.groupSettings.groupedColumns.length>0&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)?s.find("td.e-editcell").prop("colspan",this.model.columns.length+this.model.groupSettings.groupedColumns.length-this._hiddenColumns.length-d):this.model.groupSettings.groupedColumns.length>=2?s.find("td.e-editcell").prop("colspan",this.model.columns.length+(this.model.groupSettings.groupedColumns.length-1)-this._hiddenColumns.length-d):s.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-d)}else null!=this.model.detailsTemplate||null!=this.model.childGrid?s.find(".e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-d+1):(this.model.scrollSettings.frozenColumns>0&&(s.find(".e-editcell").last().prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-$tempLastTR.find("td").not(":visible").length-d),o=this.model.scrollSettings.frozenColumns),s.find(".e-editcell").first().prop("colspan",o-n.find("td").not(":visible").length-d));s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||"bottom"!=this.model.editSettings.rowPosition||this._colgroupRefresh(),this._refreshUnboundTemplate(s.find(".gridform")),this._gridRows=this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else if("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){g.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data);var d=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,f=0,_=t.buildTag("tr"),l=t.buildTag("td");for(_.addClass("e-addedrow"),l.addClass("e-inlineformedit e-editcell"),g=e(g).clone(!0).children(),u=e(g).find("select.e-field"),p=0;p<u.length;p++)u.eq(p).val(i.data[u[p].name]),u.eq(p).data("ej-value",i.data[u[p].name]);if(l.html(g),_.append(l),_.is(":last-child")||_.find(".e-rowcell").addClass("e-validError"),d=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length)for(p=0;p<this.model.groupSettings.groupedColumns.length;p++)_.prepend(t.buildTag("td.e-indentcell"));else _.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-d);this.model.scrollSettings.frozenColumns>0?(h=_.clone(),c=l.find(".gridform").children(),h.find("td").empty().prop("colSpan",this.model.scrollSettings.frozenColumns-this._getHiddenCount(c.slice(0,this.model.scrollSettings.frozenColumns))),l.prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns-this._getHiddenCount(c.slice(this.model.scrollSettings.frozenColumns))),(0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length)&&this._renderByFrozenDesign(),this.getContentTable().first().find("tbody").first().prepend(h),this.getContentTable().last().find("tbody").first().prepend(_)):((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&f++,l.prop("colspan",this.model.columns.length-this._hiddenColumns.length-d+f),0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length?this.getContentTable().find("tr").first().replaceWith(e(_)):this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(_):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(_)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.AddFormTitle),this._refreshUnboundTemplate(e("#"+this._id+"EditForm")),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else{for(e(g).addClass("e-addedrow"),g.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data),u=e(g).find("select.e-field"),p=0;p<u.length;p++)u.eq(p).val(i.data[u[p].name]),u.eq(p).data("ej-value",i.data[u[p].name]);"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(g)),m={},m.cssClass=this.model.cssClass,m.width="auto",m.enableResize=this.phoneMode,m.content="#"+this._id,m.enableModal=!0,m.close=e.proxy(this._buttonClick,this),m.enableRTL=this.model.enableRTL,m.allowKeyboardNavigation=!1,m.title=this.localizedLabels.AddFormTitle,e("#"+this._id+"_dialogEdit").ejDialog(m),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(g)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.AddFormTitle),this._externalFormPosition())}"normal"!=this.model.editSettings.editMode&&(s=e(g)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,i.data),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager())},editFormValidate:function(){var t,i,s;return!e.isFunction(e.validator)||(this.model.scrollSettings.frozenColumns>0?(t=this.element.find(".gridform"),t.length>1?(i=t.eq(0).validate().form(),s=t.eq(1).validate().form(),!(!i||!s)):t.validate().form()):this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform").validate().form():this.element.find(".e-addedrow .gridform").validate().form():e("#"+this._id+"EditForm").validate().form())},_refreshAltRow:function(){for(var t,i=this._excludeDetailRows(),s=0;s<i.length;s++)t=e(i[s]),t.hasClass("e-alt_row")&&t.removeClass("e-alt_row"),s%2!=0?t.addClass("e-alt_row"):t.addClass("e-row")},_editCompleteAction:function(i){var s,n,r,o,l=this.element.find(".gridform");if(this.model.isEdit=!0,this.getContentTable().children("colgroup").find("col"),this.element.width(),this.setWidthToColumns(),t.Grid.Actions.Add==i.requestType){for(s=l.find(".e-field:disabled"),n=0;n<s.length;n++)r=e(s[n]).attr("name"),e(s[n]).hasClass("e-identity")||(e.inArray(r,this._disabledEditableColumns)==-1||e.inArray(r,this._primaryKeys)!==-1)&&e(s[n]).prop("disabled",!1).removeClass("e-disable");for(o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)l.find("colgroup").prepend(this._getIndentCol())}(0==this._tdsOffsetWidth.length||this.model.groupSettings.groupedColumns.length||e.inArray(0,this._tdsOffsetWidth)!=-1||this._hiddenColumns.length>0)&&this._setoffsetWidth(),this._refreshEditForm(i),
this.model.scrollSettings.frozenColumns>0&&("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&("beginedit"==i.requestType?i.row.eq(0).next().find("td").height(i.row.eq(1).next().find("td").height()):this.getContentTable().first().find("tr").first().find("td").height(this.getContentTable().last().find("tr").first().find("td").height())),this.model.scrollSettings.frozenRows>0&&"beginedit"==i.requestType&&(this._initFrozenRows(),t.getObject("_vScrollbar._scrollData",this.getScrollObject())&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns<=0&&this.getScrollObject()&&this.getScrollObject().isHScroll()&&this.getScrollObject().refresh(),e.isFunction(e.validator)&&this.initValidator()},_refreshEditForm:function(i){var n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T,k,D,I;for(this.model.editSettings.showAddNewRow&&(n=this.getContentTable().find(".e-editedrow")),r=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(n)||1!=n.length?document.getElementById(this._id+"EditForm"):n[0].lastChild.lastChild,o=!1,this.model.enableResponsiveRow&&e.isFunction(window.matchMedia)&&(a=window.matchMedia("(max-width: 320px)")),d=e(r).find("input,select,div.e-field,textarea"),h=86,(this._isUnboundColumn||null!=this.getContentTable().find(".e-templatecell"))&&"batch"!=this.model.editSettings.editMode&&(d=d.filter(function(){return!e(this).closest(".e-rowcell").hasClass("e-unboundcell")&&!e(this).closest(".e-rowcell").hasClass("e-templatecell")})),c=null,y=0;y<d.length;y++){if(u=d.eq(y),m=this.getColumnByField(t.isNullOrUndefined(u.prop("name"))?u.attr("name"):u.prop("name")),null!=m&&(l=e.inArray(m,this.model.columns)),"batch"==this.model.editSettings.editMode?h=95:"normal"==this.model.editSettings.editMode&&(h=96),"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(u.parent().css("width",t.dataUtil.max(this._tdsOffsetWidth)+"px"),p=t.max(this._tdsOffsetWidth)*(h/100)):p=this._tdsOffsetWidth[y]*(h/100),("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode||this.model.allowResizing||this.model.allowResizeToFit)&&!u.hasClass("e-checkbox")&&(p="100%"),null!=m&&l!==s&&l<this.model.columns.length&&this.model.columns[l].editTemplate)g={rowdata:"batch"==this.model.editSettings.editMode?this._batchEditRowData:this._currentJsonData[this._selectedRow()],column:this.model.columns,element:u,requestType:i.requestType,type:i.type},f=this.model.columns[l].editTemplate.write,t.isNullOrUndefined(i)||"add"!=i.requestType||(g.rowdata={}),"string"==typeof f&&(f=t.util.getObject(f,window)),f(g),this.model.columns[l].isPrimaryKey&&"beginedit"==i.requestType&&u.addClass("e-disable").attr("disabled","disabled");else if(u.hasClass("e-numerictextbox")||u.hasClass("e-datepicker")||u.hasClass("e-datetimepicker")||u.hasClass("e-dropdownlist"))_=this.getColumnByField(u.prop("name")),v=u.val(),(!t.isNullOrUndefined(a)&&a.matches||_.width&&"string"==typeof _.width&&_.width.indexOf("%")!=-1&&("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode))&&(p="100%"),u.width(p),u.hasClass("e-numerictextbox")&&(v.length&&u.attr("value",parseFloat(v)),u.prop("name",u.prop("name").replace(this._id,""))),u.hasClass("e-disable")&&u.attr("disabled","disabled");else if(u.hasClass("e-save e-button")||u.hasClass("e-cancel e-button"))u.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,width:"100","text-align":"centre",height:"35px"});else switch(u.prop("tagName")){case"INPUT":if(!t.isNullOrUndefined(m)&&m.format&&""!=u.val())switch(m.type){case"date":var v=u.val(),O=new Date(v),k=m.format.replace("{0:","").replace("}",""),R=t.format(O,k,this.model.locale);u.val(R);break;case"number":v=u.val(),k=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(m.format),"c"==k[2].toLowerCase().split("")[0]?k[2]=k[2].toLowerCase().replace("c","n"):k[2],u.val(t.format(parseFloat(v),k[2],this.model.locale))}"checkbox"!=u.attr("type")?(u.css("text-align",null!=u.attr("name")&&null!=this.getColumnByField(u.attr("name"))?this.getColumnByField(u.attr("name")).textAlign:"center"),"batch"==this.model.editSettings.editMode?(u.css("width","100%").css("height","28px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","22px")):"normal"==this.model.editSettings.editMode?(u.css("width","100%").css("height","30px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","24px")):(u.outerWidth(p).height(28),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","26px"))):u.width(p>0?u.width()>p?p:u.width():this.model.editSettings.editMode.indexOf("template")!=-1?u.width():1),"batch"!=this.model.editSettings.editMode||this._tabKey||(u.is(":checked")?u.prop("checked",!1):u.prop("checked",!0));break;case"SELECT":u.width(p).height(28)}null==m||m.visible||!m.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||u.addClass("e-hide"),u.is(":disabled")||o||u.is(":hidden")&&"object"!=typeof(u.data("ejDropDownList")||u.data("ejNumericTextbox"))||(c=u,o=!0)}for(b={},b.width="100%",b.enableRTL=this.model.enableRTL,b.cssClass=this.model.cssClass,b.watermarkText=this.localizedLabels.NumericTextBoxWaterMark,b.locale=this.model.locale,d.filter(".e-numerictextbox").ejNumericTextbox(e.extend({showSpinButton:!0},b)),b.watermarkText=this.localizedLabels.DatePickerWaterMark,d.filter(".e-datepicker").ejDatePicker(e.extend({displayDefaultDate:!0,showPopupButton:!1},b)),delete b.watermarkText,d.filter(".e-datetimepicker").ejDateTimePicker(e.extend({showPopupButton:!1},b)),d.filter(".e-dropdownlist").ejDropDownList(e.extend({enableIncrementalSearch:!0},b)),y=0;y<this.model.columns.length;y++){if(w=this.model.columns[y],!t.isNullOrUndefined(w.editParams))switch(w.editType){case t.Grid.EditingType.DateTimePicker:d.filter("#"+this._id+w.field+".e-datetimepicker").ejDateTimePicker(w.editParams);break;case t.Grid.EditingType.DatePicker:d.filter("#"+this._id+w.field+".e-datepicker").ejDatePicker(w.editParams);break;case t.Grid.EditingType.Numeric:d.filter("#"+this._id+w.field+".e-numerictextbox").ejNumericTextbox(w.editParams);break;case t.Grid.EditingType.Dropdown:d.filter("#"+this._id+w.field+".e-dropdownlist").ejDropDownList(w.editParams)}if(w.editType==t.Grid.EditingType.Dropdown&&(C=-1,this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(C=this._dataSource().adaptor.value.indexOf(w.field)),x=d.filter("#"+this._id+w.field.replace(".","")+".e-dropdownlist"),S=null,!t.isNullOrUndefined(w.dataSource)&&!t.isNullOrUndefined(w.editParams)&&t.isNullOrUndefined(w.foreignKeyField)&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&C!=-1?S=w.dataSource:t.isNullOrUndefined(w.dataSource)&&C!=-1&&!t.isNullOrUndefined(w.editParams)?S=this._dataSource().adaptor.foreignData[C]:!t.isNullOrUndefined(w.editParams)&&"fields"in w.editParams&&t.isNullOrUndefined(w.foreignKeyField)&&(S=w.dataSource),null!=S&&x.ejDropDownList({dataSource:S}),T=x.data("ej-value"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&C!=-1&&!t.isNullOrUndefined(w.editParams)?x.ejDropDownList("setSelectedText","add"==i.requestType&&t.isNullOrUndefined(w.defaultValue)?x.val(""):T):x.ejDropDownList("setSelectedValue","add"==i.requestType&&t.isNullOrUndefined(w.defaultValue)&&t.isNullOrUndefined(T)?x.val(""):T),null==w||w.visible||!w.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||w.editType==t.Grid.EditingType.Dropdown&&x.closest(".e-rowcell").find("input").addClass("e-hide")),k=null,w.format!==s&&w.format.length>0&&(D=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),I=D.exec(w.format),k=I[2]),[t.Grid.EditingType.DatePicker,t.Grid.EditingType.DateTimePicker].indexOf(w.editType)!=-1){var P=w.editType==t.Grid.EditingType.DatePicker?"datePicker":"dateTimePicker",M="ej"+P.replace(/\b\w/g,function(e){return e.toUpperCase()}),j=this._id+w.field,E=d.filter(function(t,i){return i.id==j&&(e(i).hasClass("e-datepicker")||e(i).hasClass("e-datetimepicker"))}),F={};null==k||!t.isNullOrUndefined(w.editParams)&&(w.editParams.dateFormat||w.editParams.dateTimeFormat)||(F[P.replace("Picker","")+"Format"]=k),E.hasClass("e-disable")&&(F.enabled=!1),E[M](F),"batch"==this.model.editSettings.editMode&&E[M]("show")}}null!=c&&this._focusElements(c)},_focusElements:function(e){if(e.length){var t=e;"select"==t[0].tagName.toLowerCase()&&!t.hasClass("e-field e-dropdownlist")||"input"==t[0].tagName.toLowerCase()&&!t.hasClass("e-numerictextbox")?(t.focus().select(),t[0].focus()):t.hasClass("e-field e-dropdownlist")?t.closest(".e-ddl").focus():t.hasClass("e-numerictextbox")?t.siblings("input:visible").first().select().focus():t.find("input:visible,select").first().select().focus()}},_renderToolBar:function(){var i,s,n=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),r=t.buildTag("ul");return(!t.isNullOrUndefined(this.model.toolbarSettings.toolbarItems)&&this.model.toolbarSettings.toolbarItems.length||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this._renderLi(r),n.append(r),i=t.buildTag("ul"),n.append(i),!t.isNullOrUndefined(this.model.toolbarSettings.customToolbarItems)&&this.model.toolbarSettings.customToolbarItems.length&&this._renderCustomLi(i),s={},s.click=this._toolBarClick,s.cssClass=this.model.cssClass,s.enableRTL=this.model.enableRTL,s.enableSeprator=!1,n.ejToolbar(s),n.ejToolbar("disableItem",this._disabledToolItems),this._disabledToolItems=e(),n},_renderCustomLi:function(i){for(var s,n,r,o=0;o<this.model.toolbarSettings.customToolbarItems.length;o++){switch(r=this.model.toolbarSettings.customToolbarItems[o].templateID?this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#",""):this.model.toolbarSettings.customToolbarItems[o],n=t.buildTag("li","",{},{id:this._id+"_"+r,title:r}),typeof this.model.toolbarSettings.customToolbarItems[o]){case"string":s=t.buildTag("a.e-toolbaricons e-icon","",{}).addClass(this.model.toolbarSettings.customToolbarItems[o]);break;case"object":n.attr("title",this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#","")),s=e(this.model.toolbarSettings.customToolbarItems[o].templateID).hide().html()}n.html(s),i.append(n)}},_renderLi:function(i){var s,n,r,o;for(e.isFunction(window.matchMedia)&&this.model.enableResponsiveRow&&(s=this.model.toolbarSettings.toolbarItems.indexOf("search"),s!=-1&&this.model.toolbarSettings.toolbarItems.splice(s,1),this.model.allowFiltering&&this.model.toolbarSettings.toolbarItems.push("responsiveFilter"),this.model.allowSorting&&this.model.toolbarSettings.toolbarItems.push("responsiveSorting"),s!=-1&&this.model.toolbarSettings.toolbarItems.push("search")),n=0;n<this.model.toolbarSettings.toolbarItems.length;n++)r=t.buildTag("li","",{},{id:this._id+"_"+this.model.toolbarSettings.toolbarItems[n],title:this.localizedLabels[this.model.toolbarSettings.toolbarItems[n].slice(0,1).toUpperCase()+this.model.toolbarSettings.toolbarItems[n].slice(1)]}),this._renderLiContent(r,this.model.toolbarSettings.toolbarItems[n]),o=this.model.toolbarSettings.toolbarItems[n],this.model.enableResponsiveRow&&("responsiveFilter"===o||"responsiveSorting"===o)&&(r.addClass("e-gridresponsiveicons"),r.css("display","none")),i.append(r)},_renderLiContent:function(e,i){var s,n,r,o;switch(i){case"add":s=t.buildTag("a.e-addnewitem e-toolbaricons e-icon e-addnew","",{});break;case"edit":s=t.buildTag("a.e-edititem e-toolbaricons e-icon e-edit","",{});break;case"delete":s=t.buildTag("a.e-deleteitem e-toolbaricons e-icon e-delete","",{});break;case"update":s=t.buildTag("a.e-saveitem e-toolbaricons e-disabletool e-icon e-save","",{}),this._disabledToolItems.push(e.get(0));break;case"cancel":s=t.buildTag("a.e-cancel e-toolbaricons e-disabletool e-icon e-gcancel","",{}),this._disabledToolItems.push(e.get(0));break;case"search":s=t.buildTag("a.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{}),this.model.enableResponsiveRow||(n=t.buildTag("input.e-ejinputtext e-gridsearchbar","",{},{type:"text",id:this._id+"_searchbar"}),o=t.buildTag("span.e-cancel e-icon e-hide","",{right:"1%"}),r=t.buildTag("div.e-filterdiv e-searchinputdiv","",{display:"inline-table",width:"83%"}),r.append(n).append(o),e.append(r),t.isNullOrUndefined(this.model.searchSettings.key)||n.val(this.model.searchSettings.key)),this.model.allowSearching=!0;break;case"printGrid":s=t.buildTag("a.e-print e-toolbaricons e-icon","",{});break;case"excelExport":s=t.buildTag("a.e-toolbaricons e-excelIcon e-icon","",{});break;case"wordExport":s=t.buildTag("a.e-toolbaricons e-wordIcon e-icon","",{});break;case"pdfExport":s=t.buildTag("a.e-toolbaricons e-pdfIcon e-icon","",{});break;case"responsiveFilter":s=t.buildTag("a.e-toolbaricons e-filterset e-icon","",{});break;case"responsiveSorting":s=t.buildTag("a.e-toolbaricons e-respponsiveSorting e-icon","",{})}e.append(s),"search"==i&&(this._searchBar=e,e.css("display","flex"))},_toolBarClick:function(i){var n,r,o,l=e(this.itemsContainer).closest(".e-grid"),a=l.ejGrid("instance"),d=l.attr("id");if(i.event!=s||"INPUT"!=i.target.tagName||i.currentTarget.id!=d+"_search"){e.isFunction(e.fn.ejDatePicker)&&e("#"+d+"EditForm").find(".e-datepicker").ejDatePicker("hide");var h=i.currentTarget,c=i.target,u=e.extend({},a.model);if(a.ignoreOnToolbarServerClick.length)for(n=0;n<a.ignoreOnToolbarServerClick.length;n++)delete u[a.ignoreOnToolbarServerClick[n]];if(r={itemName:e(h).attr("data-content"),itemId:h.id,currentTarget:h,target:c,itemIndex:e(h).index(),itemCurrentTarget:h.outerHTML,gridModel:u,itemTarget:c.outerHTML,toolbarData:i},!l.ejGrid("instance")._trigger("toolbarClick",r)){switch(r.itemId){case d+"_add":a._toolbarOperation(d+"_add");break;case d+"_edit":a._toolbarOperation(d+"_edit");break;case d+"_delete":a._toolbarOperation(d+"_delete");break;case d+"_update":a._toolbarOperation(d+"_update");break;case d+"_cancel":"batch"==a.model.editSettings.editMode?a.model.editSettings.showConfirmDialog?a._confirmDialog.find(".e-content").html(a.localizedLabels.CancelEdit).end().ejDialog("open"):a.cancelEdit():a._toolbarOperation(d+"_cancel");break;case d+"_search":if(a.model.enableResponsiveRow)if(t.isNullOrUndefined(a.element.find(".e-responsesearch")[0])){var p=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),m=t.buildTag("div.e-responsesearch","",{width:"95%",height:"38px","margin-top":"7px","margin-left":"6px"}),g=t.buildTag("span.e-ttoltxt","",{width:"98%","margin-left":"2%"},{id:a._id+"_search"});$a=t.buildTag("span.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{position:"absolute",right:"2%","margin-top":"1%"}),"webkit"===t.browserInfo().name&&$a.css("margin-top","-2px"),o=t.buildTag("input.e-ejinputtext","",{width:"97%",height:"30px"},{type:"search",id:a._id+"_searchInput"}),t.isNullOrUndefined(a.model.searchSettings.key)||o.val(a.model.searchSettings.key),g.append(o),g.append($a),m.append(g),p.append(m),p.ejToolbar({click:function(t){a._toolbarOperation(d+"_search",e(t.currentTarget).find("input").val())}}),o.on("keyup",function(){""!=o.val()?($a.removeClass("e-searchfind"),$a.addClass("e-cancel")):($a.removeClass("e-cancel"),$a.addClass("e-searchfind"))}),$a.click(function(){$a.hasClass("e-cancel")&&(o.val(""),$a.removeClass("e-cancel"),$a.addClass("e-searchfind"),a._toolbarOperation(d+"_search",e("#"+d+"_searchInput").val()))}),p.insertBefore(a.getHeaderContent())}else"block"==a.element.find(".e-responsesearch").css("display")?a.element.find(".e-responsesearch").css("display","none"):a.element.find(".e-responsesearch").css("display","block");else a._toolbarOperation(d+"_search",e(i.currentTarget).find("input").val());break;case d+"_printGrid":a._toolbarOperation(d+"_printGrid");break;case d+"_excelExport":a._toolbarOperation(d+"_excelExport");break;case d+"_wordExport":a._toolbarOperation(d+"_wordExport");break;case d+"_pdfExport":a._toolbarOperation(d+"_pdfExport");break;case d+"_responsiveFilter":a._toolbarOperation(d+"_responsiveFilter");break;case d+"_responsiveSorting":a._toolbarOperation(d+"_responsiveSorting")}return!1}}},_toolbarOperation:function(i,s){var n,r,o,l,a,d=this.element,h=d.ejGrid("instance"),c="batch"==h.model.editSettings.editMode,u=d.attr("id");switch(h._exportTo=h.export,i){case u+"_add":c?h._bulkAddRow():h._startAdd();break;case u+"_edit":if(c&&h.model.editSettings.allowEditing){if(h._bulkEditCellDetails.columnIndex==-1)return void alert(this.localizedLabels.EditOperationAlert);n=h.model.columns[h._bulkEditCellDetails.columnIndex].field,n&&h.editCell(h._bulkEditCellDetails.rowIndex,n)}else h.startEdit();break;case u+"_delete":if(this._selectedRow()==-1)return void alert(this.localizedLabels.DeleteOperationAlert);this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):c?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():this.deleteRow();break;case u+"_update":c&&0==e("#"+this._id+"EditForm").children().find(".e-field-validation-error").length?this.model.editSettings.showConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveConfirm).end().ejDialog("open"):this.batchSave():h.endEdit();break;case u+"_cancel":c?e("#"+u+"ConfirmDialog").ejDialog("isOpened")===!0?this._triggerConfirm():h.cancelEditCell():h.cancelEdit();break;case u+"_search":"click"==args.type&&"A"==args.target.nodeName&&d.ejGrid("search",s);break;case u+"_printGrid":this.print();break;case u+"_excelExport":h._exportTo(h.model.exportToExcelAction,"excelExporting",h.model.allowMultipleExporting);break;case u+"_wordExport":h._exportTo(h.model.exportToWordAction,"wordExporting",h.model.allowMultipleExporting);break;case u+"_pdfExport":h._exportTo(h.model.exportToPdfAction,"pdfExporting",h.model.allowMultipleExporting);break;case u+"_responsiveFilter":e("#responsiveFilter").css("display","block"),setTimeout(function(){h.element.css("display","none")});break;case u+"_responsiveSorting":for(this._sortColumns=[],this._removeSortCol=[],r=0;r<this.model.sortSettings.sortedColumns.length;r++)this._sortColumns.push({field:this.model.sortSettings.sortedColumns[r].field,direction:this.model.sortSettings.sortedColumns[r].direction});if(t.isNullOrUndefined(e("#responsiveSort")[0])){o=e("#responsiveFilter").clone().css("display","block"),o.insertAfter(this.element),o.attr("id","responsiveSort"),h._setSortingButton();var p=t.buildTag("div.btnContainer","",{width:"100%",bottom:"0px",position:"absolute"}),m=t.buildTag("input.e-resposnsiveFilterBtnLeft e-flat e-btnsub","OK",{width:"45.6%"}),g=t.buildTag("input.e-resposnsiveFilterBtnRight e-flat e-btncan","Cancel",{width:"46%"}),f=t.buildTag("div.e-resFIlterRigthIcon"),_=t.buildTag("span.e-icon e-responsiveClose e-resIcon");o.find(".e-resFilterleftIcon").remove(),o.find(".labelRes").text("Sorting"),o.find(".e-resFilterDialogHeaderDiv").append(f.append(_)),o.find(".e-resFilterDialogHeaderDiv").find(".e-resFIlterRigthIcon").click(function(){e("#responsiveSort").css("display","none"),h.element.css("display","block")}),l=t.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),a=t.buildTag("span.e-icon e-resIcon e-responsiveSortClear"),l.click(function(){o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton(!0);for(var e=0;e<h._sortColumns.length;e++)h._removeSortCol.indexOf(h._sortColumns[e].field)==-1&&h._removeSortCol.push(h._sortColumns[e].field);h._sortColumns=[],h._removeSortCol=[]}),o.find(".e-resFilterDialogHeaderDiv").prepend(l.append(a)),o.append(p),p.append(m).append(g),m.ejButton({text:"OK",type:"button",click:e.proxy(this._resSortOperation,this)}),g.ejButton({text:"Cancel",type:"button",click:function(){e("#responsiveSort").css("display","none"),h.element.css("display","block"),h._sortColumns=[],o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton()}})}else e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-button").remove(),this._setSortingButton();e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-filternone").remove(),e("#responsiveSort").css("display","block"),setTimeout(function(){h.element.css("display","none")})}return!1},_resSortOperation:function(){for(var t=[],i=0;i<this.model.sortSettings.sortedColumns.length;i++)t.push(this.model.sortSettings.sortedColumns[i].field);for(i=0;i<t.length;i++)this.removeSortedColumns(t[i]);for(i=0;i<this._sortColumns.length;i++)this.model.allowMultiSorting&&(this.multiSortRequest=!0),this.sortColumn(this._sortColumns[i].field,this._sortColumns[i].direction);e("#responsiveSort").css("display","none"),this.element.css("display","block")},_setSortingButton:function(i){var s=e("#responsiveSort"),n=this;this._sortCols=[],t.isNullOrUndefined(s.find(".e-responsivefilterColDiv").find(".e-button")[0])&&s.find(".e-responsivefilterColDiv").each(function(s,r){var o,l,a,d=t.buildTag("div","",{float:"right","margin-right":"2%","margin-top":"-1%"}),h=e(r).attr("ej-MappingName"),c=t.buildTag("button#"+h+".e-sortingBtn e-flat","");if(e(r).append(d.append(c)),o="None",l="",i)c.ejButton({text:o,type:"button",height:28,width:120,id:h,showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)});else{for(a=0;a<n.model.sortSettings.sortedColumns.length;a++)n.model.sortSettings.sortedColumns[a].field==h&&(o="ascending"==n.model.sortSettings.sortedColumns[a].direction?"Ascending":"Descending",l="Ascending"==o?"e-resIcon e-respponsiveSortingAsc":"e-resIcon e-respponsiveSortingDesc");""!=l?c.ejButton({text:o,type:"button",height:28,width:120,cssClass:"e-resSortIconBtn",id:h,prefixIcon:l,imagePosition:"imageright",contentType:"textandimage",showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)}):c.ejButton({text:o,type:"button",height:28,cssClass:"e-resSortIconBtn",width:120,id:h,showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)})}})},_sortOperation:function(t,i){var s,n,r;for(this._removeSortCol.indexOf(t)!=-1&&(this._sortColumns.splice(this._removeSortCol.indexOf(t),0),this._removeSortCol.splice(this._removeSortCol.indexOf(t),0)),s=0;s<this._sortColumns.length&&this._sortColumns[s].field!=t;s++);this.model.allowMultiSorting?(this.multiSortRequest=!0,s!=-1&&(this._sortColumns.splice(s,1),this._removeSortCol.indexOf(t)==-1&&this._removeSortCol.push(t))):(e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable"),n=e("#responsiveFilter").find(".e-responsivefilterColDiv").not(".e-responsivefilterColDiv[ej-mappingname='"+t+"']"),r=n.find(".e-button").addClass("e-disable"),r.text("None"),this._sortColumns.length>0&&(this._removeSortCol.push(this._sortColumns[0].field),this._sortColumns=[])),this._sortColumns.push({field:t,direction:i})},_resSortButClick:function(t){var i,s="",n="",r=t.model.id,o=e("#"+t.model.id).ejButton("instance");if("None"==t.model.text)s="Ascending",n="e-resIcon e-respponsiveSortingAsc",this._sortOperation(r,"ascending");else{if("Ascending"!=t.model.text){for(o.model.text="None",o.model.prefixIcon="",o.type="button",o.model.contentType="text",o._render(),i=0;i<this._sortColumns.length&&this._sortColumns[i].field!=r;i++);return this._removeSortCol.push(r),this._sortColumns.splice(i,1),void e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable")}s="Descending",n="e-resIcon e-respponsiveSortingDesc",this._sortOperation(r,"descending")}o.model.text=s,o.model.prefixIcon="e-resIcon "+n,o.model.imagePosition="imageright",o.model.contentType="textandimage",o._render()},renderDiaglogButton:function(e,i){var s,n,r,o,l;return"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s="EditExternalForm_":"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(s="InlineEditForm_",n=t.buildTag("div","","",{id:this._id+"_inlineFormTitle",class:"e-inlineform-titlebar"}),n.appendTo(i)):s="EditDialog_",r=t.buildTag("input.e-save e-button e-btnsub e-flat","",{"margin-left":"30px"},{type:"button",id:s+this._id+"_Save"}),r.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.SaveButton,width:"100"}),o=t.buildTag("input.e-cancel e-button e-btncan e-flat","",{"margin-left":"19px","margin-right":"13px"},{type:"button",id:s+this._id+"_Cancel"}),o.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.CancelButton,width:"100"}),l="dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?t.buildTag("div","","",{class:"e-editform-btn"}):t.buildTag("div"),l.append(r),l.append(o),e.appendTo(i),"dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?l.appendTo(i):e.append(l),i},_externalFormPosition:function(){var t=e(this.element).offset(),i=e(this.element).width(),s=e(this.element).height(),n=e("#"+this._id+"_externalEdit");switch(this.model.editSettings.formPosition){case"topright":e(n).find(".e-form-toggle-icon").removeClass("e-bottomleft").addClass("e-topright"),e(n).css({left:t.left+i+1+"px",top:t.top+"px",position:"absolute",width:"290px"}),e("#"+this._id+"_eFormContent").height("auto");break;case"bottomleft":e(n).find(".e-form-toggle-icon").removeClass("e-topright").addClass("e-bottomleft"),e(n).css({left:t.left+"px",top:t.top+s+1+"px"}),e("#"+this._id+"_eFormContent").width("100%")}},_setoffsetWidth:function(){var t,i,s=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm");if(0!=this._gridRecordsCount||"batch"==this.model.editSettings.editMode||0!=this.model.scrollSettings.frozenColumns)for(t="batch"==this.model.editSettings.editMode?s.closest("td"):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s.find(".e-rowcell").not(".e-unboundcell,.e-templatecell"):s.find("tr").find(".e-rowcell").not(".e-unboundcell,.e-templatecell"),i=0;i<t.length;i++)this._tdsOffsetWidth[i]=t.get(i).offsetWidth},_bulkChangesAcquired:function(){return!!(this.batchChanges.added.length>0||this.batchChanges.changed.length||this.batchChanges.deleted.length)},_renderDialog:function(){return t.buildTag("div.e-dialog e-dialog-content e-shadow e-widget-content","",{display:"none"},{id:this._id+"_dialogEdit"})},getCurrentEditCellData:function(){var i,s,n,r,o,l;if(this.model.isEdit&&e("#"+this._id+"EditForm").length){switch(i=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,"")),n=this.model.columns[this._bulkEditCellDetails.columnIndex],this._bulkEditCellDetails.cellEditType){case t.Grid.EditingType.String:case t.Grid.EditingType.Numeric:s=i.val();break;case t.Grid.EditingType.Dropdown:s=this._bulkEditCellDetails.isForeignKey?{value:i.ejDropDownList("getSelectedValue"),text:i.ejDropDownList("getValue")}:i.ejDropDownList("getSelectedValue"),this._bulkEditCellDetails.isForeignKey&&"number"==n.originalType&&""!=s.value&&(s.value=JSON.parse(s.value));break;case t.Grid.EditingType.Boolean:s=i.is(":checked");break;case t.Grid.EditingType.DatePicker:o=e.trim(i.val()),l=i.ejDatePicker("instance"),l._setDateValue(o),s=""==o?o:l.model.value;break;case t.Grid.EditingType.DateTimePicker:s=""==e.trim(i.val())?e.trim(i.val()):i.ejDateTimePicker("model.value");break;case"edittemplate":r=n.editTemplate.read,"string"==typeof r&&(r=t.util.getObject(r,window)),s=r(i)}return"string"==typeof s&&s.length&&"number"==n.type&&(s=t.globalize.parseFloat(s,this.model.locale)),s}return null},cancelEditCell:function(){if(this.model.isEdit){var i,s=this.getRows()[this._bulkEditCellDetails.rowIndex],n={};t.createObject(this._bulkEditCellDetails.fieldName,this._bulkEditCellDetails.cellValue,n),i=e(s).hasClass("e-insertedrow")?e(s).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex+this.model.groupSettings.groupedColumns.length):e(s).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex),e(i).removeClass("e-editedbatchcell").empty().html(e(e.templates[this._id+"_JSONTemplate"].render(n)).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex).innerHTML),this.model.isEdit=!1,this.element.focus()}},saveCell:function(i){var s,n,r,o,l,a;if(this.model.isEdit){if(!this.editFormValidate())return!0;var d,h,c,u,p=e("#"+this._id+"EditForm"),m=p.closest("tr"),g=p.closest("td"),f={},_=this.model.columns[this._bulkEditCellDetails.columnIndex],v=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,""));if(f={columnName:_.field,value:this.getCurrentEditCellData(),rowData:this._bulkEditCellDetails.rowData,previousValue:this._bulkEditCellDetails.cellValue,columnObject:_,cell:g,isForeignKey:this._bulkEditCellDetails.isForeignKey},!i&&this._trigger("cellSave",f))return this._focusElements(f.cell),void(this._bulkEditCellDetails.cancelSave=!0);if(this.model.allowTextWrap&&f.cell.addClass("e-nowrap"),("datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType||"datepicker"==this._bulkEditCellDetails.cellEditType)&&v[v.data("ejWidgets")[0]]("destroy"),t.isNullOrUndefined(_.format)||("date"!=_.type&&"datetime"!=_.type||t.isNullOrUndefined(f.value)||(f.isForeignKey?f.value.text=f.value.text.length>0?new Date(f.value.text):f.value.text:f.value=f.value.length>0?new Date(f.value):f.value),h=this.formatting(_.format,f.isForeignKey?!isNaN(parseFloat(f.value.text))&&isFinite(f.value.text)?parseFloat(f.value.text):f.value.text:f.value,this.model.locale),f.cell.empty().html(h)),t.createObject(this._bulkEditCellDetails.fieldName,f.isForeignKey?f.value.value:f.value,f.rowData),t.isNullOrUndefined(_.format)&&(h=f.isForeignKey?f.value.text:f.value),t.isNullOrUndefined(_.template)||(s=t.copyObject({},f.rowData),t.createObject(this._bulkEditCellDetails.fieldName,f.isForeignKey?f.value.value:f.value,s),h=e.templates(_.template).render(s)),"edittemplate"==this._bulkEditCellDetails.cellEditType?(f.value instanceof Array&&(h=f.value.join()),f.cell.empty().html(h)):"boolean"==f.columnObject.type||"booleanedit"==f.columnObject.editType?(n={},t.createObject(f.columnObject.field,f.value,n),f.cell.empty().html(e(e.templates[this._id+"_JSONTemplate"].render(n))[0].cells[this._bulkEditCellDetails.columnIndex].innerHTML)):("datepicker"!=f.columnObject.editType&&"datetimepicker"!=f.columnObject.editType||t.isNullOrUndefined(_.format))&&f.columnObject.disableHtmlEncode?f.cell.text(h).html():f.cell.empty().html(h),f.cell.removeClass("e-validError"),f.cell.hasClass("e-updatedtd")&&f.cell.addClass("e-gupdatenotify"),f.previousValue=t.isNullOrUndefined(f.previousValue)?"":"date"==_.type||"datetime"==_.type?new Date(f.previousValue):f.previousValue,d=f.isForeignKey?f.value.value:f.value,r=!1,o="bottom"==this.model.editSettings.rowPosition&&this._currentJsonData.length==this._bulkEditCellDetails.rowIndex?this._currentJsonData[this._bulkEditCellDetails.rowIndex-1]:this._currentJsonData[this._bulkEditCellDetails.rowIndex],
r=!(this._currentJsonData.length>0)||("date"!=this._bulkEditCellDetails.type&&"datetime"!=this._bulkEditCellDetails.type||t.isNullOrUndefined(this._bulkEditCellDetails.format)?("datepicker"==this._bulkEditCellDetails.cellEditType||"datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType)&&d instanceof Date&&f.previousValue instanceof Date?d.getTime()!==o[f.columnName].getTime():"number"==typeof d?d!==parseFloat(o[f.columnName]):"boolean"==typeof d?d!=o[f.columnName]:d!==o[f.columnName].toString():!(this._bulkEditCellDetails.cellValue instanceof Date)||this.formatting(this._bulkEditCellDetails.format,d)!=this.formatting(this._bulkEditCellDetails.format,o[f.columnName])),this.model.isEdit=!1,r)f.cell.addClass("e-updatedtd e-icon e-gupdatenotify"),this._enableSaveCancel(),c=t.getObject(this._bulkEditCellDetails.fieldName,f.rowData),u="string"==typeof c&&c.length?f.isForeignKey?f.value.value.toString():f.value.toString():f.isForeignKey?isNaN(parseInt(f.value.value))?f.value.value:parseInt(f.value.value):f.value,"string"!=typeof f.value||u.length||(u=null),t.createObject(this._bulkEditCellDetails.fieldName,u,f.rowData),e.inArray(f.rowData,this.batchChanges.changed)==-1&&e.inArray(f.rowData,this.batchChanges.added)==-1&&this.batchChanges.changed.push(f.rowData),this.isejObservableArray&&(l=f.cell.closest("tr").hasClass("e-insertedrow")?"insert":"update",this._refreshViewModel(f,l));else if(f.cell.removeClass("e-updatedtd e-icon e-gupdatenotify"),this._enableSaveCancel(),this.batchChanges.changed.length>0&&!f.cell.hasClass("e-editedbatchcell e-updatedtd e-icon e-gupdatenotify")&&!f.cell.parent().children().hasClass("e-updatedtd e-icon e-gupdatenotify"))for(a=0;a<this.batchChanges.changed.length;a++)f.rowData[this._primaryKeys[0]]==this.batchChanges.changed[a][this._primaryKeys[0]]&&this.batchChanges.changed.splice(a,1);m.removeClass("e-editedrow").removeClass("e-batchrow"),f.cell.removeClass("e-editedbatchcell")}},_refreshViewModel:function(i,n){var r,o,l;for(r=this._dataSource()instanceof t.DataManager?this._dataSource():t.DataManager(this._dataSource()),o=new t.Query,l=0;l<this._primaryKeys.length;l++)o=o.where(this._primaryKeys[l],t.FilterOperators.equal,this._primaryKeys.length?t.getObject(this._primaryKeys[l],i.rowData):null);var a=r.executeLocal(o),d=this._dataSource(s,!0),h=e.inArray(a[0],this._dataSource());switch(this.model.editSettings.showConfirmDialog=!1,n){case"update":case"remove":d(i.rowData,h,n);break;case"insert":d(i.rowData,0,n)}},_enableSaveCancel:function(){if(this.model.toolbarSettings.showToolbar){var e=this.getContentTable().find(".e-updatedtd.e-icon.e-gupdatenotify").length>0||this._isBatchDeleteApplied?"enableItemByID":"disableItemByID";$toolBar=this.element.find("#"+this._id+"_toolbarItems"),$toolBar.ejToolbar(e,this._id+"_update"),$toolBar.ejToolbar(e,this._id+"_cancel")}},setCellText:function(i,n,r){var o,l,a,d,h,c="string"==typeof n,u=this._excludeDetailRows(),p=0!=this.model.groupSettings.groupedColumns.length,m=this.model.scrollSettings.allowVirtualScrolling,g=this[c?"getColumnByField":"getColumnByIndex"](n),f=t.getObject(["currentViewData",p?".records":""].join(""),this.model),_={},v=m?this._dataManager:new t.DataManager(f),b=this._primaryKeys[0],y=c||t.getObject(i+"."+b,m?this._dataManager.dataSource.json:f);t.createObject(g.field,r,_),c&&(y=i,i=v.executeLocal((new t.Query).select(b)).indexOf(i),n=this.getColumnIndexByField(g.field)),m&&(l=this.model.pageSettings.pageSize,h=i%l,a=(i+l-h)/l,d=(a-1)*l,isCached=e.inArray(d,this.virtualLoadedPages)!=-1,isCached&&(o=this.getContentTable().find("tr[name="+d+"]")[h].cells[n])),canSkip=i==-1||n==-1||m&&!isCached||i>(m?this._dataSource():f).length||n>this.model.columns.length,canSkip||(o=this.model.scrollSettings.frozenColumns?this._frozenCell(i,n)[0]:o||this._excludeDetailCells(u[i])[n],r=g.format===s?r:this.formatting(g.format,r,this.model.locale),t.isNullOrUndefined(g.foreignKeyField)||t.isNullOrUndefined(g.foreignKeyValue)||(r=this._getForeignKeyData(_)[g.foreignKeyField][g.foreignKeyValue]),g.disableHtmlEncode?e(o).text(r):o.innerHTML=r,this._trigger("queryCellInfo",{cell:o,text:o.innerHTML,column:g,data:_})),b&&(t.createObject(b,y,_),this._dataManager.update(b,_))},_excludeDetailCells:function(i){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)?e(i.cells):e(i.cells).not(".e-detailrowexpand, .e-detailrowcollapse")},setCellValue:function(i,n,r){var o;if(e("#"+this._id+"EditForm").length>0&&e("#"+this._id+"EditForm").attr("id","EditForm1"),"batch"==this.model.editSettings.editMode&&!this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.frozenColumns){var l,a=this.getDataByIndex(i),d=this._excludeDetailRows()[i],h=this.getColumnIndexByField(n),c=this,u=r,p=!1,m=this.getColumnByField(n);if(l=e(d).hasClass("e-insertedrow")?e(d.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[h+this.model.groupSettings.groupedColumns.length]:e(d.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[h],!t.isNullOrUndefined(m)&&!m.isPrimaryKey&&0!=m.allowEditing){if(t.isNullOrUndefined(m.validationRules)||($form=t.buildTag("form","",{},{id:this._id+"EditForm"}),$valElem=t.buildTag("input","",{},{id:this._id+m.field,value:r}),$form.append($valElem),this.element.append($form),$form.validate({errorPlacement:function(t){return c._alertDialog||c._renderAlertDialog(),e("#"+c._id+"AlertDialog_wrapper").css("min-height",""),c._alertDialog.find(".e-content").text(t.text()),c._alertDialog.ejDialog("open"),c.element.find($form).remove(),p=!0,!0}}),this.setValidationToField(m.field,m.validationRules)),m.foreignKeyValue&&(u=this._foreignKeyBinding(h,r,this._id))==s)return this._alertDialog||this._renderAlertDialog(),e("#"+this._id+"AlertDialog_wrapper").css("min-height",""),this._alertDialog.find(".e-content").text(this.localizedLabels.ForeignKeyAlert),this._alertDialog.ejDialog("open"),void(t.isNullOrUndefined(m.validationRules)||this.element.find($form).remove());t.isNullOrUndefined(m.format)||(o=this.formatting(m.format,m.foreignKeyValue&&!isNaN(parseFloat(r))&&isFinite(r)?parseFloat(r):r,this.model.locale),u=o),t.isNullOrUndefined(m.validationRules)||(e($form).validate().form(),this.element.find($form).remove()),e("#EditForm1").attr("id",this._id+"EditForm"),p||l.innerHTML==u||(e(l).has("form").length>0&&(this.model.isEdit=!1),e(l).hasClass("e-boolrowcell")?e(l).find("input").attr("checked",u):l.innerHTML=u,e(l).addClass("e-updatedtd e-icon e-gupdatenotify"),e(l).removeClass("e-validError e-editedbatchcell"),t.createObject(n,r,a),e.inArray(a,this.batchChanges.changed)==-1&&this.batchChanges.changed.push(a),this._enableSaveCancel())}}},setDefaultData:function(i){var s,n,r,o,l,a;if(t.isNullOrUndefined(i)){for(s=[],n=this.model.columns,r=0;r<this.model.columns.length;r++)s.push(this.model.columns[r].field);for(t.isNullOrUndefined(this._bulkEditCellDetails._data)&&(this._bulkEditCellDetails._data=[]),i={},o=function(e,s){t.createObject(e,s,i)},l=0;l<s.length;l++){var d=l,h=s[l],c=n[l].type,u=t.getObject(h,this._bulkEditCellDetails._data[0]);if(h===(t.isNullOrUndefined(this.model.parentDetails)?null:this.model.parentDetails.parentKeyField)&&(this.model.columns[d].defaultValue=this.model.parentDetails.parentKeyFieldValue),t.isNullOrUndefined(this.model.columns[d].defaultValue))switch(c){case"number":o(h,0);break;case"string":o(h,null);break;case"boolean":o(h,!1);break;case"object":e.isArray(u)?o(h,[]):o(h,null);case"datetime":case"date":o(h,null)}else o(h,this.model.columns[d].defaultValue)}t.isNullOrUndefined(this.model.queryString)||(a=this.model.foreignKeyField||this.model.queryString,i[a]=this.model.parentDetails.parentRowData[this.model.queryString])}this._bulkEditCellDetails.defaultData=i},_bulkDelete:function(i){if(this.model.editSettings.allowDeleting){if(t.isNullOrUndefined(i)&&(i=this._selectedRow()),i==-1)return void alert(this.localizedLabels.DeleteOperationAlert);var s,n,r,o={};if(this.multiDeleteMode&&this.selectedRowsIndexes.length>1?(r=[],n=this.getSelectedRows(),Array.prototype.push.apply(r,this.getSelectedRecords()),Array.prototype.push.apply(this.batchChanges.deleted,this.getSelectedRecords())):(s=this.getRows()[i],n=e(s),r=this.getDataByIndex(i)),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:r,row:n},this._trigger("beforeBatchDelete",o))return;this.isejObservableArray&&this._refreshViewModel(o,"remove"),this.model.isEdit&&this.cancelEditCell(),n.hasClass("e-insertedrow")?(n.remove(),(i=e.inArray(s,this._bulkEditCellDetails.insertedTrCollection))!=-1&&(this._bulkEditCellDetails.insertedTrCollection.splice(i,1),this.batchChanges.added.splice(i,1))):(n.hide(),(0==o.rowIndex||n.hasClass("e-firstrow"))&&(n.hasClass("e-firstrow")&&this.getContentTable().find("tr").removeClass("e-firstrow"),this.getContentTable().find("tr:visible").first().addClass("e-firstrow")),e.isArray(r)||this.batchChanges.deleted.push(r)),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),this.model.allowScrolling&&this._refreshScroller(o),this._isBatchDeleteApplied=!0,this._enableSaveCancel(),this._selectedRow(-1),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:r},this._trigger("batchDelete",o)}},_bulkAddRow:function(i){var s,n,r,o,l,a,d=e("#"+this._id+"EditForm");if(d.length&&!this.editFormValidate())return!0;if(this.model.editSettings.allowAdding){if(s={},o=this.getRows(),t.isNullOrUndefined(i)||(this._bulkEditCellDetails.defaultData=i),t.isNullOrUndefined(this._bulkEditCellDetails.defaultData)&&this.setDefaultData(),s={defaultData:e.extend(!0,{},this._bulkEditCellDetails.defaultData),primaryKey:this._primaryKeys},this._trigger("beforeBatchAdd",s))return;for(n=e(e.render[this._id+"_JSONTemplate"](s.defaultData)).addClass("e-insertedrow"),null!=o&&e(o[0]).hasClass("e-alt_row")&&n.removeClass("e-alt_row"),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(n):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(n),this.model.allowScrolling&&this._refreshScroller(s),0===this._gridRecordsCount&&this.getContentTable().find("tbody .emptyrecord").first().remove(),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),l=0;l<this.model.groupSettings.groupedColumns.length;l++)n.prepend(t.buildTag("td.e-indentcell"));this._bulkEditCellDetails.insertedTrCollection.push(n.get(0)),this.batchChanges.added.push(s.defaultData),a=this._gridRows.length-1,"bottom"==this.model.editSettings.rowPosition?(r=this._findNextEditableCell(0),this.selectRows(a),this.editCell(a,this.model.columns[r].field)):(r=this._findNextEditableCell(0),this.selectRows(0),this.editCell(0,this.model.columns[r].field)),n.find(".e-rowcell").addClass("e-updatedtd e-icon e-gupdatenotify"),this._enableSaveCancel(),s={defaultData:s.defaultData},e.extend(s,{columnObject:this.model.columns[r],columnIndex:r,row:n,primaryKey:this._primaryKeys,cell:e(n[0].cells[r])}),this._trigger("batchAdd",s)}},getDataByIndex:function(t){var i,s=e(this._excludeDetailRows()[t]);return s.hasClass("e-insertedrow")?(i=e.inArray(s[0],this._bulkEditCellDetails.insertedTrCollection),this.batchChanges.added[i]):this._bulkEditCellDetails._data["top"==this.model.editSettings.rowPosition?t-this._bulkEditCellDetails.insertedTrCollection.length:t]},refreshBatchEditChanges:function(){this._bulkEditCellDetails={cellValue:null,rowIndex:-1,_data:null,columnIndex:-1,fieldName:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null,isForeignKey:!1},this.batchChanges={added:[],deleted:[],changed:[]}},refreshBatchEditMode:function(){"batch"==this.model.editSettings.editMode&&(this.refreshBatchEditChanges(),this._bulkEditCellDetails._data=e.extend(!0,[],this.getCurrentViewData()))},batchCancel:function(){this.cancelEdit()},batchSave:function(){var e={};this.saveCell(),e.batchChanges=this.getBatchChanges(),this._trigger("beforeBatchSave",e)||(e={},e.requestType="batchsave",this._sendBulkReuqest(this.getBatchChanges(),e))},_sendBulkReuqest:function(e,i){var s=this._dataManager.saveChanges(e,this._primaryKeys[0],this.model.query._fromTable,this.model.query),n=this;this._isBatchDeleteApplied=!1,this._dataManager instanceof t.DataManager&&!this._dataManager.dataSource.offline?(s.done(function(){n._processBindings(i)}),s.fail(function(e){var t={error:e.error};n._trigger("actionFailure",t)})):this._processBindings(i)},getBatchChanges:function(){return this.batchChanges},editCell:function(i,n){var r;if(!this.element.ejWaitingPopup("model.showOnInit")&&this.model.editSettings.allowEditing&&e.inArray(n,this._disabledEditableColumns)==-1){if(r=e("#"+this._id+"EditForm"),this.model.isEdit&&this.saveCell(),e.isFunction(e.validator)&&r.length&&r.validate().errorList.length)return;var o=e(this._excludeDetailRows()[i]),l=this.getColumnIndexByField(n),a=o.find(".e-rowcell").eq(l),d=this.model.columns[l],h=this.getDataByIndex(i),c={validationRules:t.isNullOrUndefined(d.validationRules)?{}:e.extend(!0,{},d.validationRules),columnName:d.field,value:t.getObject(t.isNullOrUndefined(n)?"":n,h),rowData:h,row:o,primaryKey:this._primaryKeys,columnObject:d,cell:a,isForeignKey:!t.isNullOrUndefined(d.foreignKeyValue)&&"batch"==this.model.editSettings.editMode},u=!0;if(this.model.allowTextWrap&&this.element.find(".e-rowcell").removeClass("e-nowrap"),this.model.allowScrolling&&this._refreshScroller(c),this._batchEditRowData=h,this._trigger("cellEdit",c))return;o.hasClass("e-insertedrow")&&(c.requestType="add"),(e.inArray(n,this._primaryKeys)!=-1||c.columnObject.allowEditing===!1||c.columnObject.template&&(0==c.columnObject.allowEditing||!c.columnObject.field)||c.columnObject.commands)&&(e.extend(this._bulkEditCellDetails,{cellValue:c.value,rowIndex:i,fieldName:n,rowData:c.rowData,columnIndex:l,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),u=!1),o.hasClass("e-insertedrow")&&c.columnObject.isPrimaryKey&&(u=!0),u&&(e.extend(this._bulkEditCellDetails,{rowIndex:i,cellValue:c.value,columnIndex:l,format:d.format==s?null:d.format,type:d.type,fieldName:n,cellEditType:c.columnObject.editType,rowData:h,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),this._renderBulkEditObject(c,a),o.addClass("e-editedrow").addClass("e-batchrow"),c.cell.addClass("e-editedbatchcell"),"booleanedit"==c.columnObject.editType&&c.cell.addClass("e-boolrowcell"))}},_findNextEditableCell:function(e){for(var t=this.model.columns.length,i=e;i<t;i++)if(!this.model.columns[i].template&&!this.model.columns[i].commands&&this.model.columns[i].visible)return i;return-1},_findNextCell:function(i,s){var n,r,o=[],l=this.getRows();return this.model.columns[i].template&&(this.model.columns[i].__isTemplate=!0),this.model.columns[i].commands&&(this.model.columns[i].__isCommand=!0),r=t.Predicate("visible","equal",!0).and("__isTemplate","notequal",!0).and("__isCommand","notequal",!0),e(l[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow")||(r=r.and("allowEditing","notequal",!1)),n="right"==s?this.model.columns.slice(i):this.model.columns.slice(0,i+1).reverse(),o=t.DataManager(n).executeLocal(t.Query().where(r)),0!=o.length||"left"==s&&0==this._bulkEditCellDetails.rowIndex||"right"==s&&this._bulkEditCellDetails.rowIndex+1==this.getRows().length||(n="right"==s?this.model.columns.slice(0,i):this.model.columns.slice(i).reverse(),o=t.DataManager(n).executeLocal(t.Query().where(r)),this._bulkEditCellDetails.rowIndex=o.length&&"right"==s?this._bulkEditCellDetails.rowIndex+1:this._bulkEditCellDetails.rowIndex-1),o.length?e.inArray(o[0],this.model.columns):-1},_moveCurrentCell:function(i){var s,n=this._bulkEditCellDetails.rowIndex,r=e("#"+this._id+"EditForm");if(this._bulkEditCellDetails.rowIndex==-1&&this._bulkEditCellDetails.columnIndex==-1)return!0;switch(i){case"right":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1&&this._bulkEditCellDetails.columnIndex==this.model.columns.length-1||!this.element.is(document.activeElement)&&0==r.length)return!0;this._bulkEditCellDetails.columnIndex==this.model.columns.length-1?(s=0,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex+1):s=this._bulkEditCellDetails.columnIndex+1,(t.isNullOrUndefined(this.model.columns[s].template)||!t.isNullOrUndefined(this.model.columns[s].field))&&t.isNullOrUndefined(this.model.columns[s].commands)&&this.model.columns[s].visible!==!1&&this.model.columns[s].allowEditing!==!1||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=n&&this.selectRows(this._bulkEditCellDetails.rowIndex),s!=-1&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"left":if(0==this._bulkEditCellDetails.rowIndex&&0==this._bulkEditCellDetails.columnIndex||!this.element.is(document.activeElement)&&0==r.length)return!0;0==this._bulkEditCellDetails.columnIndex?(s=this.model.columns.length-1,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex-1,this.selectRows(this._bulkEditCellDetails.rowIndex)):s=this._bulkEditCellDetails.columnIndex-1,(t.isNullOrUndefined(this.model.columns[s].template)||!t.isNullOrUndefined(this.model.columns[s].field))&&t.isNullOrUndefined(this.model.columns[s].commands)&&this.model.columns[s].visible!==!1&&this.model.columns[s].allowEditing!==!1||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=n&&this.selectRows(this._bulkEditCellDetails.rowIndex),s!=-1&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"up":if(0==this._bulkEditCellDetails.rowIndex)return;s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex-1),this.editCell(this._bulkEditCellDetails.rowIndex-1,this.model.columns[this._bulkEditCellDetails.columnIndex].field);break;case"down":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1)return void this.endEdit();s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex+1),this._bulkEditCellDetails.columnIndex!=-1&&this.editCell(this._bulkEditCellDetails.rowIndex+1,this.model.columns[this._bulkEditCellDetails.columnIndex].field)}return addedRow=!e(this.getRows()[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow"),s!=-1&&(this.model.columns[s].commands||this.model.columns[s].isPrimaryKey&&addedRow||this.model.columns[s].template)&&this.element.focus(),!1},_renderBulkEditObject:function(i,s){var n,r,o,l,a=t.buildTag("form","",{},{id:this._id+"EditForm"}),d=this._bulkEditTemplate,h=(this._id,i.columnObject.field,{});t.createObject(i.columnObject.field,i.value,h),o={requestType:i.requestType},s.empty(),s.parent().is(":last-child")||(s.addClass("e-validError"),s.removeClass("e-gupdatenotify")),r=d.find("#"+i.columnObject.field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit").html(),n=e(e.templates(r).render(h)),"SELECT"==n.get(0).tagName&&(l=t.getObject(i.columnObject.field,h),n.val(t.isNullOrUndefined(l)?"":l.toString()),null==n.val()&&n.val(n.find("option").first().val()),n.data("ej-value",l)),a.append(n),s.append(a),this._setoffsetWidth(),this._refreshEditForm(o),e.isFunction(e.validator)&&!e.isEmptyObject(i.validationRules)&&(this.initValidator(),this.setValidationToField(i.columnObject.field,i.validationRules)),this.model.isEdit=!0},_triggerConfirm:function(e){if(e!==s&&e.model.text==this.localizedLabels.OkButton)this._confirmDialog.find(".e-content").text()==this.localizedLabels.BatchSaveConfirm?this.batchSave():this._confirmDialog.find(".e-content").text()==this.localizedLabels.ConfirmDelete?"batch"==this.model.editSettings.editMode?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():t.isNullOrUndefined(this._cDeleteData)?this.deleteRow():(this.deleteRow(this._cDeleteData),this._cDeleteData=null):this._confirmDialog.find(".e-content").text()==this.localizedLabels.CancelEdit?this.cancelEdit():(this._confirmedValue=!0,this._processBindings(this._requestArgs)),this._isBatchDeleteApplied=!1,this.clearSelection();else{if(this._confirmDialog.find(".e-content").text()!=this.localizedLabels.BatchSaveConfirm&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.ConfirmDelete&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.CancelEdit)switch(this._requestArgs.requestType){case"grouping":this.model.groupSettings.groupedColumns.pop();break;case"ungrouping":this.model.groupSettings.groupedColumns.push(this._requestArgs.columnName);break;case"sorting":this._cSortedDirection=this._cSortedColumn=null;break;case"filtering":this.model.filterSettings.filteredColumns.reverse().splice(0,this._requestArgs.currentFilterObject),this.model.filterSettings.filteredColumns.reverse();break;case"paging":this._currentPage(this._requestArgs.previousPage),this.getPager().ejPager("model.currentPage",this._requestArgs.previousPage)}this._confirmedValue=!1}this._requestArgs=null,this._confirmDialog.ejDialog("close")},_batchCellValidation:function(e){var t,s=this.getRowByIndex(e);if("batch"==this.model.editSettings.editMode&&this.model.isEdit&&s.hasClass("e-insertedrow"))for(i=0;i<this._validatedColumns.length;i++){if(t=this.getColumnIndexByField(this._validatedColumns[i]),!this.editFormValidate())return!0;this.editCell(e,this.model.columns[t].field)}},_saveCellHandler:function(t){var i,s=e(t.target);t.stopPropagation(),i="top"==this.model.editSettings.rowPosition||null==this._gridRows?0:this._gridRows.length-1,0==s.closest(".e-popup").length&&0==s.closest(".e-rowcell").find("#"+this._id+"EditForm").length&&(e(this.getRows()).hasClass("e-insertedrow")&&this._batchCellValidation(i),this.saveCell())},initValidator:function(){for(var t=this,i=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):e("#"+this._id+"EditForm"),s=0;s<i.length;s++)i.eq(s).validate({ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(e,i){t._renderValidator(e,i)}})},_renderValidator:function(i,s){var n,r,o,l,a,d;if(s.is(":hidden")&&(s=s.siblings("input:visible")),s.length){var h=s.closest(".e-rowcell"),c=e(i).addClass("e-error"),u=t.buildTag("div.e-errortail e-toparrow"),p=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),m=0;h=h.length?h:h=s.closest("td"),h.find(".e-error").remove(),s.parent().hasClass("e-in-wrap")?c.insertAfter(s.closest(".e-widget")):c.insertAfter(s),n=this.model.scrollSettings.frozenRows>0&&this._currentTrIndex>=this.model.scrollSettings.frozenRows,r=n?"append":"prepend",c[r](u),this.model.allowScrolling&&(p&&p._hScrollbar||p._vScrollbar)&&(h.addClass("e-validError"),m=p._hScrollbar?p._hScrollbar.element[0].offsetTop:0);var g=h.offset().top+h[0].offsetHeight+i[0].offsetHeight,f=!1,_=p&&p._hScrollbar?p._hScrollbar.model.height:0;if((p&&p.isHScroll()&&g>m||g>this.getContent()[0].offsetTop+this.getContent().find(".e-content").height())&&(f=!0),this.model.enableRTL?"dialog"!=this.model.editSettings.editMode&&c.offset({top:s.offset().top+s.height()}):"dialog"!=this.model.editSettings.editMode&&c.offset({left:s.offset().left,top:s.offset().top+s.height()}),this.model.scrollSettings.frozenRows<=0&&e.inArray(this.model.editSettings.editMode,["externalform","externalformtemplate","dialog","dialogtemplate"])==-1){var v=this.getContent(),b=v.find(".e-content"),y=b.height(),w=v[0].offsetTop;if(f&&null!=p&&p._vScrollbar&&this.model.scrollSettings.frozenColumns){var C=(p._vScrollbar.model.value,b[0].scrollHeight,w+b[0].scrollHeight),x=w+y;(!this.model.scrollSettings.frozenColumns&&g>C||this.model.scrollSettings.frozenColumns&&g>x)&&(p._vScrollbar.model.maximum+=g-(w+y),p._vScrollbar.refresh(!0)),this.model.scrollSettings.frozenColumns&&(o=this.getContent().find(".e-movablecontent"),o.height(o[0].scrollHeight)),p.scrollY(s.offset().top-w+b[0].scrollTop)}else f&&this.model.allowScrolling&&null!=p&&(p.isVScroll()?p.isVScroll()&&(p.refresh(),this._showHideScroller(),p._vScroll&&(a=p._vScrollbar.model.value+(g-(w+y+_-_)),p.scrollY(a))):(l=g-(w+y),b.height(y+l)))}else n&&(f?(d=c.css("top"),u.addClass("e-bottomarrow"),c.css({bottom:d,top:"auto"})):u.prependTo(u.parent()));c.show("slow")}},setValidation:function(){for(var e=0;e<this.model.columns.length;e++)t.isNullOrUndefined(this.model.columns[e].validationRules)||this.setValidationToField(this.model.columns[e].field,this.model.columns[e].validationRules)},setValidationToField:function(i,s){var n,r,o,l,a=i;t.isNullOrUndefined(i)||(a=a.replace(/[^a-z0-9\s_]/gi,"")),r="batch"==this.model.editSettings.editMode?this.element.find("#"+this._id+"EditForm"):this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform"):this.element.find(".e-addedrow .gridform"):this.element.find(".gridform"),n=r.find("#"+this._id+a).length>0?r.find("#"+this._id+a):r.find("#"+a),s.regex&&(s[i+"regex"]=s.regex,delete s.regex,e.validator.addMethod(a+"regex",function(e,t,i){return(i instanceof RegExp?i:new RegExp(i)).test(e)},t.getObject("messages.regex",s)||this.getColumnByField(i).headerText+" should match the given pattern")),n.attr("name")||n.attr("name",i),n.rules("add",s),o=e("#"+this._id+"EditForm").validate(),o.settings.messages[i]=o.settings.messages[i]||{},t.isNullOrUndefined(s.required)||(l=t.isNullOrUndefined(s.messages&&s.messages.required)?e.validator.messages.required:s.messages.required,0==l.indexOf("This field")&&(l=l.replace("This field",this.getColumnByField(i).headerText)),o.settings.messages[i].required=l,n.hasClass("e-datepicker")&&n.ejDatePicker({watermarkText:""}))},_renderConfirmDialog:function(){var i=t.buildTag("div.e-content",this.localizedLabels.BatchSaveConfirm),s=t.buildTag("span.e-buttons",'<input type="button" class="e-flat e-btnsub" id='+this._id+'ConfirmDialogOK value="'+this.localizedLabels.OkButton+"\" /> <input type='button' class='e-flat e-btncan' id="+this._id+"ConfirmDialogCancel value='"+this.localizedLabels.CancelButton+"' />");this._confirmDialog=t.buildTag("div#"+this._id+"ConfirmDialog",{float:"left"}),this._confirmDialog.append(i).append(s),this.element.append(this._confirmDialog),s.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:e.proxy(this._triggerConfirm,this)}),this._renderFDialog(this._id+"ConfirmDialog"),this._confirmDialog.ejDialog({width:"auto",minWidth:0,minHeight:0,enableModal:!0})},_unboundClickHandler:function(i){var s,n,r,o,l,a,d,h,c=e(i.target).closest("button");if(!(c.hasClass("e-button")&&(c.hasClass("e-disable")||c.prop("disabled"))||c.closest(".e-grid").attr("id")!==this._id||(s=0,n={},e(i.target).hasClass("e-unboundcelldiv")))){if(r=c.hasClass("e-savebutton")?this.getIndexByRow(e(".e-editedrow")):this.getIndexByRow(c.closest("tr")),this.model.isEdit&&(!this._isLocalData||this._isRemoteSaveAdaptor)&&c.hasClass("e-editbutton"))return void(this._unboundRow=c.closest("tr"));if(o=this._currentJsonData[r],l=e(c).ejButton("instance"),("inlineform"==this.model.editSettings.editMode||"inlinetemplate"==this.model.editSettings.editMode)&&(s=e("#"+this._id).find(".e-editedrow").length),this.model.allowSelection&&!this.model.isEdit&&this.selectRows(this.getIndexByRow(c.closest("tr"))-s),c.hasClass("e-cancelbutton")&&(this.model.isEdit=!1),e.isFunction(e.fn.ejDatePicker)&&e("#"+this._id+"EditForm").find(".e-datepicker").ejDatePicker("hide"),c.hasClass("e-editbutton")&&"batch"!=this.model.editSettings.editMode)this.model.isEdit&&this.cancelEdit(),a=this.getRowByIndex(r),this.startEdit(a);else if(c.hasClass("e-deletebutton")){if(a=this.getRowByIndex(r),this.model.editSettings.showDeleteConfirmDialog)return void this._toolbarOperation(this._id+"_delete");this.deleteRow(a)}else c.hasClass("e-savebutton")?(this.endEdit(),o=this._currentJsonData[r]):c.hasClass("e-cancelbutton")&&this.cancelEdit();n={rowIndex:r,data:o,buttonModel:l.model,commandType:c.val()},t.raiseWebFormsServerEvents&&(d={model:this.model,originalEventType:"commandButtonClick"},h=n,t.isNullOrUndefined(this.model.serverEvents)||e.inArray("commandButtonClick",this.model.serverEvents)==-1||t.raiseWebFormsServerEvents("commandButtonClick",d,h))}},addRecord:function(e,i){var s,n;this.model.editSettings.allowAdding&&0==this.element.find(".e-gridcontent .gridform").length&&(e?(("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&(s=t.buildTag("tr.e-addedrow"),this.getContentTable().find("tbody").first().prepend(s)),n={data:e},n.action="add",n.selectedRow=this._selectedRow(),this._cAddedRecord=e,n.requestType=t.Grid.Actions.Save,this._updateAction(n),n.selectedRow!=-1&&this.selectRows(n.selectedRow+1),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),i||("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&this.model.allowPaging&&this.model.pageSettings.pageSize<this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild)):this._startAdd())},updateRecord:function(e,i){this._updateDeleteRecord(e,i,"update"),"batch"!=this.model.editSettings.editMode&&(this.model.sortSettings.sortedColumns.length||this.model.summaryRows.length>0||this.model.groupSettings.groupedColumns.length||!t.isNullOrUndefined(this._searchCount)||this.filterColumnCollection.length)&&this.refreshContent()},_updateDeleteRecord:function(i,s,n){var r,o,l,a=t.DataManager(this._currentJsonData),d=[];t.isNullOrUndefined(i)||(d=a.executeLocal(t.Query().where(i,t.FilterOperators.equal,t.getObject(i,s)))),d.length?(r=e.inArray(d[0],this._currentJsonData))!=-1&&(o=this.getRowByIndex(r),"update"==n?(t.copyObject(d[0],s),l=e(e.render[this._id+"_JSONTemplate"](d)),o.hasClass("e-alt_row")?l.addClass("e-alt_row"):l.removeClass("e-alt_row"),o.replaceWith(l),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),"batch"==this.model.editSettings.editMode?this.batchChanges.changed.push(d[0]):this._dataManager[n](i,s),this._isMapSelection&&(this._selectionByGrid=!0,this.multiSelectCtrlRequest=!0,s[this._selectionMapColumn]?this.selectRows(r):this.clearSelection(r),this._selectionByGrid=!1)):(e.inArray(r,this.selectedRowsIndexes)==-1&&this.selectedRowsIndexes.push(r),this.deleteRow(o)),"batch"==this.model.editSettings.editMode&&(this.batchSave(),this._confirmedValue=!0)):"batch"==this.model.editSettings.editMode?(this.batchChanges["update"==n?"changed":"deleted"].push(s),this.batchSave(),this._confirmedValue=!0):this._dataManager[n](i,s)},deleteRecord:function(e,t){this._updateDeleteRecord(e,t,"remove")}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.sort={_addSortElementToColumn:function(i,s){var n,r,o,l,a=t.DataManager(this.model.columns).executeLocal(t.Query().where("field","equal",i));if(r=a.length>1?this.getColumnByHeaderText(this._$curSElementTarget.text()):this.getColumnByField(i),!t.isNullOrUndefined(r)){var d=e.inArray(r,this.model.columns),h=this.getsortColumnByField(i),c=e.inArray(h,this.model.sortSettings.sortedColumns),u=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(d).find(".e-headercelldiv");if(s=t.isNullOrUndefined(s)?"ascending":s.toLowerCase(),u.find(".e-ascending,.e-descending").remove(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").find(".e-ascending,.e-descending").not(".e-ungroupbutton").remove(),n="descending"!=s?"e-rarrowup-2x":"e-rarrowdown-2x",o=1,
this.model.allowSorting&&this.model.allowMultiSorting&&this.model.sortSettings.sortedColumns.length>1){for(l=1;l<=c;l++)o+=1;u.css("text-align"),u.prepend(this._createSortNumber(o,u).addClass("e-sortnumber")),u.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n))}else u.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n));this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n)),u.parent().attr("aria-sort",s)}},_removeSortElementFromColumn:function(t){var i=this.getColumnByField(t),s=e.inArray(i,this.model.columns),n=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell").eq(s).find(".e-headercelldiv");n.find(".e-ascending,.e-descending").remove(),n.parent().prop("aria-sort",!1)},_sortCompleteAction:function(i){var s,n,r,o;for(n=this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").parent().attr("ej-mappingname"),this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),e(this.getHeaderTable().find(".e-columnheader").find(".e-headercell:not(.e-stackedHeaderCell,.e-detailheadercell,.e-hide)")[this.getColumnIndexByField(n)]).removeAttr("aria-sort"),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i.columnName+"']").find(".e-ascending,.e-descending,.e-number").not(".e-ungroupbutton").remove(),this.getHeaderTable().find("[aria-sort]").prop("aria-sort",!1),r=0;r<this.model.sortSettings.sortedColumns.length;r++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[r].field,this.model.sortSettings.sortedColumns[r].direction);this.model.groupSettings.groupedColumns.length&&null!=this._$curSElementTarget&&(o=this._checkEinGroupDrop(e.trim(this._$curSElementTarget.attr("ej-mappingname"))),t.isNullOrUndefined(o)||(s="ascending"==(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)?"e-rarrowup-2x":"e-rarrowdown-2x",o.find(".e-ascending,.e-descending").removeClass().addClass("e-icon e-"+(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)+" "+s))),this.multiSortRequest=!1,(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns()},removeSortedColumns:function(t){if(e.isArray(t))for(var i=0;i<t.length;i++)this._removeSortedColumnFromCollection(t[i]);else this._removeSortedColumnFromCollection(t);this.multiSortRequest=!0,this.sortColumn(null,null)},_removeSortedColumnFromCollection:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length;t++)if(this.model.sortSettings.sortedColumns[t].field==e){this.model.sortSettings.sortedColumns.splice(t,1);break}},clearSorting:function(){var t=this;this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(i){return e.inArray(i.field,t.model.groupSettings.groupedColumns)!=-1}),this._$prevSElementTarget=null,this._$curSElementTarget=null,this.refreshContent()},sortColumn:function(i,s){var n,r,o;this.model.allowSorting&&e.inArray(i,this._disabledSortableColumns)==-1&&(null==i||0!=i.length)&&(n={},this.multiSortRequest||(r=this,this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(t){return e.inArray(t.field,r.model.groupSettings.groupedColumns)!=-1})),n.requestType=t.Grid.Actions.Sorting,this._cSortedColumn=n.columnName=i,this._cSortedDirection=n.columnSortDirection=t.isNullOrUndefined(s)?t.sortOrder.Ascending:s.toLowerCase(),null!==this._cSortedColumn&&(this._removeSortedColumnFromCollection(i),this.model.sortSettings.sortedColumns.push({field:this._cSortedColumn,direction:this._cSortedDirection})),o=this._processBindings(n),o&&(this._cSortedDirection=this._cSortedColumn=null),this._primaryKeyValues=[])},_createSortElement:function(){return t.buildTag("span.e-icon","&#160;")},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),"multiple"==this.model.selectionType&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function($,ej,undefined){ej.gridFeatures=ej.gridFeatures||{},ej.gridFeatures.filter={getFilterBar:function(){return this._gridFilterBar},setGridFilterBar:function(e){this._gridFilterBar=e},filterColumn:function(e,t,i,s,n,r){var o,l,a,d,h,c,u,p,m,g,f;if(this.model.allowFiltering)for(o=this.getColumnByField(e),(ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||"boolean"!=o.type||"true"!=i)&&"false"!=i||(i=JSON.parse(i)),o&&ej.isNullOrUndefined(o.format)?"date"==o.type?l=ej.preferredCulture().calendar.patterns.d:"datetime"==o.type&&(l=ej.preferredCulture().calendar.patterns.f):o&&(l=o.format.replace("{0:","").replace("}","")),!ej.isNullOrUndefined(o)&&!ej.isNullOrUndefined(o.filterBarTemplate)&&("date"==o.type||"datetime"==o.type)&&i.length>0&&(i=ej.parseDate(i,l,this.model.locale)),a=[],"object"==typeof e?a=e:a.push({field:e,operator:t,value:i,predicate:s,matchcase:n,actualFilterValue:r}),d=0;d<a.length;d++){var e=a[d].field,t=a[d].operator,i=a[d].value,s=a[d].predicate,n=!ej.isNullOrUndefined(a[d].matchcase)&&a[d].matchcase,r=a[d].actualFilterValue,_={};for(_.requestType=ej.Grid.Actions.Filtering,h=this.getHeaderTable().find("#"+e+"_filterBarcell"),_.currentFilterObject=[],this._$curFieldName=e,$.isArray(t)||(t=$.makeArray(t)),$.isArray(i)||(i=$.makeArray(i)),$.isArray(s)||(s=$.makeArray(s)),c=!1,this._filterCollection,ej.util.isNullOrUndefined(this._currentFilterColumn)&&(this._currentFilterColumn=this.getColumnByField(e)),u=0;u<t.length;u++){if(p={field:e,operator:t[u],value:i[u],matchcase:n,predicate:s[u],actualFilterValue:ej.getObject("value",r),actualOperator:ej.getObject("operator",r)},predicated=ej.getObject("ejpredicate",r),predicated&&(p=predicated),"filterbar"==this.model.filterSettings.filterType&&(this._$colType=this._currentFilterColumn.type),0==this.model.filterSettings.filteredColumns.length&&""!==p.value)"date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof p.value?this.model.filterSettings.filteredColumns.push(p):this._setDateFilters(p);else{if(this,!c){var v=ej.DataManager(this.model.filterSettings.filteredColumns),b=(new ej.Query).where("field",ej.FilterOperators.equal,p.field),y=v.executeLocal(b);for(m=0;m<y.length;m++)(g=$.inArray(y[m],this.model.filterSettings.filteredColumns))!=-1&&this.model.filterSettings.filteredColumns.splice(g,1)}""!==p.value&&("date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof p.value?this.model.filterSettings.filteredColumns.push(p):this._setDateFilters(p))}c=!0,_.currentFilterObject.push(p)}_.filterCollection=this.model.filterSettings.filteredColumns,_.currentFilteringColumn=e,f=this._processBindings(_),f&&(this.model.filterSettings.filteredColumns.reverse().splice(0,t.length),this.model.filterSettings.filteredColumns.reverse()),"filterbar"==this.model.filterSettings.filterType&&(""!=h.val()&&(h.val()==i||this._fltrBarcell)||(i[0]instanceof Date?h.val(ej.format(i[0],l,this.model.locale)):h.val(i[0]),this._currentFilterbarValue=i,this.filterStatusMsg="",this._showFilterMsg())),ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||(this.filterStatusMsg="",this._currentFilterbarValue=_.currentFilterObject[0].value,this._oldFilterColumn!=o&&this.filterColumnCollection.length>0&&$.inArray(o,this.filterColumnCollection)==-1&&this.filterColumnCollection.push(o),this._oldFilterColumn=this._currentFilterColumn=o,this._showFilterMsg()),this._fltrBarcell=!1}},search:function(e){var t={};$("#"+this._id+"_search").find("input").val(),$("#"+this._id+"_search").find("input").val(e),t.requestType=ej.Grid.Actions.Search,t.keyValue=e,this.model.searchSettings.fields=0!=this.model.searchSettings.fields.length?this.model.searchSettings.fields:this.getColumnFieldNames(),(""!=e||""!=this.model.searchSettings.key)&&(this.model.searchSettings.key=e.toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":e.toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":e,this._processBindings(t)),this._primaryKeyValues=[]},_filterBarHandler:function(e){var t,i,s,n=e.keyCode,r=$(e.target);if(r.closest(".e-grid").attr("id")===this._id&&("immediate"==this.model.filterSettings.filterBarMode||13==n)&&9!=n){for(r=$(e.target),this.filterStatusMsg="",t=r.prop("id").replace("_filterBarcell",""),s=0;s<this.model.columns.length;s++){if(!ej.isNullOrUndefined(this.model.columns[s].foreignKeyValue)&&t.indexOf("_"+this.model.columns[s].foreignKeyValue)!=-1){i=this.model.columns[s];break}if(this.model.columns[s].field==t){i=this.model.columns[s];break}}if(null==i)return;if(this._currentFilterColumn=i,this._$curFieldName=i.field,this._currentFilterColumn!=this._oldFilterColumn&&(this.filterValueOldLength=0),this._currentFilterbarValue=r.val().toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":r.val().toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":r.val(),this.filterValueCurrentLength=this._currentFilterbarValue.length,(0==this.filterValueCurrentLength&&0==this.filterValueOldLength||this._currentFilterbarValue==this.OldfilterValue)&&this._currentFilterColumn==this._oldFilterColumn&&!this.model.scrollSettings.enableVirtualization)return void this._showFilterMsg();if(this._skipFilterProcess=this._checkForSkipInput(),this._skipFilterProcess){if("string"!=this._currentFilterColumn.type)return this._skipFilterProcess=!1,void(this.model.scrollSettings.enableVirtualization||this._showFilterMsg());this.filterStatusMsg="Invalid Filter Data",this._showFilterMsg()}else this._processFilter(e)}},_renderResponsiveFilter:function(){for(var e,t,i=ej.buildTag("div#responsiveFilter.resFilterDiv","",{width:"100%",padding:"0px"}),s=$(window).height()+1,n=.08*s,r=(this.element.height()>s?$(window).width():$(window).width(),ej.buildTag("div.columnDiv","",{width:"100%"})),o=0;o<this.model.columns.length;o++)e=ej.buildTag("div.e-responsivefilterColDiv","",{width:"100%"},{"ej-MappingName":this.model.columns[o].field}),t=ej.buildTag("span",this.model.columns[o].headerText,{"margin-left":"4%"}),e.append(t),r.append(e);i.append(r),this.element.append(i);var l=this,a=(this.element.outerWidth(),ej.buildTag("div.e-resFilterDialogHeaderDiv","",{height:n})),t=ej.buildTag("div.labelRes","<span>Filter</span>"),d=ej.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),h=ej.buildTag("span.e-icon e-responsiveFilterClear e-resIcon","",{"font-size":"23px"}),c=ej.buildTag("div.e-resFIlterRigthIcon","",{float:"right","margin-top":"3%"},{closeDialogue:"responsiveFilter",gridEle:!0}),u=ej.buildTag("span.e-icon e-responisveClose e-resIcon","",{"font-size":"23px"},{closeDialogue:"responsiveFilter",gridEle:!0});c.click(function(){$("#responsiveFilter").css("display","none"),l.element.css("display","block")}),d.click(function(){$("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-filternone").click()}),a.append(d.append(h)),a.append(t).append(c.append(u)),i.prepend(a),i.insertAfter(this.element),$(".resFilterDiv").on("keydown",$.proxy(this._responsiveDialogueKeyUp,this)),i.css("display","none"),$(".e-responsivefilterColDiv").on("click",$.proxy(this._mouseClickHandler,this))},_closeDivIcon:function(e){var t,i=$(e.target);ej.isNullOrUndefined(i.attr("closeDialogue"))||(t=$("#"+i.attr("closeDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","none"):t.ejDialog("close")),ej.isNullOrUndefined(i.attr("gridEle"))||this.element.css("display","block"),ej.isNullOrUndefined(i.attr("openDialogue"))||(this.model.enableResponsiveRow||i.attr("closeDialogue").indexOf("Custom")!=-1?(t=$("#"+i.attr("openDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","block"):t.ejDialog("open")):this.element.css("display","block"))},_setResponsiveFilterIcon:function(){var e,t=$("#responsiveFilter").find(".columnDiv"),i=this;for(t.find(".e-filtericon").remove(),e=0;e<this.model.filterSettings.filteredColumns.length;e++){var s=this.model.filterSettings.filteredColumns[e],n=t.find(".e-responsivefilterColDiv[ej-MappingName="+s.field+"]"),r=ej.buildTag("div.e-filtericon e-icon e-resIcon e-filterset e-filternone e-filterreset","",{float:"right",height:"22px",width:"21px","font-size":"20px","margin-right":"3%","margin-top":"2%"}),o=ej.buildTag("span.e-filtericon e-icon e-resIcon e-filterset e-filternone","",{},{colType:s.type});n.find(".e-filternone").remove(),n.append(r),o.click(function(e){var t=e.target;i._$colType=t.attr("colType"),i._fltrClrHandler(),t.remove()})}},_renderExcelFilter:function(){var e=0!=this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns[0].field:null,t={instance:this,showSortOptions:this.model.allowSorting,allowFormatFiltering:this.model.filterSettings.allowFormatFiltering,allowCaseSensitive:this.model.filterSettings.enableCaseSensitivity,maxFilterLimit:this.model.filterSettings.maxFilterChoices,interDeterminateState:this.model.filterSettings.enableInterDeterminateState,enableComplexBlankFilter:this.model.filterSettings.enableComplexBlankFilter,blankValue:this.model.filterSettings.blankValue,filterHandler:ej.proxy(this._filterHandler,this),initFilterCol:e,actionBegin:"actionBegin",actionComplete:"actionComplete"};this._excelFilter=new ej.excelFilter(t),$.extend(this._excelFilter,this.model.filterSettings)},_filterHandler:function(e){var t,i,s,n,r,o,l,a,d,h={};if(h.requestType="sorting"==e.action?e.action:"filtering",i=this.model.filterSettings.filteredColumns,"filtering"==e.action){for(t=ej.DataManager(this.model.filterSettings.filteredColumns),s=(new ej.Query).where("field",ej.FilterOperators.equal,e.fieldName),n=t.executeLocal(s),l=0;l<n.length;l++)(r=$.inArray(n[l],this.model.filterSettings.filteredColumns))!=-1&&this.model.filterSettings.filteredColumns.splice(r,1);ej.merge(this.model.filterSettings.filteredColumns,e.filterCollection),e.currentFilterCollection=e.filterCollection}else{if("clearfiltering"==e.action){for(o=e.filterDetails,delete this._excelFilter._predicates[0][e.fieldName],this.filterColumn(o.field,o.operator,o.value,o.predicate),l=0;l<this.filterColumnCollection.length;l++)this.filterColumnCollection[l].field==o.field&&this.filterColumnCollection.splice(l,1);return}if("sorting"==e.action)return a=e.sortDetails,ej.gridFeatures.sort&&this.sortColumn(a.field,a.direction),void this._excelFilter.closeXFDialog()}h.currentFilteringColumn=e.fieldName,h.predicated=e.ejpredicate,(d=this._processBindings(h))&&(this.model.filterSettings.filteredColumns=i)},_renderFiltering:function(){var e,t,i,s,n,r,o,l,a,d,h=this.getHeaderTable(),c=ej.buildTag("tr.e-filterbar"),u=[];for((this.model.detailsTemplate||this.model.childGrid)&&c.append(ej.buildTag("th.e-filterbarcell e-mastercell")),n=0;n<this.model.columns.length;n++){var p=ej.buildTag("th.e-filterbarcell"),m=ej.buildTag("div.e-filterdiv"),g=ej.buildTag("span.e-cancel e-icon e-hide"),r=ej.isNullOrUndefined(this.model.columns[n].field)?this.model.columns[n].field:this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,""),o=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?r+"_filterBarcell":r+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell";if(0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[n].field)?(m.addClass("e-fltrinputdiv"),r=this.model.columns[n].field,o=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?r+"_filterBarcell":r+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell",s=ej.buildTag("input.e-ejinputtext e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,type:"search",id:o})):(p.addClass("e-fltrtemp"),m.addClass("e-fltrtempdiv"),ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate.create)?s=ej.buildTag("input e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:o,class:"e-filterUi_input e-filtertext e-fltrTemp"}):(e={columnIndex:n,column:this.model.columns[n]},t=this.model.columns[n].filterBarTemplate.create,"string"==typeof t&&(t=ej.util.getObject(t,window)),s=t(e),s=$(s).attr({title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:o,class:"e-filterUi_input e-filtertext e-fltrTemp"}))),this.model.filterSettings.filteredColumns.length>0&&"filterbar"==this.model.filterSettings.filterType&&$.inArray(this.model.columns[n].field,u)==-1)for(l=0;l<this.model.filterSettings.filteredColumns.length;l++)this.getColumnIndexByField(this.model.filterSettings.filteredColumns[l].field)==n&&("greaterthan"==this.model.filterSettings.filteredColumns[l].operator?s.val(">"+this.model.filterSettings.filteredColumns[l].value):"lessthan"==this.model.filterSettings.filteredColumns[l].operator?s.val("<"+this.model.filterSettings.filteredColumns[l].value):"notequal"==this.model.filterSettings.filteredColumns[l].operator?s.val("!="+this.model.filterSettings.filteredColumns[l].value):s.val(this.model.filterSettings.filteredColumns[l].value),$.inArray(this.model.filterSettings.filteredColumns[l].field,u)==-1&&u.push(this.model.filterSettings.filteredColumns[l].field));(this.model.columns[n].allowFiltering===!1||""==this.model.columns[n].field||ej.isNullOrUndefined(this.model.columns[n].field))&&(s.attr("disabled",!0).addClass("e-disable"),this._disabledFilterableColumns.push(this.model.columns[n].headerText)),this.model.columns[n].visible===!1&&p.addClass("e-hide"),ej.isNullOrUndefined(this.model.columns[n].cssClass)||p.addClass(this.model.columns[n].cssClass),0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)?m.append(s).append(g):m.append(s),c.append(p.append(m)),n==this.model.scrollSettings.frozenColumns-1&&(i=c.clone(),h.find("thead").first().append(i),c.empty())}if(h.find("thead").last().append(c),"msie"==ej.browserInfo().name&&ej.browserInfo().version<10)for(a=h.find("thead").find(".e-ejinputtext.e-filtertext"),d=0;d<a.length;d++)ej.ieClearRemover(a[d]);this.setGridFilterBar(c)},_renderFilterBarTemplate:function(){for(var e,t,i,s,n=!1,r=0;r<this.model.columns.length;r++)if(0!=this.model.columns[r].allowFiltering&&!ej.isNullOrUndefined(this.model.columns[r].filterBarTemplate)&&!ej.isNullOrUndefined(this.model.columns[r].field)){if(i=this.model.columns[r].filterBarTemplate.read,"string"==typeof i&&(i=ej.util.getObject(i,window)),t={element:this.getHeaderTable().find(".e-filterbar").find(".e-fltrtemp").find("#"+this.model.columns[r].field.replace(/[^a-z0-9|s_]/gi,"")+"_filterBarcell"),columIndex:r,column:this.model.columns[r]},"string"==typeof t.column.filterBarTemplate.read&&(t.column.filterBarTemplate.read=i),s=this.model.columns[r].filterBarTemplate.write,"string"==typeof s&&(s=ej.util.getObject(s,window)),this.model.filterSettings.filteredColumns.length>0)for(e=0;e<this.model.filterSettings.filteredColumns.length;e++)this.model.columns[r].field==this.model.filterSettings.filteredColumns[e].field&&(t.modelVal=this.model.filterSettings.filteredColumns[e].value);s.call(this,t),n=!0}n&&(this.model.filterSettings.filterBarMode=ej.Grid.FilterBarMode.OnEnter)},_closeFilterDlg:function(){ej.isNullOrUndefined($("#"+this._id+"_"+this._$colType+"Dlg").data("ejDialog"))?$("#"+this._id+"_"+this._$colType+"Dlg").css("display","none"):$("#"+this._id+"_"+this._$colType+"Dlg").ejDialog("close"),this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1},_filterBarClose:function(e){var t,i=$(e.target);i.closest(".e-grid").attr("id")===this._id&&("click"==e.type&&i.hasClass("e-cancel")&&(t=i.prev(),t.focus().val(""),t.trigger("keyup"),e.stopPropagation()),"focusin"==e.type&&i.hasClass("e-filtertext")&&(i=$(e.target).next(),this.getFilterBar().find(".e-cancel").addClass("e-hide"),i.removeClass("e-hide")))},_processFilter:function(e){this._alreadyFilterProcessed?(this._stopTimer(),this._startTimer(e)):(this._alreadyFilterProcessed=!0,this._startTimer(e))},_startTimer:function(e){var t=this,i=13==e.keyCode?0:t.model.filterSettings.immediateModeDelay;this._timer=window.setTimeout(function(){t._onTimerTick()},i)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_onTimerTick:function(){var e,t,i;this.OldfilterValue=this._currentFilterbarValue,this._oldFilterColumn=this._currentFilterColumn,this.filterValueOldLength=this.filterValueCurrentLength,this._findPredicate();var s="string"!=this._currentFilterColumn.type,n=$.extend([],this.model.filterSettings.filteredColumns);for(e=0;e<n.length;e++)""==this.getHeaderContent().find(".e-filterbar #"+n[e].field+"_filterBarcell").val()&&($.inArray(this.model.filterSettings.filteredColumns[e],this.filterColumnCollection)!=-1&&this.filterColumnCollection.splice(e,1),this.model.filterSettings.filteredColumns.splice(e,1));if("date"==this._currentFilterColumn.type||"datetime"==this._currentFilterColumn.type)for(t=0;t<this.model.filterSettings.filteredColumns.length;t++)this.model.filterSettings.filteredColumns[t].isComplex&&(i=this.model.filterSettings.filteredColumns[t].predicates,1==this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns=i:(this.model.filterSettings.filteredColumns[t]=i[0],this.model.filterSettings.filteredColumns.push(i[1])));this._skipFilterProcess?this.filterStatusMsg="Invalid Filter Data":this._currentFilterColumn.foreignKeyValue&&this._currentFilterColumn.dataSource&&""!=this._currentFilterbarValue?this._fltrForeignKeyValue(this._operator,this._currentFilterbarValue,s,this._currentFilterColumn.dataSource,this._currentFilterColumn.foreignKeyField,this._currentFilterColumn.foreignKeyValue,this._currentFilterColumn.type):ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&(this._fltrBarcell=!0,this.filterColumn(this._currentFilterColumn.field,this._operator,this._currentFilterbarValue,this._predicate,s)),!this.model.scrollSettings.enableVirtualization&&ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this._showFilterMsg(),this._stopTimer()},_findPredicate:function(){var e,t=this._currentFilterbarValue.replace(/ && /i," and ").replace(" || "," or "),i=t.split(" ");if(this._predicate="and",0!=i.length)if($.isFunction(ej.Predicate[i[1]])){this._skipFilterProcess=!1,this._predicate=i[1];var s=t.split(" "+i[1]+" "),n=[],r=[];for(e=0;e<s.length;e++)this._validateFilterValue(s[e]),n.push(this._operator),"number"==this._currentFilterColumn.type?r.push(this._currentFilterbarValue):"string"==this._currentFilterColumn.type&&r.push(s[e]);this._currentFilterbarValue=r,this._operator=n}else this._validateFilterValue($.trim(this._currentFilterbarValue));else this._validateFilterValue($.trim(this._currentFilterbarValue))},_validateFilterValue:function(e){var t,i,s,n;switch(this._currentFilterColumn.type){case"number":for(this._operator=ej.FilterOperators.equal,t=[">","<","=","!"],i=0;i<e.length&&jQuery.inArray(e[i],t)==-1;i++);i!=e.length&&(this._getOperator(e.substring(i)),0!=i&&(this._currentFilterbarValue=e.substring(0,i))),this._currentFilterbarValue=""!=this._currentFilterbarValue&&e.length>=1?ej.parseFloat(this._currentFilterbarValue,this.model.locale):e.length>1?ej.parseFloat(e,this.model.locale):e;break;case"date":case"datetime":this._operator=ej.FilterOperators.equal,this._getOperator(e),s=ej.isNullOrUndefined(this._currentFilterColumn.format)?"date"==this._currentFilterColumn.type?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:this._currentFilterColumn.format.replace("{0:","").replace("}",""),""!=this._currentFilterbarValue&&(n=ej.parseDate(this._currentFilterbarValue,s,this.model.locale),ej.isNullOrUndefined(n)?this.filterStatusMsg="Invalid Filter Data":this._currentFilterbarValue=ej.parseDate(this._currentFilterbarValue,s,this.model.locale));break;case"string":"*"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(e.length-1)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(0,-1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.endsWith):this._operator=ej.FilterOperators.startsWith;break;case"boolean":case"checkbox":"true"==this._currentFilterbarValue.toLowerCase()||"1"==this._currentFilterbarValue?this._currentFilterbarValue=!0:("false"==this._currentFilterbarValue.toLowerCase()||"0"==this._currentFilterbarValue)&&(this._currentFilterbarValue=!1),this._operator=ej.FilterOperators.equal;break;default:this._operator=ej.FilterOperators.equal}},_getOperator:function(e){"="==e.charAt(0)&&(this._operator=ej.FilterOperators.equal,this._currentFilterbarValue=e.substring(1)),(void 0!==ej.data.operatorSymbols[e.charAt(0)]||void 0!==ej.data.operatorSymbols[e.slice(0,2)])&&(this._operator=ej.data.operatorSymbols[e.charAt(0)],this._currentFilterbarValue=e.substring(1),void 0===this._operator&&(this._operator=ej.data.operatorSymbols[e.slice(0,2)],this._currentFilterbarValue=e.substring(2))),(this._operator==ej.FilterOperators.lessThan||this._operator==ej.FilterOperators.greaterThan)&&"="==this._currentFilterbarValue.charAt(0)&&(this._operator=this._operator+"orequal",this._currentFilterbarValue=this._currentFilterbarValue.substring(1))},_checkForSkipInput:function(){var e,t,i=!1;if("number"==this._currentFilterColumn.type&&(void 0!==ej.data.operatorSymbols[this._currentFilterbarValue]||$.inArray(this._currentFilterbarValue,["="," ","!"])!=-1)&&(i=!0),"string"==this._currentFilterColumn.type)for(e=[">","<","=","!"],t=0;t<this._currentFilterbarValue.length;t++)$.inArray(this._currentFilterbarValue[t],e)!=-1&&(i=!0);return i},_showFilterMsg:function(){var e,t,i,s,n,r=$.inArray(this._currentFilterColumn,this.filterColumnCollection);if(""!==this._currentFilterbarValue&&r==-1&&this.filterColumnCollection.push(this._currentFilterColumn),""===this._currentFilterbarValue&&r!=-1&&this.filterColumnCollection.splice(r,1),(!this._skipFilterProcess||this.filterColumnCollection.length>0)&&"Invalid Filter Data"!=this.filterStatusMsg)for(r=0;r<this.filterColumnCollection.length;r++)i=this.filterColumnCollection[r].headerText,this.filterColumnCollection[r].disableHtmlEncode&&(i=this._htmlEscape(i)),this.filterColumnCollection[r].field.indexOf(".")!=-1?(s=this.filterColumnCollection[r].field.split("."),t=s.join("\\."),e=$("#"+t+"_filterBarcell").val()):(n=ej.isNullOrUndefined(this.filterColumnCollection[r].foreignKeyValue)?this.filterColumnCollection[r].field+"_filterBarcell":this.filterColumnCollection[r].field+"_"+this.filterColumnCollection[r].foreignKeyValue+"_filterBarcell",e="boolean"==this._currentFilterColumn.type&&!ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.element.find("#"+n).hasClass("e-checkbox e-js")?this.element.find("#"+n).parent().attr("aria-checked"):this.element.find("#"+n).val()),""!=e&&(r>0&&""!=this.filterStatusMsg&&(this.filterStatusMsg+=" && "),this.filterStatusMsg+=i+": "+e);this.model.allowPaging?this.getPager().ejPager("model.externalMessage",this.filterStatusMsg):(this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").html(this.filterStatusMsg).css("display","block"):this.$pagerStatusBarDiv.find("div").html(this.filterStatusMsg),this.filterStatusMsg.length?this.$pagerStatusBarDiv.css("display","block"):this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").hide():this.$pagerStatusBarDiv.hide()),"Invalid Filter Data"==this.filterStatusMsg&&(r=$.inArray(this._currentFilterColumn,this.filterColumnCollection),this.filterColumnCollection.splice(r,1)),this.filterStatusMsg=""},_renderFilterDialogs:function(){var e,t,i,s,n,r;$.each(this.model.columns,ej.proxy(function(o,l){"string"!=l.type||e&&ej.isNullOrUndefined(l.filterType)?"guid"!=l.type||r&&ej.isNullOrUndefined(l.filterType)?"number"!=l.type||t&&ej.isNullOrUndefined(l.filterType)?"date"!=l.type||s&&ej.isNullOrUndefined(l.filterType)?"datetime"!=l.type||n&&ej.isNullOrUndefined(l.filterType)?"boolean"!=l.type||i&&ej.isNullOrUndefined(l.filterType)||(ej.isNullOrUndefined(l.filterType)&&(i=!0),this._renderFilters(l)):(ej.isNullOrUndefined(l.filterType)&&(n=!0),this._renderFilters(l)):(ej.isNullOrUndefined(l.filterType)&&(s=!0),this._renderFilters(l)):(ej.isNullOrUndefined(l.filterType)&&(t=!0),this._renderFilters(l)):(ej.isNullOrUndefined(l.filterType)&&(r=!0),this._renderFilters(l)):(ej.isNullOrUndefined(l.filterType)&&(e=!0),this._renderFilters(l))},this))},_renderFilters:function(col){this._isExcelFilter&&"menu"!=col.filterType||"excel"==col.filterType?(ej.isNullOrUndefined(this._excelFilter)&&(this._renderExcelFilter(),this._excelFilterRendered=!0),this._excelFilter.renderDialog(col.type)):eval(this["_render"+col.type.substring(0,1).toUpperCase()+col.type.substring(1)+"Dialog"](col))},_renderStringDialog:function(){var e,t=this._id+"_stringDlg";$("#"+t).length>0||(e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge"),e.appendTo("body"),this._renderDlgContent(e,"string"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderBooleanDialog:function(){var e,t=this._id+"_booleanDlg";$("#"+t).length>0||(e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge"),e.appendTo("body"),this._renderDlgContent(e,"boolean"),this.model.isResponsive&&this._mediaStatus||(this._renderFDialog(t),this.model.filterSettings.showPredicate?$("#"+t).ejDialog({minHeight:136,width:"100%"}):$("#"+t).ejDialog({minHeight:90,width:"100%"})))},_renderGuidDialog:function(){var e,t=this._id+"_guidDlg";$("#"+t).length>0||(e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge"),e.appendTo("body"),this._renderDlgContent(e,"guid"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderNumberDialog:function(){var e,t=this._id+"_numberDlg";$("#"+t).length>0||(e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge"),e.appendTo("body"),this._renderDlgContent(e,"number"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderDateDialog:function(e){var t,i=this._id+"_dateDlg";$("#"+i).length>0||(t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge"),t.appendTo("body"),this._renderDlgContent(t,"date",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderDatetimeDialog:function(e){var t,i=this._id+"_datetimeDlg";$("#"+i).length>0||(t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge"),t.appendTo("body"),this._renderDlgContent(t,"datetime",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderFDialog:function(e){$("#"+e).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_closeFDialog:function(){(this._isExcelFilter||this._excelFilterRendered)&&this._excelFilter.closeXFDialog(),this._$menuDlgIsOpen&&this._closeFilterDlg()},_renderDlgContent:function(e,t,i){e.addClass("e-grid")
;var s,n=ej.buildTag("div.e-predicate"),r=ej.buildTag("div.e-operator"),o=ej.buildTag("div.e-value"),l=this.localizedLabels.StringMenuOptions,a=this.localizedLabels.NumberMenuOptions,d=ej.buildTag("input#"+this._id+t+"_ddinput",{},{},{type:"text"}),h=ej.buildTag("div#"+this._id+t+"_dropdown"),c=ej.buildTag("ul"),u=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"or"}),p=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"and",checked:"checked"});n.append(p).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateAnd)).append(u).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateOr)),this.model.filterSettings.showPredicate||n.hide(),"string"==t&&(s=ej.buildTag("input",{},{},{type:"checkbox"}),n.append(s).append(ej.buildTag("span.e-caption").html(this.localizedLabels.MatchCase)),$.each(l,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),("number"==t||"date"==t||"datetime"==t||"guid"==t)&&("guid"==t&&(a=a.slice(4,6)),$.each(a,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),"boolean"!=t&&(h.append(c),r.append(d),r.append(h));var m=ej.buildTag("input",{},{},{type:"text"}),g=ej.buildTag("input",{},{},{type:"checkbox"}),f=this.model.enableResponsiveRow?"OkButton":"Filter",_=this.model.enableResponsiveRow?"CancelButton":"Clear",v=ej.buildTag("input.e-filter e-flat e-btnsub",{},{},{type:"button",value:this.localizedLabels[f]}),b=ej.buildTag("input.e-clear e-flat e-btncan",{},{},{type:"button",value:this.localizedLabels[_]});o.append(ej.buildTag("span.e-caption").html(this.localizedLabels.FilterMenuCaption)),e.append(n),"boolean"==t?(o.find("span.e-caption").css("top","1px"),o.append(g)):(o.append(ej.buildTag("br")).append(m),e.append(r)),e.append(o),e.append(ej.buildTag("div.e-dlgBtns").append(v).append(b)),"boolean"!=t&&d.ejDropDownList({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,targetID:this._id+t+"_dropdown",width:"100%",height:"26px",selectedItemIndex:0}),u.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),p.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,checked:!0}),s&&s.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),e.css("display","none"),this._createButton("filter",v),this._createButton("clear",b),"number"==t?m.ejNumericTextbox({cssClass:this.model.cssClass,locale:this.model.locale,enableRTL:this.model.enableRTL,value:0,showSpinButton:!1,height:"26px",decimalPlaces:2,width:"100%"}):"guid"==t?m.css({height:"26px",width:"100%"}):"date"==t?(m.attr("id",this._id+"_dpDate"),m.ejDatePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this.model.locale}),ej.isNullOrUndefined(i.format)||m.ejDatePicker({dateFormat:i.format.replace(/{0:|}/g,function(){return""})})):"datetime"==t?(m.attr("id",this._id+"_dpDateTime"),m.ejDateTimePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",locale:this.model.locale}),ej.isNullOrUndefined(i.format)||m.ejDateTimePicker({dateTimeFormat:i.format.replace(/{0:|}/g,function(){return""})})):"boolean"==t?g.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}):"string"==t&&(m.attr("id",this._id+"_acString"),m.ejAutocomplete({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,dataSource:this._dataSource(),width:"100%",height:26,enableDistinct:!0,focusIn:function(){var e=this.element.closest(".e-dialog").find(".e-dropdownlist"),t=this.element.closest(".e-dialog").find(".e-checkbox").prop("checked");this.model.filterType=e.ejDropDownList("model.value"),this.model.caseSensitiveSearch=t},open:function(){var e=!this.element.closest(".e-dialog").ejDialog("isOpened");this.suggestionList.css({visibility:e?"hidden":"visible"})}}))},_createButton:function(e,t){var i="filter"==e?ej.proxy(this._fltrBtnHandler,this):ej.proxy(this._fltrClrHandler,this);t.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,click:i})},_getIdField:function(){var e;return $.each(this.model.columns,function(t,i){if(i.key)return e=i.field,!1}),e},_filterCompleteAction:function(){var e;if(this.model.allowPaging&&this._refreshGridPager(),"menu"==this.model.filterSettings.filterType||this._isExcelFilter){this._closeFDialog();var t=this.getColumnByField(this._$curFieldName),i=$.inArray(t,this.model.columns),s=this,n=!1;$.each(this.model.filterSettings.filteredColumns,function(e,t){return t.field==s._$curFieldName?(n=!0,!1):1==t.isComplex&&t.predicates[0].field==s._$curFieldName?(n=!0,!1):void 0}),e=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell").eq(i).find(".e-filtericon"),n?e.addClass("e-filteredicon e-filternone"):e.removeClass("e-filteredicon e-filternone")}},_refreshFilterIcon:function(){var e,t,i,s,n,r;if(this.model.filterSettings.filteredColumns.length)for(e=ej.distinct(this.model.filterSettings.filteredColumns,"field",!0),t=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell"),this.model.showStackedHeader&&(t=t.not(".e-stackedHeaderCell")),this.model.allowReordering&&t.find(".e-filtericon").removeClass("e-filteredicon e-filternone"),n=0,r=e.length;n<r;n++)s=e[n],i=this.getColumnIndexByField(s.isComplex===!0?s.predicates[0].field:s.field),t.eq(i).find(".e-filtericon").addClass("e-filteredicon e-filternone")},_setFilterFieldValues:function(e){var t,i="",s=this,n=-1;$.each(this.model.filterSettings.filteredColumns,function(e,t){t.field==s._$curFieldName&&(n=e)}),n==-1&&"boolean"!=this._$colType&&("string"==this._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:!1}),$(".e-predicate input[name ="+this._id+"_predicate"+this._$colType+"]:first").ejRadioButton({checked:!0}),$("#"+this._id+this._$colType+"_ddinput").ejDropDownList({selectedItemIndex:0,change:function(){this.element.closest(".e-dialog").find(".e-autocomplete").val(i)}})),t=$(this.model.filterSettings.filteredColumns).map(function(){return this.field}).get(),(this._$curFieldName!=this._$prevFieldName||$.inArray(this._$curFieldName,t)!=-1)&&($.each(this.model.filterSettings.filteredColumns,function(e,t){if(t.field==s._$curFieldName){for(var n="number"==s._$colType||"date"==s._$colType||"datetime"==s._$colType?"Number":"String",r=s.localizedLabels[n+"MenuOptions"],o=ej.isNullOrUndefined(t.actualOperator)?t.operator:t.actualOperator,l=0;l<r.length&&r[l].value.toLowerCase()!=o;l++);return"string"==s._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:t.matchcase}),$("input[value="+t.predicate+"]").ejRadioButton({checked:!0}),$("#"+s._id+s._$colType+"_ddinput").ejDropDownList({selectedItemIndex:l}),i=null!=t.actualFilterValue?t.actualFilterValue:t.value,!1}}),"boolean"==this._$colType?i&&""!=i?$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!0}):$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!1}):"date"==this._$colType||"datetime"==this._$colType?$(e).find(".e-value .e-datepicker")["date"==this._$colType?"ejDatePicker":"ejDateTimePicker"]("model.value",i):"number"==this._$colType?$(e).find(".e-value .e-numerictextbox").ejNumericTextbox("model.value",i):$(e).find(".e-value input").val(i))},_fltrBtnHandler:function(){var e;this.model.isResponsive&&this._mediaStatus&&this._responsiveFilterClose();var t,i,s=this._id+"_"+this._$colType+"Dlg",n=$("#"+s),r=n.find(".e-value input"),o=r.val(),l=void 0;"number"==this._$colType&&(r=r.filter(".e-numerictextbox"),o=parseFloat(r.ejNumericTextbox("getValue")),l=!0),"string"==this._$colType&&(l=n.find(".e-predicate input[type='checkbox']").is(":checked")),("date"==this._$colType||"datetime"==this._$colType)&&(o=ej.parseDate(o,this._$colFormat,this.model.locale),l=!0),"boolean"==this._$colType?(o=null!=r.ejCheckBox("model.checked")&&r.ejCheckBox("model.checked"),t="equal"):t=$("#"+this._id+this._$colType+"_ddinput").ejDropDownList("getSelectedValue").toLowerCase(),i=n.find(".e-predicate input[type='radio']:checked"),this._$colForeignKeyValue&&this._$colDropdownData?this._fltrForeignKeyValue(t,o,l,this._$colDropdownData,this._$colForeignKeyField,this._$colForeignKeyValue,this._$colType,i):this.filterColumn(this._$curFieldName,t,o,n.find(".e-predicate input[type='radio']:checked").attr("value"),l),this.model.isResponsive&&(n.css("display","none"),this._setResponsiveFilterIcon(),this.element.css("display","block"),!this.model.allowScrolling||this.model.enableResponsiveRow&&this.model.minWidth||(e={},e.requestType="refresh",this._refreshScroller(e)))},_fltrClrHandler:function(){this.clearFiltering(this._$curFieldName)},_fltrForeignKeyValue:function(e,t,s,n,r,o,l,a){var d,h;ej.isNullOrUndefined(s)&&(s=!0);var c,u,p,m,g=[],f=(!a||a.css("display"),a?a.attr("value"):"and"),_=n,v={mapFieldName:o,fieldName:r,operator:e,value:t,predicate:a,matchcase:s},b={requestType:ej.Grid.Actions.Filtering,action:"fetchingForeignKeyField",currentFilteringColumn:r,currentFilterObject:v};this._trigger("actionBegin",b),n instanceof ej.DataManager||(_=new ej.DataManager(n)),"date"==l?(d=new Date(t.setDate(t.getDate()-1)),h=new Date(t.setDate(t.getDate()+2)),c="equal"==e||"notequal"==e?"equal"==e?(new ej.Query).where(ej.Predicate(v.mapFieldName,">",d,!v.matchcase).and(v.mapFieldName,"<",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(ej.Predicate(v.mapFieldName,"<=",d,!v.matchcase).or(v.mapFieldName,">=",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName)):c=(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName),u={actualFilterValue:v.value,actualOperator:v.operator,ejpredicate:void 0,predicate:f},_.executeQuery(c).done(ej.proxy(function(e){for(m=e.result,requireProc=$.isPlainObject(m[0]),preds=[],merge=!1,m=requireProc?ej.distinct(m,r,!1):m,field=this._$curFieldName,p=new ej.Predicate(field,"equal",m[0],s),i=1,vlen=m.length;i<vlen;i++)preds.push(new ej.Predicate(field,"equal",m[i],s)),merge=!0;merge&&(preds.unshift(p),p=ej.Predicate.or(preds)),$.extend(u,{ejpredicate:$.extend(p,{field:field},u)}),this.filterColumn(v.fieldName,v.operator,v.value,g,v.matchcase,u)},this))},_setDateFilters:function(e,t){var i,s,n,r,o;if(t||ej.isNullOrUndefined(this.getColumnByField(e.field).format)?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):(n=this.getColumnByField(e.field).format,n.indexOf("s")!=-1?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):n.indexOf("m")!=-1?(i=new Date(e.value.setMinutes(e.value.getMinutes()-1)),s=new Date(e.value.setMinutes(e.value.getMinutes()+2))):n.indexOf("h")!=-1?(i=new Date(e.value.setHours(e.value.getHours()-1)),s=new Date(e.value.setHours(e.value.getHours()+2))):(i=new Date(e.value.setDate(e.value.getDate()-1)),s=new Date(e.value.setDate(e.value.getDate()+2)))),r=$.extend({},e),o=$.extend({},e),r.value=i,o.value=s,"equal"==e.operator?(r.operator="greaterthan",r.predicate="and",o.operator="lessthan",o.predicate="and"):(r.operator="lessthanorequal",r.predicate="or",o.operator="greaterthanorequal",o.predicate="or"),pred=ej.Predicate(r.field,r.operator,r.value,!1),predicate=pred[o.predicate](ej.Predicate(o.field,o.operator,o.value,!1)),e.value=new Date(e.value.setSeconds(o.value.getSeconds()-1)),t)return predicate;this.model.filterSettings.filteredColumns.push($.extend(predicate,{field:e.field,operator:e.operator}))}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.group={_renderGroupDropArea:function(){var e,i;return t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation),e=this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea,this.model.groupSettings.showDropArea?(i=t.buildTag("div.e-groupdroparea",e),i.addClass("e-default"),this.model.groupSettings.enableDropAreaAutoSizing&&i.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),i):void 0},_getColGroup:function(t){var s,n,r,o=this.getRsc("helpers",t);return s=1==o.model.groupSettings.groupedColumns.length?this.data.items.level===i?0:this.data.items.level-1:this.data.items.level===i?o.model.groupSettings.groupedColumns.length:this.data.items.level-1,n=e(document.createElement("div")),o._isCaptionSummary?r=o._getCaptionColGroup(s):(r=o._getMetaColGroup(),s!=o.model.groupSettings.groupedColumns.length&&o.model.groupSettings.groupedColumns.length>1&&r.prepend(o._getIndentCol())),n.html(r),n.html()},_colSpanAdjust:function(s,n,r){var o,l,a,d,h,c,u,p,m;if(t.isNullOrUndefined(s)?(o=this,l=r):(o=this.getRsc("helpers",s),l=this),1==o.model.groupSettings.groupedColumns.length?(a=l.data.items.level===i?1:l.data.items.level-1,"groupcaption"==n&&(o._currentJsonData=o._currentJsonData.concat(l.data.items))):(a=l.data.items.level===i?o.model.groupSettings.groupedColumns.length:l.data.items.level-1,"groupcaption"==n&&l.data.items.level===i&&(o._currentJsonData=o._currentJsonData.concat(l.data.items))),o._isGrouping=!0,d=o.model.groupSettings.showGroupedColumn?0:o.model.groupSettings.groupedColumns.length,h=0,e.each(o._hiddenColumnsField,function(t,i){e.inArray(i,o.model.groupSettings.groupedColumns)!=-1&&(h+=1,o.model.groupSettings.showGroupedColumn&&(d+=1))}),c=o.model.columns.length+o.model.groupSettings.groupedColumns.length-a-o._hiddenColumnsField.length-d+h,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c,o._isCaptionSummary&&"groupcaption"==n){var g=[],f=0,_=o._captionSummary(),v=0,b=[];for(e.each(_[0].summaryColumns,function(t,i){e.inArray(i.displayColumn,o._hiddenColumnsField)!=-1&&f++,b.push(o.getColumnIndexByField(i.displayColumn)),g.push(o.getColumnIndexByField(i.displayColumn)+o.model.groupSettings.groupedColumns.length-a)}),u=t.min(b),p=0;p<o._hiddenColumnsField.length;p++)m=t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[p]))?o.getColumnIndexByHeaderText(o._hiddenColumnsField[p],t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[p]))):o.getColumnIndexByField(o._hiddenColumnsField[p]),u>m&&v++;g.length>0&&(c=t.min(g)),c-=v,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c}return c},_captionEncode:function(e){return this.getRsc("helpers",e).getColumnByField(this.data.field).disableHtmlEncode},_captionFormat:function(i){var s,n=this.getRsc("helpers",i),r=e.extend({},this.data),o=n.getColumnByField(r.field);return s=o.foreignKeyValue&&o.dataSource?n._foreignKeyBinding(n.getColumnIndexByField(r.field),r.key,n._id):r.key,t.isNullOrUndefined(o.format)||o.format.indexOf("{0:")!=-1||(r[r.field]=r.key,n.data=r),r.key=o.format?n.formatting(o.format,s,n.model.locale):s,r.headerText=o.headerText,e.render[n._id+"_CaptionTemplate"](r)},_getCaptionColGroup:function(e){var t,i=this.getHeaderTable().find("colgroup").clone(),s=i.find("col"),n=s.length-this.model.columns.length;if((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(n-=1),i.find("col:lt("+n+")").remove(),e>0&&e!=this.model.groupSettings.groupedColumns.length)if(this.model.groupSettings.groupedColumns.length>2&&e!=this.model.groupSettings.groupedColumns.length-1)for(t=0;t<this.model.groupSettings.groupedColumns.length-e;t++)i.prepend(this._getIndentCol());else i.prepend(this._getIndentCol());return i},_groupSummaryRow:function(i,s,n,r){var o,l,a,d,h,c,u=this.getRsc("helpers",n),r=!t.isNullOrUndefined(r);if(u.model.showSummary){if(null==u.getFooterTable()&&u._renderGridFooter(),u._createSummaryRows(u.getFooterTable(),null==i.records?i:i.records,s,i,r),u._isCaptionSummary&&!r&&(o=[],l=u._captionSummary(),e.each(l[0].summaryColumns,function(e,t){o.push(u.getColumnIndexByField(t.displayColumn))}),o.length>0&&(colIndex=t.min(o)),a=u.model.columns.length,u.getFooterTable().find("tbody td").slice(-(a-colIndex)).removeClass("e-summaryrow").addClass("e-groupcaptionsummary")),!u.model.groupSettings.showGroupedColumn){var p=u.model.groupSettings.groupedColumns,m=0,g=u.getFooterTable().children("tbody").find("tr");for(d=0;d<u.model.summaryRows.length;d++){for(h=0;h<u.model.summaryRows[d].summaryColumns.length;h++)for(c=0;c<p.length;c++)p[c]==u.model.summaryRows[d].summaryColumns[h].displayColumn&&(m++,u.model.summaryRows[d].summaryColumns.length==m&&e(g[d]).addClass("e-hide"));m=0}}return r?u.getFooterTable().find("tbody").html():u.getFooterTable().find("tbody").find("tr").html()}},addGroupingTemplate:function(){var i,s,n,r,o=(document.createElement("tbody"),this),l={};l["_"+o._id+"ColSpanAdjust"]=this._colSpanAdjust,l["_"+o._id+"Colgroup"]=this._getColGroup,t.isNullOrUndefined(this.model.groupSettings.captionFormat)?e.templates(o._id+"_CaptionTemplate",this.localizedLabels.GroupCaptionFormat):e.templates(o._id+"_CaptionTemplate",this.model.groupSettings.captionFormat),l["_"+o._id+"CaptionFormat"]=this._captionFormat,l["_"+o._id+"GroupSummaryRow"]=this._groupSummaryRow,l["_"+o._id+"CaptionEncode"]=this._captionEncode,l[o._id+"Object"]=this,e.views.helpers(l),i=" ~_"+o._id+"CaptionFormat('"+o._id+"Object')",s="<td class='e-recordplusexpand' ej-mappingname='{{:field}}' ej-mappingvalue='{{:key}}'><div class='e-icon e-gdiagonalnext'></div></td><td class='e-groupcaption' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','groupcaption') }}'>{{if ~_"+o._id+"CaptionEncode('"+o._id+"Object')}}{{html:"+i+"}}{{else}}{{:"+i+"}}{{/if}}</td>",this._isCaptionSummary&&this.model.showSummary&&(s=s+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object')}}"),n="<tr>"+s+"</tr>",r=t.buildTag("tbody"),r.html("{{if items.GROUPGUID}}{{for items tmpl='"+o._id+"_GroupingTemplate'/}}{{else}}{{for items tmpl='"+o._id+"_JSONTemplate'/}}{{/if}}");var a="<table class='e-table {{if items.GROUPGUID}}{{else}}e-recordtable{{/if}}' cellspacing='0.25px' >{{:~_"+o._id+"Colgroup('"+o._id+"Object')}}"+r.html()+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object', '"+o._id+"showGroupCaption')}}</table>",d="<td class='e-tabletd' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','table')}}'>"+a+"</td>",h="<tr><td class='e-indentcell'></td>"+d+"</tr>";e.templates(o._id+"_GroupingTemplate",n+h)},addSummaryTemplate:function(){var i=this;e.each(i.model.summaryRows,function(s,n){e.each(n.summaryColumns,function(s,n){t.isNullOrUndefined(n.template)||e.templates(i._id+"_summaryTemplate"+n.template,n.template)})})},_getGroupTopLeftCell:function(){var e=t.buildTag("th.e-grouptopleftcell");return e.append(t.buildTag("div.e-headercelldiv e-emptyCell","&#160;")),e},_getEmptyFilterBarCell:function(){return t.buildTag("th.e-filterbarcell e-grouptopleftcell")},_groupingAction:function(e){var t,i=this.getHeaderTable().find("thead").find(".e-columnheader:not(.e-stackedHeaderRow)").find(".e-grouptopleftcell"),s=(this.getHeaderTable().find("colgroup").find("col"),i.length);for(s&&(this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),i.remove(),this.getHeaderTable().find("thead").find(".e-filterbar").find(".e-filterbarcell:lt("+s+")").remove()),(!this.model.allowResizeToFit||e)&&this.setWidthToColumns(),t=0;t<this.model.groupSettings.groupedColumns.length;t++)this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),this.getHeaderTable().find("thead").find(".e-columnheader").prepend(this._getGroupTopLeftCell()),this.getHeaderTable().find("thead").find(".e-filterbar").prepend(this._getEmptyFilterBarCell());this.getHeaderTable().find(".e-columnheader").find("th.e-grouptopleftcell").last().addClass("e-lastgrouptopleftcell")},groupColumn:function(i){var s,n,r;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping&&e.inArray(i,this._disabledGroupableColumns)==-1&&!t.isNullOrUndefined(this.getColumnByField(i))&&e.inArray(i,this.model.groupSettings.groupedColumns)==-1){for(this.model.groupSettings.groupedColumns.push(i),s=0;s<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[s].field!=i;s++);this.model.sortSettings.sortedColumns.length==s&&this.model.sortSettings.sortedColumns.push({field:i,direction:t.sortOrder.Ascending}),n={},n.columnName=i,n.requestType=t.Grid.Actions.Grouping,r=this._processBindings(n),r&&(e.inArray(i,this._scolumns)!=-1||this._gridSort==i||this.model.sortSettings.sortedColumns.pop(),this.model.groupSettings.groupedColumns.pop()),this._primaryKeyValues=[]}},ungroupColumn:function(i){var s,n,r,o,l,a;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping){if(e.inArray(i,this.model.groupSettings.groupedColumns)==-1)return null;for(this.model.groupSettings.groupedColumns.splice(e.inArray(i,this.model.groupSettings.groupedColumns),1),0==this.model.groupSettings.groupedColumns.length&&(this._LastColumnUnGroup=!0),s=this.getColumnByField(i),this.model.groupSettings.showGroupedColumn||s.visible||(n=this._hiddenColumnsField.indexOf(i),this._hiddenColumnsField.splice(n,1),s.visible=!0),r={},o=0;o<this.model.sortSettings.sortedColumns.length;o++)if(this.model.sortSettings.sortedColumns[o].field==i){if(this._scolumns.indexOf(i)!=-1&&this.model.allowSorting&&this.model.allowMultiSorting||this._gridSort==i){if(this.model.allowSorting&&this.model.allowMultiSorting){l=e.inArray(i,this._scolumns),this._scolumns.splice(l,1);break}this._gridSort=null;break}this.model.sortSettings.sortedColumns.splice(o,1);break}r.columnName=i,r.requestType=t.Grid.Actions.Ungrouping,this._isUngrouping=!0,a=this._processBindings(r),a&&this.model.groupSettings.groupedColumns.push(i),this._primaryKeyValues=[]}},collapseGroupDropArea:function(){var i=this.element.find(".e-groupdroparea").first(),s=this;0==this.model.groupSettings.groupedColumns.length&&this.model.groupSettings.enableDropAreaAutoSizing&&i.animate({height:"10px"},200,function(){null!=s.model&&0==s.model.groupSettings.groupedColumns.length&&(e(this).html("").append(t.buildTag("div.e-animatebutton e-animatebuttondown e-icon e-gdownarrow")),e(this).dequeue().css("height","auto"))})},expandGroupDropArea:function(){var e=this.element.find(".e-groupdroparea").first(),i=this;0==this.model.groupSettings.groupedColumns.length&&i.model.groupSettings.enableDropAreaAutoSizing&&e.animate({height:"30px"},150,function(){0==i.model.groupSettings.groupedColumns.length&&e.html(i.localizedLabels.GroupDropArea).append(t.buildTag("div.e-animatebutton e-animatebuttonup e-icon e-guparrow")),e.dequeue().css("height","30px")})},_enableGroupingEvents:function(){this.model.allowGrouping&&(this._on(this.element,"click",".e-groupdroparea,.e-groupheadercell",this._groupHeaderCellClick),this._on(this.element,"mousedown",".e-groupheadercell",function(){return!1}))},_recalculateIndentWidth:function(){var i,s,n,r,o=this,l=!t.isIOSWebView()&&this.getBrowserDetails(),a=this.getHeaderTable().find(".e-lastgrouptopleftcell").width(),d=a,h=a/30;h>=1&&(d=30/h),this.getHeaderTable().find("colgroup").find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",d+"px"),s=this.getContentTable().find("table").filter(":not(.e-recordtable)"),a=this.getHeaderTable().find(".e-lastgrouptopleftcell").width(),a>30||this._isCaptionSummary&&(a>=30||a>d)?(this._isCaptionSummary?(n=this.model.isEdit?s.parent(":not(.gridform)").children("colgroup"):s.children("colgroup"),e.each(n,function(t,i){var s=e(i).find("col").length-o.model.columns.length;(null!=o.model.detailsTemplate||null!=o.model.childGrid)&&s>0&&(s-=1),e(i).find("col").slice(0,s).css("width",d+"px")})):this.model.isEdit?s.parent(":not(.gridform)").children("colgroup").find("col:first-child").css("width",a+"px"):s.children("colgroup").find("col:first-child").css("width",a+"px"),i=this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length),l&&"msie"!=l.browser?i.css("width",d+"px"):this._isCaptionSummary?i.css("width",d+"px"):i.first().css("width",a/this.element.width()*100+"%")):(this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",d+"px"),this.getContentTable().find("table").filter(":not(.e-recordtable)").children("colgroup").find("col:first-child").css("width",a+"px")),this.model.showSummary&&(r=this.getContentTable().find("table").filter(".e-groupsummary").find(".e-summary"),r.css("width",d+"px"))},getFieldNameByHeaderText:function(e){return t.isNullOrUndefined(this._fieldColumnNames[e])?null:this._fieldColumnNames[e]},getHeaderTextByFieldName:function(e){return t.isNullOrUndefined(this._headerColumnNames[e])?null:this._headerColumnNames[e]},expandAll:function(){var t,i=this.element.find(".e-recordpluscollapse"),s=this._excludeDetailRows().find(".e-detailrowcollapse");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},collapseAll:function(){var t,i=this.element.find(".e-recordplusexpand"),s=this.element.find(".e-detailrowexpand");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},_group:function(i){var s,n,r,o,l,a,d;if(this.model.groupSettings.groupedColumns.length&&this.model.currentViewData){if(this._currentJsonData=[],s=document.createElement("div"),!this.model.groupSettings.showGroupedColumn){if(this.initialRender||t.isNullOrUndefined(i.columnName)||"grouping"!=i.requestType)for(a=0;a<this.model.groupSettings.groupedColumns.length;a++)e.inArray(this.model.groupSettings.groupedColumns[a],this._hiddenColumnsField)==-1&&(this._hiddenColumnsField.push(this.model.groupSettings.groupedColumns[a]),this.getColumnByField(this.model.groupSettings.groupedColumns[a]).visible=!1);else n=this.getColumnByField(i.columnName),e.inArray(i.columnName,this._hiddenColumnsField)==-1&&(this._hiddenColumnsField.push(i.columnName),n.visible=!1);this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.getContentTable().children("colgroup").replaceWith(this.getHeaderTable().find("colgroup").clone())}for(this._isReorder="reorder"==i.requestType,r=this.getContentTable().children("colgroup").find("col"),o=r.length-this.model.columns.length,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o--,r.length>this.model.columns.length&&this.getContentTable().children("colgroup").find("col:lt("+o+")").remove(),this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),l=null!=this.model.detailsTemplate||null!=this.model.childGrid?this.model.groupSettings.groupedColumns.length+1:this.model.groupSettings.groupedColumns.length,a=0;a<l;a++)this.getContentTable().children("colgroup").prepend(this._getIndentCol());this.model.currentViewData.length?(d=this.getContentTable().children("tbody"),d.empty(),s.innerHTML=["<table><tbody>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</tbody></table>"].join(""),this.getContentTable().get(0).replaceChild(s.firstChild.firstChild,this.getContentTable().get(0).lastChild),this._hideCaptionSummaryColumn()):this.model.isEdit&&this.cancelEdit(),this._groupingAction(),this._gridRows=this.getContentTable().find(".e-recordtable").find("tbody").find("tr").not(".e-gridSummaryRows"),this._eventBindings()}},_ungroup:function(){var e,i,s,n;if(this._isGrouping=!1,t.isNullOrUndefined(this.model.detailsTemplate)||(this._detailsOuterWidth=null),e=this.element.children(".e-gridheader"),i=e.find(".e-filterbar").find("th").find("input"),e.find("div").first().empty().append(this._renderGridHeader().find("table")),this.setGridHeaderContent(e),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType)for(this._renderFiltering(),this._renderFilterBarTemplate(),s=this.element.children(".e-gridheader").find(".e-filterbar").find("th").find("input"),n=0;n<i.length;n++)s.eq(n).val(i.eq(n).val());this.model.groupSettings.showGroupedColumn||this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.refreshTemplate(),this.element.find(".e-gridcontent").children("div").first().empty().append(this._renderGridContent().find("table").first()),this.setGridContent(this.element.find(".e-gridcontent")),this._gridRows=0!=this.model.groupSettings.groupedColumns.length?this.getContentTable().find(".e-recordtable").find("tbody").find("tr").toArray():this.getContentTable().get(0).rows},_groupHeaderCellClick:function(t){var i,s=e(t.target);if(!s.hasClass("e-groupdroparea"))return s.hasClass("e-ungroupbutton")?(i=s.parent().attr("ej-mappingname"),this.ungroupColumn(i)):s.hasClass("e-togglegroupbutton")?(i=s.parent().attr("ej-mappingname"),s.hasClass("e-toggleungroup")&&this.ungroupColumn(i)):s.hasClass("e-animatebutton")?e(t.target).hasClass("e-animatebuttondown")?this.expandGroupDropArea():this.collapseGroupDropArea():(s.addClass("e-headercelldiv"),this._mouseClickHandler(t),s.removeClass("e-headercelldiv")),!1},_captionSummary:function(i){for(var s=null,n=this.model.summaryRows,r=n.length,o=0;o<r;o++)if(1==n[o].showCaptionSummary){s=e(n[o]);break}return i&&(left=n.slice(0,o),right=n.slice(o+1,r),t.merge(s=left,right)),s},_dropAreaHover:function(t){var i=e(t.target);return"mouseenter"==t.type?(this._dragActive?i.hasClass("e-groupdroparea")&&i.addClass("e-hover"):i.removeClass("e-hover"),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").show(150)):"mouseleave"==t.type&&(i.hasClass("e-groupdroparea")&&(i.find(".e-ungroupbutton").hide(150),i.removeClass("e-hover")),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").hide(150)),!1},_groupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");if((this.model.groupSettings.groupedColumns.length&&0==s.find(".e-grid-icon").length||t.Grid.Actions.Refresh==e.requestType)&&s.empty(),this.initialRender||t.Grid.Actions.Refresh==e.requestType){for(i=0;i<this.model.groupSettings.groupedColumns.length;i++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[i]);this._refreshGridPager()}else this._addColumnToGroupDrop(e.columnName);for(this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction);!this.initialRender&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_ungroupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");for(e.requestType!=t.Grid.Actions.Refresh&&this._removeColumnFromDrop(e.columnName),this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction)
;0==this.model.groupSettings.groupedColumns.length&&(s.html(this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea),this.model.groupSettings.enableDropAreaAutoSizing&&s.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),s.css("height","auto")),t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&this._headerCellreorderDragDrop(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_getToggleButton:function(){return t.buildTag("span.e-togglegroupbutton e-icon e-gridgroupbutton","&#160;")},_checkEinHeader:function(t){for(var i,s=this.element.children(".e-gridheader").find("thead").find(".e-columnheader").find(".e-headercell"),n=0;n<s.length;n++){if(e.trim(s.eq(n).find("div").attr("ej-mappingname"))==t)return s.eq(n);if(this.model.allowSorting&&this.model.allowMultiSorting&&(i=e(s.eq(n)).clone(),i.find(".e-number").remove(),e.trim(i.find("div").attr("ej-mappingname"))==t))return i}return null},_checkEinGroupDrop:function(t){for(var i=this.element.children(".e-groupdroparea").find(".e-grid-icon"),s=0;s<i.length;s++)if(e.trim(i.eq(s).find("div").attr("ej-mappingname"))==t)return i.eq(s);return null},_addColumnToGroupDrop:function(i){var s,n,r=t.buildTag("div.e-grid-icon e-groupheadercell"),o=this.element.find(".e-groupdroparea").first(),l=t.buildTag("div",{},{},{"ej-mappingname":i}),a="e-rarrowup-2x",d=this.getColumnByField(i);d.disableHtmlEncode?r.append(l.text(d.headerText)):d.headerTemplateID?r.append(l.html(e(d.headerTemplateID).html())):r.append(l.html(d.headerText)),s=this._checkEinHeader(i),this.model.groupSettings.showToggleButton&&(l.append(this._getToggleButton().addClass("e-toggleungroup")),s.find(".e-headercelldiv").find(".e-togglegroupbutton").remove().end().append(this._getToggleButton().addClass("e-toggleungroup"))),n="ascending",s.find(".e-ascending,.e-descending").length&&(n=s.find(".e-ascending,.e-descending").hasClass("e-ascending")?"ascending":"descending",a="ascending"==n?"e-rarrowup-2x":"e-rarrowdown-2x"),l.append(this._createSortElement().addClass("e-"+n+" "+a)),this.model.groupSettings.showUngroupButton&&l.append(t.buildTag("span.e-ungroupbutton e-icon e-cancel"," ",{},{title:this.localizedLabels.UnGroup})),o.append(r).css("height","auto");var h=r.offset().left,c=r.clone().css("position","absolute");r.css("visibility","hidden"),o.append(c).dequeue(),c.css({left:h+150}).animate({left:h},150,function(){r.css("visibility","visible"),c.remove()})},_removeColumnFromDrop:function(t){for(var i=(this.getHeaderTextByFieldName(t),this.element.children(".e-groupdroparea")),s=i.css("height","30px").find(".e-grid-icon"),n=0;n<s.length;n++)e.trim(s.eq(n).find("div").attr("ej-mappingname"))==t&&(0==this.model.groupSettings.groupedColumns.length?this.collapseGroupDropArea():s.eq(n).remove())},_setAggreatedCollection:function(e){if((!(this._dataSource()instanceof t.DataManager)||this._dataManager.dataSource.url==i||this._isRemoteSaveAdaptor||this._dataManager.dataSource.offline)&&!this.model.enableLoadOnDemand){var s;s=this._dataManager.executeLocal(e).result,this._aggregatedCollection=s}},_setAggregates:function(e,i){var s,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v=new t.Query;for(e=e||this.model.currentViewData,i=i||this._aggregatedCollection,r=e.length,0!=r&&(l=t.Predicate("field","equal",e[0].field),a=t.Predicate("key","equal",e[0].key),e[0].key instanceof Date&&(d={value:e[0].key,operator:"equal",field:"key"},a=this._setDateFilters(d,!0)),n=l.and(a)),s=1;s<r;s++)l=t.Predicate("field","equal",e[s].field),a=t.Predicate("key","equal",e[s].key),e[s].key instanceof Date&&(d={value:e[s].key,operator:"equal",field:"key"},a=this._setDateFilters(d,!0)),n=n.or(l.and(a));if(i=n?new t.DataManager(i).executeLocal(v.where(n)):i,o=i.length,e.length>0)for(s=0;s<o;s++)if((!(s>0)||!(s<o-1))&&(e[s].count=i[s].count,e[s].items.GROUPGUID&&this._setAggregates(e[s].items,i[s].items),this.model.showSummary))for(h=e[s].aggregates=[],c=this.model.summaryRows,m=0,g=c.length;m<g;m++)for(u=c[m].summaryColumns,f=0,_=u.length;f<_;f++)p=i[s].items.level?i[s].items.records:i[s].items,h[u[f].dataMember+" - "+u[f].summaryType]=this.getSummaryValues(u[f],p)}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.dragAndDrop={_headerCellgDragDrop:function(){var i,s=this;this.dragHeaderElement(),i=this.element.children("div.e-groupdroparea"),i.ejDroppable({accept:i,drop:function(i,n){if(!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")){var r=s.getColumnByField(e.trim(e(n.draggable[0]).find("div").attr("ej-mappingname")));n.helper.remove(),s._disabledGroupableColumns.length&&e.inArray(r.field,s._disabledGroupableColumns)!=-1||t.isNullOrUndefined(r)||t.isNullOrUndefined(r.field)||""==r.field||s.groupColumn(r.field)}}})},_headerCellreorderDragDrop:function(){var i,s=this;this.dragHeaderElement(),i=this.element.find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),i.ejDroppable({accept:i,drop:function(i,n){var r,o,l,a,d,h,c,u,p,m,g,f;!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")&&e(n.draggable[0]).closest(".e-grid").attr("id")==s._id&&(("ascending"==n.draggable.attr("aria-sort")||"descending"==n.draggable.attr("aria-sort"))&&(r=s.getColumnByField(e.trim(e(n.draggable[0]).find("div").attr("ej-mappingname"))),s.model.allowSorting&&s.model.allowMultiSorting?s._scolumns.push(r.field):s._gridSort=r.field),h=n.draggable.index(),c=i.dropTarget.parent().index(),(e(i.dropTarget).hasClass("e-number")||e(i.dropTarget).hasClass("e-icon"))&&(c=i.dropTarget.closest(".e-headercell").index()),s.model.scrollSettings.frozenColumns>0?(a=n.draggable.closest(".e-frozenheaderdiv").length>0?h:h+s.model.scrollSettings.frozenColumns,d=i.dropTarget.closest(".e-frozenheaderdiv").length>0?c:c+s.model.scrollSettings.frozenColumns):(a=h,d=c),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?(a-=s.model.groupSettings.groupedColumns.length,d-=s.model.groupSettings.groupedColumns.length):(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(a-=1,d-=1),o=s.getColumnByIndex(a),l=s.getColumnByIndex(d),u=t.isNullOrUndefined(o)||t.isNullOrUndefined(o.field)||""==o.field?null:o.field,p=t.isNullOrUndefined(l.field)||""==l.field?null:l.field,n.helper.remove(),m=e(i.dropTarget).clone(),m.find(".e-number").remove(),t.isNullOrUndefined(u)||t.isNullOrUndefined(p)?s.reorderColumns(a,d):(e(i.dropTarget).hasClass("e-droppable")?(m=m.children(".e-headercelldiv"),g=e(i.dropTarget).children(".e-headercelldiv")):(m=e(i.dropTarget).parent(),g=e(i.dropTarget),e(g).hasClass("e-filtericon")&&(g=m=e(g).siblings(".e-headercelldiv"))),f=s.model.allowSorting&&s.model.allowMultiSorting?i.dropTarget.hasClass("e-number")||i.dropTarget.hasClass("e-icon")?s.getColumnByField(e.trim(m.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))):i.dropTarget.hasClass("e-icon")&&!i.dropTarget.hasClass("e-filtericon")?s.getColumnByField(e.trim(m.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))),s.reorderColumns(o.field,f.field)))}})},dragHeaderElement:function(){var i,s=this,n=this.element.children("div.e-gridheader").find("th.e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),r=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2});n.ejDraggable({cursorAt:{top:-50,left:-2},helper:function(t){var n,o,l,a;return s.element.find(".e-dragclone").length>0&&s.element.find(".e-dragclone").remove(),n=e(t.element).hasClass("e-headercell")?e(t.element):e(t.element).closest("th"),o=n.find(".e-headercelldiv"),l=e(t.element).index(),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?l-=s.model.groupSettings.groupedColumns.length:(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(l-=1),i=s.getColumnByIndex(l),s._$curSElementTarget=o,s.model.allowSorting&&s.model.allowMultiSorting?(a=e(n).clone(),a.find(".e-number").remove(),r.text(a.text()).clone().width(n.outerWidth()+2).height(n.height()+2).css({"font-size":parseInt((n.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)):r.text(n.text()).clone().width(n.outerWidth()+2).height(n.height()+2).css({"font-size":parseInt((n.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)},dragStart:function(t){var n,r,o=t.target,l=e(o),a={target:o,draggableType:"headercell",column:i},d=!1;return s.model.groupSettings.showToggleButton&&i&&i.allowGrouping&&(n=e.inArray(i.field,s.model.groupSettings.groupedColumns),r=e(t.element).find(".e-togglegroupbutton").hasClass("e-togglegroup"),(n!=-1&&r||n==-1&&!r)&&(d=!0)),null!=s._resizer&&s._resizer._expand||d||l.eq(0).hasClass("e-filtericon")||i&&0==i.allowGrouping&&0==i.allowReordering?(e(".e-dragclone").remove(),!1):(s._dragActive=!0,s.model.allowGrouping&&s.expandGroupDropArea(),!s._trigger("columnDragStart",a)&&void 0)},drag:function(t){var n=e(t.target),r={target:n,draggableType:"headercell",column:i};if(s._trigger("columnDrag",r))return!1;n.closest(".e-grid").attr("id")===s._id&&(s.getHeaderTable().find(".e-headercell").removeClass("e-reorderindicate"),!s.model.allowReordering||!(n.hasClass("e-headercelldiv")||n.hasClass("e-headercell"))||n.hasClass("e-detailheadercell")||n.hasClass("e-stackedHeaderCell")||n.parent().hasClass("e-grouptopleftcell")||(document.body.style.cursor="",n.addClass("e-allowDrop"),s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),n.hasClass("e-headercell")?n.addClass("e-reorderindicate"):n.parent().addClass("e-reorderindicate")),n.hasClass("e-groupdroparea")||n.closest(".e-groupdroparea").length?(document.body.style.cursor="",n.addClass("e-allowDrop")):document.body.style.cursor="not-allowed")},dragStop:function(t){if(!t.element.dropped){var n=e(t.target),r={target:n,draggableType:"headercell",column:i};s._trigger("columnDrop",r),s.element.find(".e-groupdroparea").removeClass("e-hover"),s.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),e(".e-dragclone").remove(),s._dragActive=!1,s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),s.model.allowGrouping&&s.collapseGroupDropArea(),document.body.style.cursor="",e(s._Indicator).css("display","none")}}})},_groupHeaderCelldrag:function(){var i,s=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2}),n=this,r=this.element.children(".e-groupdroparea").find(".e-groupheadercell");r.ejDraggable({cursorAt:{top:-35,left:-2},helper:function(t){var i=e(t.sender.target).closest(".e-grid-icon");return s.text(e(t.sender.target).closest(".e-groupheadercell").text()).clone().width(i.width()+2).height(i.height()+2).addClass("e-dragclone").appendTo(n.element)},dragStart:function(e){var t,i=e.target;return e.model.cursorAt={top:-35,left:-2},t={target:i,draggableType:"groupheadercell"},!n._trigger("columnDragStart",t)&&void 0},drag:function(t){e(".Sibling").remove();var i=e(t.target),s={target:i,draggableType:"groupheadercell"};if(n._trigger("columnDrag",s))return!1;i.closest("div.e-gridcontent").length?(document.body.style.cursor="",i.addClass("e-allowDrop")):document.body.style.cursor="not-allowed"},dragStop:function(t){if(!t.element.dropped){var i=e(t.target),s={target:i,draggableType:"groupheadercell"};n._trigger("columnDrop",s),e(".e-dragclone").remove(),document.body.style.cursor=""}}}),i=this.element.children(".e-gridcontent, .e-gridheader"),i.ejDroppable({accept:n.element.children("div.e-groupdroparea").find(".e-groupheadercell"),drop:function(i,s){if(!t.isNullOrUndefined(s.helper)&&s.helper.is(":visible")&&s.draggable.hasClass("e-groupheadercell")){var r=e(s.draggable[0]).find("div").attr("ej-mappingname");s.helper.remove(),t.isNullOrUndefined(r)||n.ungroupColumn(r)}}})},_rowsDragAndDrop:function(){this.dragRowElement();var i=this.getContentTable(),s=this;i.ejDroppable({accept:i,drop:function(i,n){var r,o,l,a,d,h,c=e(i.dropTarget).closest("tr");if(!n.helper.find("tr.e-srcgridinfo").length||(s._draggedGridID=n.helper.find("tr.e-srcgridinfo").children("td").text(),r=s._draggedGridID!=s._id?e("#"+s._draggedGridID).ejGrid("instance"):s,r._id!=s._id&&r.model.rowDropSettings.dropTargetID!="#"+s._id))return!1;var u=r.getSelectedRecords(),p=o=s.getIndexByRow(c);if(p==-1&&(p=o=0),p=p+s.model.pageSettings.currentPage*s.model.pageSettings.pageSize-s.model.pageSettings.pageSize,l={sourceID:r._id,destinationID:s._id,destinationRowIndex:p},d={target:c,targetIndex:p,draggedRecords:u,dropDetails:l},!s._trigger("beforeRowDrop",d))if(a=s._dataSource()instanceof t.DataManager?s._dataSource().dataSource:s._dataSource(),t.isNullOrUndefined(s.model.rowDropSettings.dropMapper)||(t.isNullOrUndefined(a.headers)&&(a.headers=[]),a.headers.push({rowDropDetails:JSON.stringify(l)})),s._id!=r._id){var m=(s._dataManager,s._dataSource().adaptor,r.getBatchChanges());m.deleted=u,d={dropDetails:l,records:u,requestType:t.Grid.Actions.Refresh,targetIndex:p,action:"rowDragged"},s._processDropRequest(r,m,"drag",d),h=s.getBatchChanges(),h.added=u,d.action="rowDropped",s._processDropRequest(s,h,"drop",d)}else s._draggedGridID==s._id&&s.reorderRows(r.selectedRowsIndexes,o)}})},_dragAutoScroll:function(e,t){var i=e.getContent().data("ejScroller"),s=e.getContent()[0].getBoundingClientRect();s||(s=e.getContent().offset()),i&&i._vScrollbar&&(s.top>=t.event.clientY?e._dragUpInterval=setInterval(function(){if(e._dragUpInterval){var t=-e.getRowHeight();0!=i.scrollTop()?i.scrollY(i.scrollTop()+t,!0):e._dragUpInterval&&(e._dragUpInterval=clearInterval(e._dragUpInterval))}},500):s.top+e.getContent().height()<=t.event.clientY?e._dragDownInterval=setInterval(function(){if(e._dragDownInterval){var t=e.getRowHeight(),s=i.scrollTop();Math.round(s)<=i._vScrollbar.model.maximum?i.scrollY(i.scrollTop()+t,!0):e._dragDownInterval&&(e._dragDownInterval=clearInterval(e._dragDownInterval))}},500):(e._dragUpInterval&&(e._dragUpInterval=clearInterval(e._dragUpInterval)),e._dragDownInterval&&(e._dragDownInterval=clearInterval(e._dragDownInterval))))},dragRowElement:function(){var i=this;e(this.getRows()).ejDraggable({cursorAt:{top:-8,left:-8},helper:function(s){var n,r,o,l,a;return this.clone=!0,n=e(s.element).closest("tr"),!(i._selectDrag||!n.length||e.inArray(i.getIndexByRow(n),i.selectedRowsIndexes)==-1)&&(r=t.buildTag("div.e-cloneproperties e-draganddrop e-grid","",{height:"auto","z-index":2,position:"absolute",width:i.element.width()}),r.append(t.buildTag("table","",{width:i.element.width()})),l=e(i.getRows()).clone().removeClass(),o=e.map(l,function(t,s){if(e.inArray(s,i.selectedRowsIndexes)!=-1)return t}),a=t.buildTag("tr.e-srcgridinfo e-grid","",{display:"none",height:"auto"}).append("<td>"+i._id+"</td>"),o.push(a[0]),e(o).find("td").removeClass("e-selectionbackground e-active"),r.find("table").append(o),n.find("td.e-selectionbackground").length||r.css("display","none"),r.addClass("e-dragclone").appendTo(e("body")))},dragStart:function(t){var s=e(t.target).closest("tr");if(i._selectDrag||e.inArray(i.getIndexByRow(s),i.selectedRowsIndexes)==-1)return!1;var n=t.target,r=i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),o=i.getSelectedRecords(),l={target:r,currentTarget:n,draggableType:"rows",data:o};return!i._trigger("rowDragStart",l)&&void 0},drag:function(t){var s,n=e(t.target),r=i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),o=i.getSelectedRecords(),l={target:r,currentTarget:n,draggableType:"rows",data:o};if(i._dragAutoScroll(i,t),i._trigger("rowDrag",l))return!1;document.body.style.cursor="not-allowed",s=e(i.model.rowDropSettings.dropTargetID),(n.closest(i.model.rowDropSettings.dropTargetID).length||n.closest("#"+i._id).length)&&(n.closest(".e-grid").length&&(n.closest(".e-rowcell").length||n.closest(".emptyrecord").length)?n.closest("table").addClass("e-allowRowDrop"):s.hasClass("e-grid")||s.addClass("e-allowRowDrop"))},dragStop:function(t){var s,n;if(!t.element.dropped){i._dragUpInterval&&(i._dragUpInterval=clearInterval(i._dragUpInterval)),i._dragDownInterval&&(i._dragDownInterval=clearInterval(i._dragDownInterval));var r=e(t.target),o=i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),l=i.getSelectedRecords();if(e(".e-dragclone").remove(),document.body.style.cursor="",s=e(i.model.rowDropSettings.dropTargetID),s.hasClass("e-grid")?s.find(".e-gridcontent").find("table").removeClass("e-allowRowDrop"):s.removeClass("e-allowRowDrop"),i.getContent().find("table").removeClass("e-allowRowDrop"),n={rows:o,target:r,draggableType:"rows",data:l},i._trigger("rowDrop",n))return!1}}})},_processDropRequest:function(i,s,n,r){var o,l=i._dataManager.dataSource.batchUrl;i._dataManager.dataSource.batchUrl=i.model.rowDropSettings[n+"Mapper"],o=i._dataManager.saveChanges(s,i._primaryKeys[0],i.model.query._fromTable),e.isFunction(o.promise)&&null!=i._dataManager.dataSource.batchUrl?(e("#"+i._id).data("ejWaitingPopup").show(),o.done(function(){i._isLocalData&&"drop"==n&&(r.dropDetails.sourceID==r.dropDetails.destinationID?i._moveDroppedRowIndex(r.targetIndex,r.records,r.draggedRowIndexes):i._moveDroppedRowIndex(r.targetIndex,r.records)),"drop"==n&&(i._dataSource()instanceof t.DataManager?i._dataSource().dataSource.headers.pop():i._dataSource().headers.pop()),i._dataManager.dataSource.batchUrl=l,i.refreshBatchEditChanges(),e("#"+i._id).data("ejWaitingPopup").hide(),i._processBindings(r)}),o.fail(function(t){i._dataManager.dataSource.batchUrl=l,e("#"+i._id).data("ejWaitingPopup").hide(),r.error=t&&t.error?t.error:t,i._trigger("actionFailure",r)})):(i.refreshBatchEditChanges(),i._dataManager.dataSource.batchUrl=l,"drop"==n&&i._moveDroppedRowIndex(r.targetIndex,r.records),r.dropDetails.sourceID==r.dropDetails.destinationID&&"drag"==n||i._processBindings(r))},reorderRows:function(e,i){var s,n,r;if(!this.model.sortSettings.sortedColumns.length)if(s=this.getSelectedRecords(),this.selectedRowsIndexes=[],n={requestType:t.Grid.Actions.Refresh,action:"rowReordering",draggedRowIndexes:e,targetIndex:i,dropDetails:{sourceID:this._id,destinationID:this._id,DestinationRowIndex:i},records:s},t.isNullOrUndefined(this.model.rowDropSettings.dropMapper)){if(this._trigger("actionBegin",n))return!1;this._moveDroppedRowIndex(i,s,e),this._trigger("actionComplete",n)}else r=this.getBatchChanges(),r.changed=s,this._processDropRequest(this,r,"drop",n)},_moveDroppedRowIndex:function(i,s,n){var r,o,l,a;if(t.isNullOrUndefined(n)){if(i>-1)for(l=this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource(),i+this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,a=0;a<s.length;a++)l.splice(i++,0,l.splice(l.length-s.length+a,1)[0])}else{var d,h,n=n.sort(function(e,t){return e-t}),c=i,u=0,p=this.model.currentViewData.slice(),m=this.getRowByIndex(i);for(i+=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,a=0;a<n.length;a++)l=p[n[a]],h=n[a]-u,d=0,r=this._excludeDetailRows(),o=e(r[h]),c>h&&u++,this.model.allowPaging&&(d=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize),h=d+h,this.selectedRowsIndexes.push(c-u),a==n.length-1&&(this.model.selectedRowIndex=this.selectedRowsIndexes[0]),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o.next().hasClass("e-detailrow")&&(o=o.add(o.next()[0])),m.before(o),c<n[a]-u?c++:i--,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(i+a,0,this._dataSource().dataSource.json.splice(h,1)[0]):this._dataSource().splice(i+a,0,this._dataSource().splice(h,1)[0]),this.model.currentViewData.splice(i+a-d,0,this.model.currentViewData.splice(h-d,1)[0])}}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.selection={selectRows:function(s,n,r){var o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T,k,D,I,O;if(!this._allowrowSelection)return!1;if(this._traverseRow!=s&&e(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,o=[],this.initialRender&&(this.model.currentIndex=s),this.model.scrollSettings.enableVirtualization&&(e.isArray(s)?this.model.currentIndex=s[0]:n&&(this.model.currentIndex=s>n?n:s)),!this.multiSelectCtrlRequest&&this.model.scrollSettings.allowVirtualScrolling&&(this._virtuaOtherPage?this._virtualScrollingSelection=!0:(this.clearSelection(),this._virtualScrollingSelection=!1)),e.isArray(s)&&(o=s,s=o[0],this._virtaulSel=[],this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization))for(this._virtualScrollingSelection=!0,this._virtualSelectedRows=o,l=parseInt(s/this.model.pageSettings.pageSize)*this.model.pageSettings.pageSize,y=(parseInt(s/this.model.pageSettings.pageSize)+1)*this.model.pageSettings.pageSize,this._virtaulSel.push(s),this._virtuaOtherPage||(this._virtaulUnSel=[]),b=1;b<o.length;b++)l<o[b]&&o[b]<y?this._virtaulSel.push(o[b]):this._virtaulUnSel.push(o[b]);if(p=e(this.getRows()),this.model.allowScrolling&&!this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(d=p.eq(s)[0],!t.isNullOrUndefined(d)&&0==this.model.groupSettings.groupedColumns.length)){var R=this.getScrollObject().scrollTop(),P=R+this.getScrollObject().content()[0].clientHeight,M=d.offsetTop+d.offsetHeight;(!t.isNullOrUndefined(d)&&P<M||M<=R&&M<P)&&(h=t.isNullOrUndefined(d)?" ":d.offsetTop,c=this.getScrollObject(),c.scrollY(h))}var j,O={},E=this._currentPage()-1,F=this.model.pageSettings.pageSize;this.model.scrollSettings.enableVirtualization||(w=this.getRowByIndex(s).attr("name"),C=t.isNullOrUndefined(w)?s:parseInt(w)/F+1),t.isNullOrUndefined(s)||("batch"==this.model.editSettings.editMode&&e(p[s]).hasClass("e-insertedrow")?(u=this.batchChanges.added.reverse(),a=u[s],this.batchChanges.added.reverse()):a="batch"==this.model.editSettings.editMode?this._currentJsonData[s-this.batchChanges.added.length]:this._currentJsonData[t.isNullOrUndefined(s)?n:s]);var A=s,L=this._previousIndex,N=this.getRowByIndex(this._previousIndex);if(O={rowIndex:A,row:p.eq(s),data:a,target:r,prevRow:N,prevRowIndex:L},this.model.scrollSettings.allowVirtualScrolling&&(O=this._getVirtualRows(s,r,"selectRows",o),this.model.scrollSettings.enableVirtualization||(s=O.rowIndex),a=O.data,A=O.rowIndex,L=O.prevRowIndex,N=O.prevRow),!this._trigger("rowSelecting",O)){if(r&&r.hasClass("e-checkselectall")&&this._isLocalData&&this._isMapSelection)return this._headerCheckUpdateAll(!r[0].checked);if(p=e(this.getRows()),this._isMapSelection&&!this._selectionByGrid&&t.isNullOrUndefined(n)&&!o.length)return a[this._selectionMapColumn]=!O.row.find(".e-checkcelldiv input").prop("checked"),void this.updateRecord(this._primaryKeys[0],a,"update");if((this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this.model.isEdit&&this.model.enableAutoSaveOnSelectionChange&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||0!=this.getContentTable().find(".e-editedrow").length)){if(this.endEdit())return;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")}if(this.checkSelectedRowsIndexes[E]!=i||this._isMapSelection||(this.checkSelectedRowsIndexes[E]=[]),o.length>0){for(b=0;b<o.length;b++)this.selectedRowsIndexes.indexOf(o[b])==-1&&this.selectedRowsIndexes.push(o[b]),this.model.selectedRowIndices=this.selectedRowsIndexes,this._isMapSelection&&!this._selectionByGrid&&(k=this._currentJsonData[o[b]],k[this._selectionMapColumn]=!0,this.batchChanges.changed.push(k));if(!this.model.scrollSettings.enableVirtualization)for(m=this._virtaulSel[0]-s,b=0;b<this._virtaulSel.length;b++)this._virtaulSel[b]-=m;if(rows=this.getRowByIndex(this.model.scrollSettings.allowVirtualScrolling?this._virtaulSel:o),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this._enableCheckSelect&&!this._isMapSelection&&e(rows).find(".e-checkcelldiv input").prop("checked","checked"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._isMapSelection&&!this._selectionByGrid)return void this.batchSave()}else if(t.isNullOrUndefined(n)||t.isNullOrUndefined(s))switch(s=t.isNullOrUndefined(s)?n:s,A=s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){this.model.selectedRecords=[],g=e.inArray(A,this.selectedRowsIndexes),g!=-1&&!this._isMapSelection&&this.clearSelection(A,r)&&this.selectedRowsIndexes.splice(g,0),g==-1&&(this.selectedRowsIndexes.push(A),this.model.selectedRowIndices.push(A),f=this.getRowByIndex(s),f.attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[A]=this._getSelectedViewData(s,r).data:this._virtualSelectAction(C,s,F),(this._enableCheckSelect&&r&&!r.parent().hasClass("e-checkcelldiv")||t.isNullOrUndefined(r)&&this._enableCheckSelect)&&f.find(".e-checkcelldiv input").prop("checked","checked")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords());break}case t.Grid.SelectionType.Single:this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this.model.selectedRowIndices=[],this._virtualSelectedRecords={},this.selectedRowsIndexes.push(A),this.model.selectedRowIndices.push(A),this.getRowByIndex(s).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[A]=a:this._virtualSelectAction(C,s,F),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&this.getRowByIndex(s).find(".e-checkcelldiv [type=checkbox]").prop("checked",!0)}else if(this.model.selectionType==t.Grid.SelectionType.Multiple&&(this._isMapSelection||this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRowIndices=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},$toIndex=n,this._virtualUnSel=[],this._virtualUnSelIndexes=[],this._isMapSelection||!(r&&r.hasClass("e-checkselectall")&&r[0].checked))){for(this.model.scrollSettings.enableVirtualization&&r&&(x=this._getSelectedViewData(n,r).viewIndex,_=n%this._virtualRowCount,$toIndex=x*this._virtualRowCount-(this._virtualRowCount-_),A!=this._prevSelIndex&&(A=this._prevSelIndex)),j=A-$toIndex<0,this.model.scrollSettings.enableVirtualization||(rows=j?this.getRowByIndex(s,n+1):this.getRowByIndex(n,s+1)),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),v=[],b=j?A:$toIndex,y=j?$toIndex:A;b<=y;b++)this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualSelectedRecords[b]=this._getSelectedViewData(b).data,x=this._getSelectedViewData(b).viewIndex,e.inArray(x,this._currentLoadedIndexes)!=-1?(S=this._currentLoadedIndexes.indexOf(x),T=b%this._virtualRowCount+S*this._virtualRowCount,0==T&&this._virtualRowCount,v.push(T)):(this._virtualUnSel.push(b),e.inArray(x,this._virtualUnSelIndexes)==-1&&this._virtualUnSelIndexes.push(x))):(w=this.getRowByIndex(b).attr("name"),C=t.isNullOrUndefined(w)?s:parseInt(w)/F+1,this._virtualSelectAction(C,b,F))),this.selectedRowsIndexes.push(b),this.model.selectedRowIndices.push(b),this._isMapSelection&&!this._selectionByGrid&&(k=this._currentJsonData[b],k[this._selectionMapColumn]=!0,this.batchChanges.changed.push(k));if(this._isMapSelection)return void this.batchSave();this.model.scrollSettings.enableVirtualization&&(rows=this.getRowByIndex(v[0],v[v.length-1]+1)),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&e(rows).find(".e-checkcelldiv input").prop("checked","checked")}this._enableCheckSelect&&(this.checkSelectedRowsIndexes[E]=this.selectedRowsIndexes,this._selectAllCheck||(this.selectedRowsIndexes.length==this._currentJsonData.length?this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked","checked"):this._selectionByGrid&&this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked",!1))),this._selectedRow()!==A&&"true"==e(this.getRowByIndex(A)).attr("aria-selected")&&this._selectedRow(A),r&&r.hasClass("e-checkselectall")&&!this._isMapSelection&&(D=this,this.checkSelectedRowsIndexes=r.is(":checked")?[]:e.map(Array(this.model.pageSettings.totalPages),function(){return Array(e.map(Array(D.model.pageSettings.pageSize),function(e,t){return t}))})),a=this._virtualScrollingSelection?this._virtualSelRecords:a,I=this.model.scrollSettings.enableVirtualization?A:this._selectedRow(),O={rowIndex:I,row:this.getRowByIndex(this._selectedRow()),data:a,target:r,prevRow:N,prevRowIndex:L},this._previousIndex=this.selectedRowsIndexes.length?s:this._previousIndex,this.model.scrollSettings.enableVirtualization&&(this._prevSelIndex=A,this._prevSelRow=this.getRowByIndex(s)),this.model._checkSelectedRowsIndexes=this.checkSelectedRowsIndexes,e(this.getRowByIndex(s)).is('[role="row"]')&&"true"==e(this.getRowByIndex(A)).attr("aria-selected")&&this._trigger("rowSelected",O)}},_getVirtualRows:function(i,s,n,r){var o,l,a,d,h,c,u,p=i,m=this._previousIndex,g=this.getRowByIndex(this._previousIndex),f={},_=e(this.getRows());if(this.model.scrollSettings.enableVirtualization){var v=this._virtualRowCount,b=Math.ceil((i+1)/v),y=b>1?this._virtualRowCount:0;if(this.initialRender||b!=this._currentVirtualIndex&&!s?(this._isThumbScroll=!0,this._refreshVirtualView(b),i=0!=i?i%this._virtualRowCount+y:i):(i>3*this._virtualRowCount||s?(d=this._getSelectedViewData(i,s).viewIndex,a=i%this._virtualRowCount,p=d*this._virtualRowCount-(this._virtualRowCount-a)):i=i%this._virtualRowCount+y,i!=p||s||(i=0!=i?i%this._virtualRowCount+y:i)),r.length)for(c=0;c<r.length;c++)d=this._getSelectedViewData(r[c]).viewIndex,e.inArray(d,this._currentLoadedIndexes)!=-1&&this._virtaulSel.push(r[c]),this._virtualSelectedRecords[r[c]]||(this._virtualSelectedRecords[r[c]]=this._getSelectedViewData(r[c]).data);l=this._getSelectedViewData(i,s,b).data,m=this._prevSelIndex,g=this._prevSelRow}else{var w=this.model.pageSettings.pageSize,C=this.getRowByIndex(i).attr("name"),x=t.isNullOrUndefined(C)?i:parseInt(C)/w+1,S=i%w,T=parseInt(i/w),u=T*w;if(!t.isNullOrUndefined(T)&&T>0&&e.inArray(u,this.virtualLoadedPages)==-1&&t.isNullOrUndefined(s))if(S--,this._virIndex=!0,this._virtualTrIndex=S,this.gotoPage(T+1),h=this,this._dataSource()instanceof t.DataManager){if(this._queryPromise.done(function(e){var t;h._virtuaOtherPage=!0,h._virtualdata=h._currentJsonData,h._pageTo=T,h._virtualScrollingSelection&&(h._virtualSelRecords=e.virtualSelectRecords);var s=parseInt(i/h.model.pageSettings.pageSize)*h.model.pageSettings.pageSize,n=(parseInt(i/h.model.pageSettings.pageSize)+1)*h.model.pageSettings.pageSize,o=[];for(o.push(i),t=1;t<r.length;t++)s<r[t]&&r[t]<n&&o.push(r[t]);return h.selectRows(o),!1}),h._virtualScrollingSelection)return}else{if(h._virtualdata=h._currentJsonData,r.length>0)for(h._virtualSelRecords=[],
c=0;c<r.length;c++)h._virtualSelRecords.push(this.model.dataSource[r[c]]);h._pageTo=T}for(this._virtuaOtherPage&&(this._virtuaOtherPage=!1),c=0;c<this._loadedJsonData.length;c++)this._loadedJsonData[c].pageIndex==x&&(o=this._loadedJsonData[c].data);l=t.isNullOrUndefined(o)?this._currentJsonData[S]:o[S],l=this._virtualScrollingSelection?this._virtualSelRecords:l,u=this._pageTo*w,!t.isNullOrUndefined(this._virtualdata)&&this._virtualdata.length>0?(i=e(document.getElementsByName(u)[S]).index(),l=this._virtualdata[S],this._virtualdata=[]):e(document.getElementsByName(T*w)).length>0&&!t.isNullOrUndefined(this._pageTo)&&(i=e(document.getElementsByName(T*w)[i%w]).index())}return f={rowIndex:this.model.scrollSettings.enableVirtualization?p:i,row:_.eq(i),data:l},"selectRows"==n&&(f.prevRow=g,f.prevRowIndex=m),f},_selectingMultipleRows:function(e){this._modelMultiSelectedIndexes=e,this.clearSelection(),this.multiSelectCtrlRequest=!0;for(var t=0;t<e.length;t++)this.selectRows(e[t]);this.multiSelectCtrlRequest=!1,this.model.selectedRowIndices=this._modelMultiSelectedIndexes,this._modelMultiSelectedIndexes=[]},_virtualSelectAction:function(e,i,s){this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(i)&&(this._virtualSelectedRecords[i]=t.isNullOrUndefined(this._virtualLoadedRecords[e])?this._currentJsonData[i%s]:this._virtualLoadedRecords[e][i%s])},_getSelectedViewData:function(t,i,s){var n,r,o=t%this._virtualRowCount,l={};return n=i?parseInt(e(i).closest("tr").attr("name"),32):s||(t>1?Math.ceil((t+1)/this._virtualRowCount):1),l.viewIndex=n,this._virtualLoadedRecords[n]&&(l.data=this._virtualLoadedRecords[n][o]),r=t%this._virtualRowCount,l.rowIndex=n*this._virtualRowCount-(this._virtualRowCount-r),l},selectCells:function(s){var n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b;if(!this._allowcellSelection)return!1;if(n=null,l=this._excludeDetailRows(),n=this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]):l.eq(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")"),t.isNullOrUndefined(this._previousRowCellIndex)||0==this._previousRowCellIndex.length||(this.model.scrollSettings.enableVirtualization?(r=this._prevRowCell,o=this._preVirRowCellIndex):(r=e(this.getRowByIndex(this._previousRowCellIndex[0][0]).find(".e-rowcell:eq("+this._previousRowCellIndex[0][1]+")")),o=this._previousRowCellIndex)),a=this._currentJsonData[s[0][0]],d=s[0][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(h=this._getSelectedViewData(s[0][0],n),a=h.data,d=h.rowIndex),b={currentCell:n,cellIndex:s[0][1],data:a,previousRowCellIndex:o,previousRowCell:r},"multiple"==this.model.selectionType&&(b.isCtrlPressed=this.multiSelectCtrlRequest,b.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("cellSelecting",b)){switch(this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){v=e.inArray(d,this._rowIndexesColl),v!=-1?this.selectedRowCellIndexes[v].cellIndex.push(parseInt(s[0][1].toString())):(e.inArray(d,this._rowIndexesColl)==-1&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]})),n.addClass("e-cellselectionbackground e-activecell");break}if(this.multiSelectShiftRequest&&this._previousRowCellIndex!=i){this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[];var y=this._previousRowCellIndex[0][0],w=parseInt(this._previousRowCellIndex[0][1]),C=s[0][0],x=parseInt(s[0][1]);if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(y=this._preVirRowCellIndex[0][0],C=this._getSelectedViewData(C,this.getRowByIndex(C).find(".e-rowcell")).rowIndex),c=[],"box"==this.model.selectionSettings.cellSelectionMode){var S=(this.model.scrollSettings.frozenColumns?this.getRows()[0].length:this.getRows().length,w<x?w:x),T=S==x?w:x,k=[],c=[];for(m=S;m<=T;m++){if(u=y,p=C,u<p)for(f=u;f<=p;f++)e.inArray(f,k)==-1&&k.push(f),this._selectMultipleCells(f,m,x,w);else for(f=p;f<=u;f++)e.inArray(f,k)==-1&&k.push(f),this._selectMultipleCells(f,m,x,w);c.push(m)}for(m=0;m<k.length;m++)this.selectedRowCellIndexes.push({rowIndex:k[m],cellIndex:c});this._rowIndexesColl=t.distinct(k)}else if(C>y)for(m=y;m<=C;m++){for(c=[],u=m==y?w:0,p=m==C?x:this.model.columns.length-1,f=u;f<=p;f++)c.push(f),this._selectMultipleCells(m,f,x,w);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:c}),this._rowIndexesColl.push(m)}else for(m=y;m>=C;m--){if(c=[],u=m==y?w:this.model.columns.length-1,p=m==C?x:0,u>p)for(f=u;f>=p;f--)c.push(f),this._selectMultipleCells(m,f,x,w);else for(f=p;f>=u;f--)c.push(f),this._selectMultipleCells(m,f,x,w);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:c}),this._rowIndexesColl.push(m)}break}for(this.clearCellSelection(),this._virtualRowCellSelIndex=[],m=0;m<s.length;m++)if(s[m][1].length>1)for(g=l.eq(s[m][0]).find(".e-rowcell"),this.model.scrollSettings.frozenColumns&&(g=e(l[0]).eq(s[m][0]).find(".e-rowcell").add(e(l[1]).eq(s[m][0]).find(".e-rowcell"))),f=0;f<g.length;f++)_=null!=this.model.detailsTemplate||null!=this.model.childGrid?g[f].cellIndex-1:f,e.inArray(_,s[m][1])!=-1&&(e(g[f]).addClass("e-cellselectionbackground e-activecell"),v=e.inArray(s[m][0],this._rowIndexesColl),v!=-1?this.selectedRowCellIndexes[v].cellIndex.push(g[f].cellIndex):(d=s[m][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(h=this._getSelectedViewData(d,g),a=h.data,d=h.rowIndex),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:[g[f].cellIndex]}),this._rowIndexesColl.push(s[m][0])));else this.model.scrollSettings.frozenColumns?this._frozenCell(s[m][0],s[m][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[m][0]).find(".e-rowcell:eq("+s[m][1]+")")).addClass("e-cellselectionbackground e-activecell"),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[m][1]}),this._rowIndexesColl.push(d);break;case t.Grid.SelectionType.Single:this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[],this._virtualRowCellSelIndex=[],e.inArray(d,this._rowIndexesColl)==-1&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]}),this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")")).addClass("e-cellselectionbackground e-activecell")}b={currentCell:n,cellIndex:s[0][1],data:a,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCellIndex:o,previousRowCell:r},(!this.multiSelectShiftRequest||t.isNullOrUndefined(this._previousRowCellIndex))&&(this._previousRowCellIndex=s,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._preVirRowCellIndex=e.extend(!0,[],s),this._preVirRowCellIndex[0][0]=d),this._prevRowCell=n),this._trigger("cellSelected",b)}},_selectMultipleCells:function(t,i){var s,n,r;this.model.scrollSettings.frozenColumns?this._frozenCell(t,i).addClass("e-cellselectionbackground e-activecell"):this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(s=this._getSelectedViewData(t).viewIndex,e.inArray(s,this._currentLoadedIndexes)!=-1&&(n=this._currentLoadedIndexes.indexOf(s),r=t%this._virtualRowCount+n*this._virtualRowCount,e(this.getRowByIndex(r).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell"),e.inArray(t,this._virtualRowCellSelIndex)==-1&&e.inArray(t,this._rowIndexesColl)!=-1&&t!=this._preVirRowCellIndex[0][0]&&this._virtualRowCellSelIndex.push(t))):e(this.getRowByIndex(t).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell")},selectColumns:function(s,n){var r,o,l,a,d,h,c;if(!this._allowcolumnSelection)return!1;this._allowcolumnSelection=!0;var u=this.getRows(),p=this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[this._previousColumnIndex],c={columnIndex:s==i?n:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[s]),column:this.model.columns[s],previousColumnIndex:this._previousColumnIndex,prevColumnHeaderCell:p},m=this._previousColumnIndex;if(this._previousColumnIndex=1==(c.isShiftPressed=this.multiSelectShiftRequest)?s==i?n:s:n,"multiple"==this.model.selectionType&&(c.isCtrlPressed=this.multiSelectCtrlRequest,c.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("columnSelecting",c)){if(t.isNullOrUndefined(n)||t.isNullOrUndefined(s))switch(s=t.isNullOrUndefined(s)?n:s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){if(r=e.inArray(s,this.selectedColumnIndexes),r!=-1&&this.clearColumnSelection(s)&&this.selectedColumnIndexes.splice(r,0),r==-1){if(this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(u,s);else for(d=0;d<u.length;d++)e(u[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}break}case t.Grid.SelectionType.Single:if(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.selectedColumnIndexes=[],this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(u,s);else for(d=0;d<u.length;d++)e(u[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}else if(this.model.selectionType==t.Grid.SelectionType.Multiple)if(this.clearColumnSelection(),this.selectedColumnIndexes=[],o=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++s,++n,o=1),l=s>n?n:s,a=s>n?s+1:n+1,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(u,l,a);else for(d=l;d<a;d++){for(h=0;h<u.length;h++)e(u[h].cells[d]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[d]).addClass("e-columnselection"),this.selectedColumnIndexes.push(d-o)}c={columnIndex:s==i?n:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th").not(".e-detailheadercell")[s]),column:this.model.columns[s],selectedColumnIndex:this.selectedColumnIndexes,previousColumnIndex:m,prevColumnHeaderCell:p},this._trigger("columnSelected",c)}},clearSelection:function(s,n){var s,r,o,l,a,d,h,c,n,u,p,m,g,f,_,v=s,b=e(this.getRows()),y=e(this.getRows());if(this._selectedRow()>=-1){if(y=this.model.scrollSettings.frozenColumns||!t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?this._excludeDetailRows():e(this.element.find("tr[aria-selected='true']")),r=y.find("td").hasClass("e-selectionbackground e-active")){if(o={},l=e(this.getContent().find("tr[aria-selected='true']")),this.model.scrollSettings.allowVirtualScrolling)t.isNullOrUndefined(s)?(c=this.selectedRowsIndexes[0],n=l[0]):c=s,u=this.selectedRowsIndexes,o=this._getVirtualRows(c,n,"clearSelection",u);else{for(t.isNullOrUndefined(s)||("batch"==this.model.editSettings.editMode&&e(y[s]).hasClass("e-insertedrow")?(a=this.batchChanges.added.reverse(),f=a[s],this.batchChanges.added.reverse()):f="batch"==this.model.editSettings.editMode?this._currentJsonData[s-this.batchChanges.added.length]:this._currentJsonData[t.isNullOrUndefined(s)?toIndex:s]),d=[],h=0;h<this.selectedRowsIndexes.length;h++)d.push(this._currentJsonData[this.selectedRowsIndexes[h]]);o={rowIndex:s==i?this.selectedRowsIndexes:s,row:s==i?l:b.eq(s),data:s==i?d:f}}if(this._trigger("rowDeselecting",o))return}t.isNullOrUndefined(s)?(y.removeAttr("aria-selected").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-selectionbackground").removeClass("e-active"),this._clearVirtualSelection||(this.selectedRowsIndexes=[],this.model.selectedRecords=[],this.model.selectedRowIndices=[]),this._selectionByGrid||(y.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),null,this._isMapSelection&&this._headerCheckUpdateAll(!1),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))):(this.getRowByIndex(s).removeAttr("aria-selected").find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active"),p=this.getRowByIndex(s),this.model.scrollSettings.enableVirtualization&&this.multiSelectCtrlRequest&&e.inArray(s,this.selectedRowsIndexes)==-1&&(m=parseInt(p.attr("name"),32)*this._virtualRowCount,g=this._virtualRowCount-p.index()%this._virtualRowCount,s=m-g),s=e.inArray(s,this.selectedRowsIndexes),s!=-1&&(this.selectedRowsIndexes.splice(s,1),this.model.selectedRowIndices=this.selectedRowsIndexes,this.model.selectedRecords.splice(s,1)),this._enableCheckSelect&&!n&&p.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&(this._selectionByGrid||t.isNullOrUndefined(s)||s==-1||(f=this._currentJsonData[v],f[this._selectionMapColumn]=!1,this.updateRecord(this._primaryKeys[0],f,"update")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))),this._enableCheckSelect&&(this.selectedRowsIndexes.length==this._currentJsonData.length||this._selectAllCheck||this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall").prop("checked",!1),_=this._currentPage()-1,checkBoxIndex=e.inArray(v,this.checkSelectedRowsIndexes[_]),checkBoxIndex!=-1&&this.checkSelectedRowsIndexes[_].splice(s,1),this.selectedRowsIndexes.length||this._isMapSelection||n||(this.checkSelectedRowsIndexes[_]=[],y.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1))),this.selectedRowsIndexes.length||this._selectedRow(-1)}return this.model._checkSelectedRowsIndexes=this.checkSelectedRowsIndexes,!(!r||!this._trigger("rowDeselected",o))||void 0},_excludeDetailRows:function(){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)||this.model.scrollSettings.frozenColumns?this.model.scrollSettings.frozenColumns>0&&null!=this.getRows()&&this.getRows().length>1?e(this.getRows()[0]).not(".e-detailrow,.e-gridSummaryRows").add(e(this.getRows()[1]).not(".e-detailrow,.e-gridSummaryRows")):e(this.getRows()):e(this.getRows()).not(".e-detailrow,.e-gridSummaryRows")},clearCellSelection:function(s,n){var r,o,l,a,d,h,c;if(this._allowcellSelection){if(r=t.isNullOrUndefined(s)&&t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?e(this.element.find(".e-cellselectionbackground")).parent():this._excludeDetailRows(),a=r.find("td").hasClass("e-cellselectionbackground e-activecell")){o=this.model.scrollSettings.frozenColumns&&!t.isNullOrUndefined(s)?this._frozenCell(s,n):this.getContent().find(".e-cellselectionbackground");var u=[],p=[n],m=[];for(d=0;d<this.selectedRowCellIndexes.length;d++)for(u.push(this._currentJsonData[this.selectedRowCellIndexes[d].rowIndex]),c=0;c<this.selectedRowCellIndexes[d].cellIndex.length;c++)m.push(this.selectedRowCellIndexes[d].cellIndex[c]);if(h={currentCell:(s||n)==i?o:r.eq(s).find(".e-rowcell").eq(n),cellIndex:(s||n)==i?m:p,data:(s||n)==i?u:this._currentJsonData[s]},"multiple"==this.model.selectionType&&(h.isCtrlPressed=this.multiSelectCtrlRequest,h.isShiftPressed=this.multiSelectShiftRequest),this._trigger("cellDeselecting",h))return!0}if(t.isNullOrUndefined(s))this.model.scrollSettings.frozenColumns&&(r=e(r[0]).add(r[1])),r.find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-cellselectionbackground").removeClass("e-activecell"),this.selectedRowCellIndexes=[],this._rowIndexesColl=[];else{for(c=0;c<this.selectedRowCellIndexes.length;c++)if(this.selectedRowCellIndexes[c].rowIndex==s){l=e.inArray(n,this.selectedRowCellIndexes[c].cellIndex),this.model.scrollSettings.frozenColumns?this._frozenCell(s,n).removeClass("e-cellselectionbackground").removeClass("e-activecell"):r.eq(s).find(".e-rowcell").eq(n).removeClass("e-cellselectionbackground").removeClass("e-activecell");break}c!=this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[c].cellIndex.splice(l,1),0==this.selectedRowCellIndexes[c].cellIndex.length&&(this.selectedRowCellIndexes.splice(c,1),this._rowIndexesColl.splice(e.inArray(s,this._rowIndexesColl),1)))}}if(a&&this._trigger("cellDeselected",h))return!0},clearColumnSelection:function(s){var n,r,o,l,a,d,h;if(this._allowcolumnSelection){var c=e(this._excludeDetailRows()),u=e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")),p=u.hasClass("e-columnselection");if(p){for(n=[],r=[],d=0;d<this.selectedColumnIndexes.length;d++)n.push(this.model.columns[this.selectedColumnIndexes[d]]),r.push(e(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[this.selectedColumnIndexes[d]]));if(o={columnIndex:s==i?this.selectedColumnIndexes:s,headerCell:s==i?r:e(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[s]),column:s==i?n:this.model.columns[s]},"multiple"==this.model.selectionType&&(o.isCtrlPressed=this.multiSelectCtrlRequest,o.isShiftPressed=this.multiSelectShiftRequest),this._trigger("columnDeselecting",o))return}if(t.isNullOrUndefined(s))this.model.scrollSettings.frozenColumns&&(c=e(c[0]).add(c[1])),c.find(".e-rowcell").removeClass("e-columnselection"),e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")).removeClass("e-columnselection"),this.selectedColumnIndexes=[];else{if(l=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++s,l=1),this.model.scrollSettings.frozenColumns)for(a=0,currentIndex=s,s>=this.model.scrollSettings.frozenColumns&&(a=1,currentIndex=s-this.model.scrollSettings.frozenColumns),d=0;d<c[a].length;d++)e(c[a][d].cells[currentIndex]).removeClass("e-columnselection");else for(h=0;h<c.length;h++)e(c[h].cells[s]).removeClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).removeClass("e-columnselection"),this.selectedColumnIndexes.splice(0,s-l)}}if(p&&this._trigger("columnDeselected",o))return!0},getSelectedRows:function(){for(var t=e(),i=0;i<this.selectedRowsIndexes.length;i++)this.model.scrollSettings.frozenColumns>0?(t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]),t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[1])):t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]);return t},getSelectedRecords:function(){var t,i,s=[];if($gridRows=this.getRows(),this._virtualScrollingSelection)return this._virtualSelRecords;for(t=0;t<this.selectedRowsIndexes.length;t++)this.selectedRowsIndexes[t]!=-1&&("batch"==this.model.editSettings.editMode&&e($gridRows[this.selectedRowsIndexes[t]]).hasClass("e-insertedrow")?(i=this.batchChanges.added.reverse(),s.push(i[this.selectedRowsIndexes[t]]),this.batchChanges.added.reverse()):this.model.scrollSettings.allowVirtualScrolling?s.push(this._virtualSelectedRecords[this.selectedRowsIndexes[t]]):"batch"==this.model.editSettings.editMode?s.push(this._currentJsonData[this.selectedRowsIndexes[t]-this.batchChanges.added.length]):s.push(this._currentJsonData[this.selectedRowsIndexes[t]]));return s},_setCurrentRow:function(e){(e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Sorting||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Save||e==t.Grid.Actions.Paging||e==t.Grid.Actions.Search)&&(this._selectedRow(-1),this._virtualDataRefresh||(this.selectedRowsIndexes=[]))},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),this.model.selectionType==t.Grid.SelectionType.Multiple&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function(e,t,s){t.gridFeatures=t.gridFeatures||{},t.widget("ejGrid","ej.Grid",{_rootCSS:"e-grid",element:null,validTags:["div"],model:null,_requiresID:!0,keyConfigs:{focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",nextPage:"34",previousPage:"33",lastPage:"ctrl+alt+34",firstPage:"ctrl+alt+33",nextPager:"alt+34",previousPager:"alt+33",firstCellSelection:"36",lastCellSelection:"35",firstRowSelection:"ctrl+36",lastRowSelection:"ctrl+35",rowUpSelection:"ctrl+shift+38",rowDownSelection:"ctrl+shift+40",randomSelection:"ctrl+shift+83",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",moveCellRight:"9",moveCellLeft:"shift+9",selectedGroupExpand:"alt+40",totalGroupExpand:"ctrl+40",selectedGroupCollapse:"alt+38",totalGroupCollapse:"ctrl+38",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40"},_ignoreOnPersist:["actionBegin","actionComplete","actionFailure","batchAdd","batchDelete","beforeBatchSave","beforeBatchAdd","beforeBatchDelete","beginEdit","cellEdit","cellSave","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDrag","columnDragStart","columnDrop","columnSelecting","columnSelected","columnDeselecting","columnDeselected","create","dataBound","destroy","detailsCollapse","detailsExpand","endAdd","endDelete","endEdit","recordClick","recordDoubleClick","load","resized","resizeEnd","resizeStart","rightClick","rowSelected","rowSelecting","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDrop","templateRefresh","beforePrint","beforeRowDrop","query","isEdit","toolbarClick","queryCellInfo","mergeCellInfo","currentViewData","enableAltRow","enableRTL","contextClick","contextOpen","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","childGrid","summaryRows","toolbarSettings","editSettings","allowMultiSorting","enableAutoSaveOnSelectionChange","locale","allowCellMerging","allowTextWrap","textWrapSettings","cssClass","dataSource","groupSettings.enableDropAreaAutoSizing","enableRowHover","showSummary","allowGrouping","enableHeaderHover","allowKeyboardNavigation","scrollSettings.frozenRows","scrollSettings.frozenColumns","enableTouch","contextMenuSettings.enableContextMenu","exportToExcelAction","exportToWordAction","exportToPdfAction"],ignoreOnExport:["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","editSettings","pageSettings","enableAutoSaveOnSelectionChange","localization","allowScrolling","cssClass","dataSource","groupSettings.enableDropAreaAnimation","enableRowHover","allowSummary","enableHeaderHover","allowKeyboardNavigation"],ignoreOnToolbarServerClick:[],observables:["dataSource","selectedRowIndex","pageSettings.currentPage","selectedRowIndices"],_tags:[{tag:"columns",attr:["allowEditing","allowFiltering","allowTextWrap","filterType","allowGrouping","allowResizing","allowSorting","cssClass","customAttributes","dataSource","defaultValue","disableHtmlEncode","editTemplate","editType","foreignKeyField","foreignKeyValue","headerTemplateID","headerText","isFrozen","isIdentity","isPrimaryKey","filterBarTemplate","textAlign","templateID","textAlign","headerTextAlign","tooltip","clipMode","validationRules.minlength","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","editParams.decimalPlaces",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["showCaptionSummary","showTotalSummary",[{tag:"summaryColumns",attr:["customSummaryValue","dataMember","displayColumn","summaryType","template"]}]]},{tag:"stackedHeaderRows",attr:[[{tag:"stackedHeaderColumns",attr:["headerText","column"]}]]},{tag:"filterSettings.filteredColumns",attr:[]},{tag:"sortSettings.sortedColumns",attr:[]}],_dataSource:t.util.valueFunction("dataSource"),_selectedRow:t.util.valueFunction("selectedRowIndex"),_selectedMultipleRows:t.util.valueFunction("selectedRowIndices"),_currentPage:t.util.valueFunction("pageSettings.currentPage"),defaults:{allowPaging:!1,showColumnChooser:!1,gridLines:"both",allowSorting:!1,showStackedHeader:!1,selectedRecords:[],stackedHeaderRows:[],allowFiltering:!1,allowMultipleExporting:!1,allowSelection:!0,allowGrouping:!1,showSummary:!1,allowResizing:!1,allowResizeToFit:!1,allowTextWrap:!1,allowCellMerging:!1,enableRowHover:!0,enablePersistence:!1,enableFocusout:!1,selectedRowIndex:-1,selectedRowIndices:[],allowSearching:!1,enableToolbarItems:!1,enableHeaderHover:!1,allowReordering:!1,allowKeyboardNavigation:!0,allowRowDragAndDrop:!1,enableTouch:!0,enableLoadOnDemand:!1,columnLayout:"auto",selectionType:"single",dataSource:null,cssClass:"",allowScrolling:!1,locale:"en-US",enableAutoSaveOnSelectionChange:!0,allowMultiSorting:!1,exportToExcelAction:"ExportToExcel",exportToWordAction:"ExportToWord",exportToPdfAction:"ExportToPdf",_groupingCollapsed:[],_checkSelectedRowsIndexes:[],editSettings:{allowEditing:!1,showAddNewRow:!1,allowAdding:!1,showAddNewRow:!1,allowDeleting:!1,editMode:"normal",rowPosition:"top",dialogEditorTemplateID:null,allowEditOnDblClick:!0,externalFormTemplateID:null,inlineFormTemplateID:null,formPosition:"bottomleft",titleColumn:null,showConfirmDialog:!0,showDeleteConfirmDialog:!1},selectionSettings:{selectionMode:["row"],enableToggle:!1,cellSelectionMode:"flow"},resizeSettings:{resizeMode:"normal"},pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:null,enableTemplates:!1,showDefaults:!1,template:null,totalRecordsCount:null,enableQueryString:!1,printMode:"allpages"},groupSettings:{showDropArea:!0,showToggleButton:!1,showGroupedColumn:!0,showUngroupButton:!0,enableDropAreaAutoSizing:!0,captionFormat:null,groupedColumns:[]},contextMenuSettings:{enableContextMenu:!1,contextMenuItems:["Add Record","Edit Record","Delete Record","Sort In Ascending Order","Sort In Descending Order","Next Page","Last Page","Previous Page","First Page","Save","Cancel","Grouping","Ungrouping"],customContextMenuItems:[],subContextMenu:[],disableDefaultItems:!1},filterSettings:{filterType:"filterbar",filterBarMode:"immediate",showFilterBarStatus:!0,statusBarWidth:450,showPredicate:!1,filteredColumns:[],enableInterDeterminateState:!0,maxFilterChoices:1e3,enableCaseSensitivity:!1,immediateModeDelay:1500,enableComplexBlankFilter:!0,blankValue:""},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0},sortSettings:{sortedColumns:[]},toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},minWidth:0,currentIndex:0,rowDropSettings:{dropMapper:null,dragMapper:null,dropTargetID:null},scrollSettings:{width:"auto",height:0,enableTouchScroll:!0,allowVirtualScrolling:!1,virtualScrollMode:"normal",frozenRows:0,frozenColumns:0,buttonSize:18,autoHide:!1,scrollerSize:18,scrollOneStepBy:57,enableVirtualization:!1},textWrapSettings:{wrapMode:"both"},summaryRows:[],enableRTL:!1,enableAltRow:!0,currentViewData:null,detailsTemplate:null,childGrid:null,keySettings:null,rowTemplate:null,detailsDataBound:null,rowDataBound:null,queryCellInfo:null,mergeCellInfo:null,create:null,actionBegin:null,actionComplete:null,actionFailure:null,beginEdit:null,endEdit:null,endAdd:null,endDelete:null,beforeBatchAdd:null,beforeBatchSave:null,beforeBatchDelete:null,beforePrint:null,batchAdd:null,batchDelete:null,cellSave:null,cellEdit:null,resizeStart:null,resizeEnd:null,resized:null,load:null,destroy:null,rowSelecting:null,rowSelected:null,rowDeselecting:null,rowDeselected:null,cellSelecting:null,cellSelected:null,cellDeselecting:null,cellDeselected:null,columnSelecting:null,columnSelected:null,columnDeselecting:null,columnDeselected:null,columnDragStart:null,columnDrag:null,columnDrop:null,rowDrag:null,rowDragStart:null,rowDrop:null,beforeRowDrop:null,dataBound:null,recordClick:null,recordDoubleClick:null,templateRefresh:null,rightClick:null,detailsCollapse:null,detailsExpand:null,toolbarClick:null,contextOpen:null,contextClick:null,columns:[],query:null,isEdit:!1,isResponsive:!1,enableResponsiveRow:!1,virtualLoading:null},dataTypes:{dataSource:"data",query:"data",columns:"array",childGrid:"parent",gridLines:"enum",summaryRows:"array",stackedHeaderRows:"array",toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},contextMenuSettings:{contextMenuItems:"array",customContextMenuItems:"array",subContextMenu:"array"},selectionSettings:{selectionMode:"array",selectedRecords:"array"},sortSettings:{sortedColumns:"array"},filterSettings:{filteredColumns:"array",filterType:"enum",filterBarMode:"enum"},groupSettings:{groupedColumns:"array"},editSettings:{editMode:"enum",formPosition:"enum",rowPosition:"enum"},searchSettings:{fields:"array"},textWrapSettings:{wrapMode:"enum"}},_columns:function(){this.element.find(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),this._headerCellgDragDrop(),this.refreshContent(!0),this._trigger("refresh")},_summaryRows:function(e,i,s){if("showTotalSummary"==i||"showCaptionSummary"==i){var n=e.summaryRows,r=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);this.option("summaryRows")[n][i]=r}this.element.find(".e-gridfooter").remove(),this._renderGridFooter().insertAfter(this.getContent()),("showCaptionSummary"==i||"title"==i)&&(this._isCaptionSummary=this.option("summaryRows")[n].showCaptionSummary,this.model.showSummary=this._isCaptionSummary,0!=this.model.groupSettings.groupedColumns.length&&this._refreshCaptionSummary())},_summaryRows_summaryColumns:function(e,i,s){("displayColumn"==i||"dataMember"==i)&&t.isNullOrUndefined(this.getColumnByField(s))||(this._createSummaryRows(this.getFooterTable()),0!=this.element.find(".e-groupcaptionsummary").length&&this._refreshCaptionSummary())},_stackedHeaderRows_stackedHeaderColumns:function(){this._refreshStackedHeader()},_sortSettings_sortedColumns:function(e,t,i){var s,n,r=this.model.sortSettings.sortedColumns[e["sortSettings.sortedColumns"]];"field"==t?(s=null!=this.getColumnByField(i)?i:null,n="ascending"==r.direction||"descending"==r.direction?r.direction:null):"direction"==t&&(s=null!=this.getColumnByField(r.field)?r.field:null,n="ascending"==i||"descending"==i?i:null),null!=s&&null!=n&&this.sortColumn(s,n)},_filterSettings_filteredColumns:function(e,i,s){var n,r,o,l,a,d=this.model.filterSettings.filteredColumns[e["filterSettings.filteredColumns"]];switch(i){case"field":n=null!=this.getColumnByField(s)?s:null,r=this._map(t.FilterOperators,d.operator),a=d.value,l="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"matchcase":n=null!=this.getColumnByField(d.field)?d.field:null,r=this._map(t.FilterOperators,d.operator),a=d.value,l="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);break;case"operator":n=null!=this.getColumnByField(d.field)?d.field:null,r=this._map(t.FilterOperators,s),a=d.value,l="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"predicate":n=null!=this.getColumnByField(d.field)?d.field:null,r=this._map(t.FilterOperators,d.operator),a=d.value,l="and"==s||"or"==s?s:null,o=d.matchcase;break;case"value":n=null!=this.getColumnByField(d.field)?d.field:null,r=this._map(t.FilterOperators,d.operator),a=s,l="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase}null!=n&&null!=r&&null!=a&&null!=l&&null!=o&&this.filterColumn(n,r,a,l,o)},_map:function(t,i){var s=e.map(t,function(e){if(e===i)return e});return 0!=s.length?s[0]:null},_refreshCaptionSummary:function(){var t=document.createElement("div");t.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),
this.getContentTable().get(0).replaceChild(t.firstChild.firstChild,this.getContentTable().get(0).lastChild),this.refreshContent()},getContentTable:function(){return this._gridContentTable},setGridContentTable:function(e){this._gridContentTable=e},getContent:function(){return this._gridContent},setGridContent:function(e){this._gridContent=e},getHeaderContent:function(){return this._gridHeaderContent},setGridHeaderContent:function(e){this._gridHeaderContent=e},getHeaderTable:function(){return this._gridHeaderTable},setGridHeaderTable:function(e){this._gridHeaderTable=e},getRows:function(){return this._gridRows},getFilteredRecords:function(){return this._filteredRecords},getRowByIndex:function(i,s){var n;try{var r=this.getRows(),o=this._excludeDetailRows(),l=e();if(e.isArray(i)){for(n=0;n<i.length;n++)this.model.scrollSettings.frozenColumns>0?(l.push(r[0][i[n]]),l.push(r[1][i[n]])):l.push(r[i[n]]);return l}return t.isNullOrUndefined(s)?this.model.scrollSettings.frozenColumns>0?(l.push(r[0][i]),l.push(r[1][i]),l):e(o.not(".e-virtualrow")[i]):this.model.scrollSettings.frozenColumns>0?(l.push(e(r[0]).slice(i,s)),l.push(e(r[1]).slice(i,s)),l):e(o.not(".e-virtualrow").slice(i,s))}catch(t){return e()}},getColumnIndexByField:function(e){for(var t=0,i=this.model.columns,s=i.length;t<s;t++)if(i[t].field===e)return t;return-1},getColumnIndexByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s},getIndexByRow:function(t){var i,s=this.getRows(),n=this._excludeDetailRows();return this.model.scrollSettings.frozenColumns>0?(i=e(s[0]).index(t),i==-1&&(i=e(s[1]).index(t)),i):n.not(".e-virtualrow").index(t)},getPrimaryKeyFieldNames:function(){if(0!=this._primaryKeys.length)return this._primaryKeys;for(var e=0,t=this.model.columns,i=t.length;e<i;e++)t[e].isPrimaryKey&&this._primaryKeys.push(t[e].field);return this._primaryKeys},getVisibleColumnNames:function(){return this._visibleColumns},getHiddenColumnNames:function(){return this._hiddenColumns},getColumnByField:function(e){for(var t=0;t<this.model.columns.length&&this.model.columns[t].field!=e;t++);return t==this.model.columns.length?null:this.model.columns[t]},getsortColumnByField:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[t].field!=e;t++);return t==this.model.sortSettings.sortedColumns.length?null:this.model.sortSettings.sortedColumns[t]},getColumnByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s==this.model.columns.length?null:this.model.columns[s]},getCurrentViewData:function(){return this._currentJsonData},getColumnFieldNames:function(){for(var e=[],t=0;t<this.model.columns.length;t++)this.model.columns[t].field&&e.push(this.model.columns[t].field);return e},getBrowserDetails:function(){var t=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return navigator.userAgent.match(/Trident\/7\./)||navigator.userAgent.match(/Edge/)?{browser:"msie",version:e.uaMatch(navigator.userAgent).version}:{browser:t[1].toLowerCase(),version:t[2]}},_initPrivateProperties:function(){this._currentVirtualRowIndex=0,this._click=0,this._gridPhoneMode=320,this._columntemplaterefresh=!1,this._tabKey=!1,this._gridHeaderTable=null,this._gridWidth=this.element.width(),this._id=this.element.attr("id"),this._gridRows=[],this._fltrBarcell=!1,this._unboundRow=null,this._gridContentTable=null,this._gridContent=null,this._remoteSummaryData=null,this._gridSort=null,this._gridHeaderContent=null,this._gridFooterContent=null,this._gridFooterTable=null,this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._links=null,this._gridPager=null,this._cSortedColumn=null,this._cSortedDirection=null,this._$curSElementTarget=null,this._gridFilterBar=null,this._$curFieldName=null,this._$prevFieldName=null,this._editedData={},this._isEditChangesApplied=!1,this._mediaStatus=!1,this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1,this._$colType=null,this._$colFormat=null,this._$prevColType=null,this._$prevSElementTarget=null,this._currentFilterColumn=null,this._filteredRecordsCount=null,this._filteredRecords=[],this._validatedColumns=[],this.filterColumnCollection=[],this._previousFilterCount=null,this._excelFilter=null,this._isExcelFilter="excel"==this.model.filterSettings.filterType,this._$fkColumn=!1,this._fkParentTblData=[],this._primaryKeys=[],this._identityKeys=[],this._primaryKeyValues=[],this._modifiedRecords=[],this._addedRecords=[],this._tdsOffsetWidth=[],this._deletedRecords=[],this._disabledToolItems=e(),this._validationRules={},this._groupedColumns=[],this._LastColumnUnGroup=!1,this._scolumns=[],this._currentJsonData=[],this._groupingColumnIndex=0,this._dataManager=this._dataSource()instanceof t.DataManager?this._dataSource():null!=this._dataSource()?t.DataManager(this._dataSource()):null,null!=this._dataManager&&this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&null!=this.model.pageSettings.totalRecordsCount&&null!=this._dataManager.dataSource.json&&this._dataManager.dataSource.json.splice(this.model.pageSettings.totalRecordsCount),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!0,this._disabledResizingColumns=[],this._disabledSortableColumns=[],this._disabledGroupableColumns=[],this._disabledFilterableColumns=[],this._disabledEditableColumns=[],this._hiddenColumns=[],this._visibleColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._ccVisibleColumns=[],this._ccHiddenColumns=[],this._sortedColumns=[],this.multiSortRequest=!1,this.multiSelectCtrlRequest=!1,this.multiSelectShiftRequest=!1,this._enableSelectMultiTouch=!1,this._enableSortMultiTouch=!1,this._templateRefresh=!1,this.initialRender=!1,this._selectDrag=!1,this._isAddNew=!1,this._fieldColumnNames={},this._headerColumnNames={},this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualPageRecords={},this._virtaulSel=[],this._dragUpInterval=null,this._dragDownInterval=null,this._queryCellView=[],this._currentPageViews=[],this._virtualLoadedPages=[],this._currentLoadedIndexes=[],this._prevVirtualSort=[],this._prevVirtualFilter=[],this._prevVirtualIndex=0,this._currentVirtualIndex=1,this._virtualRowCount=0,this._virtualSelectedRecords={},this._selectionByGrid=!1,this._enableCheckSelect=!1,this.checkSelectedRowsIndexes=[],this._isMapSelection=!1,this._selectionMapColumn=null,this._selectAllCheck=!1,this.selectedRowsIndexes=[],this._isReorder=!1,this._searchString="",this._searchCount=null,this.columnsWidthCollection=[],this._Indicator=null,this._resizer=null,this._bulkEditCellDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null},this.batchChanges={added:[],deleted:[],changed:[]},this._bulkEditTemplate=e(),this._confirmDialog=null,this._confirmedValue=!1,this._lastRow=!1,this._isVirtualRecordsLoaded=!1,this._scrollValue=0,this._currentTopFrozenRow=this.model.scrollSettings.frozenRows,this._rowHeightCollection=[],this._scrollObject=null,this._customPop=null,this.selectedRowCellIndexes=[],this._rowIndexesColl=[],this.selectedColumnIndexes=[],this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.commonQuery=this.model.query.clone(),t.gridFeatures.group&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0),this.phoneMode=!!(this.model.isResponsive&&document.documentElement.clientWidth<360),this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection(),this._mediaQuery=!1,this._columnChooserList=null,this._$headerCols=null,this._$contentCols=null,this._detailsOuterWidth=null,this._editForm=null,this._cloneQuery=null,this.localizedLabels=this._getLocalizedLabels(),this._searchBar=null,this._relationalColumns=[],this._dropDownManager={},this._isUngrouping=!1,this._columnChooser=!1,this._showHideColumns=!1,this._vCurrentTrIndex=null,this._lastVirtualPage=null,this._currentVIndex=null,(!this.model.enablePersistence||t.isNullOrUndefined(this._isHeightResponsive))&&(this._isHeightResponsive=!1),this._resize=!1,this._initHeight=0,this._initDataProcessed=!1,this._menuColTypes=[],this._excelColTypes=[]},_init:function(){var e,i,n;this._trigger("load"),!t.isNullOrUndefined(this.model.query)&&this.model.query instanceof t.Query||(this.model.query=t.Query()),t.isNullOrUndefined(this.model.parentDetails)||(e=this.model.queryString,i=this.model.foreignKeyField,this.model.query=this.model.query.clone(),n=this.model.parentDetails.parentKeyFieldValue===s?"undefined":this.model.parentDetails.parentKeyFieldValue,this.model.query.where(t.isNullOrUndefined(i)?e:i,"equal",n,!0)),this._initPrivateProperties(),t.gridFeatures.common&&this._initScrolling(),this.model.enableResponsiveRow&&this.element.addClass("e-responsive"),this._checkForeignKeyBinding(),this._checkDataBinding()},_initComplexColumn:function(e,i,s){var n,r,o,l=s||i;for(n in e)"object"!=typeof e[n]||t.isNullOrUndefined(e[n])?(r=l.concat(".").concat(n),o=e[n],this.model.columns.push({field:r,type:null!=o?o.getDay?o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0||o.getMilliseconds()>0?"datetime":"date":typeof o:null})):(l=l.concat(".").concat(n),this._initComplexColumn(e[n],n,l))},_initColumns:function(i){for(var n,r,o,l,a;i.items!=s;)i=i.items[0];if(0==this.model.columns.length&&i){for(n in i)i.hasOwnProperty(n)&&("object"!=typeof i[n]||i[n]instanceof Date||null==i[n])?(r=i[n],this.model.columns.push({field:n,type:null!=r?r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof r:null})):"object"==typeof i[n]&&this._initComplexColumn(i[n],n);this.model.columns.length&&this._renderAfterColumnInitialize()}else for(o=0;o<this.model.columns.length;o++)this.model.columns[o].field=t.isNullOrUndefined(this.model.columns[o].field)?"":this.model.columns[o].field,t.isNullOrUndefined(this.model.columns[o].validationRules)||this._validatedColumns.push(this.model.columns[o].field),t.isNullOrUndefined(this.model.columns[o].type)?(l=t.isNullOrUndefined(this.model.columns[o].field)?null:t.getObject(this.model.columns[o].field,i),a=this.model.columns[o].dataSource,!!a&&this.model.columns[o].foreignKeyValue&&(this.model.columns[o].originalType=null!=l?l.getDay?l.getHours()>0||l.getMinutes()>0||l.getSeconds()>0||l.getMilliseconds()>0?"datetime":"date":typeof l:null,l=a instanceof t.DataManager?t.getObject("0."+this.model.columns[o].foreignKeyValue,this.model.columns[o].foreignKeyData):t.getObject("0."+this.model.columns[o].foreignKeyValue,a)),this.model.columns[o].type=null!=l?l.getDay?l.getHours()>0||l.getMinutes()>0||l.getSeconds()>0||l.getMilliseconds()>0?"datetime":"date":typeof l:null):"date"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns?e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+"}"}):"datetime"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns&&e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+" "+t.preferredCulture(this.model.locale).calendars.standard.patterns.t+"}"})},_initSelection:function(){var e=this.model.selectionSettings.selectionMode;for(i=0;i<e.length;i++)this["_allow"+e[i]+"Selection"]=!0},_checkDataBinding:function(){var i,n,r,o,l;if(!this.model.columns.length&&((null==this._dataSource()||!this._dataSource().length)&&!(this._dataSource()instanceof t.DataManager)||this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url==s&&!this._dataSource().dataSource.json.length))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource),void this._alertDialog.ejDialog("open");if(this._initialRenderings(),this.model.editSettings.allowDeleting&&"multiple"==this.model.selectionType&&(this.multiDeleteMode=!0),this.initialRender=!0,this.model.enableRTL&&this.element.addClass("e-rtl"),this.model.allowFiltering&&this._isExcelFilter&&this._renderExcelFilter(),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this.model.allowGrouping&&this.element.append(this._renderGroupDropArea()),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&(this.element.append(this._renderToolBar()),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&e.inArray("search",this.model.toolbarSettings.toolbarItems)!=-1&&(i=this.element.find(".e-toolbar.e-toolbarspan .e-gridsearchbar"),t.ieClearRemover(i[0]))),(n=this.model.columns)&&n.length){if(r=this.model.query._expands,"string"==typeof n[0])for(o=0;o<n.length;o++)n[o]={field:n[o]};for(o=0;o<n.length;o++)n[o].field&&n[o].field.indexOf(".")!==-1&&this._getExpands(n[o].field,r);this.model.query.expand(r),this.commonQuery.expand(r),this._renderAfterColumnInitialize()}this.model.allowPaging&&this.element.append(this._renderGridPager()),this.model.contextMenuSettings.enableContextMenu&&this.element.append(this._renderContext()),e.isFunction(e.fn.ejWaitingPopup)&&(this.element.ejWaitingPopup({showOnInit:!1}),e("#"+this._id+"_WaitingPopup").addClass("e-gridwaitingpopup")),this.model.scrollSettings.allowVirtualScrolling&&(this._loadedJsonData=[],this._prevPage=1),this._dataSource()instanceof t.DataManager?(this.element.ejWaitingPopup("show"),this._dataSource().ready!=s?(l=this,this._dataSource().ready.done(function(e){l._initDataSource(),l.model.dataSource=t.DataManager(e.result)})):(this.element.ejWaitingPopup("show"),this._initDataSource())):(this._ensureDataSource(),this._trigger("actionBegin"),this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender(),this._vRowHeight=Math.floor(this.getRowHeight()))},_renderColumnChooser:function(){var i,n,r,o,l,a,d,h,c,u,p=t.buildTag("button .e-ccButton",this.localizedLabels.Columns,{float:this.model.enableRTL?"left":"right"}).attr("type","button");this.element.prepend(p),p.ejButton({prefixIcon:"e-icon e-down-arrow",imagePosition:"imageright",contentType:"textandimage",type:"button",click:e.proxy(this._ccClickHandler,this),width:90}),i=p.outerHeight(),p.css("margin-top",0-i),n=parseInt(this.element.css("margin-top"),10),this.element.css("margin-top",n+i),t.buildTag("div"),r=t.buildTag("div .e-grid e-columnChooser","",{},{id:this._id+"ccDiv"}),e("#"+this._id+"ccDiv").data("ejDialog")!=s&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove()),o=t.buildTag("div.e-searchbox e-fields").append(t.buildTag("input#"+this._id+"_ccSearchBox.e-ejinputtext e-filtertext",{},{},{type:"text"})),l=t.buildTag("span .e-searchfind e-icon"),o.append(l),a=t.buildTag("div","",{height:"228px"},{id:this._id+"liScrollerDiv"}),this._renderColumnChooserData(!1),a.append(this._columnChooserList),r.append(o),r.append(a),d=t.buildTag("div .e-columnChooserSplitter","",{"border-bottom":"0px"}),r.append(d),this.model.enableRTL?($buttonDiv=t.buildTag("div .e-ccBtndiv","",{float:"left","margin-top":"7px","margin-right":"-13px"}),h=t.buildTag("button .e-ccformbtn e-btncan e-flat",this.localizedLabels.Cancel,{"margin-right":"7px","margin-left":"9px"}),e(l).addClass("e-rtl")):($buttonDiv=t.buildTag("div .e-ccBtndiv","",{float:"right","margin-top":"7px"}),h=t.buildTag("button .e-ccformbtn e-btncan e-flat",this.localizedLabels.Cancel,{"margin-right":"7px","margin-left":"6px"})),c=t.buildTag("button .e-ccformbtn e-btnsub e-flat",this.localizedLabels.Done),$buttonDiv.append(c),$buttonDiv.append(h),r.append($buttonDiv),c.ejButton({click:e.proxy(this._addButtonCC,this),showRoundedCorner:!0,width:66}),h.ejButton({click:e.proxy(this._cancelButtonHandler,this),showRoundedCorner:!0,width:66}),r.insertBefore(this.element),r.ejDialog({width:"auto",beforeClose:e.proxy(this._columnChooserBeforeClose,this),showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260}),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&(u=e(".e-columnChooser").find("input#"+this._id+"_ccSearchBox")[0],t.ieClearRemover(u))},_renderColumnChooserData:function(i){var s,n,r,o,l,a,d,h=this.model.columns.length==this.getVisibleColumnNames().length;for(this._ccCheckBoxList=[],s=t.buildTag("div","",{"margin-left":"0px",width:"250px"}),n=0,r=-1;r<this.model.columns.length;r++)if((o=r==-1)||this.model.columns[r].showInColumnChooser){var c=this.model.columns[r],u=o?this.localizedLabels.SelectAll:t.isNullOrUndefined(c.headerText)||""==c.headerText?""==c.field?null:c.field:c.headerText,p=c&&c.disableHtmlEncode?this._htmlEscape(u):u;if(!t.isNullOrUndefined(u)||o){var m=t.buildTag("div","",{},{class:"e-columnChooserListDiv"}),g=o?this._id+"selectAll":this._id+u.replace(/\s|\.|[^a-zA-Z0-9]|&nbsp/g,"_"),f=s.find("#"+g).length;f&&n++,l=t.buildTag("input","",{},{id:f?g+n+"":g,value:u,type:"checkbox","ej-field":o?"":c.field,"ej-headertext":o?"":c.headerText,class:o?"e-selectall":""}),a=t.buildTag("label",p,{"font-size":"13px"},{for:f?g+n+"":g}),m.append(l),m.append(a),s.append(m),d=!(!o&&!t.isNullOrUndefined(c.visible))||c.visible,l.ejCheckBox({checked:o?h:d,change:e.proxy(this._columnChooserCheckChange,this)}),o||t.isNullOrUndefined(c.visible)||l[c.visible?"attr":"removeAttr"]("checked",!0)}}i?(this._columnChooserList.empty().append(s.children()),e("#"+this._id+"liScrollerDiv").is(":visible")&&e("#"+this._id+"liScrollerDiv").ejScroller("refresh")):this._columnChooserList=s,this._ccCheckBoxList=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")},_checkFinder:function(){var t=e(this),i=t.closest(".e-columnChooserListDiv");if(t.hasClass("e-checkbox")&&!i.hasClass("e-hide")&&t.prop("checked"))return!0},_displayFinder:function(){return!e(this).closest(".e-columnChooserListDiv").hasClass("e-hide")},_columnChooserCheckChange:function(t){var i;if(!t.isInteraction)return void(t.isChecked&&e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable"));var s=t.isChecked,n=this._ccCheckBoxList.filter(this._displayFinder),r=this._ccCheckBoxList.filter(this._checkFinder),o=n.length,l=r.length;t.model.id==this._id+"selectAll"?s?n.not(":checked").ejCheckBox({checked:s}):r.ejCheckBox({checked:s}):(this._columnChooserList.find("input.e-selectall").ejCheckBox("model.checked",o==l),s=0!=l,this.element[s?"attr":"removeAttr"]("checked",!0)),i=s?"removeClass":"addClass",e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[i]("e-disable")},_columnChooserBeforeClose:function(){e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove(),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable"),e("#"+this._id+"_ccSearchBox").val("");var t={};t.target={},t.target.value="",this._columnChooserSearch(t)},_columnChooserSearch:function(s){var n,r,o,l,a,d,h,c,u;"click"==s.type&&(s.target.value="",e("#"+this._id+"_ccSearchBox").val("")),n=s.target.value,r=e("#"+this._id+"_ccSearchBox").next("span"),""!=n?(r.removeClass("e-searchfind"),r.addClass("e-cancel")):(r.removeClass("e-cancel"),r.addClass("e-searchfind")),e(".e-cancel").on("click",e.proxy(this._columnChooserSearch,this));var p=this.model.columns,m=[],g=[],f=[],_=this,v=function(t){var i=_.model.groupSettings;return!i.showGroupedColumn&&e.inArray(t,i.groupedColumns)>-1};for(""!=n&&(p=t.DataManager(this.model.columns).executeLocal(t.Query().where("headerText",t.FilterOperators.startsWith,n,!0)),f=t.DataManager(this.model.columns).executeLocal(t.Query().where("field",t.FilterOperators.startsWith,n,!0)),f.forEach(function(t){""==t.headerText&&e.inArray(t,p)==-1&&p.push(t)})),p.forEach(function(e){if(e.showInColumnChooser&&!v(e.field)){var i=t.isNullOrUndefined(e.headerText)||""==e.headerText?""==e.field?null:e.field:e.headerText;m.push(i)}}),t.isNullOrUndefined(e("#nomatches")[0])||e("#nomatches").remove(),o=e("#"+this._id+"ccDiv").find("#"+this._id+"liScrollerDiv"),l=this._columnChooserList.find(".e-columnChooserListDiv"),i=0;i<this.model.columns.length;i++)this.model.columns[i].showInColumnChooser&&!t.isNullOrUndefined(this.model.columns[i].headerText)&&(""!=this.model.columns[i].headerText?g.push(this.model.columns[i].headerText):""!=this.model.columns[i].field&&g.push(this.model.columns[i].field));for(a=0;a<g.length;a++)d=g[a],h=m.indexOf(d),t.isNullOrUndefined(d)||l.eq(a+1)[h==-1?"addClass":"removeClass"]("e-hide");0==m.length&&(c=t.buildTag("div#nomatches","",{"padding-left":"13px"}),u=t.buildTag("span",this.localizedLabels.NoResult),c.append(u),e(o).append(c));var b=this._ccCheckBoxList.filter(this._displayFinder).length,y=this._ccCheckBoxList.filter(this._checkFinder).length,w=y==b;m.length&&l.eq(0).find("input.e-js").ejCheckBox({checked:w}),l.eq(0)[0==m.length?"addClass":"removeClass"]("e-hide"),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[y?"removeClass":"addClass"]("e-disable"),e("#"+this._id+"liScrollerDiv").ejScroller("refresh")},_addButtonCC:function(){var t,i,s,n;for(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._columnChooserClick=!0,t={},t.requestType="columnchooser",this._columnChooser=!0,i=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall"),s=0,n=i.length;s<n;s++){var r=e(i[s]),o=r.attr("ej-headertext"),l=r.attr("ej-field");this._id+"selectAll"!=r.attr("id")&&(this[i[s].checked?"_visibleColumns":"_hiddenColumns"].push(o),this[i[s].checked?"_visibleColumnsField":"_hiddenColumnsField"].push(""!=l?l:o))}var a,d,h=this._visibleColumns,c=this._hiddenColumns;a=e.merge(e.merge([],h),c),d=this._isDuplicate(a),this._trigger("actionBegin",t),d?(this.showColumns(this._visibleColumnsField),this.hideColumns(this._hiddenColumnsField)):(this.showColumns(this._visibleColumns),this.hideColumns(this._hiddenColumns)),e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertail").remove(),this.refreshScrollerEvent(),t={requestType:"columnchooser",removedcolumns:[],addedcolumns:[],visiblecolumns:this.getVisibleColumnNames(),hiddencolumns:this.getHiddenColumnNames()},this._ccColumnUpdate(t.addedcolumns,this.getVisibleColumnNames(),this._ccVisibleColumns),this._ccColumnUpdate(t.removedcolumns,this.getHiddenColumnNames(),this._ccHiddenColumns),this._trigger("actionComplete",t)},_ccColumnUpdate:function(t,s,n){for(i=0;i<s.length;i++)e.inArray(s[i],n)==-1&&t.push(s[i])},_isDuplicate:function(e){for(var t,i=[],s=0;s<e.length;s++)t=e[s],i[t]=i[t]>=1?i[t]+1:1;for(t in i)if(i[t]>1)return!0;return!1},_cancelButtonHandler:function(){e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertailAlt").remove(),e(".e-columnChoosertail").remove()},_ccClickHandler:function(){var i,s,n=this.element.find(".e-ccButton");if(i=n.offset().left+n.width(),(s=e("#"+this._id+"ccDiv").data("ejDialog"))&&s.isOpened())s.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove();else{e("#"+this._id+"ccDiv").ejDialog({width:"230px",height:"310px",position:{X:this.model.enableRTL?i-230+143:i-230,Y:n.offset().top+35}}).ejDialog("open");var r=parseInt(e("#"+this._id+"ccDiv_wrapper").css("z-index")),o=t.buildTag("div #"+this._id+"_ccTail .e-columnChoosertail","",{display:"block",position:"absolute",left:this.model.enableRTL?i-78:i-29,top:n.offset().top+15}),l=t.buildTag("div #"+this._id+"_ccTailAlt .e-columnChoosertailAlt","",{display:"block","z-index":r+2,position:"absolute",left:this.model.enableRTL?i-78:i-29,top:n.offset().top+16});o.insertBefore(e("#"+this._id+"ccDiv_wrapper")),l.insertBefore(e("#"+this._id+"ccDiv_wrapper"))}this._refreshColumnChooserList(),this._ccVisibleColumns=this.getVisibleColumnNames(),this._ccHiddenColumns=this.getHiddenColumnNames(),e("#"+this._id+"liScrollerDiv").ejScroller({height:"228",width:"228",buttonSize:0}),e("#"+this._id+"liScrollerDiv").ejScroller("refresh"),t.isIOSWebView()||"chrome"!=this.getBrowserDetails().browser||e(".e-columnChooser .e-hscrollbar").attr("style","height: 10px !important;"),e(".e-ejinputtext").on("keyup",e.proxy(this._columnChooserSearch,this))},_refreshColumnChooserList:function(){for(var t,i,n,r=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall"),o=this._isDuplicate(e.merge(e.merge([],this._visibleColumns),this._hiddenColumns)),l=0,a=r.length;l<a;l++){var d=e(r[l]),h=d.attr("ej-headertext"),c=d.attr("ej-field"),u=s;r.filter("[ej-headertext='"+h+"']").length;this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&e.inArray(e(r[l]).attr("ej-field"),this.model.groupSettings.groupedColumns)!=-1?(e(r[l]).parents(".e-columnChooserListDiv").addClass("e-hide"),r[l].checked=!1):(e(r[l]).parents(".e-columnChooserListDiv").removeClass("e-hide"),r[l].checked=!0),t=o?""==c?h:c:h,u=this[o?"_hiddenColumnsField":"_hiddenColumns"].indexOf(t)!=-1,d.prop("checked",!u),d.ejCheckBox("model.checked",!u)}i=!(r.filter(this._displayFinder).length!=r.filter(this._checkFinder).length||!r.filter(this._displayFinder).length),this._columnChooserList.find("input:checkbox.e-selectall").ejCheckBox({checked:i}),this.model.groupSettings.showGroupedColumn||(n=r.filter(this._displayFinder).length>0,e("#"+this._id+"ccDiv").find("button[aria-describedby='Done']").ejButton({enabled:n}))},_initDataSource:function(){var e,i;this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataSource().dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(this._isLocalData=!1),this._ensureDataSource(),this._trigger("actionBegin"),e=this._dataSource().executeQuery(this.model.query),i=this,null!=this._dataManager.dataSource.table&&this._dataManager.dataSource.table.css("display","none"),this.element.is(":visible")||this.element.ejWaitingPopup("hide"),e.done(t.proxy(function(e){this._initDataProcessed||(this._initDataProcess(e),this._initDataProcessed=!0)},this)),i=this,e.fail(function(e){if(!t.isNullOrUndefined(i.element)){i.element.ejWaitingPopup("hide"),i.model.currentViewData=[],i._gridRecordsCount=0,i._renderGridContent().insertAfter(i.element.children(".e-gridheader"));var s={error:e.error};i._trigger("actionFailure",s)}})},_initDataProcess:function(i,s){var n,r,o;if(!t.isNullOrUndefined(this.element)){if(0==this._relationalColumns.length&&this.element.ejWaitingPopup("hide"),!this.model.columns.length&&!i.count)return n=i.count%this.model.pageSettings.pageSize==0?i.count/this.model.pageSettings.pageSize:parseInt(i.count/this.model.pageSettings.pageSize,10)+1,this._currentPage()>n&&this._currentPage(n),this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource),this._alertDialog.ejDialog("open"),void this.element.ejWaitingPopup("hide");if(t.isNullOrUndefined(i.aggregates)||(this._remoteSummaryData=i.aggregates),this.model.scrollSettings.enableVirtualization||(this.model.currentViewData=i.result),this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=i.result),this._gridRecordsCount=this.model.enablePersistence||null==this.model.pageSettings.totalRecordsCount||0!=this.model.filterSettings.filteredColumns.length?0==i.count&&i.result.length?i.result.length:i.count:this.model.pageSettings.totalRecordsCount,this.model.filterSettings.filteredColumns.length>0&&(this._filteredRecordsCount=i.count),null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)if(this._refreshVirtualViewDetails(),this._isInitNextPage||this._remoteRefresh?(this._setInitialCurrentIndexRecords(i.result,this._currentPage()),this._isInitNextPage=this._remoteRefresh=!1):this._setVirtualLoadedRecords(i.result,this._currentPage()),this._isThumbScroll&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)&&this._checkPrevNextViews(this._currentPage()),this.initialRender)for(this.model.currentViewData=[],r=0;r<this._currentLoadedIndexes.length;r++)o=this._currentLoadedIndexes[r],e.merge(this.model.currentViewData,this._virtualLoadedRecords[o]||[]);else this.model.currentViewData=i.result;this._setForeignKeyData(s),0==this._relationalColumns.length&&this._initGridRender()}},_initialRenderings:function(){var i,s;if(this.model.groupSettings.groupedColumns.length){for(i=[],s=0;s<this.model.sortSettings.sortedColumns.length;s++)t.isNullOrUndefined(this.model.sortSettings.sortedColumns[s].direction)&&(this.model.sortSettings.sortedColumns[s].direction=t.sortOrder.Ascending),i.push(this.model.sortSettings.sortedColumns[s].field);if(this.model.allowGrouping)for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)e.inArray(this.model.groupSettings.groupedColumns[s],i)==-1&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[s],direction:t.sortOrder.Ascending})}},_getExpands:function(e,t){var i,s,n=e.split("."),r="";for(n.splice(n.length-1,1),i=0;i<n.length;i++,r=""){for(s=0;s<i;s++)r+=n[s]+"/";r+=n[i],t.indexOf(r)===-1&&t.push(r)}},_renderAfterColumnInitialize:function(){this.element.append(this._renderGridHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(this._renderFiltering(),this._renderFilterBarTemplate()),"both"!=this.model.gridLines&&this._showHeaderGridLines(),this.model.allowPaging&&this.element.append(this.element.find(".e-pager").first())},_ensureDataSource:function(i){var n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T,k,D,I,O,R,P,M,j,E,F,A;if(null==this._dataSource()&&!(this._dataSource()instanceof t.DataManager)){if(t.isNullOrUndefined(i)||"add"!=i.requestType)return;this.dataSource([])}if(this.model.query.requiresCount(),n=this.model.query,r=n.clone(),this._dataSource()instanceof t.DataManager||(this.model.currentViewData=this._dataSource()),this._isLocalData&&(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(!t.isNullOrUndefined(this._cModifiedData)||!t.isNullOrUndefined(this._cAddedRecord))){if(t.isNullOrUndefined(this._cAddedRecord)){for(m=0;m<this._primaryKeys.length;m++)n=n.where(this._primaryKeys[m],t.FilterOperators.equal,this._primaryKeyValues[m]);o=this._dataManager.executeLocal(n),this._dataSource()instanceof t.DataManager?t.copyObject(this._dataSource().dataSource.json[e.inArray(o.result[0],this._dataSource().dataSource.json)],this._cModifiedData):t.copyObject(this._dataSource()[e.inArray(o.result[0],this._dataSource())],this._cModifiedData),this._cModifiedData=null}else l=this._cAddedRecord,this._cAddedRecord=null,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(l):this._dataSource(s,!0).splice(0,0,l);n.queries=r.queries,this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1)}if(i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&(1==this._excludeDetailRows().length||"multiple"==this.multiDeleteMode&&this.selectedRowsIndexes.length==this._excludeDetailRows().length)&&1!=this.model.pageSettings.currentPage&&this._currentPage(this.model.pageSettings.totalPages-1),
i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&!t.isNullOrUndefined(this._cDeleteData)&&this._isLocalData&&(this._dataSource()instanceof t.DataManager?(m=e.inArray(this._cDeleteData[0],this._dataSource().dataSource.json),this._dataSource().dataSource.json.splice(m,1)):(m=e.inArray(this._cDeleteData[0],this._dataSource()),this._dataSource(s,!0).splice(m,1))),this.model.scrollSettings.allowVirtualScrolling&&i&&("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._virtualDataRefresh=!0,this._refreshVirtualViewData()),this.model.sortSettings.sortedColumns.length){for(a=[],d=this.model.sortSettings.sortedColumns,S=d.length-1;S>=0;S--)if(this.model.groupSettings.groupedColumns.indexOf(d[S].field)==-1){if(n.sortBy(d[S].field,d[S].direction),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&e.inArray(d[S],this._prevVirtualSort)==-1){for(y=0;y<this._prevVirtualSort.length;y++)d[S].field==this._prevVirtualSort[y].field&&this._prevVirtualSort.splice(y,1);this._needVPaging=this._currentVirtualIndex*this._virtualRowCount%this.model.pageSettings.pageSize<=this._virtualRowCount,this._prevVirtualSort.push(d[S]),this._virtualDataRefresh=!0,this._refreshVirtualViewData()}}else a.push({field:d[S].field,direction:d[S].direction});for(y=0;y<a.length;y++)n.sortBy(a[y].field,a[y].direction)}if(this.model.allowSearching&&this.model.searchSettings.key.length&&(h=this.model.searchSettings,h.fields=0!=h.fields.length?h.fields:this.getColumnFieldNames(),n.search(h.key,h.fields,h.operator||"contains",h.ignoreCase||!0),this.initialRender||"searching"!=i.requestType||this._currentPage(1)),this._isLocalData&&this.model.allowSearching&&(this._filteredRecords=0!=this.model.searchSettings.key.length?this._dataManager.executeLocal(n).result:[]),this.model.allowFiltering&&this.model.filterSettings.filteredColumns.length){for(u=this.model.filterSettings.filteredColumns[0],p=this.model.filterSettings.filteredColumns,S=0;S<p.length;S++)m=e.inArray(this.getColumnByField(p[S].field),this.filterColumnCollection),""!==p[S].field&&m==-1&&this.filterColumnCollection.push(this.getColumnByField(p[S].field));if(!this._isExcelFilter&&!this._excelFilterRendered||u instanceof t.Predicate)for(u instanceof t.Predicate?(c=u,this._excelFilterRendered&&(b=t.distinct(p,"field",!1),this._excelFilter._predicates[0]=this._excelFilter._predicates[0]||{},this._excelFilter._predicates[0][b[0]]=c)):c=t.Predicate(u.field,u.operator,u.value,!u.matchcase),S=1;S<p.length;S++)p[S]instanceof t.Predicate?c=c[p[S].predicate||"and"](p[S]):!this._isLocalData&&p.length>2&&S>1&&"or"==p[S].predicate?c.predicates.push(t.Predicate(p[S].field,p[S].operator,p[S].value,p[S].ignoreCase||!p[S].matchcase)):c=c[p[S].predicate||"and"](p[S].field,p[S].operator,p[S].value,!p[S].matchcase);else{this._excelFilter.getPredicate(p,null,!0),g=this._excelFilter._predicates[0];for(f in g)_=g[f],v=_.from!=s,v?n.skip("top"==_.from?0:this._gridRecordsCount-_.take).take(_.take):c=c!=s?c.and(_):_}if(c&&n.where(c),this._isLocalData?(w=this._dataManager.executeLocal(n),this._filteredRecordsCount=v?w.result.length:w.count,C=this._filteredRecordsCount%this.model.pageSettings.pageSize==0?this._filteredRecordsCount/this.model.pageSettings.pageSize:parseInt(this._filteredRecordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>C&&this._currentPage(C),this._filteredRecords=this._dataManager.executeLocal(n).result,this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=this._filteredRecords)):t.isNullOrUndefined(i)||i.requestType!=t.Grid.Actions.Filtering||this._currentPage(1),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)for(S=0;S<p.length;S++){for(y=0;y<this._prevVirtualFilter.length;y++)p[S]==this._prevVirtualFilter[y]&&i.requestType==t.Grid.Actions.Filtering&&this._prevVirtualFilter.splice(y,1);e.inArray(p[S],this._prevVirtualFilter)==-1&&(this._prevVirtualFilter.push(p[S]),this._gridRecordsCount=this._filteredRecordsCount,this._refreshViewPageDetails(),this._refreshVirtualViewData(),this._refreshVirtualViewDetails())}}if(this._isLocalData&&this.model.allowFiltering&&0==this.model.filterSettings.filteredColumns.length&&(!t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount>0)&&(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshViewPageDetails(),this._refreshVirtualViewDetails(!0)),this._filteredRecordsCount=null,this._filteredRecords=[]),this.model.summaryRows.length&&this._setSummaryAggregate(n),this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&!this.model.scrollSettings.enableVirtualization){if(this._isLocalData&&(w=this._dataManager.executeLocal(n),this._recordsCount=w.count,C=this._recordsCount%this.model.pageSettings.pageSize==0?this._recordsCount/this.model.pageSettings.pageSize:parseInt(this._recordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>C&&this._currentPage(C)),0==this._currentPage()&&(0==this._prevPageNo||null==this._prevPageNo?this._currentPage(1):this._currentPage(this._prevPageNo)),!this._isLocalData&&!this.initialRender&&!t.isNullOrUndefined(i)&&"refresh"==i.requestType&&r.queries.length)for(S=0;S<r.queries.length;S++)"onWhere"==r.queries[S].fn&&this._currentPage(1);n.page(this._currentPage(),this.model.pageSettings.pageSize)}if(this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._needPaging=!0,this.initialRender&&this.model.currentIndex>1&&(this.model.currentIndex<=this._getVirtualTotalRecord()||!this._isLocalData)&&("continuous"==this.model.scrollSettings.virtualScrollMode&&(this.model.currentIndex=1),this._currentVirtualIndex=Math.ceil(this.model.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._currentPage(Math.ceil(this.model.currentIndex/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),this._virtualDataRefresh&&(this._isThumbScroll=!0,this._refreshVirtualViewData(!0),this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._currentPage(Math.ceil(this._currentVirtualIndex*this._virtualRowCount/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),null!=this.model.virtualLoading&&(this._gridRecordsCount=this.model.pageSettings.totalRecordsCount),0==this.model.filterSettings.filteredColumns&&this._prevVirtualFilter.length&&(this._refreshVirtualViewData(),this._prevVirtualFilter=[]),this._isLocalData&&this.initialRender&&this._refreshVirtualViewDetails(),this._getVirtualLoadedRecords(n)),this.model.allowGrouping){for(x=n.clone(),this.model.allowPaging&&this.model.groupSettings.groupedColumns.length&&(x.queries=x.queries.slice(0,x.queries.length-1)),S=0;S<this.model.groupSettings.groupedColumns.length;S++)T=this.model.groupSettings.groupedColumns[S],k=this.getColumnByField(T),!t.isNullOrUndefined(k.enableGroupByFormat)&&k.enableGroupByFormat?(n.group(T,t.proxy(this._formatGroupColumn,this)),x.group(T,t.proxy(this._formatGroupColumn,this))):(n.group(T),x.group(T));this.model.groupSettings.groupedColumns.length&&this._setAggreatedCollection(x)}if(i!=s&&"add"==i.requestType&&this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(i.data):this._dataSource().unshift(i.data)),t.isNullOrUndefined(i)||"add"!=i.action||t.isNullOrUndefined(this.model.parentDetails)||(D=this.getColumnByField(this.model.parentDetails.parentKeyField),e.inArray(D,this.model.columns)==-1&&(I={},I[this.model.parentDetails.parentKeyField]=this.model.parentDetails.parentKeyFieldValue,e.extend(!0,this.model.currentViewData[0],I))),this._cloneQuery=n.clone(),this._isLocalData&&(!this.model.scrollSettings.enableVirtualization||this._virtualDataRefresh)){if(O=this._dataManager.dataSource.json,R=this._dataSource().dataSource,!t.isNullOrUndefined(R)&&this._dataSource()instanceof t.DataManager&&(this._dataManager.dataSource.json=O!=R.json?R.json:O),P=this._dataManager.executeLocal(n),t.isNullOrUndefined(i)||"beginedit"!=i.requestType)if(this.model.scrollSettings.allowVirtualScrolling&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&(this._prevPageRendered=!0),this.model.scrollSettings.allowVirtualScrolling&&!this._prevPageRendered&&P.result.length!=this.model.pageSettings.pageSize&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage)M=t.pvt.filterQueries(n.queries,"onPage"),n.queries.splice(e.inArray(M[0],n.queries),1),n.page(this._currentPage()-1,this.model.pageSettings.pageSize),j=this._dataManager.executeLocal(n),j.result.splice(0,P.result.length),this._previousPageRecords=e.extend(!0,[],j.result),this._previousPageLength=P.result.length,this._currentPageData=P.result,t.merge(j.result,P.result),this.model.currentViewData=this._lastVirtualPage=j.result,this._lastPageRendered=!0;else if(this._lastPageRendered&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&!this.model.scrollSettings.enableVirtualization){for(E=this.model.pageSettings.pageSize-this._previousPageLength,F=0;F<E;F++)A=this.getRows()[this.getRows().length-(this.model.pageSettings.pageSize-F)],A.remove();this._tempPageRendered=!0,this.model.currentViewData=P.result}else this.model.currentViewData=P.result;else this.model.currentViewData=P.result;this._gridRecordsCount=P.count,this._remoteSummaryData=P.aggregates,this._searchCount=this._searchString.length?P.count:null,this.model.groupSettings.groupedColumns.length&&this._setAggregates()}},_formatGroupColumn:function(e,i){var s,n,r=this.getColumnByField(i);return s=r.format,n=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),s=n.exec(s)[2],t.format(e,s,this.model.locale)},_refreshViewPageDetails:function(){this._currentPage(1),this.model.currentIndex=0,this._currentVirtualIndex=1,this.getContent().ejScroller("model.scrollTop",0)},_refreshVirtualViewDetails:function(e){var i=this._dataSource();e&&(this._gridRecordsCount=null!==i?i instanceof t.DataManager?i.dataSource.json.length:i.length:this.model.pageSettings.totalRecordsCount),this._totalVirtualViews=Math.ceil(this._getVirtualTotalRecord()/this._virtualRowCount),this._maxViews=Math.ceil(this.model.pageSettings.pageSize/this._virtualRowCount),this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize),this.model.pageSettings.totalRecordsCount=this._gridRecordsCount,this._lastViewData=this._virtualRowCount-(this._totalVirtualViews*this._virtualRowCount-this._getVirtualTotalRecord())},_getVirtualLoadedRecords:function(t){var i,s,n=this._currentPage();if(this._needPaging&&(this._isLastVirtualpage=needTwoPage=this._isThumbScroll&&n==this.model.pageSettings.totalPages&&!this._virtualPageRecords[n],(this.initialRender||this._virtualDataRefresh)&&(needTwoPage=!0),this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=n)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._getVirtualOnLoadingData(n,!needTwoPage):this._setVirtualPaging(t,n,!needTwoPage),!this.initialRender&&this._isThumbScroll&&this._virtualPageRecords[n]&&!this._virtualDataRefresh&&this._checkPrevNextViews(n,t)),this._needPaging=!1,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.initialRender&&this._isLocalData)for(this.model.currentViewData=[],i=0;i<this._currentLoadedIndexes.length;i++)s=this._currentLoadedIndexes[i],this._virtualLoadedRecords[s]&&e.merge(this.model.currentViewData,this._virtualLoadedRecords[s])},_setVirtualPaging:function(i,s,n){var r,o=t.pvt.filterQueries(i.queries,"onPage");o.length&&i.queries.splice(e.inArray(o[0],i.queries),1),(!n||this._needVPaging)&&this.model.currentIndex>this._virtualRowCount?this._initCurrentIndex(i,s):i.page(s,this.model.pageSettings.pageSize),this._needVPaging=!1,this._isLocalData&&!this._virtualPageRecords[s]&&(r=this._dataManager.executeLocal(i),this.initialRender||(this.model.currentViewData=r.result),r.result.length?(this._setVirtualLoadedRecords(r.result,s),e.inArray(s,this._virtualLoadedPages)==-1&&this._virtualLoadedPages.push(s)):this.initialRender||this.getContent().find(".e-virtualtop, .e-virtualbottom").remove())},_checkPrevNextViews:function(){var e,t,i=this._currentVirtualIndex,s=this._virtualLoadedRecords[i-1],n=this._virtualLoadedRecords[i+1],r=3==this._maxViews?1:2;1!=i&&i!=this._totalVirtualViews&&(s&&s.length==this._virtualRowCount?n&&n.length==this._virtualRowCount||this._totalVirtualViews==i-1||(t=i-r,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t-1,e=this._scrollValue-r*this._virtualRowCount*this._vRowHeight):(t=i+r,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t+1,e=this._scrollValue+r*this._virtualRowCount*this._vRowHeight),e&&(this._scrollValue=e,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.model.currentIndex=0==e?e:Math.floor(e/this._vRowHeight)))},_initCurrentIndex:function(i,s){var n,r,o,l,a,d,h=s*this.model.pageSettings.pageSize,c=this._currentVirtualIndex*this._virtualRowCount+this._virtualRowCount,u=this._currentVirtualIndex*this._virtualRowCount-2*this._virtualRowCount,p=c>h||u<h-this.model.pageSettings.pageSize;p||this._isLastVirtualpage?(c>h?(n=(s-1)*this.model.pageSettings.pageSize,r=2*this.model.pageSettings.pageSize,this._isInitNextPage=!0):(u<h-this.model.pageSettings.pageSize||this._isLastVirtualpage)&&(n=(s-2)*this.model.pageSettings.pageSize,r=2*this.model.pageSettings.pageSize,this._isInitNextPage=!1,this._remoteRefresh=!0),this.model.virtualLoading&&this._isLocalData?(o={},o.endIndex=n+r,o.endIndex=o.endIndex>this._getVirtualTotalRecord()?this._getVirtualTotalRecord():o.endIndex,o.startIndex=n,o.currentPage=this._currentPage(),o.result=null,this._trigger("virtualLoading",o),d=o.result,this._setInitialCurrentIndexRecords(d,s)):(l=t.pvt.filterQueries(i.queries,"onSkip"),l.length&&i.queries.splice(e.inArray(l[0],i.queries),1),i.skip(n).take(r),this._isLocalData&&(a=this._dataManager.executeLocal(i),d=this.model.currentViewData=a.result,this._isLastVirtualpage=!1,this._setInitialCurrentIndexRecords(d,s)))):(this._needVPaging=!1,this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=s)?this._getVirtualOnLoadingData(s,!0):this._setVirtualPaging(i,s,!0))},_setInitialCurrentIndexRecords:function(e,t){for(i=0;i<2;i++){var s,n=i*this.model.pageSettings.pageSize,r=n+this.model.pageSettings.pageSize,o=e.slice(n,r);s=this._isInitNextPage||1==t&&1==this.model.pageSettings.totalPages?0==i?t:t+1:0==i?t-1:t,this._setVirtualLoadedRecords(o,s)}},_getVirtualOnLoadingData:function(e,t){var i,n;e>0&&(this.model.currentIndex>this._virtualRowCount&&(!t||this._needVPaging)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._initCurrentIndex(s,e):(i={},i.endIndex=e*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:e*this.model.pageSettings.pageSize,i.startIndex=e*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=this._currentPage(),i.result=null,this._trigger("virtualLoading",i),n=i.result,this._setVirtualLoadedRecords(n,e)))},_setVirtualLoadedRecords:function(t,i){var s,n,r,o,l,a,d,h,c,u,p=this._virtualRowCount,m=this.model.pageSettings.pageSize,g=m/p,f=Math.ceil(i*m/p),_=i==this.model.pageSettings.totalPages;for(this._virtualPageRecords[i]||(this._virtualPageRecords[i]=t),_&&(n=this._getVirtualTotalRecord()%m,f=(!this._virtualLoadedRecords[this._totalVirtualViews]||this._virtualLoadedRecords[this._totalVirtualViews].length!=this._lastViewData)&&n<this._lastViewData&&0!=n?this._totalVirtualViews+1:this._totalVirtualViews,this._getVirtualTotalRecord()<p&&(this._singleView=!0)),r=0;r<g;r++)((a=Math.ceil((i-1)*g+(r+1)))<=this._totalVirtualViews||_)&&a<=f&&(this._virtualLoadedRecords[a-1]&&this._virtualLoadedRecords[a-1].length!=p?(d=this._virtualLoadedRecords[a-1].length+r*p,o=p-d+r*p,e.merge(this._virtualLoadedRecords[a-1],t.slice(0,o)),s=l=o+p,a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(o,s))):1==a||this._virtualLoadedRecords[a-1]?(o=s||r*p%m,s=l=o+p):(h=l=(a-1)*p%m,0!=h&&(this._virtualLoadedRecords[a-1]=t.slice(0,h)),o=h,l=s=h+p),this._virtualLoadedRecords[a]&&this._virtualLoadedRecords[a].length!=p?(c=t.slice(o,l),c.length+this._virtualLoadedRecords[a].length<=p&&(u=e.merge(c,this._virtualLoadedRecords[a]),this._virtualLoadedRecords[a]=u)):!this._virtualLoadedRecords[a]&&a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(o,l)));e.inArray(i,this._virtualLoadedPages)==-1&&this._virtualLoadedPages.push(i)},_setVirtualLoadedIndexes:function(e){var t,i;for(this._currentLoadedIndexes=[],t=e==this._totalVirtualViews?e:e+1,1!=e&&(e-=1),i=e;i<=t;i++)this._currentLoadedIndexes.push(i)},_getVirtualTotalRecord:function(){return 0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount},_initGridRender:function(){var i,s,n,r,o,l;if(this.addInitTemplate(),this.model.scrollSettings.frozenColumns>0&&this.addFrozenTemplate(),this.model.allowGrouping&&this.addGroupingTemplate(),this.model.showSummary&&this.addSummaryTemplate(),(this.model.allowResizing||this.model.allowResizeToFit)&&(this._resizer=new t.gridFeatures.gridResize(this)),this.model.keySettings&&e.extend(this.model.keyConfigs,this.model.keySettings),this._initHeight=this.model.scrollSettings.height,"100%"==this.model.scrollSettings.height&&(this._isHeightResponsive=!0),this.render(),this._setTextWrap(),"fixed"==this.model.columnLayout){var a=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),d=this.getHeaderContent().width()>a?"addClass":"removeClass",h=this.getHeaderTable(),c=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(h=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),c=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),h[d]("e-tableLastCell"),c[d]("e-tableLastCell")}if(this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&(this._headerCellreorderDragDrop(),this._initIndicators()),this._wireEvents(),this.model.allowGrouping&&!t.isNullOrUndefined(this.model.serverProperties))for(this.model._groupingCollapsed=this.model.serverProperties._groupingCollapsed,i=0;i<this.model._groupingCollapsed.length;i++)s=this.getContent().find(".e-recordplusexpand"),n=s.filter("td[ej-mappingname='"+this.model._groupingCollapsed[i].key+"'    ][ej-mappingvalue='"+this.model._groupingCollapsed[i].value+"']"),n.length>1&&!t.isNullOrUndefined(this.model._groupingCollapsed[i].parent)&&(r=this.model._groupingCollapsed[i].parent,n=n.filter(function(){return e(this).parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand[ej-mappingvalue="+r+"]").length})),this.expandCollapse(n);this.initialRender=!1,this.model.width&&!this.model.allowScrolling&&this.element.width(this.model.width),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this._trigger("dataBound",{}),this._trigger("refresh"),this.model.parentDetails&&(o=this.model.parentDetails.parentID,l=e("#"+o).data("ejGrid"),l.model.allowScrolling&&l._refreshScroller({requestType:"refresh"})),this.element.closest("tr").hasClass("e-detailrow")&&!this.model.parentDetails&&(l=this.element.closest("tr.e-detailrow").closest(".e-grid").data("ejGrid"),l.model.allowScrolling&&l.getScrollObject().refresh()),this.model.allowFiltering&&"menu"==this.model.filterSettings.filterType&&this._renderFilterDialogs(),this.model.enableResponsiveRow&&(this.model.allowSorting||this.model.allowFiltering)&&this._renderResponsiveFilter(),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),this._isMapSelection&&this._mappingSelection(),this.model.showColumnChooser&&this._renderColumnChooser()},_setTextWrap:function(){if(1==this.model.allowTextWrap){switch(this.model.textWrapSettings.wrapMode){case"content":this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap"),this.getContent().addClass("e-wrap");break;case"header":this.element.removeClass("e-wrap"),this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").addClass("e-wrap");break;default:this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.addClass("e-wrap")}if(this.model.scrollSettings.frozenColumns>0&&"content"!=this.model.textWrapSettings.wrapMode){var e=this.getHeaderContent().find(".e-frozenheaderdiv").find(".e-columnheader").last().find("th"),t=this.getHeaderContent().find(".e-movableheader").find(".e-columnheader").last().find("th");e.height()>t.height()?t.height(e.height()):e.height(t.height())}}else this.getContent().removeClass("e-wrap").find(".e-rowcell").removeClass("e-nwrap"),this.element.find(".e-columnheader").removeClass("e-wrap").find(".e-headercelldiv").removeClass("e-nwrap"),this.element.removeClass("e-wrap")},_getMetaColGroup:function(){for(var i,s=t.buildTag("colgroup"),n=0;n<this.model.columns.length;n++)i=e(document.createElement("col")),this.model.columns[n].visible===!1&&i.css("display","none"),null==this.model.rowTemplate||t.isNullOrUndefined(this.model.columns[n].cssClass)||i.addClass(this.model.columns[n].cssClass),this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&e.inArray(this.model.columns[n].field,this.model.groupSettings.groupedColumns)!=-1&&i.css("display","none"),s.append(i);return s},_alternateRow:function(){return this.getIndex()%2==0?"e-row":"e-alt_row"},addInitTemplate:function(){var i,n,r,o,l,a,d,h,c,u=this.element.find(".e-headercelldiv:not(.e-emptyCell)"),p={},m=!0,g=document.createElement("tbody"),f=e(g);if(null==this.model.rowTemplate){var _,v=document.createElement("tr"),b=e(v),y=this.model.columns;for(this._gridRecordsCount&&!this._virtualDataRefresh?(i=this.model.editSettings.showAddNewRow&&!this.initialRender?this.model.currentViewData[1]:this.model.currentViewData[0],t.isNullOrUndefined(i)||this._initColumns(i)):this._isLocalData&&(null!=this._dataSource()&&this._dataSource().length||this._dataManager&&this._dataManager.dataSource.json.length)&&this._initColumns(this._dataSource()[0]!=s?this._dataSource()[0]:this._dataManager.dataSource.json[0]),n={_gridFormatting:this.formatting},e.views.helpers(n),c={},c._foreignKey=this._foreignKeyBinding,e.views.helpers(c),(this.model.childGrid||this.model.detailsTemplate)&&(r=t.buildTag("td.e-detailrowcollapse","<div class='e-icon e-gnextforward'></div>"),b.append(r)),_=0;_<this.model.columns.length;_++){if(o=t.buildTag("td.e-rowcell"),t.isNullOrUndefined(y[_].tooltip)&&y[_].clipMode!=t.Grid.ClipMode.EllipsisWithTooltip||o.addClass("e-gridtooltip"),(y[_].clipMode==t.Grid.ClipMode.Ellipsis||y[_].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&o.addClass("e-gridellipsis"),this.model.isResponsive&&o.attr("data-cell",this._decode(this.model.columns[_].headerText)),0==y[_].visible?o.addClass("e-hide"):(m&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o.addClass("e-detailrowvisible"),m=!1),this.model.groupSettings.showGroupedColumn||o.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[_].field+"'}}e-hide{{/if}}{{/for}}"),t.isNullOrUndefined(y[_].templateID||y[_].template)){for(var w=(y[_].field||"").split("."),C=w.length-1,x="";C;)x+="(",C--;switch(y[_].type||y[_].editType){case"boolean":case"booleanedit":t.isNullOrUndefined(y[_].displayAsCheckbox)&&(y[_].displayAsCheckbox=!0),y[_].displayAsCheckbox?(d="",d="batch"==this.model.editSettings.editMode&&(t.isNullOrUndefined(y[_].allowEditing)||y[_].allowEditing)?d:"disabled='disabled'",h="{{if #data['"+w.join("']['")+"']=='true'||#data['"+w.join("']['")+"']==true}} <input type ='checkbox' "+d+" checked='checked'></input>{{else}} <input type ='checkbox' "+d+"></input> {{/if}}",o.addClass("e-boolrowcell").html(h)):o.html("{{if "+y[_].field+"}}"+this.localizedLabels.True+"{{else}}"+this.localizedLabels.False+"{{/if}}");break;case"checkbox":this._enableCheckSelect=!0,this.model.selectionType="multiple",this.model.editSettings.allowDeleting&&(this.multiDeleteMode=!0),this.model.selectionSettings.enableToggle=!0,this._isMapSelection=""!=y[_].field,this._selectionMapColumn=y[_].field,y[_].textAlign="center",this._isMapSelection||(this.model.columns[_].allowGrouping=this.model.columns[_].allowFiltering=this.model.columns[_].allowSorting=!1),o.addClass("e-checkcell").html("<div class = 'e-checkcelldiv'>{{if #data['"+w.join("']['")+"']}} <input type ='checkbox' checked='checked'></input>{{else}} <input type ='checkbox'></input> {{/if}}</div>"),this.model.columns[_].editType=t.Grid.EditingType.Boolean,this.model.scrollSettings.frozenColumns>0&&o.addClass("e-frozenunbound"),this.model.enableAutoSaveOnSelectionChange=!1;break;default:y[_].disableHtmlEncode?o.html("{{html:"+x+"#data['"+w.join("'] || {})['")+"']}}"):o.html("{{:"+x+"#data['"+w.join("'] || {})['")+"']}}")}y[_].format==s||y[_].foreignKeyValue||o.html("{{:~_gridFormatting('"+y[_].format+"',"+x+"#data['"+w.join("'] || {})['")+"'],'"+this.model.locale+"')}}"),y[_].foreignKeyValue&&y[_].dataSource&&o.html("{{:~_foreignKey("+_+","+x+"#data['"+w.join("'] || {})['")+"'],'"+this._id+"')}}"),y[_].commands&&(c={},c["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(c),(t.isNullOrUndefined(y[_].field)||""==y[_].field)&&(this.model.columns[_].allowGrouping=this.model.columns[_].allowFiltering=this.model.columns[_].allowSorting=!1),t.isNullOrUndefined(y[_].headerText)||e("#"+this._id+y[_].headerText.replace(/[^a-z0-9|s_]/gi,"")+_+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(y[_],_),t.isNullOrUndefined(y[_].headerText)||o.addClass("e-unboundcell").addClass("e-"+y[_].headerText.replace(/[^a-z0-9|s_]/gi,"")+_).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&o.addClass("e-frozenunbound"),this._isUnboundColumn=!0)}else c={},l=y[_].headerText,c["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this,void 0),e.views.helpers(c),t.isNullOrUndefined(l)||t.isNullOrUndefined(l.match(/[^0-9\s\w]/g))||(l=l.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+l+_+"_Template").remove(),a=this._createTemplateElement(y[_]),(""==y[_].field||t.isNullOrUndefined(y[_].field))&&(this.model.columns[_].allowGrouping=this.model.columns[_].allowFiltering=this.model.columns[_].allowSorting=!1),0!=y[_].template&&o.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+a.id+"','"+_+"')}}");y[_].textAlign==s&&(y[_].textAlign="left"),y[_].isPrimaryKey===!0&&(this._primaryKeys.push(e.trim(y[_].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),this.phoneMode&&this.model.enableResponsiveRow||y[_].textAlign==s||(o.css("text-align",y[_].textAlign),e(u[_]).css("text-align",y[_].textAlign)),this.phoneMode||t.isNullOrUndefined(y[_].headerTextAlign)||e(u[_]).css("text-align",y[_].headerTextAlign),t.isNullOrUndefined(y[_].cssClass)||o.addClass(y[_].cssClass),this.model.allowTextWrap&&"header"!=this.model.textWrapSettings.wrapMode&&0==y[_].allowTextWrap&&o.addClass("e-nwrap"),t.isNullOrUndefined(y[_].priority)||o.addClass("e-table-priority-"+y[_].priority),t.isNullOrUndefined(y[_].customAttributes)||o.attr(y[_].customAttributes),o.attr("role","gridcell"),b.append(o),this.model.enableAltRow?(n["_"+this._id+"AlternateRow"]=this._alternateRow,e.views.helpers(n),b.addClass("{{:~_"+this._id+"AlternateRow()}}")):b.addClass("e-row"),b.attr("role","row"),this.model.scrollSettings.frozenColumns>0&&this.model.scrollSettings.frozenColumns==_+1&&(g.appendChild(v),p[this._id+"_JSONFrozenTemplate"]=f.html(),b.empty(),f.empty())}g.appendChild(v)}p[this._id+"_JSONTemplate"]=null!=this.model.rowTemplate?e(this.model.rowTemplate).html():f.html(),e.templates(p)},render:function(){this.model.showSummary=this.model.summaryRows.length>0||this.model.showSummary,this._renderGridContent().insertAfter(this.element.children(".e-gridheader")),this.model.allowResizeToFit&&this.setWidthToColumns(),this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.showSummary&&this._currentJsonData.length&&(this._renderGridFooter().insertAfter(this.getContent()),this._hideCaptionSummaryColumn()),this._initialEndRendering()},_createStackedRow:function(i,n){var r,o,l,a,d,h,c,u,p,m,g,f,_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),v=[],b=[];for(tAl=[],tp=[],g=0;g<this.model.columns.length;g++)if(r=this.model.columns[g],0!=r.visible){if(this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&this.model.groupSettings.groupedColumns.length>0&&e.inArray(r.field,this.model.groupSettings.groupedColumns)!=-1)continue;var y="",w="",C="",x="",S=i.stackedHeaderColumns;for(p=0;p<S.length;p++)o=e.isArray(S[p].column)?S[p].column:e.map(S[p].column.split(","),e.trim),l="e-row"+e.inArray(i,this.model.stackedHeaderRows)+"-column"+p,e.inArray(r.field,o)!=-1&&(y=S[p].headerText,w=S[p].cssClass,C=S[p].textAlign,x=S[p].tooltip?" e-gridtooltip "+l:"");v.push(y),b.push(w),tAl.push(C),tp.push(x)}for(a=[],u=0;u<v.length;u++){for(d=1,h=u+1;h<v.length&&v[u]==v[h];h++)d++;a.push({sapnCount:d,headerText:v[u],cssClass:b[u],txtAlign:tAl[u],tooltip:tp[u]}),u+=d-1}if(_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),c=this.model.scrollSettings.frozenColumns,this.model.allowScrolling&&c>0){var T=[],k=0,D=0,I=0;for(u=0;u<this.model.columns.length;u++)p=this.model.columns[u],u<c&&0==p.visible&&I++;for(k=c-I;k>0;)m=a[D].sapnCount,a[D].sapnCount<k?(T.push(a[D]),n?D++:a.splice(D,1)):a[D].sapnCount>k?(a[D].sapnCount=a[D].sapnCount-k,n&&T.push({sapnCount:k,headerText:a[D].headerText})):(T.push(a[D]),n||a.splice(D,1)),k-=m;n&&(a=T)}for((this.model.detailsTemplate||this.model.childGrid)&&_.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g=0;g<a.length;g++)f=t.buildTag("th.e-headercell e-stackedHeaderCell e-default"+a[g].tooltip,a[g].headerText,{},{colspan:a[g].sapnCount}),f.css("textAlign",a[g].txtAlign),_.append(f),a[g].cssClass!=s&&f.addClass(a[g].cssClass),(this.model.allowResizing||this.model.allowReordering||this.model.allowResizeToFit)&&f.addClass("e-resizer");return _},_renderGridHeaderInternalDesign:function(i,n){var r,o,l,a,d,h,c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px",role:"grid"}),u=t.buildTag("thead"),p=t.buildTag("tbody.e-hide"),m=t.buildTag("tr.e-columnheader"),g=e(document.createElement("colgroup")),f=e(document.createElement("tr"));if((this.model.childGrid||this.model.detailsTemplate)&&(m.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g.append(this._getIndentCol())),this.model.showStackedHeader)for(h=0;h<this.model.stackedHeaderRows.length;h++)r=this._createStackedRow(this.model.stackedHeaderRows[h],n),u.append(r);for(o=0;o<i.length;o++){var _=t.buildTag("th.e-headercell e-default","",{},{role:"columnheader"}),v=document.createElement("td"),b=t.buildTag("div.e-headercelldiv",i[o].headerText===s&&"checkbox"!=i[o].type?i[o].headerText=i[o].field:i[o].headerText,{},{"ej-mappingname":i[o].field});if(i[o].disableHtmlEncode&&b.text(i[o].headerText),t.isNullOrUndefined(i[o].headerTooltip)||b.addClass("e-headertooltip"),
t.isNullOrUndefined(i[o].tooltip)||b.addClass("e-gridtooltip"),(i[o].clipMode==t.Grid.ClipMode.Ellipsis||i[o].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&b.addClass("e-gridellipsis"),(this.model.allowResizing||this.model.allowReordering||this.model.allowResizeToFit)&&_.addClass("e-resizer"),_.append(b),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&(i[o].allowFiltering==s||i[o].allowFiltering===!0)&&(!t.isNullOrUndefined(i[o].field)||""==i[o].field)&&"checkbox"!=i[o].type){if(l="e-filterset",!this.initialRender&&this.model.filterSettings.filteredColumns)for(a=0;a<this.model.filterSettings.filteredColumns.length;a++)this.model.filterSettings.filteredColumns[a].field==i[o].field&&(l="e-filterset e-filteredicon e-filternone");_.append(t.buildTag("div.e-filtericon e-icon "+l)),_.addClass("e-headercellfilter"),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version&&this.model.enableRTL&&e(b).css("padding","0 0 0 2em")}d=document.createElement("col"),i[o].priority&&e(v).addClass("e-table-priority-"+i[o].priority),f.append(v),m.append(_),g.append(d),i[o].visible===!1?(_.addClass("e-hide")&&e(d).css("display","none"),e.inArray(i[o].headerText,this._hiddenColumns)==-1&&e.inArray(i[o].field,this._hiddenColumnsField)==-1&&(this._hiddenColumns.push(i[o].headerText)&&i[o].field!=s?this._hiddenColumnsField.push(i[o].field):this._hiddenColumnsField.push(i[o].headerText)),e.inArray(i[o].field,this._visibleColumnsField)!=-1&&this._visibleColumnsField.splice(e.inArray(i[o].field,this._visibleColumnsField),1)&&this._visibleColumns.splice(e.inArray(i[o].headerText,this._visibleColumns),1)):(this._visibleColumns.push(i[o].headerText)&&i[o].field!=s?this._visibleColumnsField.push(i[o].field):this._visibleColumnsField.push(i[o].headerText),i[o].visible=!0,e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField)!=-1&&this._hiddenColumnsField.splice(e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField),1)&&this._hiddenColumns.splice(e.inArray(i[o].headerText,this._hiddenColumns),1)),this.model.showColumnChooser&&i[o].showInColumnChooser!==!1&&(i[o].showInColumnChooser=!0),this.model.allowResizing&&i[o].allowResizing!==!1&&(i[o].allowResizing=!0),t.isNullOrUndefined(i[o].headerTextAlign)?i[o].textAlign!=s?b.css("text-align",i[o].textAlign):this.model.enableRTL&&b.css("text-align",i[o].textAlign="right"):b.css("text-align",i[o].headerTextAlign),i[o].allowResizing===!1&&this._disabledResizingColumns.push(i[o].field),i[o].allowSorting===!1&&this._disabledSortableColumns.push(i[o].field),i[o].allowGrouping===!1&&this._disabledGroupableColumns.push(i[o].field),i[o].allowEditing===!1&&this._disabledEditableColumns.push(i[o].field),t.isNullOrUndefined(i[o].cssClass)||(_.addClass(i[o].cssClass),e(d).addClass(i[o].cssClass)),this.model.allowTextWrap&&"content"!=this.model.textWrapSettings.wrapMode&&0==i[o].allowTextWrap&&b.addClass("e-nwrap"),t.isNullOrUndefined(i[o].headerTemplateID)||(b.html(e(i[o].headerTemplateID).hide().html()).parent().addClass("e-headertemplate"),(h=e.inArray(i[o].field,this._disabledGroupableColumns))==-1&&t.isNullOrUndefined(i[o].field)&&this._disabledGroupableColumns.push(i[o].field)),"checkbox"==t.getObject("type",i[o])&&t.isNullOrUndefined(i[o].headerText)&&(b.addClass("e-headercheckcelldiv"),b.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"),t.isNullOrUndefined(i[o].field)||b.attr("ej-mappingname",i[o].field)),this.model.allowGrouping&&this.model.groupSettings.showToggleButton&&e.inArray(i[o].field,this._disabledGroupableColumns)==-1&&!t.isNullOrUndefined(i[o].field)&&""!=i[o].field&&(e.inArray(i[o].field,this.model.groupSettings.groupedColumns)!=-1?b.append(this._getToggleButton().addClass("e-toggleungroup")):b.append(this._getToggleButton().addClass("e-togglegroup"))),this.model.isResponsive&&_.attr("title",this._decode(i[o].headerText)),i[o].priority&&(_.attr("data-priority",i[o].priority).addClass("e-table-priority-"+i[o].priority),e(d).addClass("e-table-priority-"+i[o].priority)),this.initialRender&&("string"==typeof i[o].width&&i[o].width.indexOf("%")!=-1?this.columnsWidthCollection.push(parseInt(i[o].width)/100*this.element.width()):this.columnsWidthCollection.push(i[o].width)),i[o].width==s&&this.model.commonWidth!==s&&(this.columnsWidthCollection[o]=this.model.commonWidth),this._fieldColumnNames[i[o].headerText]=i[o].field,this._headerColumnNames[i[o].field]=i[o].headerText}return u.append(m),p.append(f),c.append(g).append(u).append(p),c},_renderGridHeader:function(){var e,i,s=t.buildTag("div.e-gridheader"),n=t.buildTag("div");return this.model.allowScrolling&&n.addClass("e-headercontent"),this.setGridHeaderContent(s),this.initialRender&&(this.columnsWidthCollection=[],this._hiddenColumns=[],this._hiddenColumnsField=[]),this._visibleColumns=[],this._visibleColumnsField=[],this._disabledGroupableColumns=[],this._fieldColumnNames={},this._headerColumnNames={},this.model.scrollSettings.frozenColumns>0?(e=t.buildTag("div.e-frozenheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(0,this.model.scrollSettings.frozenColumns),!0)),i=t.buildTag("div.e-movableheader",t.buildTag("div.e-movableheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(this.model.scrollSettings.frozenColumns),!1))),n.append(e).append(i)):n.append(this._renderGridHeaderInternalDesign(this.model.columns)),s.html(n),this.model.isResponsive&&s.addClass("e-textover"),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),s},_renderGridContent:function(){var i,s,n,r,o,l,a,d=t.buildTag("div.e-gridcontent"),h=t.buildTag("div"),c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),u=e(document.createElement("tbody"));if(c.append(this.getHeaderTable().find("colgroup").clone()).append(u),h.html(c),d.html(h),this.setGridContentTable(c),this.setGridContent(d),c.attr("role","grid"),i={},this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length){if(this.initialRender&&(i.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],!this.model.groupSettings.showGroupedColumn))for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)n=this.model.groupSettings.groupedColumns[s],e.inArray(n,this._hiddenColumnsField)==-1&&(this._hiddenColumnsField.push(n),this.getColumnByField(n).visible=!1);i.requestType=t.Grid.Actions.Grouping}else i.requestType=t.Grid.Actions.Refresh;if(null==this._dataSource()||0==this._dataSource().length||0==this.model.currentViewData.length?(r=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length-this._hiddenColumns.length}),u.append(e(document.createElement("tr")).append(r)),this.setWidthToColumns(),(this.initialRender||this.model.groupSettings.groupedColumns.length)&&this.sendDataRenderingRequest(i)):this.sendDataRenderingRequest(i),this._isCaptionSummary&&"grouping"==i.requestType&&this.model.groupSettings.groupedColumns.length>1)for(o=this.getContentTable().find(".e-table").not(".e-recordtable").children("colgroup"),l=e(this.getContentTable().find(".e-recordtable")[0]).children("colgroup").find("col"),s=0;s<o.length;s++)a=e(o[s]).find("col").length,e(o[s]).find("col:gt("+(a-l.length-1)+")").remove(),e(o[s]).append(l.clone());return d},print:function(){var i={};i.requestType="print",this._printselectrows=this.getContentTable().find('tr[aria-selected="true"]'),this._trigger("actionBegin",i);var s=window.open("","print","height=452,width=1024,tabbar=no"),n=t.buildTag("div#"+this._id+"Print"),r=e.extend({},this.model);r.toolbarSettings.showToolbar=r.allowPaging=r.allowScrolling=!1,r.query.queries=[],this.model.allowPaging&&"currentpage"==this.model.pageSettings.printMode?(r.query.queries=[{fn:"onPage",e:{pageIndex:this._currentPage(),pageSize:this.model.pageSettings.pageSize}}],r.dataBound=function(){this._printProcess(s)}):r.dataBound=function(){this._printProcess(s)},n.ejGrid(r)},_printProcess:function(e){var i=this.element,s={requestType:"print",element:i,selectedRows:this._printselectrows};this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&i.find(".e-filterbar").remove(),i.show(),this._trigger("beforePrint",s),t.print(i,e),this._trigger("actionComplete",s)},export:function(i,s,n,r){var o,l,a,d,h,c,u=e.extend(!0,{},this.model),p=this,m={action:i,method:"post","data-ajax":"false"},g=t.buildTag("form","",null,m),f=[];if(n&&!t.isOnWebForms)o=e("div.e-grid"),r&&r.length>0&&(o=e.map(r,function(e){return document.getElementById(e)})),e.each(o,function(i,s){var n,r,o,l,a=e(s).data("ejGrid");if(f.push({id:a._id,locale:a.model.locale}),!t.isNullOrUndefined(a)&&(n=e.extend(!0,{},a.model),n=p._getModifyExportModel(n),a.ignoreOnExport)){for(r=0;r<a.ignoreOnExport.length;r++)delete n[a.ignoreOnExport[r]];o={name:"GridModel",type:"hidden",value:a.stringify(n)},l=t.buildTag("input","",null,o),g.append(l)}}),e("body").append(g),g.submit();else{if(this._locale=this.model.locale,u=this._getModifyExportModel(u),this,this.ignoreOnExport)for(l=0;l<this.ignoreOnExport.length;l++)delete u[this.ignoreOnExport[l]];t.raiseWebFormsServerEvents?(a={model:u,originalEventType:s},d={model:this.stringify(u)},t.raiseWebFormsServerEvents(s,a,d),setTimeout(function(){t.isOnWebForms=!0},1e3)):(h={name:"GridModel",type:"hidden",value:this.stringify(u)},c=t.buildTag("input","",null,h),g.append(c),g.append(this),e("body").append(g),g.submit())}return setTimeout(function(){var i,s;if(f.length)for(i=0;i<f.length;i++)s=e("#"+f[i].id).data("ejGrid"),s.model.locale=f[i].locale;t.isNullOrUndefined(p._locale)||(p.model.locale=p._locale)},0),!0},_getModifyExportModel:function(i){var n,r,o,l={};e.extend(l,t.Grid.Locale["en-US"],t.Grid.Locale[i.locale]);var a=l.GroupCaptionFormat,d=a.indexOf("{{if"),h=a.indexOf(" {{else}}"),c=a.slice(d,h).replace("{{if count == 1 }}",""),u={EmptyRecord:l.EmptyRecord,GroupCaptionFormat:a.slice(0,d),GroupText:c,True:l.True,False:l.False};for(t.isNullOrUndefined(this.model)||(this.model.locale=i.locale.concat(JSON.stringify(u))),i.locale=i.locale.concat(JSON.stringify(u)),n=0;n<i.columns.length;n++)if(i.columns[n].editType!=s)switch(i.columns[n].editType){case"stringedit":case"edittemplate":i.columns[n].editType="string";break;case"numericedit":i.columns[n].editType="numeric";break;case"dropdownedit":i.columns[n].editType="dropdown";break;case"booleanedit":i.columns[n].editType="boolean"}for(n=0;n<i.filterSettings.filteredColumns.length;n++)"equal"==i.filterSettings.filteredColumns[n].operator?i.filterSettings.filteredColumns[n].operator="equals":"notequal"==i.filterSettings.filteredColumns[n].operator&&(i.filterSettings.filteredColumns[n].operator="notequals");if(i.showStackedHeader)for(i.stackedHeaderRow=i.stackedHeaderRows,n=0;n<i.stackedHeaderRow.length;n++)for(i.stackedHeaderRow[n].stackedHeaderColumn=i.stackedHeaderRow[n].stackedHeaderColumns,r=i.stackedHeaderRow[n].stackedHeaderColumn,o=0;o<r.length;o++)i.stackedHeaderRow[n].stackedHeaderColumn[o].column=e.isArray(r[o].column)?r[o].column:r[o].column.split(",");return i},sendDataRenderingRequest:function(i){var s,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b;if(this._templateRefresh&&(this.refreshTemplate(),this._templateRefresh=!1),this.setFormat(),this.model.scrollSettings.enableVirtualization||(this._previousColumnIndex=null,this._previousRowCellIndex=null,this._previousIndex=null),"add"==i.requestType||"grouping"==i.requestType||null!=this.model.currentViewData&&this.model.currentViewData.length)switch(i.requestType){case t.Grid.Actions.Refresh:case t.Grid.Actions.Paging:case t.Grid.Actions.Sorting:case t.Grid.Actions.Filtering:case t.Grid.Actions.Save:case t.Grid.Actions.Cancel:case t.Grid.Actions.Delete:case t.Grid.Actions.Search:case t.Grid.Actions.Reorder:case t.Grid.Actions.BatchSave:if(s=this.model.groupSettings.groupedColumns,this.model.allowGrouping&&i.requestType==t.Grid.Actions.Refresh&&0==s.length&&this.element.find(".e-grouptopleftcell").length>0&&(n=this.element.children(".e-gridheader"),n.find("div").first().empty().append(this._renderGridHeader().find("table"))),("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this.model.allowGrouping||(s=[]),0==s.length){var y,w=document.createElement("div"),C=-1,x=!1;if(this.phoneMode||this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),(null!=this.model.childGrid||null!=this.model.detailsTemplate)&&this.getContentTable().find("colgroup").first().prepend(this._getIndentCol()),r=this._currentPage(),("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"normal"==this.model.editSettings.editMode)&&("cancel"==i.requestType||"save"==i.requestType)&&(this._editFormHeight=this.element.find(".gridform").closest("tr").height()),this.model.scrollSettings.frozenColumns>0)w.innerHTML=this._renderByFrozenDesign();else{i.data&&(y=document.createElement("div"),y.innerHTML=["<table><tbody>",e.render[this._id+"_JSONTemplate"](i.data),"</tbody></table>"].join(""),this._dataSource()instanceof t.DataManager&&i.requestType==t.Grid.Actions.Save&&(C=this._getDataIndex(this.model.currentViewData,i.data),x=this._dataSource().adaptor instanceof t.remoteSaveAdaptor)),o=null,o=!this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||t.isNullOrUndefined(this._currentVIndex)||"save"!=i.requestType&&"cancel"!=i.requestType&&"delete"!=i.requestType?this.model.currentViewData:t.isNullOrUndefined(this._lastVirtualPage)?this._virtualLoadedRecords[this._currentVIndex]:this._lastVirtualPage,w.innerHTML=["<table><tbody>",e.render[this._id+"_JSONTemplate"](o),"</tbody></table>"].join("");var S=this.getContentTable().get(0),T=S.lastChild,k=this.getContentTable().first().find("tbody").first();if("save"!=i.requestType&&"cancel"!=i.requestType||"batch"==this.model.editSettings.editMode||this.model.scrollSettings.allowVirtualScrolling)"delete"!=i.requestType||this.model.scrollSettings.allowVirtualScrolling?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?w.firstChild.lastChild:w.firstChild.firstChild,this.getContentTable().get(0).lastChild):(this._isUnboundColumn&&($editedrow=this.element.find(".e-editedrow"),$oldChild=this.getContentTable().find(".e-editedrow").get(0),$newChild=$editedrow.length?w.firstChild.firstChild.firstChild:y.firstChild.firstChild.lastChild,0==$editedrow.length||"normal"!=this.model.editSettings.editMode&&"externalform"!=this.model.editSettings.editMode&&"externalformtemplate"!=this.model.editSettings.editMode?"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedrow.prev("tr").get(0),$editedrow.remove()):$oldChild=$editedrow.get(0):e($oldChild).replaceWith(e($newChild))),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&this.getContentTable()[0].rows.length!=this.model.currentViewData.length&&(this.getContentTable().find("tr").length&&this._excludeDetailRows().length?this.multiDeleteMode?(_=w.firstChild.firstChild.rows.length,v=e(w.firstChild.firstChild.rows).slice(_-this.selectedRowsIndexes.length,_),e(T).append(v)):T.appendChild(w.firstChild.firstChild.lastChild):e(T).prepend(w.firstChild.firstChild.rows)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(b=this.getContentTable().find(".e-detailrow:visible"),e.each(b,function(e){0==b.eq(e).closest("tr").prev().children(".e-detailrowexpand").length&&b.eq(e).remove()})),this._gridRows=S.rows,this.model.enableAltRow&&this._refreshAltRow());else{if(rowIndex=this.model.editSettings.editMode.indexOf("inlineform")!=-1?t.isNullOrUndefined(i.selectedRow)?this._selectedRow():i.selectedRow:this.getContentTable().find(".e-"+i.action+"edrow").index(),l=this._currentTrIndex,rowIndex==-1&&(rowIndex=l),null!=this.model.detailsTemplate||null!=this.model.childGrid)for(a=e("inlineform"==this.model.editSettings.editMode?e(T.childNodes).not(".e-detailrow")[rowIndex]:T.childNodes[rowIndex]),d=e(T.childNodes).not(".e-detailrow"),p=0;p<d.length;p++)a.is(d[p])&&(rowIndex=p);if("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){if("add"==i.action&&!this.getContentTable().find(".e-addedrow").length)break;$oldChild=this.getContentTable().find(".e-addedrow").get(0),$editedTr=this.getContentTable().find(".e-editedrow"),$newChild=$editedTr.length||"cancel"==i.requestType?w.firstChild.firstChild.firstChild:y.firstChild.firstChild.lastChild,$editedTr.length?(this.model.editSettings.showAddNewRow&&"top"==this.model.editSettings.rowPosition&&(rowIndex-=1),$newChild=w.firstChild.firstChild.childNodes[rowIndex],"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedTr.prev("tr").get(0),$editedTr.remove()):$oldChild=$editedTr.get(0),h=e($newChild),g=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&g.next("tr.e-detailrow:visible").length&&(m=h.find(".e-detailrowcollapse"),m.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext")),"cancel"==i.requestType?(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").addClass("e-showaddrow"),g.replaceWith(h)):!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(null!=this.model.detailsTemplate&&g.next("tr.e-detailrow").length&&T.removeChild(g.next("tr.e-detailrow").get(0)),g.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&T.appendChild(w.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?w.firstChild.lastChild:w.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this._primaryKeys.length&&t.getObject(this._primaryKeys[0],this.model.currentViewData[rowIndex])!=t.getObject(this._primaryKeys[0],i.data)?e(T).replaceWith(e(w).find("tbody")):T.replaceChild($newChild,$oldChild),this.model.editSettings.showAddNewRow&&("top"==this.model.editSettings.rowPosition?T.firstChild.remove():T.lastChild.remove())):(h=e($newChild),g=e($oldChild),"add"==i.action&&"save"==i.requestType&&this.model.editSettings.showAddNewRow&&this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&("bottom"==this.model.editSettings.rowPosition?T.lastChild.previousSibling.remove():T.lastChild.remove()),"cancel"==i.requestType||this._dataSource()instanceof t.DataManager||1!=this._currentPage()||"save"==i.requestType&&!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount==this._previousFilterCount?(t.isNullOrUndefined($oldChild)||(g.remove(),this._dataSource()instanceof t.DataManager&&C!=-1?0==C?T.insertBefore($newChild,T.children[C]):h.insertAfter(T.children[C-1]):this._dataSource()instanceof t.DataManager&&!x||1==this._currentPage()||"save"!=i.requestType||e(T).prepend(e(w.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&(this._dataSource()instanceof t.DataManager&&C==-1&&!x&&"save"!=i.requestType||"save"!=i.requestType&&!(this._dataSource()instanceof t.DataManager))&&"cancel"==i.requestType&&!this.model.editSettings.showAddNewRow&&S.lastChild.appendChild(w.firstChild.firstChild.lastChild)),"cancel"!=i.requestType||this._selectedRow()==-1||this._enableCheckSelect||this.clearSelection()):1==this.model.currentViewData.length?(e(T).empty(),T.appendChild($newChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?w.firstChild.lastChild:w.firstChild.firstChild,this.getContentTable().get(0).lastChild):"bottom"==this.model.editSettings.rowPosition?(k.prepend($oldChild),T.replaceChild($newChild,$oldChild)):T.replaceChild($newChild,$oldChild))}else if("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)if($editedTr=this.element.find(".e-editedrow"),"cancel"!=i.requestType&&($editedTr.length||t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount!=this._previousFilterCount))if($editedTr.length){if($newChild=w.firstChild.firstChild.childNodes[rowIndex],$oldChild=this._excludeDetailRows(T.childNodes)[rowIndex],null!=this.model.allowCellMerging&&(g=e($oldChild),e($oldChild.childNodes).hasClass("e-merged")))for(c=g.children(".e-merged").index(),u=$oldChild.children[c].colSpan,p=0;p<u;p++)$newChild.childNodes[c+p].className+=" e-merged e-hide",$newChild.childNodes[c].colSpan=p+1;null!=this.model.detailsTemplate&&($oldChild=e(T.childNodes).not(".e-detailrow").eq(rowIndex).get(0)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&g.next("tr.e-detailrow:visible").length&&(m=e($newChild).find(".e-detailrowcollapse"),m.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext")),!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(g=e($oldChild),null!=this.model.detailsTemplate&&g.next("tr.e-detailrow").length&&T.removeChild(g.next("tr.e-detailrow").get(0)),g.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&T.appendChild(w.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?w.firstChild.lastChild:w.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this._primaryKeys.length&&t.getObject(this._primaryKeys[0],this.model.currentViewData[rowIndex])!=t.getObject(this._primaryKeys[0],i.data)?e(T).replaceWith(e(w).find("tbody")):T.replaceChild($newChild,$oldChild)}else 1==this.model.currentViewData.length&&0==this.getContentTable().find("td.e-rowcell").length?($newChild=w.firstChild.firstChild.firstChild,e(T).empty(),T.appendChild($newChild)):(newChild=$editedTr.length||"cancel"==i.requestType?w.firstChild.firstChild.firstChild:y.firstChild.firstChild.lastChild,this._dataSource()instanceof t.DataManager?C!=-1&&(0==C?T.insertBefore(newChild,T.children[C]):e(newChild).insertAfter(T.children[C-1]),f=this._isAddNew&&C?this.model.currentViewData.length-1:this.model.currentViewData.length+1,this.model.allowPaging&&(this.model.pageSettings.pageSize<f||C==this.model.pageSettings.pageSize)&&T.removeChild(T.lastChild)):(this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?w.firstChild.lastChild:w.firstChild.firstChild,this.getContentTable().get(0).lastChild):1==this._currentPage()?this.getContentTable().find("tbody").first().prepend(e(newChild)):this.getContentTable().find("tbody").first().prepend(e(w.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&T.removeChild(T.lastChild)),null!=this.model.detailsTemplate&&e(S.lastChild.lastChild).children(".e-detailrowexpand").length&&T.removeChild(T.lastChild));else $newChild=w.firstChild.firstChild.childNodes[rowIndex],$oldChild=T.childNodes[rowIndex],h=e($newChild),g=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&g.next(".e-detailrow:visible").length&&(m=h.find(".e-detailrowcollapse"),m.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext")),g.replaceWith(h),this._enableCheckSelect||this.clearSelection(),this.model.allowPaging&&this._refreshGridPager();this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():S.rows,this.model.enableAltRow&&this._refreshAltRow()}}this._currentJsonData=this.model.currentViewData,this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():this.getContentTable().get(0).rows,this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),{},("sorting"==i.requestType||"filtering"==i.requestType||"save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&("filtering"==i.requestType&&(this.getContent().first().ejScroller("refresh").ejScroller("isVScroll")?this.element.find(".gridheader").addClass("e-scrollcss"):this.element.find(".gridheader").removeClass("e-scrollcss"),this._refreshVirtualPagerInfo()),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(r),"filtering"==i.requestType&&this.getContent().first().ejScroller("refresh")),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager()),this.model.scrollSettings.enableVirtualization||this._eventBindings();break}case t.Grid.Actions.Grouping:this._group(i),this._refreshStackedHeader();break;case t.Grid.Actions.BeginEdit:this._edit(i);break;case t.Grid.Actions.Add:this._add(i);break;case t.Grid.Actions.Ungrouping:this._ungroup(i);break;case t.Grid.Actions.VirtualScroll:this._isVirtualRecordsLoaded||(this.model.scrollSettings.enableVirtualization?this._replacingVirtualContent():this._replacingContent())}else"reorder"==i.requestType&&this.model.groupSettings.groupedColumns.length>0?this._group(i):((t.isNullOrUndefined(this.model.currentViewData)||0==this.model.currentViewData.length)&&!this.phoneMode&&("refresh"==i.requestType&&0==this.model.scrollSettings.frozenColumns&&this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),("filtering"==i.requestType||"cancel"==i.requestType||"refresh"==i.requestType)&&this.model.scrollSettings.frozenColumns>0&&this._removeFrozenTemplate()),this._newungroup(i));this._showGridLines(),this._completeAction(i)},_removeFrozenTemplate:function(){this.getContent().find(".e-content").empty();var i=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),s=e(document.createElement("tbody"));i.append(this.getHeaderTable().find("colgroup").clone()).append(s),this.getContent().find(".e-content").html(i),this.setGridContentTable(i)},_showGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_showHeaderGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getHeaderContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_newungroup:function(e){"ungrouping"==e.requestType?this._ungroup(e):this.getContentTable().find("tbody").empty().first().append(this._getEmptyTbody())},setFormat:function(){for(var e,i,s,n=[],r=0;r<this.model.columns.length;r++)"date"==this.model.columns[r].type&&n.push(this.model.columns[r]);if(n.length>0&&!t.isNullOrUndefined(this.model.currentViewData))for(r=0,e=this.model.currentViewData.length;r<e;r++)for(i=0;i<n.length;i++)s=t.getObject(n[i].field,this.model.currentViewData[r]),/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(s)&&t.createObject(n[i].field,new Date(s),this.model.currentViewData[r])},_completeAction:function(i){var s,n,r,o,l,a,d,h,c;if(this.model.editSettings.editMode.indexOf("dialog")!=-1&&("save"==i.requestType||"cancel"==i.requestType)&&e("#"+this._id+"_dialogEdit").data("ejDialog")&&e("#"+this._id+"_dialogEdit").ejDialog("close"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1),this._confirmedValue=!1,t.Grid.Actions.Grouping==i.requestType&&t.isNullOrUndefined(i.columnName)||"refresh"==i.requestType&&this._LastColumnUnGroup)return void(this._LastColumnUnGroup=!1);"ascending"!=i.columnSortDirection&&"descending"!=i.columnSortDirection||t.isNullOrUndefined(i.columnName)||(s=this.getColumnByField(i.columnName),this.model.allowSorting&&this.model.allowMultiSorting?this._scolumns.push(s.field):this._gridSort=s.field),"beginedit"!=i.requestType&&"add"!=i.requestType&&(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns(),("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._isAddNew=!1,this.model.isResponsive&&this.model.minWidth&&this.windowonresize()),this.initialRender||!(t.Grid.Actions.UnGrouping==i.requestType||this.model.groupSettings.groupedColumns.length>0)||e("#"+this._id+"EditForm").length||this._recalculateIndentWidth(),t.Grid.Actions.Paging==i.requestType||t.Grid.Actions.BatchSave==i.requestType?this._refreshGridPager():t.Grid.Actions.Sorting==i.requestType&&this.model.allowSorting||t.Grid.Actions.Refresh==i.requestType||t.Grid.Actions.Cancel==i.requestType?(t.gridFeatures.sort&&null!==this.getHeaderTable()&&this._sortCompleteAction(i),this.model.allowPaging&&(n=this.getPager().ejPager("option"),this._currentPage(n.currentPage),delete n.currentPage,e.extend(this.model.pageSettings,n),delete this.model.pageSettings.masterObject,this._refreshGridPager()),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i)):t.Grid.Actions.Delete==i.requestType||t.Grid.Actions.Save==i.requestType||t.Grid.Actions.Search==i.requestType?(this._editEventTrigger(i),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i),this.model.allowPaging&&this._refreshPagerTotalRecordsCount()):t.Grid.Actions.Filtering==i.requestType?this._filterCompleteAction():t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType?this._editCompleteAction(i):(t.Grid.Actions.Grouping==i.requestType||t.Grid.Actions.Ungrouping==i.requestType)&&this["_"+i.requestType+"CompleteAction"](i),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this.refreshToolbar(),!this.initialRender&&this.model.showSummary&&this.model.summaryRows.length>0&&(this.model.currentViewData.length?(this.element.children(".e-gridfooter").length||this._renderGridFooter().insertAfter(this.getContent()),"beginedit"==i.requestType||"add"==i.requestType||(this.getFooterTable().find("colgroup").remove(),this.model.scrollSettings.frozenColumns>0?(this.getFooterTable().eq(0).append(this.getHeaderTable().eq(0).find("colgroup").clone()),this.getFooterTable().eq(1).append(this.getHeaderTable().eq(1).find("colgroup").clone())):this.getFooterTable().append(this.getHeaderTable().find("colgroup").clone()),this._createSummaryRows(this.getFooterTable()))):this.element.children(".e-gridfooter").remove()),
!this.initialRender&&t.gridFeatures.selection&&(this.getContent().find("td.e-selectionbackground").length||this._setCurrentRow(i.requestType),"cancel"==i.requestType&&e(this.getRowByIndex(this.model.selectedRowIndex)).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),"virtualscroll"!=i.requestType&&this.clearColumnSelection()&&e(this.getHeaderTable().find("th.e-headercell")).removeClass("e-columnselection")),"batch"==this.model.editSettings.editMode&&this.refreshBatchEditMode(),(!this.initialRender&&(this.model.allowScrolling||this.model.isResponsive)&&(this._checkScrollActions(i.requestType)||this.model.editSettings.editMode.indexOf("inline")!=-1&&"beginedit"==i.requestType)||"continuous"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType)&&(this.model.isResponsive&&this.model.minWidth?this.windowonresize():this._refreshScroller(i)),"normal"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType&&this.getContent().find("div:first").scrollLeft(this.getScrollObject().scrollLeft()),null!=this._customPop&&"sorting"!=i.requestType&&this._customPop.hide(),!this.model.allowScrolling||this.initialRender||this.model.scrollSettings.enableVirtualization||this.model.isResponsive&&this._isHeightResponsive||this.getContentTable().find("tr:last").find("td").addClass("e-lastrowcell"),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0&&this._groupingCompleteAction(i),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length<1&&this._ungroupingCompleteAction(i),this.model.allowGrouping&&(r=this.element.children(".e-groupdroparea"),r.length>0&&r.removeClass("e-default").removeClass("e-active"),this.model.groupSettings.groupedColumns.length>0?r.addClass("e-active"):r.addClass("e-default")),this.model.textWrapSettings&&this._setTextWrap(),i.requestType==t.Grid.Actions.Reorder&&this.model.showColumnChooser&&(o=e("#"+this._id+"ccDiv").data("ejDialog"),o.isOpened()&&e("#"+this._id+"_ccTail").first().remove(),l=0,t.isNullOrUndefined(this.element.find(".e-ccButton").outerHeight())||(l+=this.element.find(".e-ccButton").outerHeight()),this.element.find(".e-ccButton").first().remove(),e("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-l),this._renderColumnChooser()),this.initialRender&&"grouping"==i.requestType&&(i={requestType:"refresh"}),(this._isUngrouping||this._columnChooser)&&"refresh"==i.requestType||(this._trigger("actionComplete",i),this._isUngrouping=!1,this._columnChooser=!1),(!this._isUngrouping&&!this.initialRender||this._showHideColumns||this._columntemplaterefresh)&&this._trigger("refresh"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&(this.initialRender||0!=this.getContentTable().find("tr.e-addedrow").length||0==this.element.find(".e-gridcontent").find("tr").length||this._startAdd(),"searching"==i.requestType&&this.element.find(".e-gridtoolbar").find("li#"+this._id+"_search input").focus()),(t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType)&&e.isFunction(e.validator)&&this.setValidation(),this.initialRender||(this.model._groupingCollapsed=[]),this._updateDataSource&&this._gridRecordsCount&&(a=this.model.editSettings.showAddNewRow?this.model.currentViewData[1]:this.model.currentViewData[0],t.isNullOrUndefined(a)||(this._initColumns(a),this.model.allowFiltering&&this._renderFilterDialogs(),this._updateDataSource=!1)),"fixed"!=this.model.columnLayout||this.model.isEdit||this.setWidthToColumns(),this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),!this._isLocalData&&this.model.allowScrolling&&0!=this.element.width()&&this.refreshScrollerEvent(),!this.initialRender&&this._enableCheckSelect&&(d=this.checkSelectedRowsIndexes[this._currentPage()-1],h=this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall"),this._selectAllCheck||h.prop("checked",!1),!this._isMapSelection&&d&&d.length>this._gridRows.length&&d.splice(this._gridRows.length,d.length-this._gridRows.length),this._isMapSelection?this._mappingSelection():"paging"!=i.requestType&&"save"!=i.requestType&&"beginedit"!=i.requestType&&"cancel"!=i.requestType?this.checkSelectedRowsIndexes=[]:d&&d.length&&this.selectRows(d),this._selectAllCheck&&(c=h.prop("checked")^this.selectedRowsIndexes.length==this.model.currentViewData.length,this.model.groupSettings.groupedColumns.length&&(c=!c),h[0].checked=c?h[0].checked:!h[0].checked))},_getDataIndex:function(e,t){for(var i,s,n=0,r=0,o=e.length;r<o;r++){for(i=0,s=this._primaryKeys.length;i<s&&!this._checkPrimaryValue(e[r][this._primaryKeys[i]],t[this._primaryKeys[i]],this._primaryKeys[i]);i++)i==s-1&&(n=1);if(n)return r}return-1},_checkPrimaryValue:function(e,t,i){return"string"==this.getColumnByField(i).type&&(e=e.trim()),e!=t},_eventBindings:function(){var i,s,n,r,o,l,a,d,h=this.model.scrollSettings.frozenColumns>0?this._gridRows[0].length:this._gridRows.length,c=0,u=this.model.pageSettings.pageSize;if(t.gridFeatures.common&&this._refreshUnboundTemplate(this.getContentTable()),0!=this._gridRecordsCount&&(null!=this.model.queryCellInfo||null!=this.model.rowDataBound||null!=this.model.mergeCellInfo||null!=this.model.templateRefresh))for(s=0;s<h;s++){if(n=null,c=s,this.model.scrollSettings.allowVirtualScrolling&&s<u)if(this.model.scrollSettings.enableVirtualization){if(n=e(this._gridRows).eq(s),r=parseInt(e(n).attr("name"),32),e.inArray(r,this._queryCellView)!=-1)continue;this._virtualLoadedRecords[r]&&(o=this._virtualLoadedRecords[r][s%this._virtualRowCount]),c=r*this._virtualRowCount+s%this._virtualRowCount}else{for(l=0;l<this._cloneQuery.queries.length;l++)i="onPage"==this._cloneQuery.queries[l].fn&&this._cloneQuery.queries[l].e.pageIndex-1;a=u*i,0!=a&&(n=this.getContentTable().find("tr[name="+a+"]").eq(s),c=n.index())}else this.model.scrollSettings.enableVirtualization&&(n=e(this._gridRows).eq(s));if(n=n||this.getRowByIndex(c),n.hasClass("e-virtualrow")||t.isNullOrUndefined(this._currentJsonData[s]||o))break;d=this.model.scrollSettings.enableVirtualization?o:this._currentJsonData[s],this._rowEventTrigger(n,d)}},_rowEventTrigger:function(i,s){var n,r,o,l={row:i,data:s};for(this._trigger("rowDataBound",l),i.cells,n=e(i).find(".e-rowcell"),r=0;r<n.length;r++)l={cell:n[r],data:s,text:n[r].innerHTML},o=this._getForeignKeyData(l.data),e(n[r]).hasClass("e-rowcell")&&(l.column=this.model.columns[r]),t.isNullOrUndefined(o)||(l.foreignKeyData=o),1==this.model.allowCellMerging&&(this._cellMerging(l),this._trigger("mergeCellInfo",l)),this._trigger("queryCellInfo",l),e(n[r]).hasClass("e-templatecell")&&(l={cell:n[r],column:this.model.columns[r],data:s,rowIndex:e(i).index()},this._trigger("templateRefresh",l))},setWidthToColumns:function(){var i,n,r,o,l,a,d,h,c,u,p,m=this.getContentTable().children("colgroup").find("col"),g=this.getHeaderTable().children("colgroup").find("col"),f=[],_=this.element.width(),v=0,b=0,y=0,w=!t.isIOSWebView()&&this.getBrowserDetails();for(this.model.groupSettings.groupedColumns.length&&!this.model.allowScrolling&&this.model.groupSettings.showGroupedColumn&&w&&"msie"==w.browser&&parseInt(w.version,10)>8&&m.first().css("width",3e3/_+"%"),t.isNullOrUndefined(this.model.detailsTemplate)||(i=this.model.groupSettings.groupedColumns.length,n=0!=this.model.groupSettings.groupedColumns.length?1:0,m.eq(n).css("width",this._detailsOuterWidth),g.eq(i).css("width",this._detailsOuterWidth)),this._detailColsRefresh(),m=this._$headerCols,g=this._$contentCols,u=0;u<g.length;u++){if(this.model.allowResizeToFit&&this.model.columns[u].width===s){hCellIndex=this.model.groupSettings.groupedColumns.length?u+this.model.groupSettings.groupedColumns.length:u;var C=this._resizer._getContentWidth(u),x=this.getHeaderTable().find(".e-headercelldiv").eq(hCellIndex),S=this._resizer._getHeaderContentWidth(x);y="normal"==this.model.editSettings.editMode&&(this.model.isEdit||this._isAddNew)?"firefox"==w.browser?parseInt(m[u].style.width,10):m.eq(u).width():(C>S?C:S)+parseInt(x.css("padding-left"),10),this.columnsWidthCollection[u]=y,b+=this.model.columns[u].visible?y:0}else b+=this.model.columns[u].visible?parseInt(this.model.columns[u].width,10):0;this.model.columns[u].priority&&g.eq(u).addClass("e-table-priority-"+this.model.columns[u].priority),t.isNullOrUndefined(this.columnsWidthCollection[u])?this.model.allowScrolling&&f.push(this.model.columns[u]):(m.eq(u).width(this.columnsWidthCollection[u]),g.eq(u).width(this.columnsWidthCollection[u]))}for(r=f.filter(function(e){return!e.visible}).length,o=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),u=0;u<f.length;u++)if(f[u].visible){var T=t.isNullOrUndefined(f[u].field)?this.getColumnIndexByField(f[u].field):this.getColumnIndexByHeaderText(f[u].headerText),k=o.eq(T)[0],D=k.getBoundingClientRect().width;t.isNullOrUndefined(D)&&(D=k.offsetWidth),parseInt(D)<15&&(D=(_/this.model.columns.length).toFixed(2),bSize=(_/(this.model.scrollSettings.buttonSize||18)/100).toFixed(2),D-=bSize),m.eq(T).css("width",D+"px"),g.eq(T).css("width",D+"px"),this.model.columns[T].width=D,this.columnsWidthCollection[T]=parseFloat(D)}if(r||(this._undefinedColsCollection=null),"fixed"==this.model.columnLayout){this.model.scrollSettings&&0==this.model.scrollSettings.frozenColumns&&(this.getHeaderTable().width(b),this.getContentTable().width(b));var I=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),O=this.getHeaderContent().width()>I?"addClass":"removeClass",R=this.getHeaderTable(),P=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(R=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),P=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),R[O]("e-tableLastCell"),P[O]("e-tableLastCell")}if(!this.model.allowScrolling&&this.model.allowResizeToFit&&!this.model.isResponsive&&b>_&&(this.model.allowScrolling=!0,this.model.scrollSettings.width=_,this.getHeaderTable().parent().addClass("e-headercontent"),this._renderScroller(),!this.model.scrollSettings.frozenColumns>0&&this.getHeaderTable().width(_)),this.model.isEdit&&(d=m.clone(),this.model.editSettings.showAddNewRow&&(l=this.getContentTable().find(".e-editedrow")),$colGroup=this.model.scrollSettings.frozenColumns>0?this.getContent().find(".gridform").find("colgroup"):t.isNullOrUndefined(l)||1!=l.length?e("#"+this._id+"EditForm").find("colgroup"):l.find("colgroup"),this.model.scrollSettings.frozenColumns>0&&$colGroup.first().empty().append(d.splice(0,this.model.scrollSettings.frozenColumns)),$colGroup.last().empty().append(d),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&$colGroup.prepend(this._getIndentCol())),this.model.groupSettings.groupedColumns.length)for(a=this.getContentTable().find(".e-recordtable").children("colgroup"),u=0;u<a.length;u++)d=m.clone(),h=null!=this._detailsOuterWidth?this._detailsOuterWidth:"30px",(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&d.splice(0,0,e(this._getIndentCol()).width(h)[0]),a.eq(u).empty().append(d);if(this.model.scrollSettings.frozenColumns>0){for(c=0,u=0;u<this.model.columns.length;u++)c+=this.model.columns[u].visible?parseInt(this.columnsWidthCollection[u],10):0,this.model.scrollSettings.frozenColumns-1==u&&(v=Math.ceil(c));this.element.width(this.model.scrollSettings.width||this.model.width),p=this.element.find(".e-gridcontent").children().first().width(),p>c?c=p+(this.getContentTable().height()<this.model.scrollSettings.height&&this.getScrollObject()._vScroll?this.model.scrollSettings.buttonSize:0):c+=this.getHeaderContent().height()<this.model.scrollSettings.height?this.model.scrollSettings.buttonSize:0,this.getContent().find(".e-frozencontentdiv").outerWidth(v).end().find(".e-movablecontentdiv").outerWidth(c-v),this.getHeaderContent().find(".e-frozenheaderdiv").outerWidth(v).end().find(".e-movableheaderdiv").outerWidth(c-v)}!this.initialRender&&this.model.allowResizeToFit&&this.model.allowScrolling&&this.model.scrollSettings.enableVirtualization&&(_=this.getHeaderTable().width()>this.getContentTable().width()?this.getHeaderTable().width():this.getContentTable().width(),this.getContentTable().width(_),this.getHeaderTable().width(_))},_initialEndRendering:function(){var i,s,n;if(this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),("batch"==this.model.editSettings.editMode||this.model.editSettings.showDeleteConfirmDialog)&&this._renderConfirmDialog(),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&0==e("#"+this._id+"AlertDialog").length&&this._renderAlertDialog(),(this.model.allowMultiSorting||"multiple"==this.model.selectionType)&&this._renderMultiTouchDialog(),this.model.scrollSettings.frozenColumns>0&&!this.model.allowScrolling)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsScrollAlert),void this._alertDialog.ejDialog("open");if(this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this._createPagerStatusBar(),this._getRowHeights(),0!=this.element.width()&&this.model.allowScrolling)this._renderScroller(),this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0||(this.setWidthToColumns(),i=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),null!=i&&i.refresh(),this.refreshScrollerEvent());else if(this.model.allowScrolling&&this.element.width()<=0)return s=this,void(n=setInterval(function(){if(!t.isNullOrUndefined(s.element)&&s.element.width()>0&&!t.isNullOrUndefined(s.element.width())){if(s._renderScroller(),!(s.model.scrollSettings.frozenRows>0||s.model.scrollSettings.frozenColumns>0)){s.setWidthToColumns();var e=t.isNullOrUndefined(s.getContent().data("ejScroller"))?null:s.getScrollObject();null!=e&&e.refresh(),s.refreshScrollerEvent()}s._endRendering(),clearInterval(n)}},100));this._endRendering()},_endRendering:function(){var e,i,s,n,r;t.isNullOrUndefined(this.model.serverProperties)||(e=this.model.serverProperties._checkSelectedRowsIndexes,this.checkSelectedRowsIndexes=e&&e.length?e:this.checkSelectedRowsIndexes),!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.model.allowScrolling&&(i=this.getScrollObject()),s=this.model.enableRTL?"e-summaryscroll e-rtl":"e-summaryscroll",this.model.allowScrolling&&this.model.showSummary&&(i._vScroll&&this.element.find(".e-summaryrow.e-scroller").addClass(s),this.getFooterTable()&&this.getFooterTable().find("colgroup").first().replaceWith(this.getHeaderTable().find("colgroup").clone())),this._addMedia(),this.model.allowScrolling&&this.model.allowTextWrap&&!this.model.scrollSettings.allowVirtualScrolling&&this.getContent().first().ejScroller("refresh"),this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),1!=this._currentPage()||this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=this._currentJsonData),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView():this._refreshVirtualContent(this._currentPage()),this.getContent().first().ejScroller("refresh"),this.getContent().ejScroller("isVScroll")?(this.element.find(".e-gridheader").addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width())):this.element.find(".e-gridheader").removeClass("e-scrollcss")),1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0&&this._selectingMultipleRows(this._selectedMultipleRows()),(this._selectedRow()!=-1||1==this._selectedMultipleRows().length)&&(n=this._selectedMultipleRows(),this.model.currentIndex=this._selectedRow(),r=n.length?n:this._selectedRow(),this.selectRows(r)),!this.model.allowFiltering||"filterbar"!=this.model.filterSettings.filterType||this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling||this._createPagerStatusBar(),t.gridFeatures.common&&this.rowHeightRefresh(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)!=-1&&this._refreshFilterIcon(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this._recalculateIndentWidth(),this.initialRender&&(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow()},_addLastRow:function(){var i,s=this.getContentTable().find("tr:last").find("td"),n=0;if(this.model.allowScrolling&&!this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(this.model.dataSource)&&!t.isNullOrUndefined(this.getRows())){for(i=0;i<this.getRows().length;i++)n+=e(this.getRows()[i]).height();n<this.getContent().height()-1&&s.addClass("e-lastrowcell")}this.model.scrollSettings.allowVirtualScrolling&&this.getContentTable().height()<this.getContent().height()&&s.addClass("e-lastrowcell")},_addMedia:function(){if(!this.model.enablePersistence&&"string"!=typeof this.model.scrollSettings.width&&this.model.scrollSettings.width>0?this._responsiveScrollWidth=this._originalScrollWidth=this.model.scrollSettings.width:this._originalScrollWidth=this.element.width(),"string"!=typeof this.model.scrollSettings.height&&this.model.scrollSettings.height>0&&(this._responsiveScrollHiehgt=this.model.scrollSettings.height),this.model.minWidth&&this.model.isResponsive){if(this._$onresize=e.proxy(this.windowonresize,this),e(window).on("resize",this._$onresize),e.isFunction(window.matchMedia)){var t=window.matchMedia("(max-width: 768px)");this._mediaStatus=t.matches}this.windowonresize()}},_getNoncontentHeight:function(){var e=0;return t.isNullOrUndefined(this.getHeaderContent().outerHeight())||(e+=this.getHeaderContent().outerHeight()),this.model.toolbarSettings.showToolbar&&!t.isNullOrUndefined(this.element.find(".e-gridtoolbar").outerHeight())&&(e+=this.element.find(".e-gridtoolbar").outerHeight()),this.model.allowPaging&&!t.isNullOrUndefined(this.element.find(".e-pager").outerHeight())&&(e+=this.element.find(".e-pager").outerHeight()),this.model.showColumnChooser&&!t.isNullOrUndefined(this.element.find(".e-ccButton").outerHeight())&&(e+=this.element.find(".e-ccButton").outerHeight()),this.model.allowGrouping&&this.model.groupSettings.showDropArea&&!t.isNullOrUndefined(this.element.find(".e-groupdroparea").outerHeight())&&(e+=this.element.find(".e-groupdroparea").outerHeight()),this.model.showSummary&&!t.isNullOrUndefined(this.element.find(".e-gridsummary").outerHeight())&&(e+=this.element.find(".e-gridsummary").outerHeight()),e},setDimension:function(e,t){var i=e-this._getNoncontentHeight();this.model.scrollSettings.height=i,this.model.scrollSettings.width=t,this._renderScroller()},_getVisibleColumnsWidth:function(){for(var e=0,t=0;t<this.columnsWidthCollection.length;t++)this.model.columns[t].visible&&(e+=this.columnsWidthCollection[t]);return e},setPhoneModeMaxWidth:function(e){this._gridPhoneMode=e},_mediaQueryUpdate:function(i,s,n,r){var o,l,a;if(window.innerWidth<=this._gridPhoneMode&&this.model.enableResponsiveRow)return o=this.getContentTable()[0].style,o.removeAttribute?o.removeAttribute("min-width"):o.removeProperty("min-width"),void(this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy"));i?(this.model.scrollSettings.width=t.isNullOrUndefined(this._responsiveScrollWidth)?n:Math.min(this._responsiveScrollWidth,n),a=Math.min(r,s)-this._getNoncontentHeight(),a=t.isNullOrUndefined(this._responsiveScrollHiehgt)?a:Math.min(this._responsiveScrollHiehgt,a),(this.element.parent().is("body")&&e(document).height()>a||a>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(a-=parseInt(this.element.parent().css("margin-bottom")+1)),a="auto"!=this.model.scrollSettings.height?a:this.model.scrollSettings.height,(this.model.minWidth>n||this.getContentTable().width()>n)&&s>r&&(a="auto"!=a?a+this.model.scrollSettings.buttonSize:a),t.isNullOrUndefined(this.getRows())&&(a="100%"),this.model.scrollSettings.height=this._isHeightResponsive?a:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()):(this.model.scrollSettings.width="100%",t.isNullOrUndefined(this._responsiveScrollWidth)||(this.model.scrollSettings.width=Math.min(this._responsiveScrollWidth,n)),l=Math.min(r,s),a=l-this._getNoncontentHeight(),t.isNullOrUndefined(this._responsiveScrollHiehgt)||(a=Math.min(this._responsiveScrollHiehgt,a)),(this.element.parent().is("body")&&e(document).height()>a||a>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(a-=parseInt(this.element.parent().css("margin-bottom"))),a="auto"!=this.model.scrollSettings.height?a:this.model.scrollSettings.height,(!t.isNullOrUndefined(this._responsiveScrollWidth)&&this.model.scrollSettings.width==this._responsiveScrollWidth&&(this.model.minWidth>this._responsiveScrollWidth||this._getVisibleColumnsWidth()>this._responsiveScrollWidth)||t.isNullOrUndefined(this._responsiveScrollWidth)&&(this.getRowHeight()==a||this._isHeightResponsive)&&this.getContentTable().width()>n)&&(a="auto"!=a?a+this.model.scrollSettings.buttonSize:a),t.isNullOrUndefined(this.getRows())&&(a="100%"),this.getContent().height()>=a&&!this._resize&&!this.initialRender&&"string"==typeof this.model.scrollSettings.width&&(this.model.scrollSettings.width=n),this.model.scrollSettings.height=this._isHeightResponsive?a:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()),this._resize=!1},windowonresize:function(i){var s,n,r,o;if(!this.element.is(":visible"))return s=this,s._isVisible=!0,void(n=setInterval(function(){s.element.is(":visible")&&s._isVisible&&(s.windowonresize(),s._isVisible=!1,clearInterval(n))},100));i&&"resize"==i.type&&(this._resize=!0),this.model.scrollSettings.width=this._responsiveScrollWidth,this.element.css("width","100%"),this.getContentTable().width("100%"),this.getHeaderTable().width("100%"),this.getContentTable().css("minWidth",this.model.minWidth),0==this.getContent().find(".e-vscrollbar").length&&this._isHeightResponsive&&(this.getContent().height("100%"),this.getContent().find(".e-content").height("100%")),"msie"==this.getBrowserDetails().browser&&this.getHeaderTable().css("min-width",this.model.minWidth),r=this.element.width();var l=e(window).height()-this.element.offset().top,a=(t.isNullOrUndefined(this.getRows())||this.getRows().length,this.element.parent().is(e("body"))||this.element.parent().height()==e("body").height()||["","auto"].indexOf(this.element.parent()[0].style.height)!=-1),d=this.getContentTable()[0].scrollHeight+this._getNoncontentHeight(),h=a?l:this.element.parent().height();d+=parseInt(this.element.parent().css("margin-top")),o=this.model.minWidth>r||h<=d,this._mediaQueryUpdate(o,h,r,d)},_removeMedia:function(){e(window).off("resize",this._$onresize),this.getContentTable().css("min-width",""),this.getHeaderTable().css("min-width",""),this.getContentTable().css("width",""),this.model.scrollSettings.width="auto",this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy")},_getRowHeights:function(){var e,t=this.getRows();if(null!==t)if(this._rowHeightCollection=[],t[1]!==s&&t[1].length&&(this.model.scrollSettings.frozenColumns>0&&t[0]!==s||t[0]!==s&&void 0!==t[0].item&&"number"==typeof t[0].length&&void 0!==t[1].item&&"number"==typeof t[1].length))for(frotrs=t[0],movtrs=t[1],e=0;e<frotrs.length;e++)this._rowHeightCollection[e]=frotrs[e].offsetTop>=movtrs[e].offsetTop?frotrs[e].offsetTop:movtrs[e].offsetTop;else for(e=0;e<t.length;e++)this._rowHeightCollection[e]=t[e].offsetTop;return this._rowHeightCollection},_getEmptyTbody:function(){var i=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length-this._hiddenColumns.length});return e(document.createElement("tr")).append(i)},_getIndentCol:function(){return t.buildTag("col","",{width:"30px"})},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_createSortNumber:function(e,i){return"right"==i.css("text-align")?t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"left"}):t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"right"})},_onFocusIn:function(){var e=this;setTimeout(function(){e.element.removeClass("e-activefocusout")},0)},_onFocusOut:function(){var e=this;setTimeout(function(){e.element.addClass("e-activefocusout")},0)},_wireEvents:function(){this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",".e-gridheader",this._mouseClickHandler),this.model.enableFocusout&&(this._on(this.element,"focusout",this._onFocusOut),this._on(this.element,"focusin",this._onFocusIn)),t.gridFeatures.common&&(this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent > div:first",this._recorddblClickHandler),this.model.rightClick&&this._on(this.element,"contextmenu",this._rightClickHandler),this._on(this.element,"click",".e-gridcontent",this._recordClick),this._enableRowHover(),this.model.enableTouch?this._on(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",e.proxy(this._touchGrid,this)):this.element.addClass("e-touch"),this._on(this.element,"mousedown",".e-gridheader",this._headerMouseDown),this.model.allowRowDragAndDrop&&"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this._on(this.element,"mouseover mouseleave",".e-gridheader:first",this._headerHover),this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._headerHover),this.model.allowResizeToFit&&this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing&&(this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._mouseMove),this._on(this.element,"mouseup",this._mouseUp)),this.model.allowKeyboardNavigation&&(this.element[0].tabIndex=this.element[0].tabIndex==-1?0:this.element[0].tabIndex,this.element[0].accessKey=t.isNullOrUndefined(this.element[0].accessKey)||""==this.element[0].accessKey?"e":this.element[0].accessKey,this._on(this.element,"keyup",this._keyDownHandler))),t.gridFeatures.edit&&(this._enableEditingEvents(),this._on(this.element,"click",".e-gridcontent .e-unboundcelldiv",this._unboundClickHandler)),this.model.allowGrouping&&(this._enableGroupingEvents(),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)),this._enableFilterEvents()},_enableFilterEvents:function(){if((this.model.allowMultiSorting||"multiple"==this.model.selectionType||this.model.allowFiltering)&&this._on(e(document),"mousedown",this._docClickHandler),this.model.allowFiltering){this._off(this.element,"keyup",".e-filterbar input")._on(this.element,"keyup",".e-filterbar input",this._filterBarHandler),this._on(this.element,"focus click",".e-filterbar",this._filterBarClose)}},_docClickHandler:function(i){var s=!t.isIOSWebView()&&this.getBrowserDetails(),n=e(i.target);null!=this._customPop&&0==this.element.find(i.target).length&&this._customPop.hide(),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType?this._$colType&&(e(i.target).find(".e-grid.e-dlgcontainer").length>1||e(i.target).find(".e-excelfilter").length>1)&&(s&&"msie"==s.browser?"BODY"!=i.target.tagName&&(this.isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):this._isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):n.hasClass("e-filtertext")||n.hasClass("e-cancel")||this.getFilterBar().find(".e-cancel").addClass("e-hide"))},_mouseClickHandler:function(i){var n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T,k,D=e(i.target),I=this.commonQuery.clone();if((0==D.closest(".e-grid").length||D.closest(".e-grid").attr("id")===this._id)&&"col-resize"!=this.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow").css("cursor"))if(n=e(i.target).is(".e-ascending, .e-descending")?e(i.target.parentNode):D.hasClass("e-groupheadercell")?D.children("div"):e(i.target),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&(e.fx.off=!0,this._closeFDialog(),e.fx.off=!1),this.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),n.hasClass("e-headercelldiv")||n.hasClass("e-headercell")&&e.inArray("column",this.model.selectionSettings.selectionMode)==-1||!n.hasClass("e-togglegroupbutton")&&n.closest(".e-headercelldiv").length&&e.inArray(n[0].tagName,["SELECT","INPUT","TEXTAREA"])==-1||n.closest(".e-groupheadercell").length&&e(i.target).is(".e-ascending, .e-descending")){if(!this.model.allowSorting||t.gridFeatures.sort===s)return;n=n.hasClass("e-headercelldiv")||n.closest(".e-groupheadercell").length?n:n.hasClass("e-headercell")?n.find(".e-headercelldiv"):n.closest(".e-headercelldiv"),a=n.attr("ej-mappingname"),r=t.sortOrder.Ascending,this._$prevSElementTarget=this._$curSElementTarget,this._$curSElementTarget=n,r=n.find("span").hasClass("e-ascending")?t.sortOrder.Descending:t.sortOrder.Ascending,"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-sortdirect").hasClass("e-spanclicked")&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-rowselect").is(":visible")||!this._customPop.find(".e-sortdirect").hasClass("e-spanclicked"))&&this.model.allowMultiSorting&&(o=n.offset(),this._customPop.removeAttr("style"),this._customPop.offset({left:o.left,top:o.top-this.getHeaderTable().find(".e-columnheader").height()-n.height()}).find(".e-sortdirect").show().end().find(".e-rowselect").hide().end().show()),this.model.allowMultiSorting&&(i.ctrlKey||this._enableSortMultiTouch)&&(this.multiSortRequest=!0),i.shiftKey&&e.inArray(a,this.model.groupSettings.groupedColumns)==-1&&(this._removeSortedColumnFromCollection(a),this.multiSortRequest=!0,a=null,this.sortColumn(a,r)),t.isNullOrUndefined(a)||this.sortColumn(a,r)}else if(n.hasClass("e-togglegroupbutton")&&this.model.allowGrouping)l=n.parent().attr("ej-mappingname"),n.hasClass("e-togglegroup")&&this.groupColumn(l),n.hasClass("e-toggleungroup")&&this.ungroupColumn(l);else if((n.hasClass("e-filtericon")||n.hasClass("e-filteredicon")||n.hasClass("e-responsivefilterColDiv")||n.parent().hasClass("e-responsivefilterColDiv"))&&(a=n.parent().find(".e-headercelldiv").attr("ej-mappingname")||n.attr("ej-mappingname")||e(n.parent()).attr("ej-mappingname"),this._$prevFieldName=this._$curFieldName,currentColumn=this.getColumnByField(a),d={True:this.localizedLabels.True,False:this.localizedLabels.False},this.model.allowFiltering)){if(h=this,
"excel"==this.model.filterSettings.filterType&&"menu"==currentColumn.filterType&&e.inArray(currentColumn.type,this._menuColTypes)==-1?(this._renderFilters(currentColumn),this._menuColTypes.push(currentColumn.type)):("menu"==this.model.filterSettings.filterType&&"excel"==currentColumn.filterType||"excel"==this.model.filterSettings.filterType&&"menu"!=currentColumn.filterType)&&e.inArray(currentColumn.type,this._excelColTypes)==-1&&(this._renderFilters(currentColumn),this._excelColTypes.push(currentColumn.type)),e.each(this.model.columns,function(e,t){t.field==a&&(h._$colType=t.type,h._$curFieldName=t.field,h._$colFormat=t.format,h._$filterType=t.filterType,h._$colForeignKeyField=t.foreignKeyField?t.foreignKeyField:t.field,h._$colForeignKeyValue=t.foreignKeyValue,h._$colDropdownData=t.dataSource)}),("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType)&&(c="#"+this._id+"_"+this._$colType+"Dlg",this._$menuDlgIsOpen=!0,"string"==this._$colType?this._$colForeignKeyValue&&this._$colDropdownData?e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$colForeignKeyValue,key:h._$colForeignKeyField},dataSource:h._$colDropdownData}):e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$curFieldName,key:this._getIdField()},dataSource:this._dataSource()}):"date"==this._$colType?this._$colFormat!=s?(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})):e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:t.preferredCulture(this.model.locale).calendars.standard.patterns.d}):"datetime"==this._$colType&&(this._$colFormat!=s&&(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datetimewidget input").ejDateTimePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})),this._setFilterFieldValues(c))),this._mediaStatus=document.documentElement.clientWidth<768,this.model.isResponsive&&this._mediaStatus){var O=this,R=t.buildTag("div.e-resFilterDialogHeaderDiv"),P=t.buildTag("div.labelRes","<span>Filter</span>");e(".e-filterMenuBtn").length>0&&e(".e-filterMenuBtn").remove();var M=t.buildTag("div.e-filterMenuBtn"),j=t.buildTag("input.e-resposnsiveFilterBtnLeft e-flat e-btnsub"),E=t.buildTag("input.e-resposnsiveFilterBtnRight e-flat e-btncan");if(R.append(P),R.css("width","100%"),u=e(c).css("padding-left","0px"),n.parent().hasClass("e-responsivefilterColDiv")&&n.hasClass("e-filternone"))h._fltrClrHandler(),n.remove(),e("#responsiveFilter").css("display","block");else if(this.element.css("display","none"),setTimeout(function(){e("#responsiveFilter").css("display","none")}),this._isExcelFilter||"excel"==this._$filterType){if(this._excelDlg=c="#"+this._id+this._$colType+"_excelDlg",t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])){j.ejButton({text:"OK",type:"button",click:function(){O._responsiveFilterClose(),O._excelFilter._openedFltr=e(O._excelDlg),O._excelFilter._fltrBtnHandler(),O._setResponsiveFilterIcon()}}),E.ejButton({text:"Cancel",type:"button",click:function(){e(c).css("display","none"),h.element.css("display","block")}}),e(c).children().not(".e-searchcontainer").remove();var F=this._excelFilter,g=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),f=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"});g.click(function(t){e.proxy(O._closeDivIcon(t),this)}),R.append(g.append(f)),y=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),w=t.buildTag("span.e-icon e-resIcon e-responisveCustomFilter","",{},{closeDialogue:c.slice(1),gridEle:!0}),y.click(function(t){e.proxy(O._closeDivIcon(t),this)}),"boolean"!=h._$colType&&R.append(y.append(w)),e(c).css("padding","0px"),C=e(c).css("height",e(window).height()-2),C.css("width",e(window).width()-2),T=C.find(".e-searchcontainer .e-searchbox").css("margin-top","10px"),T.children().css("margin-top","10px");var A=C.find(".e-checkboxlist"),L=.97*e(window).width(),N=.65*e(window).height();e(C.find(".e-searchcontainer")).addClass("e-resSearch"),x=C.find(".e-resSearch .e-btncontainer").remove(),x.find("input:first").css("width","45.6%"),x.find("input:first").addClass("e-resposnsiveFilterBtnLeft"),x.find("input:last").addClass("e-resposnsiveFilterBtnRight"),C.find(".e-excelLabel").remove(),S=t.buildTag("div.e-excelLabel","Order Id",{"font-weight":"bold","margin-top":"10px"}),T=C.find(".e-searchcontainer"),S.insertAfter(C.find(".e-searchcontainer .e-searchbox")),C.prepend(R),e(c).append(M.append(j).append(E)),A.ejScroller({height:N,width:L}).ejScroller("refresh")}this._excelFilter.openXFDialog({field:a,enableResponsiveRow:!0,displayName:currentColumn.headerText,dataSource:this._dataSource(),query:I,position:{X:H,Y:B},dimension:{height:e(window).height(),width:e(window).width()},cssClass:"resFilter",type:this._$colType,format:this._$colFormat,localizedStrings:d}),e(c).insertAfter(this.element),t.isNullOrUndefined(e(c).parents(".e-grid")[0])||e(c).remove(),y.click(function(){var i,s,n,r,o,l,a,d,u,p,m,g,f,_,v,b;e(O._excelDlg).css("display","none"),i=e(window).height()-5,s=e(window).width(),F._openCustomFilter("equal"),n=c=e("#"+O._id+O._$colType+"_CustomFDlg").addClass("e-responsviesExcelFilter"),t.isNullOrUndefined(n.find(".e-resFilterDialogHeaderDiv")[0])&&(r=t.buildTag("div.e-resFilterDialogHeaderDiv"),o=t.buildTag("div.labelRes","<span>Custom Filter</span>"),r.append(o),l=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:O._id+O._$colType+"_CustomFDlg",openDialogue:O._excelDlg.slice(1)}),a=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:O._id+O._$colType+"_CustomFDlg",openDialogue:O._excelDlg.slice(1)}),l.click(function(){n.css("display","none"),O.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):O.element.css("display","block")}),r.append(l.append(a)),d=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:O._id+O._$colType+"_CustomFDlg",gridEle:!0}),u=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:O._id+O._$colType+"_CustomFDlg",gridEle:!0}),r.append(d.append(u)),d.click(function(){n.css("display","none"),O.element.css("display","block")}),n.prepend(r),n.insertAfter(O.element),n.find(".e-dlgfields").css("width","100%"),p=n.find(".e-dlgfields:first").css("width","92%").css("margin-left","6%"),p.css("margin-top","4%"),m=n.find(".e-dlgfields").find(".e-fieldset legend").text(),g=t.buildTag("div.e-responsiveLabelDiv",m,{"margin-left":"6%"}),g.insertAfter(p),f=n.find(".e-dlgfields").find(".e-fieldset").find("table").css("width","61%"),n.find(".e-dlgfields").find(".e-fieldset").replaceWith(f),f.parent("div").addClass("e-responsiveExcelFilterFieldDiv"),f.find(".e-dropdownlist"),f.find(".e-dropdownlist").each(function(t,i){var s=e(i).ejDropDownList("model.dataSource"),n=.4*e(window).width();e(i).ejDropDownList("destroy").ejDropDownList({width:n,popupWidth:n+"px",dataSource:s})}),f.find(".e-autocomplete").each(function(t,i){var s=e(i).ejAutocomplete("model.dataSource"),n=.4*e(window).width();e(i).ejAutocomplete("destroy").ejAutocomplete({width:n,dataSource:s.dataSource,fields:s.fields})}),f.find(".e-datepicker").each(function(t,i){var s=(e(i).ejDatePicker("model.dataSource"),.4*e(window).width());e(i).ejDatePicker("destroy").ejDatePicker({width:s})}),_=j.clone(),v=E.clone(),_.ejButton({text:"OK",type:"button",click:function(){O._excelFilter._openedFltr=n,O._excelFilter._fltrBtnHandler(),n.hasClass("e-dlgcustom")&&n.ejDialog("close"),O._setResponsiveFilterIcon(),O.element.css("display","block")}}),v.ejButton({text:"Cancel",type:"button",click:function(){n.ejDialog("close"),h.element.css("display","block")}}),n.append(M.clone().append(_).append(v)),b=n.find(".e-dlgfields .e-btncontainer").remove(),b.find("input:first").addClass("e-resposnsiveFilterBtnLeft"),b.find("input:first").css("width","45.6%"),b.find("input:last").addClass("e-resposnsiveFilterBtnRight")),O.element.css("display","none"),n.ejDialog({enableModal:!1,height:i,width:s,position:{X:0,Y:0},enableResize:!1,showHeader:!1}).ejDialog("open")}),t.buildTag("div")}else p=this.model.enableResponsiveRow?"OK":"Filter",m=this.model.enableResponsiveRow?"Cancel":"Clear",j.ejButton({text:p,type:"button",click:e.proxy(this._fltrBtnHandler,this)}),E.ejButton({text:m,type:"button",click:function(){"Clear"==m&&(h.element.css("display","block"),h._fltrClrHandler()),e(c).css("display","none"),E.hasClass("e-resposnsiveFilterBtnRight")&&h.element.css("display","block")}}),n.parent().hasClass("e-responsivefilterColDiv")&&n.hasClass("e-filternone")?(h._fltrClrHandler(),n.remove()):(u.addClass("e-resMenuFltr"),u.css("height",e(window).height()-1).css("width",e(window).width()-2),u.find(".e-operator").addClass("e-resFilterOperator"),u.find(".e-value").addClass("e-resFilterOperator"),u.find(".e-dlgBtns").remove().addClass("e-filterMenuBtn"),u.append(M.append(j).append(E)),t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])&&(u.insertAfter(this.element),g=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),f=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),g.click(function(){u.css("display","none"),O.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):O.element.css("display","block")}),R.append(g.append(f)),y=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),w=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:c.slice(1),gridEle:!0}),y.click(function(){u.css("display","none"),O.element.css("display","block")}),_=e(u.find(".e-value").find("input:last")),"string"==h._$colType&&(v=e(u.find(".e-value").find("input:last")).ejAutocomplete("model"),_.ejAutocomplete("destroy").ejAutocomplete({enableDistinct:!0,dataSource:v.dataSource,fields:v.fields,width:v.width,focusIn:function(){var e=this.element.closest(".e-filterDialoge").find(".e-dropdownlist");this.model.filterType=e.val()}})),R.append(y.append(w)),u.prepend(R)),u.find(".e-responsiveLabelDiv").remove(),b=t.buildTag("div.e-responsiveLabelDiv","",{"margin-left":"5%","font-size":"17px","margin-top":"5%"}).append(t.buildTag("span",this.getHeaderTextByFieldName(a),{"font-weight":"bold"})),b.insertAfter(u.find(".e-resFilterDialogHeaderDiv")),u.fadeIn(100,function(){}))}else{e(c).hasClass("e-resMenuFltr")&&(e(c).remove(),this._renderFilterDialogs(),c="#"+this._id+"_"+this._$colType+"Dlg"),e(c).ejDialog({position:{X:"",Y:""}});var V=e(document).width(),z=document.documentElement.clientWidth<800?200:250,H=n.position().left+18,B=n.position().top+2;"relative"==n.closest(".e-headercell").css("position")&&(H=n.offset().left+15,B=n.offset().top+20),k="e-filterdialoglarge",z=this._isExcelFilter&&"menu"!=currentColumn.filterType?this._excelFilter._dialogContainer.width():z,n.offset().left+18+z>V&&(H-=z),200==z&&(k=""),t.isNullOrUndefined(this._$colType)||("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType?e(c).ejDialog({position:{X:H,Y:B},width:z,cssClass:k}).ejDialog("open"):this._excelFilter.openXFDialog({field:a,displayName:currentColumn.headerText,dataSource:this._dataSource(),query:I,position:{X:H,Y:B},type:this._$colType,format:currentColumn.format,foreignKey:currentColumn.foreignKeyField,foreignKeyType:currentColumn.originalType,foreignKeyValue:currentColumn.foreignKeyValue,foreignDataSource:currentColumn.dataSource,localizedStrings:d}))}this._setFilterFieldValues(c),"number"==this._$colType&&currentColumn.serverType!=s?e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:0}):"number"==this._$colType&&e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:2}),this._$prevColType=this._$colType,this._$fDlgIsOpen=!0}},_responsiveFilterClose:function(){this.element.css("display","block")},_clickHandler:function(i){var s,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v=e(i.target),b=e("[id$='ccDiv'].e-grid.e-columnChooser"),y=e("#"+this._id+"EditForm");if(b.length)for(l=!0,a=0;a<b.length;a++)(v.parents(".e-ccButton").length||v.hasClass("e-ccButton"))&&(l=e(i.target).closest(".e-grid").attr("id")+"ccDiv"!=b[a].id),d=e("#"+b[a].id).ejDialog("instance"),d.isOpened()&&l&&(d.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove());if(!(v.hasClass("e-button")&&(v.hasClass("e-disable")||v.prop("disabled"))||v.closest(".e-grid").attr("id")!==this._id||v.closest("#"+this._id+"EditForm").length)){if(v.hasClass("e-rowcell")||v.closest("td").is(".e-rowcell")||v.hasClass("e-headercell")&&i.clientY-v.offset().top<v.height()/4||v.parents(".e-headercheckcelldiv").length){if(this._bulkEditCellDetails.cancelSave)return void(this._bulkEditCellDetails.cancelSave=!1);if("batch"==this.model.editSettings.editMode&&e.isFunction(e.validator)&&y.length&&y.validate().errorList.length>0)return;"batch"==this.model.editSettings.editMode&&this.element.focus(),n=v.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,h=v.closest(".e-rowcell").index()!=-1?v.closest(".e-rowcell").index():v.closest(".e-headercell").index()-this.model.groupSettings.groupedColumns.length,r=v.hasClass("e-rowcell")?v.index()-n:h-n,r=null!=this.model.detailsTemplate||null!=this.model.childGrid?r-1:r,this.model.scrollSettings.frozenColumns&&(v.closest(".e-movableheaderdiv").length||v.closest(".e-movablecontentdiv").length)&&(r+=this.model.scrollSettings.frozenColumns),o=this.getIndexByRow(v.closest("tr")),this._bulkEditCellDetails.columnIndex=r,this._bulkEditCellDetails.rowIndex=o,this.model.allowSelection&&t.gridFeatures.selection&&(c=!(!this._enableCheckSelect||!v.parent(".e-checkcelldiv").length),v.hasClass("e-checkselectall")&&(this._selectAllCheck=!0,u=this.model.allowPaging?this.model.currentViewData.length:this._gridRows.length,this.selectRows(0,u-1,v)),"multiple"==this.model.selectionType&&((i.ctrlKey||this._enableSelectMultiTouch)&&(this.multiSelectCtrlRequest=!0),i.shiftKey&&(this.multiSelectShiftRequest=!0,this._allowcellSelection&&o>-1&&this.selectCells([[o,[r]]]),this._allowrowSelection&&o>-1&&(!this._enableCheckSelect||c)&&this.selectRows(this._previousIndex,this.getIndexByRow(v.closest("tr")),v),this._selectedRow(this.getIndexByRow(v.closest("tr"))),this._allowcolumnSelection&&v.hasClass("e-headercell")&&!v.hasClass("e-stackedHeaderCell")&&i.clientY-v.offset().top<v.height()/4&&this.selectColumns(this._previousColumnIndex,r)),"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-rowselect").hasClass("e-spanclicked")&&"row"==this.model.selectionSettings.selectionMode&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-sortdirect").is(":visible")||!this._customPop.find(".e-rowselect").hasClass("e-spanclicked"))&&"multiple"==this.model.selectionType&&(this._customPop.removeAttr("style"),p=v.offset(),this._customPop.offset({top:0,left:0}).offset({left:p.left,top:p.top-this.getRowHeight()-v.height()}).find(".e-sortdirect").hide().end().find(".e-rowselect").show().end().show())),this.multiSelectShiftRequest||(this._allowcellSelection&&o>-1&&(m=this._checkCellSelectionByRow(o,r),(this.model.selectionSettings.enableToggle&&1==this.selectedRowCellIndexes.length&&1==this.selectedRowCellIndexes[0].cellIndex.length||i.ctrlKey&&"multiple"==this.model.selectionType)&&m!=-1&&this.selectedRowCellIndexes.length>0&&this.selectedRowCellIndexes[0].cellIndex.length>0?this.clearCellSelection(m.rowIndex,r):this.selectCells([[o,[r]]])),this._allowrowSelection&&o>-1&&(g=this.getIndexByRow(v.closest("tr")),this._enableCheckSelect&&(this.multiSelectCtrlRequest=!0),this.model.scrollSettings.enableVirtualization&&(f=o%this._virtualRowCount,_=parseInt(e(v).closest("tr").attr("name"),32),g=_*this._virtualRowCount-(this._virtualRowCount-f)),(!this._enableCheckSelect||c)&&(this.model.selectionSettings.enableToggle&&!this._enableCheckSelect&&1==this.getSelectedRecords().length&&e.inArray(this.getIndexByRow(v.closest("tr")),this.selectedRowsIndexes)!=-1?this.clearSelection(g):this.selectRows(this.getIndexByRow(v.closest("tr")),null,v)),!this._enableCheckSelect||i.ctrlKey||this._enableSelectMultiTouch||(this.multiSelectCtrlRequest=!1)),this._allowcolumnSelection&&v.hasClass("e-headercell")&&!v.hasClass("e-stackedHeaderCell")&&i.clientY-v.offset().top<v.height()/4&&(this.model.selectionSettings.enableToggle&&1==this.selectedColumnIndexes.length&&e.inArray(r,this.selectedColumnIndexes)!=-1?this.clearColumnSelection(r):this.selectColumns(r)),this.multiSelectCtrlRequest=!1),this.multiSelectShiftRequest=!1),s=this._bulkEditCellDetails.columnIndex>=0?this.model.columns[this._bulkEditCellDetails.columnIndex].field:null,v.closest(".e-rowcell").length&&!t.isNullOrUndefined(s)&&(this._tabKey=!1,this.model.editSettings.allowEditing&&this.model.editSettings.editMode==t.Grid.EditMode.Batch&&this.editCell(e.inArray(v.closest("tr").get(0),this._excludeDetailRows()),s))}(v.hasClass("e-rowselect")||v.hasClass("e-sortdirect"))&&(v.hasClass("e-spanclicked")?(v.removeClass("e-spanclicked"),v.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!1),v.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!1),this._customPop.hide()):(v.addClass("e-spanclicked"),v.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!0),v.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!0))),this._selectAllCheck=!1,t.gridFeatures.common&&this.expandCollapse(v),v.is(".e-filtericon")&&0!=v.closest(".e-detailrow").length&&i.preventDefault(),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&!v.is(".e-filtericon")&&1!=v.closest(".e-dlgcontainer").length&&this._closeFDialog(),this.model.allowSearching&&null!=this._searchBar&&(v.is(this._searchBar.find(".e-cancel"))?this._searchBar.find("input").val(""):i.target.id==this._id+"_searchbar"?this._searchBar.find(".e-cancel").removeClass("e-hide"):this._searchBar.find(".e-cancel").hasClass("e-hide")||this._searchBar.find(".e-cancel").addClass("e-hide"))}},_checkCellSelectionByRow:function(t,i){for(var s=0;s<this.selectedRowCellIndexes.length&&this.selectedRowCellIndexes[s].rowIndex!=t;s++);return s!=this.selectedRowCellIndexes.length&&e.inArray(i,this.selectedRowCellIndexes[s].cellIndex)!=-1?this.selectedRowCellIndexes[s]:-1},_persistState:function(e){this.model.enablePersistence&&this._isHeightResponsive&&(e._isHeightResponsive=this._isHeightResponsive)},_restoreState:function(e){this.model.enablePersistence&&e._isHeightResponsive&&(this._isHeightResponsive=e._isHeightResponsive)},_destroy:function(){var t,i,s,n,r,o;if(this.element.off(),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").add(this.element.find(".e-gridcontent").find(".e-content,.e-movablecontent")).off("scroll"),t=e("#"+this._id+"EditForm"),t.length){for(i=t.find(".e-field"),n=0;n<i.length;n++)s=e(i[n]),s.hasClass("e-datetimepicker")?s.ejDateTimePicker("destroy"):s.hasClass("e-datepicker")?s.ejDatePicker("destroy"):s.hasClass("e-dropdownlist")&&s.ejDropDownList("destroy");t.remove()}this._confirmDialog&&this._confirmDialog.ejDialog("destroy"),this.element.find(".e-dropdownlist").ejDropDownList("model.dataSource",[]),this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove(),e("#"+this._id+"_ccTail").remove(),e("#"+this._id+"_ccTailAlt").remove()),this.model.allowFiltering&&"excel"==this.model.filterSettings.filterType&&this._excelFilter.resetExcelFilter(),this.model.allowReordering&&e(".e-columndropindicator").remove(),this.model.allowFiltering&&"menu"==this.model.filterSettings.filterType&&(r=this,e.each(this.model.columns,function(t,i){o=i.type,e("#"+r._id+o+"_ddinput_popup_wrapper").remove(),"string"==o?e("#"+r._id+"_stringDlg").find(".e-autocomplete").ejAutocomplete("destroy"):"date"==o?e("#"+r._id+"_dateDlg").find(".e-datepicker").ejDatePicker("destroy"):"datetime"==o?e("#"+r._id+"_datetimeDlg").find(".e-datetimepicker").ejDateTimePicker("destroy"):"number"==o&&e("#"+r._id+"_numberDlg").find(".e-numerictextbox").ejNumericTextbox("destroy")})),this._$onresize&&e(window).off("resize",this._$onresize),this.element.empty().removeClass("e-grid "+this.model.cssClass),this.element.ejWaitingPopup("destroy"),this.model.contextMenuSettings.enableContextMenu&&(e("#"+this._id+"_Context").ejMenu("destroy"),e("#"+this._id+"_Context").remove())},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.gridFeatures.common&&e.extend(t.Grid.prototype,t.gridFeatures.common),t.gridFeatures.edit&&e.extend(t.Grid.prototype,t.gridFeatures.edit),t.gridFeatures.filter&&e.extend(t.Grid.prototype,t.gridFeatures.filter),t.gridFeatures.group&&e.extend(t.Grid.prototype,t.gridFeatures.group),t.gridFeatures.selection&&e.extend(t.Grid.prototype,t.gridFeatures.selection),t.gridFeatures.sort&&e.extend(t.Grid.prototype,t.gridFeatures.sort),t.gridFeatures.dragAndDrop&&e.extend(t.Grid.prototype,t.gridFeatures.dragAndDrop),t.Grid.Locale=t.Grid.Locale||{},t.Grid.Locale.default=t.Grid.Locale["en-US"]={EmptyRecord:"No records to display",GroupDropArea:"Drag a column header here to group its column",DeleteOperationAlert:"No records selected for delete operation",EditOperationAlert:"No records selected for edit operation",SaveButton:"Save",OkButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",Notactionkeyalert:"This Key-Combination is not available",Keyconfigalerttext:"This Key-Combination has already been assigned to ",GroupCaptionFormat:"{{:headerText}}: {{:key}} - {{:count}} {{if count == 1 }} item {{else}} items {{/if}} ",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",PagerInfo:"{0} of {1} pages ({2} items)",FrozenColumnsViewAlert:"Frozen columns should be in grid view area",FrozenColumnsScrollAlert:"Enable allowScrolling while using frozen Columns",FrozenNotSupportedException:"Frozen Columns and Rows are not supported for Grouping, Row Template, Detail Template, Hierarchy Grid and Batch Editing",Add:"Add",Edit:"Edit",Delete:"Delete",Update:"Update",Cancel:"Cancel",Done:"Done",Columns:"Columns",SelectAll:"(Select All)",PrintGrid:"Print",ExcelExport:"Excel Export",WordExport:"Word Export",PdfExport:"PDF Export",StringMenuOptions:[{text:"StartsWith",value:"StartsWith"},{text:"EndsWith",value:"EndsWith"},{text:"Contains",value:"Contains"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],NumberMenuOptions:[{text:"LessThan",value:"LessThan"},{text:"GreaterThan",value:"GreaterThan"},{text:"LessThanOrEqual",value:"LessThanOrEqual"},{text:"GreaterThanOrEqual",value:"GreaterThanOrEqual"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],PredicateAnd:"AND",PredicateOr:"OR",Filter:"Filter",FilterMenuCaption:"Filter Value",FilterbarTitle:"'s filter bar cell",MatchCase:"Match Case",Clear:"Clear",ResponsiveFilter:"Filter",ResponsiveSorting:"Sort",Search:"Search",DatePickerWaterMark:"Select date",NumericTextBoxWaterMark:"Enter value",EmptyDataSource:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",ForeignKeyAlert:"The updated value should be a valid foreign key value",True:"true",False:"false",UnGroup:"Click here to ungroup",AddRecord:"Add Record",EditRecord:"Edit Record",DeleteRecord:"Delete Record",Save:"Save",Grouping:"Group",Ungrouping:"Ungroup",SortInAscendingOrder:"Sort In Ascending Order",SortInDescendingOrder:"Sort In Descending Order",NextPage:"Next Page",PreviousPage:"Previous Page",FirstPage:"First Page",LastPage:"Last Page",EmptyRowValidationMessage:"Atleast one field must be updated",NoResult:"No Matches Found"},t.Grid.Actions={Paging:"paging",Sorting:"sorting",Filtering:"filtering",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Grouping:"grouping",Ungrouping:"ungrouping",Refresh:"refresh",Reorder:"reorder",Search:"searching",BatchSave:"batchsave",VirtualScroll:"virtualscroll"},t.Grid.SummaryType={Average:"average",Minimum:"minimum",Maximum:"maximum",Count:"count",Sum:"sum",TrueCount:"truecount",FalseCount:"falsecount",Custom:"custom"},t.Grid.EditMode={Normal:"normal",Dialog:"dialog",DialogTemplate:"dialogtemplate",Batch:"batch",ExternalForm:"externalform",ExternalFormTemplate:"externalformtemplate",InlineForm:"inlineform",InlineTemplateForm:"inlineformtemplate"},t.Grid.PrintMode={AllPages:"allpages",CurrentPage:"currentpage"},t.Grid.ResizeMode={NextColumn:"nextcolumn",Control:"control",Normal:"normal"},t.Grid.Rowposition={Top:"top",Bottom:"bottom"},t.Grid.FormPosition={BottomLeft:"bottomleft",TopRight:"topright"},t.Grid.ClipMode={Ellipsis:"ellipsis",Clip:"clip",EllipsisWithTooltip:"ellipsiswithtooltip"},t.Grid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker",DateTimePicker:"datetimepicker"},t.Grid.UnboundType={Edit:"edit",Save:"save",Delete:"delete",Cancel:"cancel"},t.Grid.ToolBarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",Search:"search",PrintGrid:"printGrid",ExcelExport:"excelExport",WordExport:"wordExport",PdfExport:"pdfExport"},t.Grid.FilterType={Menu:"menu",FilterBar:"filterbar",Excel:"excel"},t.Grid.FilterBarMode={Immediate:"immediate",OnEnter:"onenter"},t.Grid.SelectionType={Single:"single",Multiple:"multiple"},t.Grid.ColumnLayout={Auto:"auto",Fixed:"fixed"},t.Grid.GridLines={Both:"both",None:"none",Horizontal:"horizontal",Vertical:"vertical"},t.Grid.VirtualScrollMode={Normal:"normal",Continuous:"continuous"},t.Grid.SelectionMode={Row:"row",Cell:"cell",Column:"column"},t.Grid.WrapMode={Both:"both",Content:"content",Header:"header"},t.Grid.exportAll=function(e,i){t.Grid.prototype.export(e,null,!0,i)},t.SqlDataSourceAdaptor=(new t.UrlAdaptor).extend({init:function(){this.initialRender=!0},processQuery:function(e,i,s){var n,r,o,l,a=t.UrlAdaptor.prototype.processQuery(e,i,s),d=t.parseJSON(a.data),h={};if(d.param)for(n=0;n<d.param.length;n++)r=d.param[n],o=Object.keys(r)[0],h[o]=r[o];return h.value=d,l=JSON.stringify({type:"SqlData",args:d}),0==this.initialRender&&__doPostBack("",l),this.initialRender=!1,{data:JSON.stringify(h),result:e.dataSource.json,ejPvtData:a.ejPvtData,count:e.dataSource.json.length}},processResponse:function(e,i,n,r,o){var l,a,d,h,c,u=e.ejPvtData||{},p=e.groupDs;if(r&&r.getResponseHeader("Content-Type")&&r.getResponseHeader("Content-Type").indexOf("xml")!=-1&&9==e.nodeType)return n._requiresCount?{result:[],count:0}:[];if((l=JSON.parse(e.data))&&"batch"===l.action&&e.added)return o.added=e.added,o;if(u&&u.aggregates&&u.aggregates.length){var m,g=u.aggregates,d={},f={};for(("count"in e&&(d.count=e.count),e.result&&(d.result=e.result),e.aggregate&&(e=e.aggregate),h=0);h<g.length;h++)(m=t.aggregates[g[h].type])&&(f[g[h].field+" - "+g[h].type]=m(e,g[h].field));d.aggregates=f,e=d}if(u&&u.groups&&u.groups.length){for((a=u.groups,d={},"count"in e&&(d.count=e.count),e.aggregates&&(d.aggregates=e.aggregates),e.result&&(e=e.result),h=0);h<a.length;h++)c=null,t.isNullOrUndefined(p)||(p=t.group(p,a[h])),e=t.group(e,a[h],u.aggregates,c,p);return d.count!=s?d.result=e:d=e,d}return e}})}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.gridResize=function(t){this.$headerTable=t.getHeaderTable(),this.gridInstance=t,this._colMinWidth=15,this._$visualElement=e(),this._currentCell=-1,this._allowStart=!1,this._oldWidth=null,this._orgX=null,this._orgY=null,this._extra=null,this._expand=!1,this._target=null,this._cellIndex=-1},t.gridFeatures.gridResize.prototype={_mouseHover:function(t){var i,s,n,r,o;if(!this._$visualElement.is(":visible")&&(this._allowStart=!1,e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),i=e(t.target),e(t.target).hasClass("e-filtericon")&&("col-resize"==e(t.target).css("cursor")||"col-resize"==e(t.target).closest("tr").css("cursor"))&&(e(t.target).css("cursor","pointer"),e(t.target).closest("tr").css("cursor","pointer")),i.hasClass("e-headercell"))){var l=t.target,a=l.getBoundingClientRect(),d=0,h=0;(t.type="mousemove")?(d=t.clientX,h=t.clientY):(t.type="touchmove")?(d=evt.originalEvent.changedTouches[0].clientX,h=evt.originalEvent.changedTouches[0].clientY):(t.type="MSPointerMove")&&(d=t.originalEvent.clientX,h=t.originalEvent.clientY),s=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderContent().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left:this.gridInstance.getHeaderTable().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left,(d>=a.left+document.documentElement.scrollLeft+l.offsetWidth-5||d<=a.left+3)&&d<s&&d>=a.left&&h<=a.top+document.documentElement.scrollTop+t.target.offsetHeight?(n=d>a.left+3?e(t.target).find(".e-headercelldiv"):e(t.target).prevAll("th:visible:first").find(".e-headercelldiv"),r=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,o=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-r,(this.gridInstance.model.enableRTL&&d<=o||!this.gridInstance.model.enableRTL&&d>=o)&&((this.gridInstance.model.showStackedHeader||n.length)&&e.inArray(e(n).attr("ej-mappingname"),this.gridInstance._disabledResizingColumns)==-1?(this.gridInstance.model.showStackedHeader&&e(i.parents("thead")).find("tr").css("cursor","col-resize"),this.gridInstance.model.showStackedHeader||i.parent().css("cursor","col-resize"),this._currentCell=e(t.target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(l):this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell").index(l),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):(i.parent().css("cursor","pointer"),this._currentCell=-1))):(this.gridInstance.element.find(".e-columnheader").css("cursor","pointer"),this._currentCell=-1)}},_start:function(t,i){var s,n,r,o,l,a,d=this.gridInstance.getHeaderTable().find(".e-columnheader");if(n=e(this._target).hasClass("e-stackedHeaderCell")?d.find(".e-headercell").not(".e-hide"):d.find(".e-headercell").not(".e-stackedHeaderCell,.e-hide"),this._currentCell!=-1&&this._currentCell<n.length&&(r=n[this._currentCell]),void 0!==r)if(o=r.getBoundingClientRect(),s=this._tableY=o.top+parseInt(navigator.userAgent.indexOf("WebKit")!=-1?document.body.scrollTop:document.documentElement.scrollTop),this._allowStart){if(l=this._$visualElement=e(document.createElement("div")),_height=this.gridInstance.element.find(".e-gridcontent").first().height()+this.gridInstance.element.find(".e-gridheader").height(),this.gridInstance.model.showStackedHeader&&this.gridInstance.model.stackedHeaderRows.length>0){var h=this.gridInstance.getHeaderTable().find("tr.e-columnheader"),c=(h.length,e(this._target).parent("tr")[0].rowIndex);for(a=0;a<c;a++)_height-=e(h[a]).height()}l.addClass("e-reSizeColbg").appendTo(this.gridInstance.element).attr("unselectable","on").css("visibility","hidden"),this.gridInstance._resizeTimeOut=setTimeout(function(){l.css({visibility:"visible",height:_height+"px",cursor:"col-resize",left:t,top:s,position:"fixed"})},100),this._oldWidth=r.offsetWidth,this._orgX=t,this._orgY=i,this._extra=t-this._orgX,this._expand=!0}else this._currentCell=-1},_mouseMove:function(e){
if(this._expand){var t=0;(e.type="mousemove")?(t=e.clientX,e.clientY):(e.type="touchmove")?(t=evt.originalEvent.changedTouches[0].clientX,evt.originalEvent.changedTouches[0].clientY):(e.type="MSPointerMove")&&(t=e.originalEvent.clientX,e.originalEvent.clientY),navigator.userAgent.indexOf("WebKit")!=-1&&(t=e.pageX,e.pageY),t+=document.documentElement.scrollLeft,e.preventDefault(),this._moveVisual(t)}else this._mouseHover(e)},_getCellIndex:function(t){var i,s,n=(e(t._target),t._target),r=n.getBoundingClientRect(),o=navigator.userAgent.indexOf("WebKit")!=-1?document.body.scrollLeft:document.documentElement.scrollLeft;return this._orgX<r.left+5+o&&(n=e(n).prevAll(":visible:first")[0]),i=n.cellIndex,s=i,t.gridInstance.model.groupSettings.groupedColumns.length&&(s=i-t.gridInstance.model.groupSettings.groupedColumns.length),s},_reSize:function(i){var s,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v;if(this._initialTableWidth=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderTable().first().parent().width()+this.gridInstance.getHeaderTable().last().parent().width():this.gridInstance.getHeaderTable().parent().width(),this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell=this._currentCell-1:this.gridInstance.model.enableRTL||this._getResizableCell(),n=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?this.gridInstance.getHeaderTable().find("thead"):e(this._target).parents("thead"),this._currentCell!=-1&&this._expand){this._expand=!1;var b=e(this._target).hasClass("e-stackedHeaderCell")?n.find(".e-headercell:not(.e-detailheadercell)").filter(":visible"):n.find(".e-headercell:not(.e-detailheadercell,.e-stackedHeaderCell)").filter(":visible"),y=b[this._currentCell],w=y.offsetWidth,C=i-this._orgX;if(this.gridInstance.model.enableRTL&&(C=-C),parseInt(C)+parseInt(w)>this._colMinWidth){if(0!=C&&n.css("cursor","default"),"nextcolumn"==t.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&(r=this.gridInstance.getHeaderTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),r=this.gridInstance._$headerCols),o=r.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),l=o.width()),this._resizeColumnUsingDiff(w,C),s=this.gridInstance.element.find(".e-gridcontent").first(),a=s.find("div").hasClass("e-content"),d=!t.isIOSWebView()&&this.gridInstance.getBrowserDetails(),d&&"msie"==d.browser&&this.gridInstance.model.allowScrolling&&(h=this.gridInstance.getContentTable().width(),c=this.gridInstance._calculateWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?(this.gridInstance.getHeaderTable().last().width(c-this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()),this.gridInstance.getContentTable().last().width(c-this.gridInstance.getContent().find(".e-frozencontentdiv").width()),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().last().width(c-this.gridInstance.getFooterContent().find(".e-frozenfootertdiv").width())):c>h&&(this.gridInstance.getHeaderTable().width(c),this.gridInstance.getContentTable().width(c),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().width(c)),parseInt(d.version,10)>8&&this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length&&(c>h?(this.gridInstance.getContentTable().width(c),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",2e3/s.find("table").first().width()+"%")):(this.gridInstance.getContentTable().css("width","100%"),this.gridInstance._groupingAction(!0),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",(this.gridInstance.getHeaderTable().find("colgroup").find("col").first().width()/s.find("table").first().width()*100).toFixed(2)+"%"))),this.gridInstance.getHeaderTable().parent().scrollLeft(s.find(".e-content").scrollLeft()-1)),this.gridInstance._colgroupRefresh(),this.gridInstance.model.allowTextWrap&&this.gridInstance.rowHeightRefresh(),this.gridInstance.model.groupSettings.groupedColumns.length&&!this.gridInstance.model.isEdit&&this.gridInstance._recalculateIndentWidth(),"normal"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model))if("nextcolumn"==t.getObject("resizeSettings.resizeMode",this.gridInstance.model)){u=this.gridInstance.getHeaderTable().find("colgroup").find("col"),p=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),u=this.gridInstance._$headerCols,p=this.gridInstance._$contentCols);var x=this._currentCell+1,S=u.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?x+this.gridInstance.model.groupSettings.groupedColumns.length:x),T=S.width()+(l-o.width());if(T<this._colMinWidth&&(T=this._colMinWidth),S.width(T),this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var k=this.gridInstance.getContentTable().find(".e-recordtable"),D=k.find("colgroup"),I=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(D=D.not(k.find(".e-detailrow").find("colgroup")).get()),_=0;_<D.length;_++)m=e(D[_]).find("col").filter(this._diaplayFinder),m.length>I&&m.splice(0,m.length-I),e(m[x]).width(T)}if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(x>=0&&x<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+C>this.gridInstance.element.find(".e-headercontent").first().width())return;$ContentCol=p.filter(this._diaplayFinder).eq(x)}else $ContentCol=p.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?x+this.gridInstance.model.groupSettings.groupedColumns.length:x);if($ContentCol.width(T),this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings.frozenColumns>0&&e(y).is(":last-child")&&"ejGrid"==this.gridInstance.pluginName){var O=o.width()-l,R=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+O,P=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-O,M=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+O;this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(R),this.gridInstance.getContent().find(".e-frozencontentdiv").width(R),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(P),this.gridInstance.getContent().find(".e-movablecontentdiv").width(P),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",M),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",M)}this.gridInstance.model.scrollSettings.frozenColumns>0&&e(this._target).parent("tr").parents("div:first").hasClass("e-frozenheaderdiv")&&(this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(this._newWidth),this.gridInstance.getContent().find(".e-frozencontentdiv").width(this._newWidth))}else this.gridInstance.model.scrollSettings.frozenColumns||(g=this.gridInstance.getHeaderTable().width(),this.gridInstance.getHeaderTable().css("width",g+parseInt(C)),this.gridInstance.getContentTable().css("width",g+parseInt(C)),this.gridInstance.model.scrollSettings.width+=parseInt(C),this.gridInstance.getContent().width()>this.gridInstance.getContentTable().width()?(this.gridInstance.getContentTable().addClass("e-tableLastCell"),this.gridInstance.getHeaderTable().addClass("e-tableLastCell")):(this.gridInstance.getContentTable().removeClass("e-tableLastCell"),this.gridInstance.getHeaderTable().removeClass("e-tableLastCell")));if("msie"==d.browser||!d||!this.gridInstance.model.allowScrolling||0!=this.gridInstance.model.scrollSettings.frozenColumns||(this.gridInstance.getHeaderTable().width("100%"),this.gridInstance.getContentTable().width("100%"),((f=this.gridInstance._calculateWidth())<=this.gridInstance.getContentTable().width()||this.gridInstance.getHeaderTable().width()>this.gridInstance.getContentTable().width())&&(this.gridInstance.getHeaderTable().width(f),this.gridInstance.getContentTable().width(f))),this.gridInstance.model.allowResizing&&"default"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")){var j=this._currentCell,E=e(this._target),F=[],A=[],T=w+C,L={};if(this.gridInstance.model.showStackedHeader&&E.hasClass("e-stackedHeaderCell")){var N=E.parent(".e-stackedHeaderRow").index(),V=E.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,z=this.gridInstance.model.stackedHeaderRows[N].stackedHeaderColumns[V].column,H=z;for(z instanceof Array||(H=z.split(",")),_=0;_<H.length;_++)v=this.gridInstance.getColumnIndexByField(H[_]),F.push(v),A.push(this.gridInstance.model.columns[v]);L={columnIndex:F,column:A,oldWidth:w,newWidth:T}}else L={columnIndex:j,column:this.gridInstance.model.columns[j],oldWidth:w,newWidth:T};this.gridInstance._trigger("resized",L)}this.gridInstance.model.allowScrolling&&(this.gridInstance._scrollObject.refresh(this.gridInstance.model.scrollSettings.frozenColumns>0),this.gridInstance.model.isResponsive&&this.gridInstance.model.minWidth&&this.gridInstance.windowonresize(),!a&&s.find("div").hasClass("e-content")&&this.gridInstance.refreshScrollerEvent(),this.gridInstance._isHscrollcss())}}this._target=null,this._$visualElement.remove(),this._expand=!1,this._currentCell=-1,this._allowStart=!1},_getFrozenResizeWidth:function(){for(var e=this.gridInstance.getHeaderTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),t=0,i=0;i<e.length;i++)"none"!=e.eq(i).css("display")&&(t+=parseInt(e[i].style.width.replace("px","")));return t},_diaplayFinder:function(){return"none"!=e(this).css("display")},_resizeColumnUsingDiff:function(i,s){var n,r,o,l,a,d,s,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T;this._currntCe=this._currentCell,r=this.gridInstance.getHeaderTable().find("colgroup").find("col"),o=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),r=this.gridInstance._$headerCols,o=this.gridInstance._$contentCols);var k,D,I=r.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),O=(r.slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),I[0].style.width),R=O.indexOf("%")!=-1,P=!O||R?e(this._target).outerWidth():O;if(n=s/=R?1:i/parseInt(P),(l=this._newWidth=parseInt(s)+parseInt(P))>0&&0!=s){if(l<this._colMinWidth&&(l=this._colMinWidth),"nextcolumn"==t.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&(a=I.next(),d=!(!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1),d&&(a=r.eq(this.gridInstance.model.scrollSettings.frozenColumns)),(d||!I.is(":last-child"))&&a.width()+(I.width()-l)<=this._colMinWidth&&(l=I.width()+(a.width()-this._colMinWidth))),s=l-i,this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(this._currentCell>=0&&this._currentCell<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+s>this.gridInstance.element.find(".e-headercontent").first().width())return;k=o.filter(this._diaplayFinder).eq(this._currentCell)}else k=o.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell);if(this.gridInstance.model.showSummary&&(this._$footerCols=this.gridInstance.getFooterTable().find("colgroup").find("col"),h=this.gridInstance.model.columns.length,this._$footerCols.length>h&&this._$footerCols.splice(0,this._$footerCols.length-h),$footerCols=this._$footerCols,D=$footerCols.filter(this._diaplayFinder).eq(this._currentCell),D.outerWidth(l)),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")?this._resizeStackedHeaderColumn(e(this._target).parent("tr"),n,this._currntCe):I.outerWidth(l),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")){if(this.gridInstance.model.groupSettings.groupedColumns.length)for(c=this.gridInstance.getContentTable().find(".e-recordtable"),u=c.find("colgroup"),_=0;_<this._changedcell.length;_++)for(p=this._changedcell[_],m=0;m<u.length;m++)g=e(u[m]).children().filter(this._diaplayFinder),S=parseInt(n)+parseInt(g[p].style.width),S<this._colMinWidth&&(S=this._colMinWidth),e(g[p]).width(S);for(this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder).length,_=0;_<this._changedcell.length;_++)f=this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder)[this._changedcell[_]],S=parseInt(n)+parseInt(f.style.width),S<this._colMinWidth&&(S=this._colMinWidth),e(f).outerWidth(S),this.gridInstance.model.isEdit&&this.gridInstance.model.allowGrouping&&0==this.gridInstance.model.groupSettings.groupedColumns.length&&($sEditCol=this.gridInstance.getContentTable().find(".gridform").find("colgroup col").filter(this._diaplayFinder)[this._changedcell[_]],e($sEditCol).outerWidth(S))}else{if(this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var c=this.gridInstance.getContentTable().find(".e-recordtable"),u=c.find("colgroup"),p=this._currentCell,h=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(u=u.not(c.find(".e-detailrow").find("colgroup")).get()),_=0;_<u.length;_++)v=e(u[_]).find("col").filter(this._diaplayFinder),v.length>h&&v.splice(0,v.length-h),e(v[p]).width(l)}k.outerWidth(l),this.gridInstance.model.isEdit&&(b=this.gridInstance.getContentTable().find(".e-editedrow,.e-addedrow"),y=b.find("table").find("colgroup col"),w=b.hasClass("e-addedrow")&&this.gridInstance.model.groupSettings.groupedColumns.length?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length-1:this._currentCell,C=y.filter(this._diaplayFinder).eq(w),C.outerWidth(l))}if(this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns&&"nextcolumn"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&"ejGrid"==this.gridInstance.pluginName){for(x=this.gridInstance.getContentTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings.frozenColumns),S=0,_=0;_<x.length;_++)S+="none"==x[_].style.display?0:parseInt(x[_].style.width.replace("px",""));this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(S),T=this.gridInstance.model.enableRTL?"margin-right":"margin-left",this.gridInstance.getContent().find(".e-frozencontentdiv").width(S).next().css(T,S+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(S).next().css(T,S+"px"),this.gridInstance.model.showSummary&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(S)}this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor","default")}},_resizeStackedHeaderColumn:function(t,i,s){var n,r,o,l,a;this._changedcell=[];var d=this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"),h=0,c=0,u=d[s],p=e(u).attr("colspan"),m=e(u).parent("tr"),g=(m.next(),u.cellIndex);for(this.gridInstance.model.groupSettings.showGroupedColumn&&(c=this.gridInstance.model.groupSettings.groupedColumns.length,h+=c);g>c;)g--,n=e(m).children("th").not(".e-detailheadercell")[g],h+=parseInt(e(n).attr("colspan"));for(this._currentCell=h,r=h+parseInt(p),o=h;o<r;o++)l=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder)[o],this._changedcell.push(o-c),a=parseInt(i)+parseInt(l.style.width),a<this._colMinWidth&&(a=this._colMinWidth),e(l).outerWidth(a)},_triggerResizeEvents:function(t,i){var s,n,r,o,l,a=this.gridInstance.getHeaderTable().find(".e-columnheader"),d=a.find(".e-headercell").filter(":visible"),h=this._cellIndex,c=e(this._target),u=[];if(col=[],"resizeStart"==t&&(this._orgX=i,h=this._cellIndex=this._getCellIndex(this,i)),s=d[this._currentCell],n=s.offsetWidth,this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")){var p=c.parent(".e-stackedHeaderRow").index(),m=c.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,g=this.gridInstance.model.stackedHeaderRows[p].stackedHeaderColumns[m].column,f=g;for(g instanceof Array||(f=g.split(",")),r=0;r<f.length;r++)o=this.gridInstance.getColumnIndexByField(f[r]),u.push(o),col.push(this.gridInstance.model.columns[o])}if("resizeStart"==t)return l={},l=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:c,oldWidth:n}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:n},this.gridInstance._trigger("resizeStart",l);var _=(a.find(".e-headercell").not(".e-detailheadercell").filter(":visible"),i-this._orgX),v=n+_;return this.gridInstance._colgroupRefresh(),l={},l=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:e(s),oldWidth:n,newWidth:v,extra:_}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:n,newWidth:v,extra:_},this.gridInstance._trigger("resizeEnd",l)},_mouseUp:function(e){if(this.gridInstance._resizeTimeOut&&(clearTimeout(this.gridInstance._resizeTimeOut),this.gridInstance._resizeTimeOut=0),this._expand){var i=e.clientX,s=e.clientY;if(navigator.userAgent.indexOf("WebKit")!=-1&&(i=e.pageX,s=e.pageY),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&this._triggerResizeEvents("resizeEnd",i))return void this.gridInstance.element.find(".e-reSizeColbg").remove();i+=document.documentElement.scrollLeft,this._reSize(i,s),!t.isNullOrUndefined(this._currntCe)&&this._currntCe>=0&&(this.gridInstance.model.columns[this._currntCe].width=this.gridInstance.columnsWidthCollection[this._currntCe])}},_getResizableCell:function(){var t,i,s,n;if(t=e(this._target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderTable().find(".e-columnheader"):this.gridInstance.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow"),i=t.find(".e-headercell").not(".e-hide,.e-detailheadercell"),s=navigator.userAgent.indexOf("WebKit")!=-1?document.body.scrollLeft:document.documentElement.scrollLeft,!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1)for(n=0;n<i.length;n++){if(point=i[n].getBoundingClientRect(),point.left+s+5>this._orgX&&e(i[n]).height()+point.top>=this._orgY)return void(this._currentCell=n-1);if(n==i.length-1||this.gridInstance.model.showStackedHeader&&e(this._target).get(0)===i[n])return void(this._currentCell=n)}},_moveVisual:function(e){var t=this.gridInstance.getHeaderContent().find("div").first()[0].getBoundingClientRect();t.left+document.documentElement.scrollLeft+t.width<e||e<t.left+document.documentElement.scrollLeft?this._$visualElement.remove():this._currentCell!=-1&&this._$visualElement.css({left:e,top:this._tableY})},_mouseDown:function(t){var i,s;return!this._allowStart||"col-resize"!=e(t.target).closest("tr").css("cursor")||(this._target=t.target,i=t.clientX,s=t.clientY,navigator.userAgent.indexOf("WebKit")!=-1&&(i=t.pageX,s=t.pageY-document.body.scrollTop),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&(e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),this._target=t.target,this._triggerResizeEvents("resizeStart",i))?void 0:(this,i+=document.documentElement.scrollLeft,2!=t.button&&this._start(i,s),!1))},_columnResizeToFit:function(i){var s,n,r,o,l,a,d,h,c,u,p,m,g,f=this.gridInstance.getHeaderTable().find(".e-columnheader").filter(function(){return"col-resize"==e(this).css("cursor")});if(this.gridInstance.model.allowResizeToFit&&f.length){e(i.target).is(".e-headercelldiv")&&(i.target=i.target.parentNode);var _,v=e(i.target),b=0,y=0;if(_=v.hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"):this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-stackedHeaderCell,.e-detailheadercell"),this._target=v,v.hasClass("e-headercell")){var w=i.target,C=e.inArray(w,_),x=C;this._orgX=i.pageX,this.gridInstance.model.enableRTL?this._currentCell=C:this._getResizableCell(),C!=this._currentCell&&(C=x=this._currentCell,w=i.target.previousSibling);var S=_.filter(":visible")[x],T=[],k=[],D=[];if(y=this.gridInstance.model.groupSettings.groupedColumns.length,t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)&&t.isNullOrUndefined(this.gridInstance.model.childGrid)||(y+=1),e(w).parent("tr").hasClass("e-stackedHeaderRow")){for(currentSpan=e(S).attr("colspan"),tr=e(S).parent("tr"),tHeadIndex=S.cellIndex,tr.next();tHeadIndex>y;)tHeadIndex--,s=e(tr).children("th")[tHeadIndex],b+=parseInt(e(s).attr("colspan"));n=b+parseInt(currentSpan)}else b=x,n=x+1;var I=0,O=0,R=0,P=[],M=[];if(b!=-1)for(r=_.slice(0,b+1).filter(".e-hide").length,o={columnIndex:b+r,column:this.gridInstance.model.columns[b+r],target:v,oldWidth:l},this.gridInstance._trigger("resizeStart",o),g=b;g<n;g++){if(r=_.slice(0,g+1).filter(".e-hide").length,R=this._getContentWidth(g+r),$cellDiv=this.gridInstance.getHeaderTable().find(".e-headercell:not(.e-hide, .e-stackedHeaderCell)").children(".e-headercelldiv").eq(g),O=this._getHeaderContentWidth($cellDiv),I=O>R?O:R,I+=parseInt($cellDiv.css("padding-left"),10),l=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder).eq(g+y).width(),I=l>I?I:this._colMinWidth<I?I:this._colMinWidth,a=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&a.splice(0,1),a.eq(g+y).width(I),this.gridInstance.model.groupSettings.groupedColumns.length&&(d=this.gridInstance.getContentTable().find(".e-recordtable").find("colgroup"),h=this,e.each(d,function(t,i){e(i).find("col").filter(h._diaplayFinder).eq(g).width(I)})),c=this.gridInstance.getContentTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&c.splice(0,1),c.eq(g+y).width(I),this.gridInstance.model.isEdit)for(p=this.gridInstance.getContentTable().find(".e-editedrow").find("col"),u=this.gridInstance.element.find(".gridform"),j=0;j<u.length;j++)p=e(u[j]).find("col"),p.eq(g+y).width(I);P.push(this.gridInstance.model.columns[g+r]),M.push(Math.abs(I-l)),T.push(g+r),k.push(I),D.push(l),(this.gridInstance.model.scrollSettings.frozenColumns>0||this.gridInstance.model.groupSettings.groupedColumns.length&&this.gridInstance.model.isEdit)&&(m=g+r,this.gridInstance.columnsWidthCollection[m]=I,this.gridInstance.setWidthToColumns(),this.gridInstance.model.scrollSettings.frozenColumns<=m+1&&(this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",I),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",I)))}for(this.gridInstance._colgroupRefresh(),this.gridInstance._recalculateIndentWidth(),o={columnIndex:T,column:P,target:S,oldWidth:D,newWidth:k,extra:M},this.gridInstance._trigger("resizeEnd",o),g=0;g<T.length;g++)this.gridInstance.columnsWidthCollection[T[g]]=k[g],this.gridInstance.model.columns[T[g]].width=k[g];o={columnIndex:T,column:P,target:S,oldWidth:D,newWidth:k,extra:M},this.gridInstance._trigger("resized",o),this.gridInstance.model.summaryRows.length>0&&this.gridInstance._summaryColRrefresh(),this.gridInstance._findColumnsWidth()}}},_getContentWidth:function(i){var s,n,r=0,o=t.buildTag("span",{},{}),l=this.gridInstance;return t.isNullOrUndefined(l._gridRows)||(n=l._gridRows,this.gridInstance.model.scrollSettings.frozenColumns&&i>=this.gridInstance.model.scrollSettings.frozenColumns&&(n=n[1],i-=this.gridInstance.model.scrollSettings.frozenColumns),e.each(n,function(t,n){if(e(n).is(".e-row,.e-alt_row")&&!e(n).is(".e-editedrow")){var a=e(n).find("td.e-rowcell").eq(i),d=e(a).html();l.model.columns[i].commands?o.html(e(d).children()):a.hasClass("e-validError")?o.html(e(d).attr("value")):o.html(d),e(a).html(o),s=a.find("span:first").width(),s>r&&(r=s),e(a).html(d)}})),l._refreshUnboundTemplate(this.gridInstance.getContentTable()),r},_getHeaderContentWidth:function(e){var i=0,s=t.buildTag("span",{},{}),n=e.html();return s.html(n),e.html(s),i=e.find("span:first").width(),(this.gridInstance.model.allowFiltering&&"menu"==this.gridInstance.model.filterSettings.filterType||"excel"==this.gridInstance.model.filterSettings.filterType)&&(i=i+e.parent().find(".e-filtericon").width()+10),e.html(n),i}}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/common/ej.globalize.min",["./ej.core.min"],e):e()}(function(){!function(e){function t(e,t){return 0===e.indexOf(t)}function i(e,t){return e.substr(e.length-t.length)===t}function s(e){return(e+"").replace(S,"")}function n(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)}function r(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function o(e,s,n){var r,o=s["-"],l=s["+"];switch(n){case"n -":o=" "+o,l=" "+l;case"n-":i(e,o)?r=["-",e.substr(0,e.length-o.length)]:i(e,l)&&(r=["+",e.substr(0,e.length-l.length)]);break;case"- n":o+=" ",l+=" ";case"-n":t(e,o)?r=["-",e.substr(o.length)]:t(e,l)&&(r=["+",e.substr(l.length)]);break;case"(n)":t(e,"(")&&i(e,")")&&(r=["-",e.substr(1,e.length-2)])}return r||["",e]}function l(e,t,i){var s,n=i.groupSizes||[3],o=n[0],l=1,a=Math.pow(10,t),d=Math.round(e*a)/a;isFinite(d)||(d=e),e=d;var h=e+"",c="",u=h.split(/e/i),p=u.length>1?parseInt(u[1],10):0;h=u[0],u=h.split("."),h=u[0],c=u.length>1?u[1]:"",p>0?(c=r(c,p,!1),h+=c.slice(0,p),c=c.substr(p)):p<0&&(p=-p,h=r(h,p+1),c=h.slice(-p,h.length)+c,h=h.slice(0,-p)),s=i["."]||".",c=t>0?s+(c.length>t?c.slice(0,t):r(c,t)):"";for(var m=h.length-1,g=i[","]||",",f="";m>=0;){if(0===o||o>m)return h.slice(0,m+1)+(f.length?g+f+c:c);f=h.slice(m-o+1,m+1)+(f.length?g+f:""),m-=o,l<n.length&&(o=n[l],l++)}return h.slice(0,m+1)+g+f+c}function a(e,t,i){var s,o;if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var a,h=i.numberFormat,c=Math.abs(e),u=-1;switch(t.length>1&&(u=parseInt(t.slice(1),10)),s=t.charAt(0).toUpperCase()){case"D":a="n",c=n(c),u!==-1&&(c=r(""+c,u,!0)),e<0&&(c=-c);break;case"N":o=h,o.pattern=o.pattern||["-n"];case"C":o=o||h.currency,o.pattern=o.pattern||["-$n","$n"];case"P":o=o||h.percent,o.pattern=o.pattern||["-n %","n %"],a=e<0?o.pattern[0]||"-n":o.pattern[1]||"n",u===-1&&(u=o.decimals),c=l(c*("P"===s?100:1),u,o);break;default:throw"Bad number format specifier: "+s}return d(c,a,h)}function d(e,t,i){for(var s,n,r=/n|\$|-|%/g,o="";s=r.lastIndex,n=r.exec(t),o+=t.slice(s,n?n.index:t.length),n;)switch(n[0]){case"n":o+=e;break;case"$":o+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(o+=i["-"]||"-");break;case"%":o+=i.percent.symbol||"%"}return o}function h(e,t,i){return e<t||e>i}function c(e,t){var i,s,n=new Date;return t<100&&(i=e.twoDigitYearMax,i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,s=n.getFullYear(),(t+=s-s%100)>i&&(t-=100)),t}function u(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function p(e){return e.split(" ").join(" ").toUpperCase()}function m(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=p(e[i]);return t}function g(e,t,i){var s,n=e.days,r=e._upperDays;return r||(e._upperDays=r=[m(n.names),m(n.namesAbbr),m(n.namesShort)]),t=p(t),i?(s=u(r[1],t))===-1&&(s=u(r[2],t)):s=u(r[0],t),s}function f(e,t,i){var s,n=e.months,r=e.monthsGenitive||e.months,o=e._upperMonths,l=e._upperMonthsGen;return o||(e._upperMonths=o=[m(n.names),m(n.namesAbbr)],e._upperMonthsGen=l=[m(r.names),m(r.namesAbbr)]),t=p(t),s=u(i?o[1]:o[0],t),s<0&&(s=u(i?l[1]:l[0],t)),s}function _(e,t){for(var i,s=0,n=!1,r=0,o=e.length;r<o;r++)i=e.charAt(r),"'"==i?(n?t.push("'"):s++,n=!1):"\\"==i?(n&&t.push("\\"),n=!n):(t.push(i),n=!1);return s}function v(e,t,i,s){if(!e)return null;var n=0,r=0,o=null;t=t.split(""),length=t.length;for(var l=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s};n<length;n++)ch=t[n],"d"===ch&&(count=function(e){for(var i=0;t[n]===e;)i++,n++;return i>0&&(n-=1),i}("d"),s._lowerDays||(s._lowerDays=function(e){var t={};for(var i in e)t[i]=l(e[i]);return t}(s.days)),o=count<3?function(t){var i=new RegExp("^\\d{1,"+t+"}"),s=e.substr(r,t).match(i);return s?(s=s[0],r+=s.length,parseInt(s,10)):null}(2):function(t,i){for(var s,n,o,l=0,a=t.length;l<a;l++)if(s=t[l],n=s.length,o=e.substr(r,n),i&&(o=o.toLowerCase()),o==s)return r+=n,l+1;return null}(s._lowerDays[3==count?"namesAbbr":"names"],!0));return o}function b(e,t){t=t||"F";var i,s=e.patterns,n=t.length;if(1===n){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function y(e,i,n){var r,o,l,a,d,u,p,m,_;e=s(e),i=s(i);var b=n.calendar,y=ej.globalize._getDateParseRegExp(b,i),w=new RegExp(y.regExp).exec(e);if(null===w)return null;var C,S=y.groups,T=null,k=null,D=null,I=0,O=0,R=0,P=0,M=null,j=!1;for(r=0,o=S.length;r<o;r++)if(l=w[r+1]){var E=S[r],F=E.length,A=parseInt(l,10);switch(E){case x.DAY_OF_MONTH_DOUBLE_DIGIT:case x.DAY_OF_MONTH_SINGLE_DIGIT:if(D=A,h(D,1,31))return null;break;case x.MONTH_THREE_LETTER:case x.MONTH_FULL_NAME:if(k=f(b,l,3===F),h(k,0,11))return null;break;case x.MONTH_SINGLE_DIGIT:case x.MONTH_DOUBLE_DIGIT:if(k=A-1,h(k,0,11))return null;break;case x.YEAR_SINGLE_DIGIT:case x.YEAR_DOUBLE_DIGIT:case x.YEAR_FULL:if(T=F<4?c(b,A):A,h(T,0,9999))return null;break;case x.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case x.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(I=A,12===I&&(I=0),h(I,0,11))return null;break;case x.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case x.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(I=A,h(I,0,23))return null;break;case x.MINUTES_SINGLE_DIGIT:case x.MINUTES_DOUBLE_DIGIT:if(O=A,h(O,0,59))return null;break;case x.SECONDS_SINGLE_DIGIT:case x.SECONDS_DOUBLE_DIGIT:if(R=A,h(R,0,59))return null;break;case x.MERIDIAN_INDICATOR_FULL:case x.MERIDIAN_INDICATOR_SINGLE:if(!(j=b.PM&&(l===b.PM[0]||l===b.PM[1]||l===b.PM[2]))&&(!b.AM||l!==b.AM[0]&&l!==b.AM[1]&&l!==b.AM[2]))return null;break;case x.DECISECONDS:case x.CENTISECONDS:case x.MILLISECONDS:if(P=A*Math.pow(10,3-F),h(P,0,999))return null;break;case x.DAY_OF_WEEK_THREE_LETTER:D=v(e,i,n,b);break;case x.DAY_OF_WEEK_FULL_NAME:if(g(b,l,3===F),h(null,0,6))return null;break;case x.TIME_ZONE_OFFSET_FULL:if(a=l.split(/:/),2!==a.length||(C=parseInt(a[0],10),h(C,-12,13))||(d=parseInt(a[1],10),h(d,0,59)))return null;M=60*C+(t(l,"-")?-d:d);break;case x.TIME_ZONE_OFFSET_SINGLE_DIGIT:case x.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(C=A,h(C,-12,13))return null;M=60*C}}if(u=new Date,m=b.convert,p=m?m.fromGregorian(u)[0]:u.getFullYear(),null===T&&(T=p),null===k&&(k=0),null===D&&(D=1),m){if(null===(u=m.toGregorian(T,k,D)))return null}else if(u.setFullYear(T,k,D),
u.getDate()!==D||false)return null;return j&&I<12&&(I+=12),u.setHours(I,O,R,P),null!==M&&(_=u.getMinutes()-(M+u.getTimezoneOffset()),u.setHours(u.getHours()+parseInt(_/60,10),_%60)),u}function w(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=f[t-2]+s,i.substr(i.length-t,t)):s}var n,r,o,l,a,d,h=i.calendar,c=h.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?c?w(e,h.patterns.F,i):e.toLocaleString():e.toString();r="s"===t,t=b(h,t),n=[];var u,p,m,g,f=["0","00","000"],v=/([^d]|^)(d|dd)([^d]|$)/g,y=0,C=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;for(!r&&c&&(g=c.fromGregorian(e));;){var S=C.lastIndex,T=C.exec(t);if(y+=_(t.slice(S,T?T.index:t.length),n),!T)break;if(y%2)n.push(T[0]);else switch(o=T[0],l=o.length,o){case x.DAY_OF_WEEK_THREE_LETTER:case x.DAY_OF_WEEK_FULL_NAME:a=3===l?h.days.namesAbbr:h.days.names,n.push(a[e.getDay()]);break;case x.DAY_OF_MONTH_SINGLE_DIGIT:case x.DAY_OF_MONTH_DOUBLE_DIGIT:p=!0,n.push(s(g?g[2]:e.getDate(),l));break;case x.MONTH_THREE_LETTER:case x.MONTH_FULL_NAME:d=g?g[1]:e.getMonth(),n.push(h.monthsGenitive&&function(){return p||m?p:(p=v.test(t),m=!0,p)}()?h.monthsGenitive[3===l?"namesAbbr":"names"][d]:h.months[3===l?"namesAbbr":"names"][d]);break;case x.MONTH_SINGLE_DIGIT:case x.MONTH_DOUBLE_DIGIT:n.push(s((g?g[1]:e.getMonth())+1,l));break;case x.YEAR_SINGLE_DIGIT:case x.YEAR_DOUBLE_DIGIT:case x.YEAR_FULL:d=g?g[0]:e.getFullYear(),l<4&&(d%=100),n.push(s(d,l));break;case x.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case x.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:u=e.getHours()%12,0===u&&(u=12),n.push(s(u,l));break;case x.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case x.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:n.push(s(e.getHours(),l));break;case x.MINUTES_SINGLE_DIGIT:case x.MINUTES_DOUBLE_DIGIT:n.push(s(e.getMinutes(),l));break;case x.SECONDS_SINGLE_DIGIT:case x.SECONDS_DOUBLE_DIGIT:n.push(s(e.getSeconds(),l));break;case x.MERIDIAN_INDICATOR_SINGLE:case x.MERIDIAN_INDICATOR_FULL:d=e.getHours()<12?h.AM?h.AM[0]:" ":h.PM?h.PM[0]:" ",n.push(1===l?d.charAt(0):d);break;case x.DECISECONDS:case x.CENTISECONDS:case x.MILLISECONDS:n.push(s(e.getMilliseconds(),3).substr(0,l));break;case x.TIME_ZONE_OFFSET_SINGLE_DIGIT:case x.TIME_ZONE_OFFSET_DOUBLE_DIGIT:u=e.getTimezoneOffset()/60,n.push((u<=0?"+":"-")+s(Math.floor(Math.abs(u)),l));break;case x.TIME_ZONE_OFFSET_FULL:u=e.getTimezoneOffset()/60,n.push((u<=0?"+":"-")+s(Math.floor(Math.abs(u)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case x.DATE_SEPARATOR:n.push(h["/"]||"/");break;default:throw"Invalid date format pattern '"+o+"'."}}return n.join("")}function C(e,t){return t.length?C(e[t[0]],t.slice(1)):e}var x;ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=e.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var S=/^\s+|\s+$/g,T=/^[+-]?infinity$/i,k=/^0x[a-f0-9]+$/i,D=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/;x={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"},ej.globalize._getDateParseRegExp=function(e,t){var i,s,n,r,o,l,a,d=e._parseRegExp;if(d){if(i=d[t])return i}else e._parseRegExp=d={};for(var h,c=b(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),u=["^"],p=[],m=0,g=0,f=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(h=f.exec(c));)if(s=c.slice(m,h.index),m=f.lastIndex,(g+=_(s,u))%2)u.push(h[0]);else{switch(n=h[0],r=n.length,n){case x.DAY_OF_WEEK_THREE_LETTER:case x.DAY_OF_WEEK_FULL_NAME:case x.MONTH_FULL_NAME:case x.MONTH_THREE_LETTER:o="(\\D+)";break;case x.MERIDIAN_INDICATOR_FULL:case x.MERIDIAN_INDICATOR_SINGLE:o="(\\D*)";break;case x.YEAR_FULL:case x.MILLISECONDS:case x.CENTISECONDS:case x.DECISECONDS:o="(\\d{"+r+"})";break;case x.DAY_OF_MONTH_DOUBLE_DIGIT:case x.DAY_OF_MONTH_SINGLE_DIGIT:case x.MONTH_DOUBLE_DIGIT:case x.MONTH_SINGLE_DIGIT:case x.YEAR_DOUBLE_DIGIT:case x.YEAR_SINGLE_DIGIT:case x.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case x.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case x.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case x.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case x.MINUTES_DOUBLE_DIGIT:case x.MINUTES_SINGLE_DIGIT:case x.SECONDS_DOUBLE_DIGIT:case x.SECONDS_SINGLE_DIGIT:o="(\\d\\d?)";break;case x.TIME_ZONE_OFFSET_FULL:o="([+-]?\\d\\d?:\\d{2})";break;case x.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case x.TIME_ZONE_OFFSET_SINGLE_DIGIT:o="([+-]?\\d\\d?)";break;case x.DATE_SEPARATOR:o="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+n+"'."}o&&u.push(o),p.push(h[0])}return _(c.slice(m),u),u.push("$"),l=u.join("").replace(/\s+/g,"\\s+"),a={regExp:l,groups:p},d[t]=a},ej.globalize.addCulture=function(t,i){ej.cultures[t]=e.extend(!0,e.extend(!0,{},ej.cultures.default,i),ej.cultures[t]),ej.cultures[t].calendar=ej.cultures[t].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e,e&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(t){var i,s,n,r,o;if(t){if(e.isPlainObject(t)&&t.numberFormat&&(i=t),"string"==typeof t){if(s=ej.cultures,s[t])return s[t];if(t.indexOf("-")>-1){if(n=t.split("-")[0],s[n])return s[n]}else for(r=e.map(s,function(e){return e}),o=0;o<r.length;o++)if(r[o].name.split("-")[0]===t)return r[o];return ej.cultures.default}}else i=ej.cultures.current||ej.cultures.default;return i},ej.globalize.format=function(e,t,i){var s=ej.globalize.findCulture(i);return"number"==typeof e?e=a(e,t,s):e instanceof Date&&(e=w(e,t,s)),e},ej.globalize.parseInt=function(e,t,i){return Math.floor(this.parseFloat(e,t,i))},ej.globalize.parseFloat=function(e,t,i){var n,r,l,a,d,h,c,u,p,m,g;"string"==typeof t&&(i=t,t=10),i=ej.globalize.findCulture(i);var f=NaN,_=i.numberFormat,v=i.numberFormat.pattern[0];if(e=e.replace(/ /g,""),e.indexOf(i.numberFormat.currency.symbol)>-1?(e=e.replace(i.numberFormat.currency.symbol||"$",""),e=e.replace(i.numberFormat.currency["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.currency.pattern[0].replace("$",""))):e.indexOf(i.numberFormat.percent.symbol)>-1&&(e=e.replace(i.numberFormat.percent.symbol||"%",""),e=e.replace(i.numberFormat.percent["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.percent.pattern[0].replace("%",""))),e=s(e),T.test(e))f=parseFloat(e,t);else if(!t&&k.test(e))f=parseInt(e,16);else{var b=o(e,_,v),y=b[0],w=b[1];""===y&&"-n"!==_.pattern[0]&&(b=o(e,_,"-n"),y=b[0],w=b[1]),y=y||"+",l=w.indexOf("e"),l<0&&(l=w.indexOf("E")),l<0?(r=w,n=null):(r=w.substr(0,l),n=w.substr(l+1)),h=_["."]||".",c=r.indexOf(h),c<0?(a=r,d=null):(a=r.substr(0,c),d=r.substr(c+h.length)),u=_[","]||",",a=a.split(u).join(""),p=u.replace(/\u00A0/g," "),u!==p&&(a=a.split(p).join("")),m=y+a,null!==d&&(m+="."+d),null!==n&&(g=o(n,_,v),m+="e"+(g[0]||"+")+g[1]),D.test(m)&&(f=parseFloat(m))}return f},ej.globalize.parseDate=function(e,t,i){var s,n,r,o,l,a;if(i=ej.globalize.findCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(o=0,l=t.length;o<l&&(!(a=t[o])||!(s=y(e,a,i)));o++);}else{r=i.calendar.patterns;for(n in r)if(s=y(e,r[n],i))break}return s||null},ej.globalize.getLocalizedConstants=function(t,i){var s,n=t.replace("ej.","").split(".");return s=C(ej,n),e.extend(!0,{},s.Locale.default,s.Locale[i||this.cultureObject.name])},e.extend(ej,ej.globalize)}(jQuery)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/common/ej.core.min",["jquery"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";var s,n,r,o;t.version="15.1.0.41",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==i}),Date.prototype.toISOString||function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,s,n,r){if(!e||!n)return i;for(var o=e.split("."),l=window,a=0;a<o.length-1;a++)t.isNullOrUndefined(l[o[a]])&&(l[o[a]]={}),l=l[o[a]];return(r||t.isNullOrUndefined(l[o[a]]))&&(s="function"==typeof s?s:function(){},l[o[a]]=s,l[o[a]].prototype=n),l[o[a]]},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,s){var n,r,o;if(!s)return i;for(n=s,r=e.split("."),o=0;o<r.length&&!t.util.isNullOrUndefined(n);o++)n=n[r[o]];return n},createObject:function(e,s,n){for(var r,o=e.split("."),l=n||window,a=l,d=o.length,h=0;h<d;h++)r=o[h],h+1==d?a[r]=s===i?{}:s:t.isNullOrUndefined(a[r])&&(a[r]={}),a=a[r];return l},isNullOrUndefined:function(e){return e===i||null===e},print:function(i,s){var s,n,r,o=t.buildTag("div"),l=i.clone();o.append(l),s||(s=window.open("","print","height=452,width=1024,tabbar=no")),s.document.write("<!DOCTYPE html>"),n=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(r="",n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),r+=i.outerHTML}),s.document.write("<html><head></head><body>"+r+o[0].innerHTML+"</body></html>")):(r="",s.document.write("<html><head>"),n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),r+=i.outerHTML}),s.document.writeln(r+"</head><body>"),s.document.writeln(o[0].innerHTML+"</body></html>")),s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,s,n,r){var o,l=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],a=/#([_a-z]+[-_0-9a-z]+)/gi.exec(t);return a=a?a[a.length-1]:i,o=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t),o=o?o[o.length-1]:i,e(document.createElement(l)).attr(a?{id:a}:{}).addClass(o||"").css(n||{}).attr(r||{}).html(s||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),(t==i||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,n,r,o=e(t).parents().andSelf().filter(":hidden");return o&&(n={visibility:"hidden",display:"block"},r=[],o.each(function(){var e={};for(var t in n)e[t]=this.style[t],this.style[t]=n[t];r.push(e)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),o.each(function(e){var t=r[e];for(var i in n)this.style[i]=t[i]})),s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return location.href.indexOf("x-wmapp")!=-1},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(e("head"),"data-ej-mobile",!1)===!0},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(e("head"),"data-ej-tablet",!1)===!0||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var n=e(t).attr(i);return null!=n?"true"==n.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),n=e.height(),r=e.offset().left,o=e.offset().left+s,l=e.offset().top,a=e.offset().top+n,d=.3*s,h=.3*n;return t<r+d&&i<l+h?"e-m-skew-topleft":t>o-d&&i<l+h?"e-m-skew-topright":t>o-d&&i>a-h?"e-m-skew-bottomright":t<r+d&&i>a-h?"e-m-skew-bottomleft":t>r+d&&i<l+h&&t<o-d?"e-m-skew-top":t<r+d?"e-m-skew-left":t>o-d?"e-m-skew-right":i>a-h?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,s,n=e.touches?e.touches[0]:e,r=n.pageX-t._pointX,o=n.pageY-t._pointY;Date.now();return t._pointX=n.pageX,t._pointY=n.pageY,t._distX+=r,t._distY+=o,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,n,r,o){for(var l=0;l<e.length;l++)t.listenTouchEvent(e[l],i[l],s[l],n,r,o)},listenTouchEvent:function(i,s,n,r,o,l){for(var a,d=r?"removeEventListener":"addEventListener",h=r?"off":"on",c=e(i),u=0;u<c.length;u++)switch(a=c[u],s){case"touchstart":t._bindEvent(a,d,s,n,"mousedown","MSPointerDown","pointerdown",l);break;case"touchmove":t._bindEvent(a,d,s,n,"mousemove","MSPointerMove","pointermove",l);break;case"touchend":t._bindEvent(a,d,s,n,"mouseup","MSPointerUp","pointerup",l);break;case"touchcancel":t._bindEvent(a,d,s,n,"mousecancel","MSPointerCancel","pointercancel",l);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(a)[h](s,n);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?o._on(e(a),s,n):a[d](s,n,!0)}},_bindEvent:function(t,i,s,n,r,o,l){e.support.hasPointer?t[i](window.navigator.pointerEnabled?l:o,n,!0):t[i](s,n,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),n=s.data("ejWidgets");n&&s[n]("destroy")})},getAttrVal:function(t,i,s){var n=e(t).attr(i);return null!=n?n:s},getOffset:function(t){var i,s={},n=t.offset()||{left:0,top:0};return e.extend(!0,s,n),"static"!=e("body").css("position")&&(i=e("body").offset(),s.left-=i.left,s.top-=i.top),s},getZindexPartial:function(i,s){var n,r,o;if(!t.isNullOrUndefined(i)&&i.length>0)return n=i.parents(),r=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&r.splice(r.index(s),1),e(r).each(function(e,t){n.push(t)}),o=Math.max.apply(o,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!o||o<1e4?o=1e4:o+=1,o},isValidAttr:function(t,i){var s,t=e(t)[0];return void 0!==t[i]||(s=!1,e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s)}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,n,r){var o=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(o=e(i).attr("type")),o&&(o=o.toLowerCase(),t.template[o])?t.template[o](this,i,s,n,r):t.template.render(this,i,s,n,r)},destroy:function(){var i,s,n,r;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(o){}for(i=this.element.data("ejWidgets")||[],r=0;r<i.length;r++)i[r]==this.pluginName&&i.splice(r,1);for(i.length||this.element.removeData("ejWidgets");this._events&&(s=this._events.pop(),n=[],s);){for(r=0;r<s[1].length;r++)e.isPlainObject(s[1][r])||n.push(s[1][r]);e.fn.off.apply(s[0],n)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),n={},r=s.length;n&&"function"!=typeof n;)n=s[--r];return s[r]=t.proxy(s[r],this),this._events.push([i,s,n,s[r]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,n){var r,o,l,a,d=this._events;if(!d||!d.length)return this;for("function"==typeof s&&(r=n,n=s,s=r),o=i.match(/\S+/g)||[""],l=0;l<d.length;l++)if(a=d[l],a[0].length&&(!n||a[2]===n)&&(a[1][0]===i||o[0])&&(!s||a[1][1]===s)&&e.inArray(t[0],a[0])>-1){e.fn.off.apply(t,n?[i,s,a[3]]:[i,s]),d.splice(l,1);break}return this},_trigger:function(i,s){var n,r,o,l,a=null,d={};return e.extend(d,s),i in this.model&&(a=this.model[i]),a&&("string"==typeof a&&(a=t.util.getObject(a,window)),e.isFunction(a)&&(r=t.event(i,this.model,s),o=this.model._applyScope,n=a.call(this,r),o&&o.call(),s&&e.extend(s,r),r.cancel||!t.isNullOrUndefined(n)))?n===!1||r.cancel:(l=Boolean(s),s=s||{},s.originalEventType=i,s.type=this.pluginName+i,r=e.Event(s.type,t.event(s.type,this.model,s)),this.element&&this.element.trigger(r),l&&e.extend(s,r),t.isOnWebForms&&0==r.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,d),r.cancel)},setModel:function(t,i){var n,r,o,l;if(!this._trigger("modelChange",{changes:t})){for(n in t){if(!i){if(this.model[n]===t[n]){delete t[n];continue}if(e.isPlainObject(t[n])&&(s(this.model[n],t[n]),e.isEmptyObject(t[n]))){delete t[n];continue}}if(this.dataTypes&&(r=this._isValidModelValue(n,this.dataTypes,t))!==!0)throw"setModel - Invalid input for property :"+n+" - "+r;this.model.notifyOnEachPropertyChanges&&this.model[n]!==t[n]&&(o={oldValue:this.model[n],newValue:t[n]},t[n]=this._trigger(n+"Change",o)?this.model[n]:o.newValue)}e.isEmptyObject(t)||(this._setFirst?(l=t.dataSource,l&&delete t.dataSource,e.extend(!0,this.model,t),l&&(this.model.dataSource=l instanceof Array?l.slice():l,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&this._setModel(t)===!1||e.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(s,n,r){if(!s)return this.model;if(e.isPlainObject(s))return this.setModel(s,r);if("string"==typeof s){s=s.replace(/^model\./,"");var o=t.getObject(s,this.model);if(n===i&&!r)return o;if("enablePersistence"===s)return this._setState(n);if(r&&n===t.extensions.modelGUID)return this._setModel(t.createObject(s,t.getObject(s,this.model),{}));if(r||t.getObject(s,this.model)!==n)return this.setModel(t.createObject(s,n,{}),r)}return i},_isValidModelValue:function(e,t,i){var s,n,r,o=t[e],l=i[e];if(!o)return!0;if("string"==typeof o){if("enum"==o&&(i[e]=l?l.toString().toLowerCase():l,o="string"),"array"===o){if("[object Array]"===Object.prototype.toString.call(l))return!0}else if("data"===o||"parent"===o||typeof l===o)return!0;return"Expected type - "+o}if(l instanceof Array){for(n=0;n<l.length;n++)if((s=this._isValidModelValue(e,t,l[n]))!==!0)return" ["+n+"] - "+s;return!0}for(r in l)if((s=this._isValidModelValue(r,o,l))!==!0)return r+" : "+s;return!0},_returnFn:function(e,t){t.indexOf(".")!=-1?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},_removeCircularRef:function(e){function t(e,s,n){if("object"==typeof e){if(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return jQuery.inArray(e,this)}),i.indexOf(e)>=0)return void delete n[s];i.push(e);for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e);return void i.pop()}}var i=[];return t(e,"obj",null),e},stringify:function(e,i){for(var s,n=this.observables,r=0;r<n.length;r++)s=t.getObject(n[r],e),t.isNullOrUndefined(s)||"function"!=typeof s||this._returnFn(e,n[r]);return i&&(e=this._removeCircularRef(e)),JSON.stringify(e)},_setState:function(i){i===!0?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(i.indexOf(".")!=-1?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e,i;if(this._ignoreOnPersist){for(e=l({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=l({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var s,n,r=null;if(window.localStorage?r=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(r=t.cookie.get("$ej$"+this.pluginName+this._id)),r&&(s=JSON.parse(r),this._restoreState&&(this._restoreState(s.customPersists),delete s.customPersists),t.isNullOrUndefined(s)===!1&&(t.isNullOrUndefined(s.ignoreOnPersist)?t.isNullOrUndefined(s.addToPersist)||(this._addToPersist=s.addToPersist,delete s.addToPersist):(this._ignoreOnPersist=s.ignoreOnPersist,delete s.ignoreOnPersist))),t.isNullOrUndefined(s)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,s);else{for(n in this._ignoreOnPersist)this._ignoreOnPersist[n].indexOf(".")!==-1?t.createObject(this._ignoreOnPersist[n],t.getObject(this._ignoreOnPersist[n],this.model),s):s[this._ignoreOnPersist[n]]=this.model[this._ignoreOnPersist[n]];this.model=s}!i&&r&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,s,n=[];if("object"==typeof e?n=e:"string"==typeof e&&n.push(e),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<n.length;t++)this._ignoreOnPersist.push(n[t]);else for(t=0;t<n.length;t++)s=this._addToPersist.indexOf(n[t]),this._addToPersist.splice(s,1)},addToPersist:function(t){var s,n,r=[];if("object"==typeof t?r=t:"string"==typeof t&&r.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],n=0;n<r.length;n++)s=this._ignoreOnPersist.indexOf(r[n]),this._ignoreOnPersist.splice(s,1);else for(n=0;n<r.length;n++)e.inArray(r[n],this._addToPersist)===-1&&this._addToPersist.push(r[n])},formatting:function(i,s,n){var r,o,l,a,d,h,c,u,p;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),n=t.preferredCulture(n)?n:"en-US",r=i,o=i.split("{0:"),d=i.split("}"),l=o[0],a=d[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),i.indexOf("{0:")!=-1)return h=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),c=h.exec(i),null!=c&&null!=s?null!=l&&null!=a?l+t.format(s,c[2],n)+a:t.format(s,c[2],n):null!=s?s:"";if(r.startsWith("{")&&!r.startsWith("{0:")){var m=r.split(""),s=(s||"")+"",g=s.split(""),f=/[0aA\*CN<>\?]/gm;for(u=0,p=0;u<m.length;u++)m[u]=f.test(m[u])?"{"+p+++"}":m[u];return String.format.apply(String,[m.join("")].concat(g)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){r=r.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),r):this.data.Value}},t.WidgetBase=function(){},s=function(t,i){for(var n in t)t[n]===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(t[n])&&s(t[n],i[n])},t.widget=function(s,r,d){var c,u,p;if("object"!=typeof s)p=d._rootCSS||t.getNameSpace(r),d=t.defineClass(r,function(i,o){var h,c,u,m,g,f,_,v,b,y,w;if(this.sfType=r,this.pluginName=s,this.instance=a,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(h in o)if((c=this._isValidModelValue(h,this.dataTypes,o))!==!0)throw"setModel - Invalid input for property :"+h+" - "+c;for(u=i.data("ejWidgets")||[],u.push(s),i.data("ejWidgets",u),g=0;t.widget.observables&&this.observables&&g<this.observables.length;g++)(m=t.getObject(this.observables[g],o))&&t.createObject(this.observables[g],t.widget.observables.register(m,this.observables[g],this,i),o);if(this.element=i.jquery?i:e(i),this.model=l(!0,{},d.prototype.defaults,o),this.model.keyConfigs=l(this.keyConfigs),this.element.addClass(p+" e-js").data(s,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(g in window.localStorage)g.indexOf("$ej$")!=-1&&window.localStorage.removeItem(g);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion){f=document.cookie.split(/; */);for(_ in f)_.indexOf("$ej$")!=-1&&t.cookie.set(_.split("=")[0],model,new Date)}this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(o),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){v=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus);for(b in this.model.keyConfigs)if("focus"!==b){v=!0;break}v&&this._keyPressed&&(y=i,w="keydown",this.keySettings&&(y=this.keySettings.getElement?this.keySettings.getElement()||y:y,w=this.keySettings.event||w),this._on(y,w,function(e){if(this.model.keyConfigs){var t=n.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&this._keyPressed(t,e.target,i,e)===!1&&e.preventDefault()}}))}this._trigger("create")},d),e.fn[s]=function(n){for(var l,a,c=n,u=0;u<this.length;u++){var m=e(this[u]),g=m.data(s),f=g&&m.hasClass(p),_=null;if(this.length>0&&e.isPlainObject(c)&&(n=t.copyObject({},c)),f){if(n)if(a=[].slice.call(arguments,1),this.length>0&&a[0]&&"option"===c&&e.isPlainObject(a[0])&&(a[0]=t.copyObject({},a[0])),e.isPlainObject(n))g.setModel(n);else if(0!==n.indexOf("_")&&!t.isNullOrUndefined(_=t.getObject(n,g))||0===n.indexOf("model.")){if(!_||!e.isFunction(_)){if(1==arguments.length)return _;g.option(n,arguments[1]);continue}if((l=_.apply(g,a))!==i)return l}else o(r+": function/property - "+n+" does not exist")}else d.prototype._requiresID!==!0||e(this[u]).attr("id")||m.attr("id",h("ejControl_")),
n&&"object"!=typeof n?o(s+": methods/properties can be accessed only after plugin creation"):(d.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in d.prototype.defaults&&"ejChart"!=s&&(!n||"locale"in n?t.isNullOrUndefined(n)&&(n={},n.locale=t.setCulture().name):n.locale=t.setCulture().name),new d(m,n))}return s.indexOf("ejm")!=-1&&t.widget.registerInstance(m,s,r,d.prototype),this},t.widget.register(s,r,d.prototype);else{d=r;for(c in s)u=s[c],u instanceof Array&&(d._rootCSS=u[1],u=u[0]),t.widget(c,u,d),s[c]instanceof Array&&(d._rootCSS="")}},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,n){t.isNullOrUndefined(e[i])||o("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:n},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,n){i.push({element:e,pluginName:t,className:s,proto:n})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){var t,i,s,n;if(e&&e.length)for(t=0;t<e.length;t++)if(i=e.eq(t).data(),(s=i.ejWidgets)&&s.length)for(n=0;n<s.length;n++)i[s[n]]&&i[s[n]].destroy&&i[s[n]].destroy()},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},n={getActionFromCode:function(e,t,i,s,r){var o,l,a;i=i||!1,s=s||!1,r=r||!1;for(o in e)if("focus"!==o)for(l=n.getKeyObject(e[o]),a=0;a<l.length;a++)if(t===l[a].code&&i==l[a].isCtrl&&s==l[a].isShift&&r==l[a].isAlt)return o;return null},getKeyObject:function(t){for(var i,s,r,o={isCtrl:!1,isShift:!1,isAlt:!1},l=e.extend(!0,{},o),a=t.split(","),d=[],h=0;h<a.length;h++){if(i=null,a[h].indexOf("+")!=-1)for(s=a[h].split("+"),r=0;r<s.length;r++)i=n.getResult(e.trim(s[r]),o);else i=n.getResult(e.trim(a[h]),e.extend(!0,{},l));d.push(i)}return d},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i,s,n,r,o={},l=[],a={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(i in a)if(a.hasOwnProperty(i)&&(l=navigator.userAgent.match(a[i]))){if(o.name="opr"==l[1].toLowerCase()?"opera":l[1].toLowerCase(),o.version=l[2],o.culture={},o.culture.name=o.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(s=t.preferredCulture().name,n=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),r=0;navigator.languages&&r<navigator.languages.length&&(n=t.preferredCulture(navigator.languages[r]),n.language!=navigator.languages[r]);r++);t.preferredCulture(s),e.extend(!0,o.culture,n)}!navigator.userAgent.match(/Trident\/7\./)||(o.name="msie");break}return o.isMSPointerEnabled="msie"==o.name&&o.version>9&&window.navigator.msPointerEnabled,o.pointerEnabled=window.navigator.pointerEnabled,o},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t,i,s=document.documentElement.style;if(e in s)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in s)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var l=t.copyObject=function(e,s){var n,r,o,a,d,h,c=2;for("boolean"!=typeof e&&(c=1),o=[].slice.call(arguments,c),1===c&&(s=e,e=i),a=0;a<o.length;a++)for(d in o[a])if(n=s[d],(r=o[a][d])!==i&&n!==r&&o[a]!==r&&s!==r)if(r instanceof Array)if(0===a&&e)for(s[d]=[],h=0;h<r.length;h++)l(!0,s[d],r);else s[d]=r.slice();else t.isPlainObject(r)?(s[d]=n||{},e?l(e,s[d],r):l(s[d],r)):s[d]=r;return s},a=function(){return this},d=0,h=function(e){return e+d++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,n,r){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var o={prop:r,index:n};return e(i).render(s,o)},t.isPlainObject=function(e){if(!e||t.DataManager!==i&&e instanceof t.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(r){return!1}var s,n=t.support.isOwnLast;for(s in e)if(n)break;return s===i||e.hasOwnProperty(s)},r=!1,t.util.valueFunction=function(e){return function(s,n){var o=t.getObject(e,this.model);if(r===!1&&(r=t.getObject("observables.getValue",t.widget)),s===i)return t.isNullOrUndefined(r)?"function"==typeof o?o.call(this):o:r(o,n);"function"==typeof o?(this["ob.values"][e]=s,o.call(this,s)):t.createObject(e,s,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e,t=function(){this.a=1};t.prototype.b=1;for(e in new t)return"b"===e}(),outerHTML:function(){return document.createElement("div").outerHTML!==i}()},o=t.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},t.getRandomValue=function(e,s){var n,r;return e===i||s===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(r=new Uint16Array(1),window.crypto.getRandomValues(r),n=r[0]%(s-e)+e):n=Math.random()*(s-e)+e,0|n)},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,s=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;s.push(t[i])}return s},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:ej.userAgent()!==!1,pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,n=0;n<s.length;n++)if(0===s[n].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}()}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/common/ej.data.min",["./ej.core.min"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";var n,r,o,l,a,d,h,c,u;t.DataManager=function(i,n,r){if(!(this instanceof t.DataManager))return new t.DataManager(i,n,r);i||(i=[]),"string"==typeof(r=r||i.adaptor)&&(r=new t[r]);var o=[],l=this;return i instanceof Array?o={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),o={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,async:i.async,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,jsonp:i.jsonp,dataType:i.dataType,offline:i.offline!==s?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||R(i))&&(o={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(o={url:i,offline:!1,dataType:"json",json:[]}),o.requiresFormat!==s||t.support.cors||(o.requiresFormat=!!c(o.crossDomain)||o.crossDomain),o.dataType===s&&(o.dataType="json"),this.dataSource=o,this.defaultQuery=n,o.url&&o.offline&&!o.json.length?(this.isDataAvailable=!1,this.adaptor=r||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(n||t.Query()).done(function(e){l.dataSource.offline=!0,l.isDataAvailable=!0,o.json=e.result,l.adaptor=new t.JsonAdaptor})):this.adaptor=o.offline?new t.JsonAdaptor:new t.ODataAdaptor,!o.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(o.jsonp="callback"),this.adaptor=r||this.adaptor,o.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,o.timeTillExpiration,o.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,n,r,o){var l,d,h;return"function"==typeof i&&(o=r,r=n,n=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||u("DataManager - executeQuery() : A query is required to execute"),l=e.Deferred(),l.then(n,r,o),d={query:i},this.dataSource.offline||this.dataSource.url==s?t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?a(function(){this._localQueryProcess(i,d,l)},this):this._localQueryProcess(i,d,l):(h=this.adaptor.processQuery(this,i),t.isNullOrUndefined(h.url)?a(function(){d=this._getDeferedArgs(i,h,d),l.resolveWith(this,[d])},this):this._makeRequest(h,l,d,i)),l.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=M(e._fromTable,i.result,this),i.getKnockoutModel=j(i.result),i},executeLocal:function(i){var s,n;if(this.defaultQuery||i instanceof t.Query||u("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||u("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery,s=this.adaptor.processQuery(this,i),i._subQuery){var r=i._subQuery._fromTable,o=i._subQuery._lookup,l=i._requiresCount?s.result:s;for(o&&o instanceof Array&&p(i._subQuery._fKey,r,l,o,i._subQuery._key),n=0;n<l.length;n++)l[n][r]instanceof Array&&(l[n]=e.extend({},l[n]),l[n][r]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(l[n][r].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,n,r){var o,l=!!r._subQuerySelector,a=h(function(e){n.error=e,s.rejectWith(this,[n])},this),c=h(function(e,t,i,o,a,d,h){l||(n.xhr=i,n.count=parseInt(t,10),n.result=e,n.request=o,n.aggregates=d,n.getTableModel=M(r._fromTable,e,this),n.getKnockoutModel=j(e),n.actual=a,n.virtualSelectRecords=h,s.resolveWith(this,[n]))},this),u=h(function(t,i){var s,o,d=e.Deferred(),h={parent:n};return r._subQuery._isChild=!0,s=this.adaptor.processQuery(this,r._subQuery,t?this.adaptor.processResponse(t):i),o=this._makeRequest(s,d,h,r._subQuery),l||d.then(function(e){t&&(p(r._subQuery._fKey,r._subQuery._fromTable,t,e,r._subQuery._key),c(t))},a),o},this),m=d(function(e,i,s,n){s.getResponseHeader("Content-Type").indexOf("xml")==-1&&t.dateParse&&(e=t.parseJSON(e));var o=this.adaptor.processResponse(e,this,r,s,n),a=0,d=null,h=e.virtualSelectRecords;if(r._requiresCount&&(a=o.count,d=o.aggregates,o=o.result),!r._subQuery)return void c(o,a,s,n,e,d,h);l||u(o)},this),g=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:h(this._beforeSend,this),processData:!1,success:m,error:a},i);return"async"in this.dataSource&&(g.async=this.dataSource.async),g=e.ajax(g),l&&(o=r._subQuerySelector.call(this,{query:r._subQuery,parent:r}),o&&o.length?(g=e.when(g,u(null,o)),g.then(d(function(e,t,i){var s,n=this.adaptor.processResponse(e[0],this,r,e[2],i[0]),o=0;r._requiresCount&&(o=n.count,n=n.result),s=this.adaptor.processResponse(t[0],this,r._subQuery,t[2],i[1]),o=0,r._subQuery._requiresCount&&(o=s.count,s=s.result),p(r._subQuery._fKey,r._subQuery._fromTable,n,s,r._subQuery._key),l=!1,c(n,o,e[2])},this),a)):l=!1),g},_beforeSend:function(e,t){var i,s,n,r;for(this.adaptor.beforeSend(this,e,t),i=this.dataSource.headers,n=0;i&&n<i.length;n++){s=[];for(r in i[n])s.push(r),e.setRequestHeader(r,i[n][r])}},saveChanges:function(i,s,n,r){var o,l,a;return n instanceof t.Query&&(r=n,n=null),o={url:n,key:s||this.dataSource.key},l=this.adaptor.batchRequest(this,i,o,r),this.dataSource.offline?l:(a=e.Deferred(),e.ajax(e.extend({beforeSend:h(this._beforeSend,this),success:d(function(e,t,s,n){a.resolveWith(this,[this.adaptor.processResponse(e,this,null,s,n,i)])},this),error:function(e){a.rejectWith(this,[{error:e}])}},l)),a.promise())},insert:function(i,s,n){var r,o;return i=g.replacer(i),s instanceof t.Query&&(n=s,s=null),r=this.adaptor.insert(this,i,s,n),this.dataSource.offline?r:(o=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:g.parseJson(e)}catch(r){e=[]}e=this.adaptor.processResponse(g.parseJson(e),this,null,s,n),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},r)),o.promise())},remove:function(i,s,n,r){var o,l;return"object"==typeof s&&(s=s[i]),n instanceof t.Query&&(r=n,n=null),o=this.adaptor.remove(this,i,s,n,r),this.dataSource.offline?o:(l=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:g.parseJson(e)}catch(r){e=[]}e=this.adaptor.processResponse(g.parseJson(e),this,null,s,n),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise())},update:function(i,s,n,r){var o,l;return s=g.replacer(s),n instanceof t.Query&&(r=n,n=null),o=this.adaptor.update(this,i,s,n,r),this.dataSource.offline?o:(l=e.Deferred(),e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:g.parseJson(e)}catch(r){e=[]}e=this.adaptor.processResponse(g.parseJson(e),this,null,s,n),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise())},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html())),i=i.jquery?i[0]:i;var s=i.tagName.toLowerCase();return"table"!==s&&u("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var p=function(e,i,s,n,r){var o,l,a,d={};for(n.result&&(n=n.result),n.GROUPGUID&&u("ej.DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)a=t.getObject(e,n[o]),l=d[a]||(d[a]=[]),l.push(n[o]);for(o=0;o<s.length;o++)s[o][i]=d[t.getObject(r||e,s[o])]},m={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},g={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,g.jsonReviver):e instanceof Array?g.iterateAndReviveArray(e):"object"===t&&g.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?g.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?g.parseJson(e[t]):g.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var i in e)i.startsWith("__")||(t=e[i],"object"==typeof t?t instanceof Array?g.iterateAndReviveArray(t):g.iterateAndReviveJson(t):e[i]=g.jsonReviver(i,t))},jsonReviver:function(e,t){var i,s,n=t;if("string"==typeof t){if(i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t))return g.replacer(new Date(parseInt(i[1])));/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=g.replacer(new Date(t)),isNaN(t)&&(s=n.split(/[^0-9]/),t=g.replacer(new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5]))))}return t},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e){return t.isPlainObject(e)?g.jsonReplacer(e):e instanceof Array?g.arrayReplacer(e):e instanceof Date?g.jsonReplacer({val:e}).val:e},jsonReplacer:function(e){var i;for(var s in e)(i=e[s])instanceof Date&&(e[s]=new Date(+i+36e5*t.serverTimezoneOffset));return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=g.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=g.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=g.isJson,t.parseJSON=g.parseJson,t.dateParse=!0,t.isGUID=g.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):u("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,n){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeQuery(this,i,s,n):u("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeLocal(this):u("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,n){i=(i||t.FilterOperators.equal).toLowerCase();var r=null;return"string"==typeof e?r=new t.Predicate(e,i,s,n):e instanceof t.Predicate?r=e:u("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:r}),this},search:function(e,i,s,n){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):(i=[],n=i),"boolean"==typeof s&&(n=s,s=null),s=s||t.FilterOperators.contains,s.length<3&&(s=t.data.operatorSymbols[s]);var r=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:n,comparer:r}}),this},sortBy:function(e,i,s){var n,r,o,l,a=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(o=0;o<e.length;o++)this.sortBy(e[o],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(a="custom"),i&&"string"!=typeof i||(a=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s)for(n=f(this.queries,"onSortBy"),o=0;o<n.length;o++)if("string"==typeof(r=n[o].e.fieldName)){if(r===e)return this}else if(r instanceof Array)for(l=0;l<r.length;l++)if(r[l]===e||e.toLowerCase()===r[l]+" desc")return this;return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:a}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return("number"!=typeof e||"number"!=typeof t)&&u("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&u("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&u("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||u("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||u("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},init:function(){},extend:function(t){var i,s,n=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};n.prototype=new this.type,n.prototype.type=n,i=n.prototype.base={};for(s in t)n.prototype[s]&&(i[s]=n.prototype[s]);return e.extend(!0,n.prototype,t),n},processQuery:function(){},processResponse:function(e){return e.d?e.d:e},convertToQueryString:function(t){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,r,o,l,a,d,h=f(t.queries,"onSortBy"),u=f(t.queries,"onGroup"),p=f(t.queries,"onWhere"),m=f(t.queries,"onSearch"),g=f(t.queries,"onAggregates"),b=_(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),y=t._params,w=e.dataSource.url,C=null,x=this.options,S={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};for(b.onPage?(s=b.onPage,r=n(s.pageIndex,t),C=n(s.pageSize,t),r=(r-1)*C):b.onRange&&(s=b.onRange,r=s.start,C=s.end-s.start),o=0;o<h.length;o++)s=n(h[o].e.fieldName,t),S.sorted.push(v(this,"onEachSort",{name:s,direction:h[o].e.direction},t));for(i&&(s=this.getFiltersFrom(i,t))&&S.filters.push(v(this,"onEachWhere",s.toJSON(),t)),o=0;o<p.length;o++){S.filters.push(v(this,"onEachWhere",p[o].e.toJSON(),t));for(a in S.filters[o])c(S[a])&&delete S[a]}for(o=0;o<m.length;o++)s=m[o].e,S.searches.push(v(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(o=0;o<u.length;o++)S.grouped.push(n(u[o].e.fieldName,t));for(o=0;o<g.length;o++)s=g[o].e,S.aggregates.push({type:s.type,field:n(s.field,t)});l={},l[x.from]=t._fromTable,x.expand&&(l[x.expand]=t._expands),l[x.select]=b.onSelect?v(this,"onSelect",n(b.onSelect.fieldNames,t),t):"",l[x.count]=t._requiresCount?v(this,"onCount",t._requiresCount,t):"",l[x.search]=S.searches.length?v(this,"onSearch",S.searches,t):"",l[x.skip]=b.onSkip?v(this,"onSkip",n(b.onSkip.nos,t),t):"",l[x.take]=b.onTake?v(this,"onTake",n(b.onTake.nos,t),t):"",l[x.where]=S.filters.length||S.searches.length?v(this,"onWhere",S.filters,t):"",l[x.sortBy]=S.sorted.length?v(this,"onSortBy",S.sorted,t):"",l[x.group]=S.grouped.length?v(this,"onGroup",S.grouped,t):"",l[x.aggregates]=S.aggregates.length?v(this,"onAggregates",S.aggregates,t):"",l.param=[],v(this,"addParams",{dm:e,query:t,params:y,reqParams:l});for(a in l)(c(l[a])||""===l[a]||0===l[a].length)&&delete l[a];return x.skip in l&&x.take in l||null===C||(l[x.skip]=v(this,"onSkip",r,t),l[x.take]=v(this,"onTake",C,t)),d=this.pvt,this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(l),url:w,ejPvtData:d,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(l,t,e),s=(e.dataSource.url.indexOf("?")!==-1?"&":"/")+s,{type:"GET",url:s.length?w.replace(/\/*$/,s):w,ejPvtData:d})},convertToQueryString:function(t,i,s){return s.dataSource.url&&s.dataSource.url.indexOf("?")!==-1?e.param(t):"?"+e.param(t)},processResponse:function(e,i,n,r,o,l){var a,d,h,c,u,p,m=o.ejPvtData||{},g=e.groupDs;if(r&&r.getResponseHeader("Content-Type")&&r.getResponseHeader("Content-Type").indexOf("xml")!=-1&&9==e.nodeType)return n._requiresCount?{result:[],count:0}:[];if((a=JSON.parse(o.data))&&"batch"===a.action&&e.added)return l.added=e.added,l;if(e.d&&(e=e.d),m&&m.aggregates&&m.aggregates.length){var f,_=m.aggregates,h={},v={};for(("count"in e&&(h.count=e.count),e.result&&(h.result=e.result),e.aggregate&&(e=e.aggregate),c=0);c<_.length;c++)(f=t.aggregates[_[c].type])&&(v[_[c].field+" - "+_[c].type]=f(e,_[c].field));h.aggregates=v,e=h}if(m&&m.groups&&m.groups.length){for((d=m.groups,h={},"count"in e&&(h.count=e.count),e.aggregates&&(h.aggregates=e.aggregates),e.result&&(e=e.result),c=0);c<d.length;c++)u=null,p=k(d[c],n.queries),t.isNullOrUndefined(g)||(g=t.group(g,d[c],null,p)),e=t.group(e,d[c],m.aggregates,p,u,g);return h.count!=s?h.result=e:h=e,h}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var n={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:n}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n)}},beforeSend:function(){},insert:function(e,t,i,s){var n={value:t,table:i,action:"insert"};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:n}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(n)}},remove:function(e,t,i,s,n){var r={key:i,keyColumn:t,table:s,action:"remove"};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:r}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},update:function(e,t,i,s,n){var r={value:i,action:"update",keyColumn:t,key:i[t],table:s};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:r}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},getFiltersFrom:function(e,i){var s;e instanceof Array&&e.length||u("ej.SubQuery: Array of key values required");var n,r=i._fKey,o=r,l=i._key,a=[],d="object"!=typeof e[0];for("object"!=typeof e[0]&&(o=null),s=0;s<e.length;s++)n=d?e[s]:t.pvt.getObject(l||o,e[s]),a.push(new t.Predicate(r,"==",n));return t.Predicate.or(a)},addParams:function(e){var t,i,s=e.dm,n=e.query,r=e.params,o=e.reqParams;for(o.params={},t=0;i=r[t];t++)o[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),o[i.key]=i.value,i.fn&&(o[i.key]=i.fn.call(n,i.key,n,s)),o.params[i.key]=o[i.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var n=t.UrlAdaptor.prototype.processQuery(e,i,s),r=t.parseJSON(n.data),o={};return o.value=r,v(this,"addParams",{dm:e,query:i,params:i._params,reqParams:o}),{data:JSON.stringify(o),url:n.url,ejPvtData:n.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t,i,s,n,r=e.dm,o=e.query,l=e.params,a=e.reqParams;for(a.params={},t=0;i=l[t];t++)a[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),s=i.key,n=i.value,i.fn&&(n=i.fn.call(o,i.key,o,r)),a[s]=n,a.params[s]=a[s]}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){var n,r;t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor"),n={keys:[],results:[]},window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(n)),r=this.guidId,t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(r)),s=[],n=0;n<e.results.length;n++)e.results[n].timeStamp=new Date-new Date(e.results[n].timeStamp),new Date-new Date(e.results[n].timeStamp)>i&&s.push(n);for(s,n=0;n<s.length;n++)e.results.splice(s[n],1),e.keys.splice(s[n],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(e))},i)},generateKey:function(e,t){var i,s,n,r,o=f(t.queries,"onSortBy"),l=f(t.queries,"onGroup"),a=f(t.queries,"onWhere"),d=f(t.queries,"onSearch"),h=(f(t.queries,"onPage"),_(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),c=(t._params,e);for(h.onPage&&(c+=h.onPage.pageIndex),o.forEach(function(e){c+=e.e.direction+e.e.fieldName}),l.forEach(function(e){c+=e.e.fieldName}),d.forEach(function(e){c+=e.e.searchKey}),i=0;i<a.length;i++)if(s=a[i],s.e.isComplex){for(n=t.clone(),n.queries=[],r=0;r<s.e.predicates.length;r++)n.queries.push({fn:"onWhere",e:s.e.predicates[r],filter:t.queries.filter});c+=s.e.condition+this.generateKey(e,n)}else c+=s.e.field+s.e.operator+s.e.value;return c},processQuery:function(e,i){var s,n,r=this.generateKey(e.dataSource.url,i);return window.localStorage&&(s=t.parseJSON(window.localStorage.getItem(this.guidId))),null==(n=s?s.results[s.keys.indexOf(r)]:null)||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):n},processResponse:function(i,s,n,r,o,l){var a;if(this._insertAction||o&&this.cacheAdaptor.options.batch&&o.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,n,r,o,l);var i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),d=this.generateKey(s.dataSource.url,n),h={};for(window.localStorage&&(h=t.parseJSON(window.localStorage.getItem(this.guidId))),a=e.inArray(d,h.keys),a!=-1&&(h.results.splice(a,1),h.keys.splice(a,1)),h.results[h.keys.push(d)-1]={keys:d,result:i.result,timeStamp:new Date,count:i.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var f=function(e,t){return e.filter(function(e){return e.fn===t})||[]},_=function(e,t){for(var i=e.filter(function(e){return t.indexOf(e.fn)!==-1
}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},v=function(e,t,i,s){if(e[t]){var n=e[t](i,s);c(n)||(i=n)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},onPredicate:function(e,i,s){var n,r,o,l="",a=e.value,d=typeof a,h=this._p(e.field);return a instanceof Date&&(a="datetime'"+g.replacer(a).toJSON()+"'"),"string"===d&&(a.indexOf("'")!=-1&&(a=a.replace(new RegExp(/'/g),"''")),a="'"+a+"'",s&&(h="cast("+h+", 'Edm.String')"),t.isGUID(a)&&(r="guid"),e.ignoreCase&&(r||(h="tolower("+h+")"),a=a.toLowerCase())),(n=t.data.odBiOperator[e.operator])?(l+=h,l+=n,r&&(l+=r),l+a):(n=t.data.odUniOperator[e.operator])&&"string"===d?("substringof"===n&&(o=a,a=h,h=o),l+=n+"(",l+=h+",",r&&(l+=r),l+(a+")")):""},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){var i,s;for(0===e.fields.length&&u("Query() - Search : oData search requires list of field names to search"),i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t,i=[];if(e.name instanceof Array)for(t=0;t<e.name.length;t++)i.push(this._p(e.name[t]));else i.push(this._p(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return e===!0?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",m.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,n,r,o,l){var a,d,h,u,p,m,f,_,v,b;if(!t.isNullOrUndefined(i.d)&&(a=n&&n._requiresCount?i.d.results:i.d,!t.isNullOrUndefined(a)))for(v=0;v<a.length;v++)t.isNullOrUndefined(a[v].__metadata)||delete a[v].__metadata;if(d=o&&o.ejPvtData,r&&r.getResponseHeader("Content-Type")&&r.getResponseHeader("Content-Type").indexOf("xml")!=-1&&9==i.nodeType)return n._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(h=r.getResponseHeader("Content-Type"),h=h.substring(h.indexOf("=batchresponse")+1),i=i.split(h),i.length<2)return;for(i=i[1],m=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(m[0],""),f=m[1],i=i.split(f),v=i.length;v>-1;v--)/\bContent-ID:/i.test(i[v])&&/\bHTTP.+201/.test(i[v])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[v])[1]),l.added[u]&&(p=g.parseJson(/^\{.+\}/m.exec(i[v])[0]),e.extend(l.added[u],this.processResponse(p))));return l}var y=r&&r.getResponseHeader("DataServiceVersion"),w=null,C={};if(y=y&&parseInt(y,10)||2,n&&n._requiresCount&&((i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"])),3===y&&i.value&&(i=i.value),i.d&&(i=i.d),y<3&&i.results&&(i=i.results),d&&d.aggregates&&d.aggregates.length){var x,S=d.aggregates,T={};for(v=0;v<S.length;v++)(x=t.aggregates[S[v].type])&&(T[S[v].field+" - "+S[v].type]=x(i,S[v].field));C=T}if(d&&d.groups&&d.groups.length)for(_=d.groups,v=0;v<_.length;v++)b=k(_[v],n.queries),i=t.group(i,_[v],d.aggregates,b);return c(w)?i:{result:i,count:w,aggregates:C}},convertToQueryString:function(e,t,i){var s,n=[],r=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(s in e)n.push(s+"="+e[s]);return n=n.join("&"),i.dataSource.url&&i.dataSource.url.indexOf("?")!==-1&&!r?n:n.length?r+"?"+n:r||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")",data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,i,s){var n=s.guid=t.getGuid(m.batchPre),r=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(m.changeSet)},l="--"+n+"\n";return l+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(i.added,o),l+=this.generateUpdateRequest(i.changed,o),l+=this.generateDeleteRequest(i.deleted,o),l+=o.cSet+"--\n",l+="--"+n+"--",{type:"POST",url:r,contentType:"multipart/mixed; charset=UTF-8;boundary="+n,data:l}},generateDeleteRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=m.changeSetContent+"\n\n",i+="DELETE ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+m.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=m.batchChangeSetContentType+"\n";return i+"\n"},generateInsertRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=m.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+m.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=m.batchChangeSetContentType+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=m.changeSetContent+"\n\n",i+="PUT ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+m.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=m.batchChangeSetContentType+"\n\n",i+=JSON.stringify(e[s])+"\n\n";return i},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return e===!0?"true":""},onPredicate:function(e,i,s){var n="",r=e.value,o=r instanceof Date;return t.data.odUniOperator.contains="contains",n=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",o&&(n=n.replace(/datetime'(.*)'$/,"$1")),n},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(){return this.pvt.search.join(" OR ")},beforeSend:function(){},processQuery:function(e,i){for(var s,n,r=/\/[\d*\/]*/g,o="",l=i._expands.length-1;l>0;l--)if(o.indexOf(i._expands[l])>=0)i._expands.pop();else if(r.test(i._expands[l])){for(o=i._expands.pop(),s=o.replace(r,"($expand="),n=0;n<o.split(r).length-1;n++)s+=")";i._expands.unshift(s),l++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,n,r,o,l){var a,d,h,u,p,m,f,_,v,b,y=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&r.getResponseHeader("Content-Type").indexOf("xml")!=-1&&9==i.nodeType)return n._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(a=r.getResponseHeader("Content-Type"),a=a.substring(a.indexOf("=batchresponse")+1),i=i.split(a),i.length<2)return;for(i=i[1],u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(u[0],""),p=u[1],i=i.split(p),v=i.length;v>-1;v--)/\bContent-ID:/i.test(i[v])&&/\bHTTP.+201/.test(i[v])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(i[v])[1]),l.added[d]&&(h=g.parseJson(/^\{.+\}/m.exec(i[v])[0]),e.extend(l.added[d],this.processResponse(h))));return l}if(m=null,f={},n&&n._requiresCount&&"@odata.count"in i&&(m=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,y&&y.aggregates&&y.aggregates.length){var w,C=y.aggregates,x={};for(v=0;v<C.length;v++)(w=t.aggregates[C[v].type])&&(x[C[v].field+" - "+C[v].type]=w(i,C[v].field));f=x}if(y&&y.groups&&y.groups.length)for(_=y.groups,v=0;v<_.length;v++)b=k(_[v],n.queries),i=t.group(i,_[v],y.aggregates,b);return c(m)?i:{result:i,count:m,aggregates:f}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,n,r=e.dataSource.json.slice(0),o=r.length,l=!0,a={},d=0;d<t.queries.length;d++)n=t.queries[d],i=this[n.fn].call(this,r,n.e,t),"onAggregates"==n.fn?a[n.e.field+" - "+n.e.type]=i:r=i!==s?i:r,("onPage"===n.fn||"onSkip"===n.fn||"onTake"===n.fn||"onRange"===n.fn)&&(l=!1),l&&(o=r.length);return t._requiresCount&&(r={result:r,count:o,aggregates:a}),r},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase))return!0;return!1})):e},onSortBy:function(e,i,s){var r,o,l;if(!e)return e;if(!(o=n(i.fieldName,s)))return e.sort(i.comparer);if(o instanceof Array){for(o=o.slice(0),l=o.length-1;l>=0;l--)o[l]&&(r=i.comparer,o[l].endsWith(" desc")&&(r=t.pvt.fnSort(t.sortOrder.Descending),o[l]=o[l].replace(" desc","")),e=T(e,o[l],r,[]));return e}return T(e,o,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){var r,o,l,a,d;if(!e)return e;if(r=f(s.queries,"onAggregates"),o=[],r.length)for(a=0;a<r.length;a++)l=r[a].e,o.push({type:l.type,field:n(l.field,s)});return d=k(i.fieldName,s.queries),t.group(e,n(i.fieldName,s),o,d)},onPage:function(e,t,i){var s=n(t.pageSize,i),r=(n(t.pageIndex,i)-1)*s,o=r+s;return e?e.slice(r,o):e},onRange:function(e,t){return e?e.slice(n(t.start),n(t.end)):e},onTake:function(e,t){return e?e.slice(0,n(t.nos)):e},onSkip:function(e,t){return e?e.slice(n(t.nos)):e},onSelect:function(e,i){return e?t.select(e,n(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s){var n,r=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),n=0;n<r.length&&t.getObject(i,r[n])!==s;n++);return n!==r.length?r.splice(n,1):null},update:function(i,s,n){for(var r=i.dataSource.json,o=t.getObject(s,n),l=0;l<r.length&&t.getObject(s,r[l])!==o;l++);return l<r.length?e.extend(r[l],n):null}}),t.ForeignKeyAdaptor=function(i,n){var r=(new t[n||"JsonAdaptor"]).extend({init:function(){var e,s;for(this.foreignData=[],this.key=[],this.adaptorType=n,this.value=[],this.fValue=[],this.keyField=[],e=i,s=0;s<e.length;s++)this.foreignData[s]=e[s].dataSource,this.key[s]=e[s].foreignKeyField,this.fValue[s]=t.isNullOrUndefined(e[s].field)?e[s].foreignKeyValue:e[s].field+"_"+e[s].foreignKeyValue,this.value[s]=e[s].foreignKeyValue,this.keyField[s]=e[s].field||e[s].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s,n,r,o=e.dataSource.json;if(this.initial){for(s=0;s<o.length;s++)for(n=this,r=0;r<this.foreignData.length;r++)this.foreignData[r].filter(function(e){t.getObject(n.key[r],e)==t.getObject(n.keyField[r],o[s])&&(o[s][n.fValue[r]]=t.getObject(n.value[r],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var n,r,o,l=0;l<this.foreignData.length;l++)n=this,r=i[this.fValue[l]],"string"!=typeof r||isNaN(r)||(r=t.parseFloat(r)),o=e.grep(n.foreignData[l],function(e){return e[n.value[l]]==r})[0],t.isNullOrUndefined(o)&&(o=e.grep(n.foreignData[l],function(e){return e[n.key[l]]==r})[0],t.getObject(this.value[l],o)!=s&&t.createObject(n.value[l],t.getObject(this.value[l],o),i)),t.getObject(this.value[l],o)!=s&&t.createObject(this.keyField[l],t.getObject(this.key[l],o),i)},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert"})}},update:function(e,i,s,n){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,n),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:n})}}});return e.extend(this,new r),this},t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,i,s){for(var n=0;n<i.added.length;n++)t.JsonAdaptor.prototype.insert(e,i.added[n]);for(n=0;n<i.changed.length;n++)t.JsonAdaptor.prototype.update(e,s.key,i.changed[n]);for(n=0;n<i.deleted.length;n++)t.JsonAdaptor.prototype.remove(e,s.key,i.deleted[n]);return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:i.changed,added:i.added,deleted:i.deleted,action:"batch",table:s.url,key:s.key})}}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},processResponse:function(e,i,s,n,r){var o,l,a,d=r&&r.ejPvtData;if(r&&"post"!=r.type.toLowerCase()){var h=n&&n.getResponseHeader("DataServiceVersion"),u=null,p={};if(h=h&&parseInt(h,10)||2,s&&s._requiresCount&&(c(e.Count)||(u=e.Count)),h<3&&e.Items&&(e=e.Items),d&&d.aggregates&&d.aggregates.length){var m,g=d.aggregates,f={};for(l=0;l<g.length;l++)(m=t.aggregates[g[l].type])&&(f[g[l].field+" - "+g[l].type]=m(e,g[l].field));p=f}if(d&&d.groups&&d.groups.length)for(o=d.groups,l=0;l<o.length;l++)a=k(o[l],s.queries),e=t.group(e,o[l],d.aggregates,a);return c(u)?e:{result:e,count:u,aggregates:p}}}}),n=function(e,t){return"function"==typeof e?e.call(t||{}):e},t.TableModel=function(i,s,n,r){var o,l,a,d;if(!P(this,t.TableModel))return new t.TableModel(s);for(P(s,Array)||u("ej.TableModel - Json Array is required"),o=[],a=h(y,this),d=0;d<s.length;d++)l=new t.Model(s[d],this),l.state="unchanged",l.on("stateChange",a),r&&l.computes(r),o.push(l);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=n,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&P(this.dataManager,t.DataManager)||u("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(h(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(h(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){var t;this.key||u("TableModel - update : Primary key should be assigned to TableModel.key");var i,s=e,n=this.key,r=s[n];i=this.rows.array.filter(function(e){return e.get(n)===r}),i=i[0];for(t in s)i.set(t,s[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:i,table:this})},remove:function(e){var t,i,n,r;for(this.key||u("TableModel - update : Primary key should be assigned to TableModel.key"),t=this.key,i=-1,e&&"object"==typeof e&&(e=e[t]!==s?e[t]:e.get(t)),r=0;r<this.rows.length();r++)if(this.rows.array[r].get(t)===e){i=r;break}i>-1&&(n=this.rows.removeAt(i),n.markDelete(),this._deleted.push({model:n,position:i}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:n,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s,n=r,l=e(t.html()),a=this.toArray();for(e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(n=o),n.insertBefore(t),t.detach().empty(),s=0;s<a.length;s++)i=l.clone(),a[s].bindTo(i),t.append(i);t.insertAfter(n),n.remove()}},r=i?e(document.createElement("div")):{},o=i?e(document.createElement("tr")):{},t.Model=function(i,s,n){"string"==typeof s&&(n=s,s=null),this.$id=F("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=n||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,n,r=this.json,o=e;for(e=e.split("."),n=0;n<e.length-1;n++)e=e[0],r=r[e[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=r[e],this.actual[e]!==s||e in this.actual||(this.actual[e]=t),r[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:o,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||u("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,n,r,o=e(t),l=o.find("[ej-observe], [ej-computed], [ej-prop]"),a=l.length;for(o.data("ejModel",this),n={fields:[],props:[],computes:[]},r=0;r<a;r++)i=l.eq(r),s=i.attr("ej-prop"),s&&this._processAttrib(s,i,n),(s=i.attr("ej-observe"))&&this._props.indexOf(s)!==-1?this._processField(i,s,n):(s=i.attr("ej-computed"))&&this._processComputed(s,i,n);o.data("ejModelBinding"+this.$id,n)},unbind:function(t){var i,s,n,r,o,l,a,d={props:this._attrEls,computes:this._computeEls},h=!1;t&&(d=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||d,h=!0);for(s in this.computed)i=d.computes[s],s=this.computed[s],i&&s.deps&&(this.off(s.deps.join(" "),i.handle),h&&delete this._computeEls[s]);h||(this._computeEls={});for(s in d.props)(i=d.props[s])&&(this.off(i.deps.join(" "),i.handle),delete d.props[s],h&&delete this._attrEls[s]);if(h||(this._attrEls={}),d.fields&&d.fields.length)for(n=d.fields.length,a=0;a<n;a++)r=d.fields[a],e(r).off("change",null,this._changeHandler),l=this.formElements.indexOf(r.tagName.toLowerCase())!==-1?"input":"read",(o=this._updates[l].indexOf(r))!==-1&&this._updates[l].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,n,r=b(e),o=this.formElements.indexOf(t[0].tagName.toLowerCase())!==-1?"val":"html";this.computed[e]&&this.computed[r]||(this.computed[r]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=r),s=this.computed[e],s.get||(s.get=function(){s.value.call(this.json)}),n=s.deps,s=s.value,this._updateDeps(n),this._updateElement(t,o,s),s={el:t,handle:h(this._computeHandle,this,{value:e,type:o})},this._computeEls[e]=s,i.computes[e]=s,this.on(n.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],n=0;n<i.length;n++)i[n].startsWith("#ej.#")&&(t=i[n].replace("#ej.#","").split(" ")[0])&&this._props.indexOf(t)!==-1&&s.push(t);return s},_processAttrib:function(e,t,i){var s,n,r,o,l={};for(e=e.replace(/^ +| +$/g,"").split(";"),r=0;r<e.length;r++)e[r]=e[r].split(":"),e[r].length<2||(s=e[r][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),l[s]=e[r][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));e=l,o=[];for(s in e)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),l=F("emak"),n={el:t,handle:h(this._attrHandle,this,l),value:e,deps:o},t.prop("ejmodelattrkey",l),i.props[l]=n,this._attrEls[l]=n,this.on(o.join(" "),n.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,n=this.json,r=this.computed;for(var o in i)s=i[o],s in n?s=n[s]:s in r&&(s=r[s])&&(s=s.value.call(e.extend({},this.json,r))),c(s)||t.prop(o,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var n=t.length-1;n>-1;n--)t[n].offsetParent?e(t[n])[i](s):t.splice(n,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},n=this.get(t);return i.fields.push(e[0]),this.formElements.indexOf(e[0].tagName.toLowerCase())===-1?(e.html(n),this._updates[t].read.push(e[0])):(e.val(n).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var b=function(e){return e.replace(/[^\w]+/g,"_")},y=function(e){this.setDirty(!0,e.model)};if(t.Predicate=function(e,i,s,n){return this instanceof t.Predicate?("string"==typeof e?(this.field=e,this.operator=i,this.value=s,this.ignoreCase=n,this.isComplex=!1,this._comparer=t.data.fnOperators.processOperator(this.operator)):(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s)),this):new t.Predicate(e,i,s,n)},t.Predicate.and=function(){return l._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return l._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){var t,i,s;if(P(e,Array)){for(t=[],i=0,s=e.length;i<s;i++)t.push(l._fromJSON(e[i]));return t}return l._fromJSON(e)},l={_combinePredicates:function(e,i){if(!e.length)return s;if(1===e.length){if(!P(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))},_combine:function(e,i,s,n,r,o){return i instanceof t.Predicate?t.Predicate[r](e,i):"string"==typeof i?t.Predicate[r](e,new t.Predicate(i,s,n,o)):u("Predicate - "+r+" : invalid arguments")},_fromJSON:function(e){var i;if(!e||P(e,t.Predicate))return e;var s=e.predicates||[],n=s.length,r=[];for(i=0;i<n;i++)r.push(l._fromJSON(s[i]));return e.isComplex?new t.Predicate(r[0],e.condition,r.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase)}},t.Predicate.prototype={and:function(e,t,i,s){return l._combine(this,e,t,i,"and",s)},or:function(e,t,i,s){return l._combine(this,e,t,i,"or",s)},validate:function(e){var i,s,n,r=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase);for(i="and"===this.condition,n=0;n<r.length;n++)if(s=r[n].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t,i;if(this.isComplex)for(e=[],t=this.predicates,i=0;i<t.length;i++)e.push(t[i].toJSON());return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:e}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,n=[],r={},o=0;o<e.length;o++)(s=O(e,t,o))in r||(n.push(i?e[o]:s),r[s]=1);return n},sum:function(e,t){for(var i,s=0,n="number"!=typeof O(e,t,0),r=0;r<e.length;r++)i=O(e,t,r),isNaN(i)||null===i||(n&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],n=0;n<e.length;n++)s.push(t.pvt.extractFields(e[n],i));return s},group:function(i,s,n,r,o,l){var a,d,h,c,u,p,m,g,f,_;if(o=o||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(f=0;f<i.length;f++)t.isNullOrUndefined(l)?(i[f].items=t.group(i[f].items,s,n,r,i.level+1),i[f].count=i[f].items.length):(a=-1,_=e.grep(l,function(e){return e.key==i[f].key}),a=l.indexOf(_[0]),i[f].items=t.group(i[f].items,s,n,r,i.level+1,l[a].items),i[f].count=l[a].count);return i.childLevels+=1,i}for(d={},h=[],h.GROUPGUID=t.pvt.consts.GROUPGUID,h.level=o,h.childLevels=0,h.records=i,p=0;p<i.length;p++)c=O(i,s,p),t.isNullOrUndefined(r)||(c=r(c,s)),d[c]||(d[c]={key:c,count:0,items:[],aggregates:{},field:s},h.push(d[c]),t.isNullOrUndefined(l)||(u=e.grep(l,function(e){return e.key==d[c].key}),d[c].count=u[0].count)),d[c].count=t.isNullOrUndefined(l)?d[c].count+=1:d[c].count,d[c].items.push(i[p]);if(n&&n.length)for(p=0;p<h.length;p++){for(m={},f=0;f<n.length;f++)g=t.aggregates[n[f].type],t.isNullOrUndefined(l)?g&&(m[n[f].field+" - "+n[f].type]=g(h[p].items,n[f].field)):(_=e.grep(l,function(e){return e.key==h[p].key}),g&&(m[n[f].field+" - "+n[f].type]=g(_[0].items,n[f].field)));h[p].aggregates=m}return h},parseTable:function(i,s,n){var r,o,l,a,d,h,c,u=i.rows,p=[],m=[];if(!u.length)return[];switch(n=n||0,(s||"").toLowerCase()){case t.headerOption.tHead:r=i.tHead.rows[n];break;case t.headerOption.row:default:r=i.rows[n]}for(l=r.cells,o=0;o<l.length;o++)p.push(e.trim(l[o].innerHTML));for(o=n+1;o<u.length;o++){for(a={},d=u[o].cells,h=0;h<d.length;h++)c=d[h].innerHTML,a[p[h]]="string"==typeof c&&e.isNumeric(c)?Number(c):c;m.push(a)}return m}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e){return e.length}},t.pvt={filterQueries:f,mergeSort:function(e,i,s){if(e.length<=1)return e;var n=parseInt(e.length/2,10),r=e.slice(0,n),o=e.slice(n);return r=t.pvt.mergeSort(r,i,s),o=t.pvt.mergeSort(o,i,s),t.pvt.merge(r,o,i,s)},getItemFromComparer:function(e,i,s){var n,r,o,l=0,a="string"==typeof O(e,i,0);if(e.length)for(;t.isNullOrUndefined(n)&&l<e.length;)n=O(e,i,l),o=e[l++];for(;l<e.length;l++)r=O(e,i,l),t.isNullOrUndefined(r)||(a&&(n=+n,r=+r),s(n,r)>0&&(n=r,o=e[l]));return o},quickSelect:function(e,i,s,n,r,o){if(s==n)return e[s];var l=t.pvt.partition(e,i,s,n,o),a=l-s+1;return a==r?e[l]:r<a?t.pvt.quickSelect(e,i,s,l-1,r,o):t.pvt.quickSelect(e,i,l+1,n,r-a,o)},extractFields:function(e,i){var s,n={};if(1==i.length)return t.pvt.getObject(i[0],e);for(s=0;s<i.length;s++)n[i[s].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[s],e);return n},partition:function(e,i,s,n,r){var o,l=parseInt((s+n)/2,10),a=O(e,i,l);for(t.swap(e,l,n),l=s,o=s;o<n;o++)r(O(e,i,o),a)&&(t.swap(e,o,l),l++);return t.swap(e,l,n),l},fnSort:function(e){return(e=e?e.toLowerCase():t.sortOrder.Ascending)==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,n){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,n))}},fnAscending:function(e,t){return null===t||t===s?-1:"string"==typeof e?e.localeCompare(t):null===e||e===s?1:e-t},fnDescending:function(e,t){return null===t||t===s?1:"string"==typeof e?e.localeCompare(t)*-1:null===e||e===s?-1:t-e},merge:function(e,t,i,s){for(var n,r=[];e.length>0||t.length>0;)n=e.length>0&&t.length>0?s?s(O(e,i,0),O(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,r.push(n.shift());return r},getObject:function(e,t){var i,n,r;if(!t)return s;if(!e)return t;if(e.indexOf(".")===-1)return t[e];for(i=t,n=e.split("."),r=0;r<n.length&&null!=i;r++)i=i[n[r]];return i},createObject:function(e,t,i){for(var n=e.split("."),r=i||window,o=r,l=0;l<n.length;l++)l+1==n.length?o[n[l]]=t===s?{}:t:null==o[n[l]]&&(o[n[l]]={}),o=o[n[l]];return r},getFieldList:function(e,i,n){if(n===s&&(n=""),i===s||null===i)return t.pvt.getFieldList(e,[],n);for(var r in e)"object"!=typeof e[r]||e[r]instanceof Array?i.push(n+r):t.pvt.getFieldList(e[r],i,n+r+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},
t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.data.fnOperators={equal:function(e,t,i){return i?I(e)==I(t):e==t},notequal:function(e,i,s){return!t.data.fnOperators.equal(e,i,s)},lessthan:function(e,t,i){return i?I(e)<I(t):e<t},greaterthan:function(e,t,i){return i?I(e)>I(t):e>t},lessthanorequal:function(e,t,i){return i?I(e)<=I(t):e<=t},greaterthanorequal:function(e,t,i){return i?I(e)>=I(t):e>=t},contains:function(e,t,i){return i?!c(e)&&!c(t)&&I(e).indexOf(I(t))!=-1:!c(e)&&!c(t)&&e.toString().indexOf(t)!=-1},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i){return i?e&&t&&I(e).startsWith(I(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i){return i?e&&t&&I(e).endsWith(I(t)):e&&t&&e.endsWith(t)},processSymbols:function(e){var i,s=t.data.operatorSymbols[e];return s&&(i=t.data.fnOperators[s])?i:u("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.NotifierArray=function(i){return P(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=P(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},Array.prototype.filter=Array.prototype.filter||function(e){var t,i,s,n;if("function"!=typeof e)throw new TypeError;for(t=[],i=arguments[1]||this,s=0;s<this.length;s++)n=this[s],e.call(i,n,s,this)&&t.push(n);return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var w=/^https?:\/\//i,C=/^get|post$/i,x=new RegExp("^"+location.protocol,"i"),S=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t){if(e.crossDomain&&e.async&&C.test(e.type)&&w.test(t.url)&&x.test(t.url)){var i=null,n=(t.dataType||"").toLowerCase();return{send:function(r,o){i=new XDomainRequest,/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout),i.ontimeout=function(){o(500,"timeout")},i.onload=function(){var e,t="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,r={code:200,message:"success"},l={text:i.responseText};try{if("json"===n)try{l.json=JSON.parse(i.responseText)}catch(h){r.code=500,r.message="parseerror"}else if("xml"===n||"text"!==n&&S.test(i.contentType)){e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1;try{e.loadXML(i.responseText)}catch(h){e=s}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw r.code=500,r.message="parseerror","Invalid XML: "+i.responseText;l.xml=e}}catch(I){throw I}finally{o(r.code,r.message,l,t)}},i.onerror=function(){o(500,"error",{text:i.responseText})},navigator.userAgent.indexOf("MSIE 9.0")!=-1&&(i.onprogress=function(){}),i.open(e.type,e.url),i.send(t.data)},abort:function(){i&&i.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"},a=function(e,t){t&&(e=h(e,t)),(window.setImmediate||window.setTimeout)(e,0)},t.support.enableLocalizedSort=!1;var T=function(e,i,s,n){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==n.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):D(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},k=function(i,s){for(var n=e.grep(s,function(e){return"onGroup"==e.fn}),r=0;r<n.length;r++)if(t.getObject("fieldName",n[r].e)==i)return t.getObject("fn",n[r].e)},D=function(e,i,s){var n=Object.prototype.toString;Object.prototype.toString=i.indexOf(".")===-1?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=n,s&&e.reverse()},I=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||e===!1?e.toString():""},O=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},R=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},P=function(e,t){return e instanceof t},M=function(e,i,s,n){return function(r){return"object"==typeof r&&(n=r,r=null),new t.TableModel(r||e,i,s,n)}},j=function(t){return function(i,s){var n,r,o,l,a;for(s=s||window.ko,s||u("Knockout is undefined"),r=[],a=0;a<t.length;a++){n={};for(o in t[a])o.startsWith("_")||(n[o]=s.observable(t[a][o]));for(o in i)l=i[o],e.isPlainObject(l)?(l.owner||(l.owner=n),l=s.computed(l)):l=s.computed(l,n),n[o]=l;r.push(n)}return s.observableArray(r)}},E=0,F=function(e){return E+=1,e+E};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})},d=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},h=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}},t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)},c=function(e){return e===s||null===e},u=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}}(window.jQuery,window.Syncfusion,window.document)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/common/ej.touch.min",["jquery"],e):e()}(function(){!function(e,t){function i(){var e={},t=[],i={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie) ([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var s in i)if(i.hasOwnProperty(s)&&(t=navigator.userAgent.match(i[s]))){e.name=t[1].toLowerCase(),e.version=t[2],!navigator.userAgent.match(/Trident\/7\./)||(e.name="msie");break}return e.isMSPointerEnabled="msie"==e.name&&e.version>9&&window.navigator.msPointerEnabled,e.pointerEnabled=window.navigator.pointerEnabled,e}function s(t,i,s){var n=s.type;s.type=i,e.event.dispatch.call(t,s),s.type=n}function n(e,t){if(t)for(prop in t)prop in e||(e[prop]=t[prop])}function r(e){return e.originalEvent.touches?e.originalEvent.touches[0]:c?e.originalEvent:e}function o(e){var i=c?e.originalEvent.pointerType:e.originalEvent.touches?"touch":"mouse",s=c&&u==t?4==i?"mouse":"touch":i;return e.pointerType=s,"mousedown"!=e.type&&"mouseup"!=e.type&&n(e,e.originalEvent),e}function l(t,i,s){var n,r,o,l,a,d={};return s&&(a=s.originalEvent.touches?[s.originalEvent.touches[0],t.originalEvent.changedTouches[0]]:[s.originalEvent,t.originalEvent],i._isSwipe||i._isdrag?(n=e.event.special.pinch._getdistance(a[0],a[1]),r=i.time,l={pageX:i.stopPoint.pageX,pageY:i.stopPoint.pageY}):i._isPinch&&(n=e.event.special.pinch.distance(t),r=t.timeStamp-s.timeStamp,o=i._pinchDistance),i._isDelta&&(d._dTime=t.timeStamp-s.timeStamp,d._x=a[1].pageX-a[0].pageX,d._y=a[1].pageY-a[0].pageY)),{options:t,delta:{time:d._dTime||null,X:d._x||null,Y:d._y||null},distance:n,scale:i._isPinch?o:null,time:r,velocity:{XY:n/d._dTime||null,X:d._x/d._dTime||null,Y:d._y/d._dTime||null},currentPosition:{pageX:l?l.pageX:null,pageY:l?l.pageY:null}}}function a(){return(new Date).getTime()}function d(e){c&&e.css("-ms-touch-action","pinch-zoom").css("touch-action","pinch-zoom")}var h=e(document);e.each("touchstart touchmove touchend tap doubletap taphold swipe swipeleft swiperight pinch pinchin pinchout pinchstop scrollstart scrollstop".split(" "),function(t,i){e.fn[i]=function(e){return e?this.on(i,e):this.trigger(i)},e.attrFn&&(e.attrFn[i]=!0)});var c=i().isMSPointerEnabled,u=i().pointerEnabled,p="ontouchstart"in window,m="undefined"==typeof orientation,g=navigator.userAgent.match(/iPhone|iPad|iPod/i),f=c?u?"pointerdown":"MSPointerDown":p?"touchstart":"mousedown",_=c?u?"pointerup":"MSPointerUp":g?"touchend":p?"touchend":"mouseup",v=c?u?"pointermove":"MSPointerMove":p?"touchmove":"mousemove",b=c?u?"pointercancel":"MSPointerCancel":p?"touchcancel":"mouseleave",y=c||!m?f:g?"touchstart":"touchstart mousedown",w=c||!m?_:"touchend mouseup",C=c||!m?v:"touchmove mousemove",x=i(),S="msie"==x.name&&"9.0"==x.version;e.event.special.ejtouchmove={setup:function(){function t(){}function i(e){if(!e.which||1===e.which){var t=(e.target,e.originalEvent);c&&(o={x:t.x,y:t.y}),a.on(v,r)}}function r(e){if(!e.which||1===e.which){var t=(e.target,e.originalEvent);n(e,e.originalEvent),(!c||!o||Math.abs(o.x-t.x)>10||Math.abs(o.y-t.y)>10&&c)&&s(l,"ejtouchmove",e)}}var o,l=this,a=e(l);a.on(f,i),h.on(_,t),o={}}},e.event.special.swipeupdown={setup:function(){var i=this,s=e(i);d(s),s.on(f,function(i){function n(e){if(e.preventDefault(),h){var t=r(e);o={time:(new Date).getTime(),coords:[t.pageX,t.pageY]},Math.abs(h.coords[1]-o.coords[1])>10&&e.preventDefault()}}var o,a=i,d=r(i),h={time:(new Date).getTime(),coords:[d.pageX,d.pageY],origin:e(i.target)};s.on(v,n).one(_,function(i){if(s.off(v,n),h&&o&&o.time-h.time<1e3&&Math.abs(h.coords[1]-o.coords[1])>30&&Math.abs(h.coords[0]-o.coords[0])<75){var r={time:o.time-h.time,_isSwipe:!0,_isDelta:!0,stopPoint:o},d=l(i,r,a);h.origin.trigger(e.extend(!0,{type:"swipeupdown"},d)).trigger(e.extend(!0,{type:h.coords[1]>o.coords[1]?"swipeup":"swipedown"},d))}h=o=t})})}},e.event.special.scrollstart={isEnabled:!0,setup:function(){function t(e,t){i=t,s(r,i?"scrollstart":"scrollstop",e)}var i,n,r=this,o=e(r);o.on("scroll",function(s){e.event.special.scrollstart.isEnabled&&(i||t(s,!0),clearTimeout(n),n=setTimeout(function(){t(s,!1)},250))})}},e.event.special.tap={doubleTapThreshold:500,tapholdThreshold:650,canDoubleTap:function(t){return a()-t.doubleTapStartTime<=e.event.special.tap.doubleTapThreshold},setup:function(){var t,i=this,n=e(i),r=n.data();d(n),r.isDoubleTapWait=!1,r.stopProcess=!1,r.preTouchend=null,r.preTouchstart=null,n.on(y,function(l){function d(){clearTimeout(g),n.off(w,u),S&&h.off(w,u),n.off(b,d),n.off(C,c),n.off("dragstart",m)}function c(e){var t=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0]:e.originalEvent,i=l.originalEvent.changedTouches?l.originalEvent.changedTouches[0]:l.originalEvent;t.pageX==i.pageX&&t.pageY==i.pageY||("mousemove"==e.type||"pointermove"==e.type&&"mouse"==e.originalEvent.pointerType||"MSPointerMove"==e.type&&4==e.originalEvent.pointerType?(clearTimeout(g),n.off(b,d),n.off(C,c)):d())}function u(n){var h,c;"touchend"==n.type&&(r.preTouchend=a()),d(),t!=n.target&&("mouseup"==n.type||"pointerup"==l.type||"MSPointerUp")&&(h=n.target,jQuery.contains(t,h)?p(n,t):jQuery.contains(h,t)||(c=e(t).parents().has(e(h)).first()[0],ej.isNullOrUndefined(c)||p(n,c))),f===n.currentTarget&&(s(i,"tap",e.extend(o(n),{time:a()-r.startTime})),r.isDoubleTapWait&&e.event.special.tap.canDoubleTap(r)?(r.isDoubleTapWait=!1,s(i,"doubletap",e.extend(o(n),{time:a()-r.doubleTapStartTime}))):(r.isDoubleTapWait&&(r.isDoubleTapWait=!1,r.doubleTapStartTime=r.startTime),e.event.special.tap.canDoubleTap(r)&&(r.isDoubleTapWait=!0)))}function p(e,t){e.target=t,e.toElement=t}function m(){d()}("mousedown"==l.type||"pointerdown"==l.type||"MSPointerDown")&&(t=l.target),r=n.data(),r.startTime=a(),r.isDoubleTapWait||(r.doubleTapStartTime=r.startTime),"touchstart"==l.type&&(r.preTouchstart=r.startTime),r.stopProcess="mousedown"==l.type&&(r.startTime-r.preTouchend<300||r.startTime-r.preTouchstart<30);var g,f=l.currentTarget,_=l.originalEvent;l.which&&1!==l.which||r.stopProcess?r.stopProcess&&(r.stopProcess=!1):(n.on(w,u),S&&h.on(w,u),n.on(b,d),n.on(C,c),n.on("dragstart",m),g=setTimeout(function(){r.isDoubleTapWait&&(r.isDoubleTapWait=!1),s(i,"taphold",e.extend(o(l),{options:_,time:a()-r.startTime}))},e.event.special.tap.tapholdThreshold))})}},e.event.special.swipe={scrollSupression:10,duration:1e3,horizontalDistance:30,verticalDistance:75,pointers:window.navigator.msPointerEnabled,startPoint:function(t){var i=r(t);return{time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:e(t.target)}},stopPoint:function(e){var t=r(e);return{time:(new Date).getTime(),coords:[t.pageX,t.pageY]}},handleSwipe:function(t,i,s,n){if(i.time-t.time<e.event.special.swipe.duration&&Math.abs(t.coords[0]-i.coords[0])>e.event.special.swipe.horizontalDistance&&Math.abs(t.coords[1]-i.coords[1])<e.event.special.swipe.verticalDistance){var r={time:i.time-t.time,_isSwipe:!0,_isDelta:!0,stopPoint:i},o=l(s,r,n);t.origin.trigger(e.extend(!0,{type:"swipe"},o)).trigger(e.extend(!0,{type:t.coords[0]>i.coords[0]?"swipeleft":"swiperight"},o))}},setup:function(){var i=this,s=e(i);d(s),s.on(f,function(i){function n(t){o&&(r=e.event.special.swipe.stopPoint(t),Math.abs(o.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupression&&t.preventDefault())}var r,o=e.event.special.swipe.startPoint(i),l=i;e(i.target).data("_dataTouchStart",{event:i,_now:(new Date).getTime()}),s.on(v,n).one(_,function(i){s.off(v,n),o&&r&&e.event.special.swipe.handleSwipe(o,r,i,l),o=r=t})})}},e.event.special.pinch={distance:function(t){return t.originalEvent.touches.length<2?null:e.event.special.pinch._getdistance(t.originalEvent.touches[0],t.originalEvent.touches[1])},_getdistance:function(e,t){return Math.sqrt((e.pageX-t.pageX)*(e.pageX-t.pageX)+(e.pageY-t.pageY)*(e.pageY-t.pageY))},setup:function(){var i=this,s=e(i);d(s),s.on(f,function(i){function n(t){a=t,o=e.event.special.pinch.distance(t)||null,d&&o&&Math.abs(d-o)>h&&(e(t.target).trigger(e.extend(!0,{type:d>o?"pinchin":"pinchout"},l(t,{_isPinch:!0,_pinchDistance:c},r))),d=o)}var r=i;if(i.originalEvent.touches&&i.originalEvent.touches.length>=2){var o,a,d=e.event.special.pinch.distance(i),h=5,c=d,u=l(i,{_isPinch:!0,_pinchDistance:c},r);e(i.target).trigger(e.extend(!0,{type:"pinch"},u)),s.on(v,n).one(_,function(){s.off(v,n),e(i.target).trigger(e.extend(!0,{type:"pinchstop"},l(a,{_isPinch:!0,_pinchDistance:o},r))),d=o=t})}})}},e.event.special.touchdrag={setup:function(){var i=this,s=e(i);d(s),s.on(f,function(i){function n(t){a&&(o=r(t),e.event.special.pinch._getdistance(a,o)>5&&e(t.target).trigger(e.extend(!0,{type:"touchdrag"},l(t,{_isdrag:!0,stopPoint:o,_isDelta:!0},d))))}var o,a=r(i),d=i;e(i.target).data("_dataTouchStart",{event:i,_now:(new Date).getTime()}),s.on(v,n).one(_,function(){s.off(v,n),a=o=t})})}},e.each({scrollstop:"scrollstart",doubletap:"tap",taphold:"tap",swipeleft:"swipe",swiperight:"swipe",swipedown:"swipeupdown",swipeup:"swipeupdown",pinchin:"pinch",pinchout:"pinch",pinchstop:"pinch"},function(t,i){e.event.special[t]={setup:function(){e(this).on(i,e.noop)}}})}(jQuery)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/common/ej.draggable.min",["./ej.core.min"],e):e()}(function(){(function(e,t){t.widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},helpers={},this._wireEvents(),this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,"msie"==this._browser.name&&this.element.addClass("e-pinch")},_setModel:function(e){for(var t in e)switch(t){case"dragArea":this.model.dragArea=e[t];break;case"dragOnTaphold":this.model.dragOnTaphold=e[t]}},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1),t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var s,n;if(i.target&&i.target.nodeName&&e(i.target).closest("input[type='text'], textarea, select, option").length)return!0;s=i,i.preventDefault(),i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},e(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler),this.model.clone||(n=this.element.offset(),this._relXposition=i.pageX-n.left,this._relYposition=i.pageY-n.top),e(document.documentElement).trigger(t.eventType.mouseDown,s)},_setDragArea:function(){var i,s,n,r,o,l,a,d=e(this.model.dragArea)[0];if(d){if(r=["left","right","bottom","top"],t.isNullOrUndefined(d.getBoundingClientRect)){for(i=e(this.model.dragArea).outerWidth(),s=e(this.model.dragArea).outerHeight(),a=0;a<r.length;a++)this["border-"+r[a]+"-width"]=0,this["padding-"+r[a]]=0;o=l=0}else{for(n=d.getBoundingClientRect(),i=n.width?n.width:n.right-n.left,s=n.height?n.height:n.bottom-n.top,a=0;a<r.length;a++)this["border-"+r[a]+"-width"]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("border-"+r[a]+"-width")))?0:parseFloat(e(e(this.model.dragArea)[0]).css("border-"+r[a]+"-width")),this["padding-"+r[a]]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+r[a])))?0:parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+r[a]));o=e(this.model.dragArea).offset().top,l=e(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:l+this["border-left-width"]+this["padding-left"],this._top=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:o+this["border-top-width"]+this["padding-top"],this._right=l+i-[this["border-right-width"]+this["padding-right"]],this._bottom=o+s-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){var s,n,r,o,l,a=i;i=this._getCoordinate(i),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(a);var d=this._initPosition.x-i.pageX,h=this._initPosition.y-i.pageY;if(Math.sqrt(d*d+h*h)>=this.model.distance){if(!(s=this.model.helper({sender:a,element:this.target}))||t.isNullOrUndefined(s))return;if(n=this.model.handle=this.helper=s,this.model.dragStart&&(r=null,"touchmove"==a.type?(o=a.originalEvent.changedTouches[0],r=document.elementFromPoint(o.clientX,o.clientY)):r=a.originalEvent.target||a.target,this._trigger("dragStart",{event:a,element:this.element,target:r})))return this._destroy(),!1;this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0),l=n.offsetParent().offset(),e(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1),t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:n.css({position:"absolute",left:this.position.left-l.left,top:this.position.top-l.top}),destroy:this._destroyHandler}}},_drag:function(i){var s,n,r,o,l,a,d,h,c;i.preventDefault(),this.position=this._getMousePosition(i),this.position.top<0&&(this.position.top=0),e(document).height()<this.position.top&&(this.position.top=e(document).height()),e(document).width()<this.position.left&&(this.position.left=e(document).width()),h=t.widgetBase.droppables[this.model.scope].helper,this.model.drag&&(l=null,"touchmove"==i.type?(a=i.originalEvent.changedTouches[0],l=document.elementFromPoint(a.clientX,a.clientY)):l=i.originalEvent.target||i.target,this._trigger("drag",{event:i,element:this.target,target:l})),d=this._checkTargetElement(i),t.isNullOrUndefined(d)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=d,d.object._over(i),this._hoverTarget=d),h=t.widgetBase.droppables[this.model.scope].helper,c=h.offsetParent().offset(),r=t.isNullOrUndefined(i.pageX)?i.originalEvent.changedTouches[0].pageX:i.pageX,o=t.isNullOrUndefined(i.pageY)?i.originalEvent.changedTouches[0].pageY:i.pageY,this.model.dragArea?(this._pageX!=r&&(s=this._left>this.position.left?this._left:this._right<this.position.left+h.outerWidth(!0)?this._right-h.outerWidth(!0):this.position.left),this._pageY!=o&&(n=this._top>this.position.top?this._top:this._bottom<this.position.top+h.outerHeight(!0)?this._bottom-h.outerHeight(!0):this.position.top)):(s=this.position.left,n=this.position.top),(n<0||n-[c.top+this["border-top-width"]]<0)&&(n=[c.top+this["border-top-width"]]),(s<0||s-[c.left+this["border-left-width"]]<0)&&(s=[c.left+this["border-left-width"]]),h.css({left:s-[c.left+this["border-left-width"]],top:n-[c.top+this["border-top-width"]]}),this.position.left=s,this.position.top=n,this._pageX=r,this._pageY=o},_dragStop:function(e){var t,i;("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e),this.model.dragStop&&(t=null,"touchend"==e.type?(i=e.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=e.originalEvent.target||e.target,0==this.model.cursorAt.top&&0==this.model.cursorAt.left&&(t=this._checkTargetElement(e)||t),this._trigger("dragStop",{event:e,element:this.target,target:t})),this._dragEnd(e)},_dragEnd:function(e){var i=this._checkTargetElement(e);t.isNullOrUndefined(i)||(e.target=e.toElement=i,i.object._drop(e))},_dragMouseEnter:function(t){e(document).off("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(t):this._isIE8?0==t.button&&this._dragManualStop(t):0==t.buttons&&this._dragManualStop(t)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target}),this._destroy(e)},_dragMouseOut:function(){e(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t,i;return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?(i=e.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=e.target,this.helper&&this._contains(this.helper[0],t)?(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_withDropElement:function(i){if(i&&(dropObj=e(i).data("ejDroppable"),t.isNullOrUndefined(dropObj)&&(dropObj=this._checkParentElement(e(i))),!t.isNullOrUndefined(dropObj)))return e.extend(i,{object:dropObj})},_checkParentElement:function(i){var s=e(i).closest(".e-droppable");if(s.length>0&&(dropObj=e(s).data("ejDroppable"),!t.isNullOrUndefined(dropObj)))return dropObj},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):document.elementFromPoint(e.clientX,e.clientY)},_contains:function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}},_wireEvents:function(){1==t.isDevice()&&1==this.model.dragOnTaphold?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize),this._dragStartHandler=e.proxy(this._dragStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._dragStopHandler=e.proxy(this._dragStop,this),this._dragHandler=e.proxy(this._drag,this),this._dragMouseEnterHandler=e.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=e.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,i=this.model.clone?e.pageY:e.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(e){var i=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type&&"msie"!=t.browserInfo().name)&&(i=e.originalEvent.changedTouches[0]),i}})})(jQuery,Syncfusion),function(e,t){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this.model.accept?e(this.element).delegate(this.accept,"mouseup",e.proxy(this._drop,this)):e(this.element).on("mouseup",e.proxy(this._drop,this)),this._on(e(document),"touchend",this._drop),this._mouseOver=!1},_setModel:function(){},_destroy:function(){e(this.element).off("mouseup",e.proxy(this._drop,this))},_over:function(e){this._mouseOver||(this._trigger("over",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("out",e),this._mouseOver=!1)},_drop:function(i){var s,n=t.widgetBase.droppables[this.model.scope],r=!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible");r&&"touchend"==i.type&&e(n.helper).hide(),s=this._isDropArea(i),r&&"touchend"==i.type&&e(n.helper).show(),n&&!t.isNullOrUndefined(this.model.drop)&&r&&s.canDrop&&this.model.drop(e.extend(i,{dropTarget:s.target},!0),n)},_isDropArea:function(t){var i,s,n,r,o,l={canDrop:!0,target:e(t.target)};if("touchend"==t.type)for(i=t.originalEvent.changedTouches[0],s=document.elementFromPoint(i.clientX,i.clientY),l.canDrop=!1,n=e(s).parents(),r=0;r<this.element.length;r++){if(e(s).is(e(this.element[r])))l={canDrop:!0,target:e(s)};else for(o=0;o<n.length;o++)if(e(this.element[r]).is(e(n[o]))){l={canDrop:!0,target:e(s)};break}if(l.canDrop)break}return l}})}(jQuery,Syncfusion),function(e,t){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?e(this.target).delegate(this.handle,t.eventType.mouseDown,e.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):e(this.target).on("mousedown",e.proxy(this._mousedown,this)),this._resizeStartHandler=e.proxy(this._resizeStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._resizeStopHandler=e.proxy(this._resizeStop,this),this._resizeHandler=e.proxy(this._resize,this),this._resizeMouseEnterHandler=e.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){e(i.target).hasClass("e-resizable")?(e(i.target).css({cursor:"se-resize"}),e(this.target).on(t.eventType.mouseDown,e.proxy(this._mousedown,this))):(e(this.target).off(t.eventType.mouseDown),e(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(){},_mousedown:function(i){var s=i;return i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},this._pageX=i.pageX,this._pageY=i.pageY,e(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler),e(document.documentElement).trigger(t.eventType.mouseDown,s),!1},_resizeStart:function(i){var s;if(e(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var n,r,o=this._initPosition.x-i.pageX,l=this._initPosition.y-i.pageY;if(Math.sqrt(o*o+l*l)>=this.model.distance){if(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:i,element:this.target}))return;s=this.model.helper({element:this.target}),n=i.pageX-this._pageX+s.outerWidth(),r=i.pageY-this._pageY+s.outerHeight(),this._pageX=i.pageX,this._pageY=i.pageY,this.getElementPosition(s),e(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1),t.widgetBase.resizables[this.scope]={resizable:this.target,helper:s.css({width:n,height:r}),destroy:this._destroyHandler}}}},_resize:function(e){var i,s,n,r;e=this._getCoordinate(e),this.getElementPosition(t.widgetBase.resizables[this.scope].helper),r=this.model.helper({element:this.target}),i=e.pageX-this._pageX+r.outerWidth(),s=e.pageY-this._pageY+r.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,i<this.model.minWidth&&(n=this.model.minWidth-i,i=this.model.minWidth,this._pageX=e.pageX+n),s<this.model.minHeight&&(n=this.model.minHeight-s,s=this.model.minHeight,this._pageY=e.pageY+n),null!=this.model.maxHeight&&s>this.model.maxHeight&&(n=s-this.model.maxHeight,s=this.model.maxHeight,this._pageY=e.pageY-n),null!=this.model.maxWidth&&i>this.model.maxWidth&&(n=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=e.pageX-n),t.widgetBase.resizables[this.scope].helper.css({width:i,height:s}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1),t.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&e.length>0?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e
;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type)&&(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/common/ej.scroller.min",["./ej.core.min"],e):e()}(function(){(function(e,t,i,s){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||(this._content="horizontal"===this.model.orientation?this.element.find(".e-hhandle"):this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget"),this._ensureScrollers(),this.content(),this._setInitialValues()},_setInitialValues:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):this.element.addClass("e-vscrollbar"),(0!==this.value()||0!==this.model.minimum)&&(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){e.fn.jquery;this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._scrollData||(this._scrollData="vertical"===this.model.orientation?this._createScroller("Height","Y","Top","e-v"):this._createScroller("Width","X","Left","e-h"))},_setModel:function(e){for(var t in e){if("value"!==t){this.refresh();break}this.value()&&this.scroll(this.value(),"none")}},_createScroller:function(t,i,s,n){var r,o={};e.fn.jquery;return o.dimension=t,o.xy=i,o.position=s,o.css=n,o.uDimension=t,this._calculateLayout(o),this._createLayout(o),r=this[o.main].find(".e-button"),this._off(r,"mousedown")._on(r,"mousedown",{d:o,step:1},this._spaceMouseDown),this._off(this[o.scroll],"mousedown")._on(this[o.scroll],"mousedown",{d:o},this._spaceMouseDown),this._off(this[o.handler],"mousedown touchstart")._on(this[o.handler],"mousedown touchstart",{d:o},this._mouseDown),o},_createLayout:function(i){var s,n="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}</div>",r=e.fn.jquery,o={};o[i.dimension]=i.modelDim,s=t.buildTag("div."+i.css+"scroll e-box",String.format(n,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(n,"handlespace",i.handleSpace,String.format(n,"handle e-box e-pinch",i.handle))+String.format(n,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),o),this.element.append(s),this.element.find(".e-vhandle").addClass("e-v-line e-icon"),this.element.find(".e-hhandle").addClass("e-h-line e-icon"),"1.7.1"===r||"1.7.2"===r?i.uDimension.toLowerCase():i.uDimension,this[i.handler]=this.element.find("."+i.handler),this[i.handler].css("transition","none"),this[i.scroll]=this[i.handler].parent(),this[i.main]=this[i.scroll].parent(),this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(e){var i,n;e.scrollDim="scroll"+e.dimension,e.lPosition=e.position.toLowerCase(),e.clientXy="page"+e.xy,e.scrollVal="scroll"+e.position,e.scrollOneStepBy=this.model.smallChange,e.modelDim=this.model[e.dimension=e.dimension.toLowerCase()],e.handler=e.css+"handle",e.buttonSize=this.model.buttonSize,e.main=e.css+"scroll",e.scroll=e.css+"ScrollSpace",e.handleSpace=e.modelDim-2*e.buttonSize,e.scrollable=this.model.maximum-this.model.minimum,i=this.model.height,"horizontal"===this.model.orientation&&(i=this.model.width),e.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize),n=!t.isNullOrUndefined(this.model.elementHeight)&&"string"==typeof this.model.elementHeight&&this.model.elementHeight.indexOf("%")!=-1,e.handle<20&&!n&&(e.handle=20),e.onePx=e.scrollable/(e.handleSpace-e.handle),e.fromScroller=!1,e.up=!0,e.vInterval=s},_updateLayout:function(e){this.element.height(this.model.height),this.element.width(this.model.width);var t=this.element.find("."+e.css+"handle"),i=this.element.find("."+e.css+"handlespace"),n="width"==e.dimension?t.css("left"):t.css("top"),r="width"==e.dimension?i.outerWidth():i.outerHeight();n!==s&&"auto"!==n&&(r>=e.handle+parseFloat(n)||(this.model.enableRTL?t.css("width"===e.dimension?"left":"top",parseFloat(r)-e.handle):t.css("width"===e.dimension?"left":"top",parseFloat(r)-e.handle>0?parseFloat(r)-e.handle:0))),this.element.find("."+e.css+"scroll").css(e.dimension,e.modelDim+"px").find(".e-button").css(e.dimension,this.model.buttonSize).end().find("."+e.css+"handlespace").css(e.dimension,e.handleSpace+"px").find("."+e.css+"handle").css(e.dimension,e.handle+"px")},refresh:function(){this._ensureScrollers(),this.value()&&this.scroll(this.value(),"none"),this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(e,i,s,n){var r,o,l=this._scrollData;if(!s)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:e,originalEvent:n}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:e,originalEvent:n}))return;this._scrollData&&(!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"==t.browserInfo().name?!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"!=t.browserInfo().name?this.value(e):this.value(-1*e):this.value(-l.scrollable+e),this.content().length>0&&(this.model.orientation===t.ScrollBar.Orientation.Horizontal?(r=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth(),e=r<(e-this.model.minimum)/this._scrollData.onePx?r:(e-this.model.minimum)/this._scrollData.onePx,this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"!=t.browserInfo().name&&(e=r-e,e>0&&(e*=-1)),this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"==t.browserInfo().name&&(e=-e),this._scrollData.enableRTL&&e>0&&!this._scrollData._scrollleftflag&&(e=0),this._scrollData._scrollleftflag&&(e>0&&(e*=-1),this.value(e)),this.content()[0].style.left=e+"px",this._scrollData._scrollleftflag=!1):(o=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight(),e=o<(e-this.model.minimum)/this._scrollData.onePx?o:(e-this.model.minimum)/this._scrollData.onePx,this.content()[0].style.top=e+"px")))},_changeTop:function(e,t,i){var s,n;return e.dimension,s=this.value(),n=s+t,e.step=t,e.enableRTL&&t<0||t>0&&!e.enableRTL?e.enableRTL?n<this.model.maximum*-1&&(n=this.model.maximum*-1):n>this.model.maximum&&(n=this.model.maximum):e.enableRTL?n>this.model.minimum&&(n=this.model.minimum):n<this.model.minimum&&(n=this.model.minimum),(n!==s||this.model.infiniteScrolling)&&this.scroll(n,i),n!==s},_mouseUp:function(i){if(i.data){var s=i.data.d;clearInterval(s.vInterval),"touchend"==i.type&&e(i.target).removeClass("e-touch"),"mouseup"!==i.type&&"touchend"!==i.type&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(e(document),"mousemove touchmove",this._mouseMove),e(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),s.fromScroller=!1,this[s.scroll].off("mousemove"),this[s.handler].off("mousemove").css("transition",""),"thumb"!==i.data.source||t.isNullOrUndefined(this.model)||e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:s})},this))),s.up=!0}},_mouseDown:function(i){this._enabled&&(this._d=i,this._data=this._d.data.d,this._data.target=this._d.target,this._data.fromScroller=!0,this[this._data.handler].css("transition","none"),this._on(e(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove),this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data}),e(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this)),"touchstart"==i.type&&e(i.target).addClass("e-touch"))},_mouseCall:function(e){e.type="mouseup",this._mouseUp(e)},_mouseMove:function(i){var s,n,r,o=0,l=parseInt(this[this._data.handler].css(this._data.lPosition))||0;if(i.preventDefault(),n=1,t.isNullOrUndefined(i.target.tagName)){if(e(i.target).is(document))return void this._mouseCall(i)}else if("iframe"===i.target.tagName.toLowerCase())return void this._mouseCall(i);r="mousemove"==i.type?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy],this._prevY&&r!==this._prevY&&(o=r-this._prevY,this.model.infiniteScrolling?(l+=o,this._data.step=o,(this._data.enableRTL?l>0:l<0)&&(l=0),l*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(l=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),s=Math.ceil(l*this._data.onePx),this.scroll(s,"thumb")):(s=o*this._data.onePx,this._changeTop(this._data,s,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,scrollData:this._data})),1===n&&(this._prevY=r)},_spaceMouseDown:function(i){var s,n,r;i.data&&this._enabled&&(s=i.data.d,1===i.which&&i.target!==this[s.handler][0])&&(n=i.data.step?this.model.smallChange:this.model.largeChange,r=i.data.top||this[s.handler].offset()[s.lPosition],i[s.clientXy]=i[s.clientXy]||0,i[s.clientXy]<r&&(n*=-1),s.target=i.target,this._changeTop(s,n,3===n?"track":"button",i),1!==i.data.step&&this[s.scroll].mousemove(function(){s.up=!0}),s.up=!1,s.vInterval=setInterval(t.proxy(function(){if((n<0?r+n/s.onePx<i[s.clientXy]:r+s.handle+n/s.onePx>i[s.clientXy])&&(s.up=!0),s.up)return void clearInterval(s.vInterval);this._changeTop(s,n,3===n?"track":"button",i),r=i.data?i.data.top||this[s.handler].offset()[s.lPosition]:this[s.handler].offset()[s.lPosition]},this),150),e(document).one("mouseup",{d:s},t.proxy(this._mouseUp,this)),e(document).mouseout({d:s},t.proxy(this._mouseUp,this)))},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove(),this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove(),this._scrollData=null,this._content=null},_destroy:function(){this.element.remove()}}),t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}})(jQuery,Syncfusion,window),function(e,t,i,s){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:s,enableTouchScroll:!0,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this.model.enableRTL===s&&(this.model.enableRTL="rtl"===this.element.css("direction")),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._on(this.content(),"scroll",this._scroll),null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),(this._prevScrollWidth!==this.content()[0].scrollWidth||this._prevScrollHeight!==this.content()[0].scrollHeight)&&this.refresh()),this._addActionClass()},_addActionClass:function(){"msie"==this._browser&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||this.model.height.indexOf("%")==-1||(this._vScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):e(this.content()[0]).height("")),t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||this.model.width.indexOf("%")==-1||(this._hScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):e(this.content()[0]).width(""))},_setScrollLeftValue:function(e){this.model.enableRTL&&(e="mozilla"==t.browserInfo().name?e<0?e:e*-1:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&("chrome"==t.browserInfo().name||this._rtlScrollLeftValue>0)?e<0?this._rtlScrollLeftValue+e:this._rtlScrollLeftValue-e:Math.abs(e)),this.content().scrollLeft(e)},_ensureScrollers:function(){var s,n=e.fn.jquery;this.model.height="string"==typeof this.model.height&&this.model.height.indexOf("px")!=-1?parseInt(this.model.height):this.model.height,this.model.width="string"==typeof this.model.width&&this.model.width.indexOf("px")!=-1?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0&&(this.isVScroll()?(this._vScrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._hScrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll?(this.content().addClass("e-content"),"1.7.1"===n||"1.7.2"===n?(this._contentHeight="height",this._contentWidth="width"):(this._contentHeight="outerHeight",this._contentWidth="outerWidth"),s=this._exactElementDimension(this.element),this._ElementHeight=s.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.content()[this._contentHeight](this._ElementHeight-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:0)),this._ElementWidth=s.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.content()[this._contentWidth](this._ElementWidth-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:0)),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0&&e(i).on("resize",e.proxy(this._resetScroller,this))):this.content().removeClass("e-content"),this._setDimension(),this._parentHeight=e(this.element).parent().height(),this._parentWidth=e(this.element).parent().width())},_convertPercentageToPixel:function(e,t){return Math.floor(e*t/100)},isHScroll:function(){if(t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||this.model.width.indexOf("%")==-1){if(this.model.width>0){var i=this.content().find(this.model.targetPane);return null!=this.model.targetPane&&i.length?i[0].scrollWidth+i.siblings().width()>this.model.width:this.content()[0].scrollWidth>this.model.width||this.content()[0].scrollWidth==this.model.width&&e(this.content()[0]).find("> *").length>0&&e(this.content()[0]).find("> *")[0].scrollWidth>this.model.width}return!1}return this.content()[0].scrollWidth>this.element.width()},isVScroll:function(){return t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||this.model.height.indexOf("%")==-1?!!(this.model.height>0&&(this.content()[0].scrollHeight>this.model.height||this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2)))):this.content()[0].scrollHeight>this.element.outerHeight()},_setModel:function(e){for(var i in e)switch(i){case"enableRTL":e[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1)),this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));break;case"scrollLeft":(parseFloat(e[i])<0||!this._hScroll)&&(e[i]=0),this._externalCall=!0,this._hScrollbar&&(e[i]=parseFloat(e[i])>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e[i])),this._setScrollLeftValue(parseFloat(e[i])),this.scrollLeft(e[i]),!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(e[i]);break;case"scrollTop":this._vScrollbar&&(e[i]=parseFloat(e[i])>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e[i])),(parseFloat(e[i])<0||!this._vScroll)&&(e[i]=0),this._externalCall=!0,this.content().scrollTop(parseFloat(e[i])),this.scrollTop(e[i]),this.scrollY(e[i]);break;case"touchScroll":this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");break;case"scrollOneStepBy":this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=e[i],this._vScrollbar.model.smallChange=e[i]),this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=e[i],this._hScrollbar.model.smallChange=e[i]);break;case"buttonSize":this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize),this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize),this.refresh();break;case"height":this._eleHeight=e[i],this.refresh();break;case"width":this._eleWidth=e[i],this.refresh();break;default:this.refresh()}},_createScrollbar:function(i,s){var n,r,o,l,a,d,h,c=this,u=document.createElement("div");return i===t.ScrollBar.Orientation.Vertical?(r=this.model.scrollerSize,o=n=t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||this.model.height.indexOf("%")==-1?this.model.height-(s?this.model.scrollerSize:0):this.element.height()-(s?this.model.scrollerSize:0),l=this.content()[0].scrollHeight,a=this.scrollTop()):(r=n=this.model.width-(s?this.model.scrollerSize:0),o=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||this.model.width.indexOf("%")==-1?(d=this.content().find(this.model.targetPane),l=null!=this.model.targetPane&&d.length?d[0].scrollWidth+d.parent().width()-d.width():this.content()[0].scrollWidth):(r=n=this.element.width()-(s?this.model.scrollerSize:0),l=this.content()[0].scrollWidth),a=this.scrollLeft()),this.element.children(".e-hscrollbar").length>0?e(this.element.children(".e-hscrollbar")).before(u):this.element.append(u),e(u).ejScrollBar({elementHeight:c._eleHeight,elementWidth:c._eleWidth,buttonSize:c.model.buttonSize,orientation:i,viewportSize:n,height:o,width:r,maximum:l-n,value:a,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)}),h=e(u).ejScrollBar("instance"),i!==t.ScrollBar.Orientation.Vertical&&s||this._off(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:h._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=h._scrollData:this._scrollYdata=h._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(h._scrollData.enableRTL=!0),h._enabled=this.model.enabled,h},_updateScrollbar:function(i,s){var n=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;n&&(i===t.ScrollBar.Orientation.Vertical?(n.model.width=this.model.scrollerSize,n.model.height=n.model.viewportSize=this.model.height-(s?this.model.scrollerSize:0),n.model.maximum=this.content()[0].scrollHeight-n.model.viewportSize,n.model.value=this.scrollTop()):(n.model.width=n.model.viewportSize=this.model.width-(s?this.model.scrollerSize:0),n.model.height=this.model.scrollerSize,n.model.maximum=(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-e(this.model.targetPane).outerWidth()):this.content()[0].scrollWidth)-n.model.viewportSize,this.model.enableRTL||(n.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").hide()):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_scrollChanged:function(i){this._updateScroll=!0,i.scrollTop!==s?this.scrollY(i.scrollTop,!0,"",i.source):i.scrollLeft!==s&&this.scrollX(i.scrollLeft,!0,"",i.source),this._updateScroll=!1;var n=this;e.when(this.content()).done(t.proxy(function(){n._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(s,n){this._scrollEle=e(s).data("ejScrollBar"),this._event=n;this._listener=function(){this._scrollEle._off(e(document),"mousemove touchmove",this._scrollEle._mouseMove),e(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle)),this._scrollEle._prevY=null,this._off(e(document),"mousemove touchmove",this._mouseMove),this._off(e(document),"mouseup touchend",this._mouseUp),this._off(e(i),"blur"),this._evtData.handler,this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})},this._on(e(i),"blur",this._listener)},_thumbStart:function(e){this._evtData=e.scrollData;var t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar")),t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar"));this._bindBlurEvent(t,e),this._trigger("thumbStart",e)},_thumbMove:function(e){this._trigger("thumbMove",e)},_thumbEnd:function(t){this._trigger("thumbEnd",t),this._off(e(i),"blur")},refresh:function(i){var s,n;i||this.element.find(">.e-content").removeAttr("style"),t.isNullOrUndefined(this._eleHeight)||"string"!=typeof this._eleHeight||this._eleHeight.indexOf("%")==-1||this._parentHeight==e(this.element).parent().height()||(s=this._exactElementDimension(this.element.parent()),s=s.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),s)),t.isNullOrUndefined(this._eleWidth)||"string"!=typeof this._eleWidth||this._eleWidth.indexOf("%")==-1||this._parentWidth==e(this.element).parent().width()||(s=this._exactElementDimension(this.element.parent()),s=s.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),s)),this._ensureScrollers(),n=this.scrollLeft(),this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),n>0?this.content().scrollLeft(n):this._setScrollLeftValue(n)):this.content().scrollLeft(n),(this.scrollTop()&&null==this._vScrollbar||null!==this._vScrollbar&&this._vScrollbar&&null!=this._vScrollbar._scrollData&&!this._vScrollbar._scrollData.skipChange)&&this.content().scrollTop(this.scrollTop()),this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData)),this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData)),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version?this.element.find(".e-hhandle").css("left","0px"):null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this._addActionClass(),this._autohide()},_exactElementDimension:function(e){var t,i,s,n=e.get(0).getBoundingClientRect(),r=["left","right","top","bottom"];for(t=n.width?n.width:n.right-n.left,i=n.height?n.height:n.bottom-n.top,s=0;s<r.length;s++)this["border_"+r[s]]=isNaN(parseFloat(e.css("border-"+r[s]+"-width")))?0:parseFloat(e.css("border-"+r[s]+"-width")),this["padding_"+r[s]]=isNaN(parseFloat(e.css("padding-"+r[s])))?0:parseFloat(e.css("padding-"+r[s]));return{width:t,height:i}},_keyPressed:function(e,i){if(this.model.enabled){if(["input","select","textarea"].indexOf(i.tagName.toLowerCase())!==-1)return!0;var s,n;if(["up","down","pageUp","pageDown"].indexOf(e)!==-1)this._vScrollbar&&("msie"==t.browserInfo().name&&this.model.allowVirtualScrolling&&this._content.focus(),s=this._vScrollbar._scrollData),n="o";else{if(["left","right","pageLeft","pageRight"].indexOf(e)===-1)return!0;this._hScrollbar&&(s=this._hScrollbar._scrollData),n="i"}return!s||!this._changeTop(s,(e.indexOf(n)<0?-1:1)*("p"!==e[0]?1:3)*s.scrollOneStepBy,"key")}},scrollY:function(e,i,s,n,r){var r,o=this;if(""!==e){if(i){if(r={source:n||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:r},this._trigger("scroll",r))return;return e=r.scrollTop,this.scrollTop(e),void this.content().scrollTop(e)}(t.isNullOrUndefined(s)||""===s)&&(s=100),this._vScrollbar&&(e=parseFloat(e)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e)),this.scrollTop(e),this.content().stop().animate({scrollTop:e},s,"linear",function(){o._trigger("scroll",{source:n||"custom",scrollData:o._vScrollbar?o._vScrollbar._scrollData:null,scrollTop:e,originalEvent:r})})}},scrollX:function(e,i,s,n,r){var o,l=this;if(""!==e){if(this._hScrollbar&&(e=parseFloat(e)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e)),this._externalCall=!0,o=t.browserInfo().name,this.model.enableRTL&&"mozilla"!=o&&(e<0&&(e=Math.abs(e)),null!=this.model.targetPane?this.content().find(this.model.targetPane)[0]:this.content()[0],"mousemove"!=r&&"touchmove"!=r&&"msie"!=o&&"msie"!=o&&(e=this._hScrollbar._scrollData.scrollable-e)),this.scrollLeft(e),i){if(this._trigger("scroll",{source:n||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:r}))return;return void(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(e):this.content().scrollLeft(e))}(t.isNullOrUndefined(s)||""===s)&&(s=100),null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:e},s,"linear"):this.content().stop().animate({scrollLeft:e},s,"linear",function(){l._trigger("scroll",{source:n||"custom",scrollData:l._hScrollbar?l._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:r})})}},enable:function(){var e=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");e.hasClass("e-disable")&&(e.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0),this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon").addClass("e-disable").attr({"aria-disabled":!0}),this.model.enabled=!1,this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(e,i,s,n){var r,o=Math.ceil(null!=this.model.targetPane&&"height"!=e.dimension?this.content().find(this.model.targetPane)[e.scrollVal]():this.content()[e.scrollVal]());return"height"==e.dimension&&0==o&&(o=0!=this.scrollTop()?this.scrollTop():0),r=o+i,(e.enableRTL?r<e.scrollable:r>e.scrollable)&&(r=Math.round(e.scrollable)),(e.enableRTL?r>0:r<0)&&(r=0),r!==o&&(this["scroll"+e.xy](r,!0,"",s,n),"X"!==e.xy||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(r,s,!0,n):this._hScrollbar.scroll(r,s,!0,n)),r!==o},_mouseWheel:function(t){var s;if((!this._vScrollbar||!t.ctrlKey)&&(this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var n,r=0,o=t.data.d,l=t;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:l.data.d}),this._wheelStart=!1,clearTimeout(e.data(this,"timer")),1!=this._wheelx&&(0==t.wheelDeltaX||0==t.wheelDeltaY)&&(this._wheelx=1),0==navigator.platform.indexOf("Mac")&&0==this._wheelx&&("webkit"==this._browser||"chrome"==this._browser))return!0;"mozilla"==this._browser?t.axis==t.HORIZONTAL_AXIS?o=this._scrollXdata:this._scrollYdata:"msie"==this._browser?("wheel"==t.type&&(r=t.deltaX/120),"mousewheel"==t.type&&t.shiftKey&&(o=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&0!=t.wheelDeltaX&&0==t.wheelDeltaY&&this._scrollXdata&&(o=this._scrollXdata),0==t.wheelDeltaX&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(r=0==navigator.platform.indexOf("Mac")?-t.wheelDelta/3:-t.wheelDelta/120,i.opera&&parseFloat(i.opera.version,10)<10&&(r=-r)):t.detail&&(r=t.detail/3),r&&(l.originalEvent&&(n=l.originalEvent.wheelDelta&&l.originalEvent.wheelDelta>0||l.originalEvent.detail&&l.originalEvent.detail<0?-1:1),this._changeTop(o,r*o.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():l.preventDefault(),l.stopImmediatePropagation(),l.stopPropagation(),this._trigger("wheelMove",{originalEvent:t,scrollData:l.data.d,direction:n})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:l}),this._wheelx=0),s=this,e.data(this,"timer",setTimeout(function(){s._wheelStart=!0,s._trigger("wheelStop",{originalEvent:t,scrollData:l.data.d,direction:n})},250)))}},_contentHeightWidth:function(){"block"==this.content().siblings().css("display")&&this.model.autoHide&&this._hScroll?(this.content()[this._contentHeight](this._ElementHeight-this.model.scrollerSize),
this.content()[this._contentWidth](this._ElementWidth-this.model.scrollerSize)):"none"==this.content().siblings().css("display")&&this.model.autoHide&&this._vScroll&&(this.content()[this._contentHeight](this._ElementHeight),this.content()[this._contentWidth](this._ElementWidth))},_scrollerHover:function(e){"mouseenter"!=e.type&&"touchstart"!=e.type||this.content().siblings().is(":visible")?("mouseleave"==e.type||"touchend"==e.type)&&(this.content().siblings().hide(),this._contentHeightWidth(),this._trigger("scrollHide",{originalEvent:e})):(this.content().siblings().css("display","block"),this._contentHeightWidth(),this._trigger("scrollVisible",{originalEvent:e}))},_mouseUp:function(s){if(s.data){var n=s.data.d;"mouseup"!==s.type&&"touchend"!==s.type&&(s.toElement||s.relatedTarget)||(this.content().css("cursor","default"),this._off(e(document),"mousemove touchmove"),this._off(e(document),"mouseup touchend",this._mouseUp),n.fromScroller=!1,this._mouseMoved!==!0||"thumb"!==s.data.source||t.isNullOrUndefined(this.model)||(e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:s,scrollData:n})},this)),this._off(e(i),"blur"))),n.up=!0}},_mouseDownOnContent:function(n){var r,o;if(this._startX=n.clientX!=s?n.clientX:n.originalEvent.changedTouches[0].clientX,this._startY=n.clientY!=s?n.clientY:n.originalEvent.changedTouches[0].clientY,this._timeStart=n.timeStamp||Date.now(),this.model.enabled&&(r=n.data.d,this._evtData=n.data,r.handler,o=this.element.find("."+r.handler).closest(".e-scrollbar"),this._bindBlurEvent(o,n),!this._trigger("thumbStart",{originalEvent:n,scrollData:r}))&&(3!=n.which||2!=n.button)){r.fromScroller=!0;var l,a=null,d=1;this._document=e(document),this._window=e(i),this._mouseMove=function(e){var i,n,o;if(this._relDisX=(this._startx=e.clientX!=s?e.clientX:e.originalEvent.changedTouches[0].clientX)-this._startX,this._relDisY=(this._starty=e.clientY!=s?e.clientY:e.originalEvent.changedTouches[0].clientY)-this._startY,this._duration=(e.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,e.preventDefault(),!t.isNullOrUndefined(e.target.tagName)&&"iframe"===e.target.tagName.toLowerCase())return e.type="mouseup",void this._mouseUp(e);if(i="mousemove"==e.type?e[r.clientXy]:e.originalEvent.changedTouches[0][r.clientXy],a&&i!==a&&(this._mouseMoved=!0,n=i-a,o=this.model[r.scrollVal]-n,1==d&&Math.abs(n)>5&&(l=r.position,d=0),0==d&&(a=i),o>=0&&o<=r.scrollable&&l===r.position)){var h=this._velocityY>.5&&this._duration<50&&"Top"==r.position,c=this._velocityX>.5&&this._duration<50&&"Left"==r.position;(this._velocityY>.5||this._velocityX>.5)&&this._duration<50?h?(o=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(o+=this.scrollTop())>r.scrollable&&(o=r.scrollable):(o<this.scrollTop()&&(o=Math.abs(o-this.scrollTop())),o>this.scrollTop()&&(o=0)),this.scrollTop()<=r.scrollable&&this.scrollY(o,!1,this.model.animationSpeed,"thumb")):c&&(o=Math.abs(this._relDisX),this._startX>this._startx?(o+=this.scrollLeft())>r.scrollable&&(o=r.scrollable):(o-=this.scrollLeft(),((o=Math.abs(o))>r.scrollable||o>=this.scrollLeft())&&(o=0)),this.scrollLeft()<=r.scrollable&&this.scrollX(o,!1,this.model.animationSpeed,"thumb")):(this["scroll"+r.xy](o,!0,"","thumb",e.type),"X"===r.xy?this._hScrollbar.scroll(o,"thumb",!0,e.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(o,"thumb",!0,e.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:e,scrollData:r}))}null==a&&(a=i)},this._on(e(document),"mousemove touchmove",{d:r,source:"thumb"},this._mouseMove),this._mouseMoved=!1,this._on(e(document),"mouseup touchend",{d:r,source:"thumb"},this._mouseUp)}},_scroll:function(e){for(var i,s,n=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null],r=0;r<2;r++)if((i=n[r])&&!i.skipChange){if(this._externalCall||("height"===i.dimension?this.scrollTop(e.target[i.scrollVal]):this.scrollLeft(e.target[i.scrollVal])),i.sTop=this.model&&null!=this.model.targetPane&&1==r&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0][i.scrollVal]:"scrollTop"==i.scrollVal?this.scrollTop():this.scrollLeft(),this[i.scrollVal](i.sTop),i.fromScroller)return;1===r?(s=this.content()[0],this._rtlScrollLeftValue&&s.scrollWidth-s.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=s.scrollWidth-s.clientWidth),i.sTop=this.model&&"mozilla"!=t.browserInfo().name&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?0==this._rtlScrollLeftValue?i.sTop*-1:i.sTop-this._rtlScrollLeftValue:i.sTop,this._hScrollbar.scroll(i.sTop,"",!0)):this._vScrollbar.scroll(i.sTop,"",!0),(2==n.length&&1==r||1==n.length&&0==r)&&(this._externalScroller=!1)}},_changevHandlerPosition:function(e){var t=this._vScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&e>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(e){var t=this._hScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&top>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_destroy:function(){this.element.css({width:"",height:""}).find(".e-vscrollbar,.e-hscrollbar").remove(),this.content().removeClass("e-content").css({width:"",height:""})}})}(jQuery,Syncfusion,window)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.button.min",["./../common/ej.core.min"],e):e()}(function(){!function(e,t){t.widget("ejButton","ej.Button",{element:null,model:null,validTags:["button","input"],_setFirst:!1,_rootCSS:"e-button",_requiresID:!0,defaults:{size:"normal",type:"submit",height:"",width:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",showRoundedCorner:!1,cssClass:"",prefixIcon:null,suffixIcon:null,enableRTL:!1,repeatButton:!1,timeInterval:"150",create:null,click:null,destroy:null},dataTypes:{size:"enum",enabled:"boolean",type:"enum",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",prefixIcon:"string",suffixIcon:"string",cssClass:"string",repeatButton:"boolean",enableRTL:"boolean",timeInterval:"string",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},_init:function(){this._cloneElement=this.element.clone(),this._initialize(),this._render(),this._controlStatus(this.model.enabled),this._wireEvents(this.model.repeatButton),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e),"disabled"==t&&"disabled"==e&&i.disable()})},_destroy:function(){this._off(this.element,"blur",this._btnBlur),this.element.removeClass(this.model.cssClass+"e-ntouch e-btn e-select e-disable e-corner e-widget").removeAttr("role aria-describedby aria-disabled"),this.element.removeClass("e-btn-"+this.model.size),this.model.contentType&&"textonly"!=this.model.contentType&&this.element.append(this._cloneElement.text())&&this.imgtxtwrap[0].remove()},_setModel:function(e){for(var t in e)switch(t){case"size":this._setSize(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this._setMajorIcon(e[t]);break;case"suffixIcon":this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"timeInterval":this.model.timeInterval=e[t];break;case"htmlAttributes":this._addAttr(e[t])}},_setSize:function(e){this.element.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal"),this.element.addClass("e-btn-"+e)},_setType:function(e){this.element.prop({type:e})},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(e){this.element.css("width",e)},_setText:function(e){"inputButton"==this.buttonType?this.element.val(e):this.model.contentType==t.ContentType.TextOnly?this.element.html(e):this.textspan.html(e),this.model.text=e},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e),this.model.prefixIcon=e},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e),this.model.suffixIcon=e},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this._renderButtonNormal())},_setImagePosition:function(e){this.model.contentType==t.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this._renderButtonNormal())},_setRTL:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass),this.element.addClass(e))},_initialize:function(){t.isTouchDevice()||this.element.addClass("e-ntouch"),this.element.is("input")?this.buttonType="inputButton":this.element.is("a")||this.element.is("button")?this.buttonType="tagButton":this.element.removeClass("e-button"),this.element.attr("type")?this.model.type=this.element.attr("type"):this._setType(this.model.type),this._timeout=null},_render:function(){this._setSize(this.model.size),this._setHeight(this.model.height),this._setWidth(this.model.width),this._setRTL(this.model.enableRTL),this.element.addClass(this.model.cssClass+" e-btn e-select e-widget").attr("role","button"),"inputButton"==this.buttonType?(this.element.addClass("e-txt"),null!=this.model.text&&""!=this.model.text?this.element.val(this.model.text):this.model.text=this.element.val()):this._renderButtonNormal(),this._roundedCorner(this.model.showRoundedCorner),this.model.text&&this.element.attr("aria-describedby",this.model.text)},_renderButtonNormal:function(){if((null==this.model.text||""==this.model.text)&&(this.model.text=this.element.html()),this.element.empty(),this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.model.contentType.indexOf("image")>-1&&(this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("div")),this.model.contentType==t.ContentType.TextAndImage){switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}this.element.append(this.imgtxtwrap)}else this.model.contentType==t.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageBoth?(this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageOnly?(this.imgtxtwrap.append(this.majorimgtag),this.element.append(this.imgtxtwrap)):(this.element.addClass("e-txt"),this.element.html(this.model.text))},_roundedCorner:function(e){1==e?this.element.addClass("e-corner"):this.element.removeClass("e-corner")},_wireEvents:function(t){t&&(this._on(this.element,"mousedown",this._btnRepatMouseClickEvent),this._on(e(document),"mouseup",this._mouseUpClick),this._on(this.element,"keyup",this._btnRepatKeyUpEvent),this._on(e(document),"keypress",this._btnRepatKeyDownEvent)),this._on(this.element,"click",this._btnMouseClickEvent),this._on(this.element,"blur",this._btnBlur)},_btnBlur:function(){this.element.removeClass("e-animate")},_btnMouseClickEvent:function(e){var t,i=this;if(this.element.addClass("e-animate"),!i.model.enabled)return!1;i.element.hasClass("e-disable")||(t={target:e.currentTarget,e:e,status:i.model.enabled},i._trigger("click",t))},_btnRepatMouseClickEvent:function(e){var t=this;if(!t.model.enabled)return!1;t.element.hasClass("e-disable")||({status:t.model.enabled},(0==e.button||1==e.which)&&(t._timeout=setInterval(function(){t._trigger("click",{target:e.currentTarget,status:t.model.enabled})},this.model.timeInterval)))},_mouseUpClick:function(){clearTimeout(this._timeout)},_btnRepatKeyDownEvent:function(e){var t,i=this;i.element.hasClass("e-disable")||(t={status:i.model.enabled},(32==e.keyCode||13==e.keyCode)&&i._trigger("click",t))},_btnRepatKeyUpEvent:function(e){(32==e.keyCode||13==e.keyCode)&&clearTimeout(this._timeout)}}),t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},t.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"},t.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.checkbox.min",["./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked","checkState"],checked:t.util.valueFunction("checked"),checkState:t.util.valueFunction("checkState"),_init:function(){var e=t.browserInfo();this._isIE8="msie"==e.name&&"8.0"==e.version,this._isDevice=this._checkDevice(),this._setValue(),this._renderControl(),this.model.enableRTL&&this._setRTL(),this.model.enabled&&this._wireEvents(),this._setEnabled(this.model.enabled),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._addAttr(this.model.htmlAttributes)},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_setRTL:function(){e(this.maindiv).addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").data("validator")||this.wrapper.closest("form").validate()},_setValidation:function(){var i,s,n,r;this.wrapper.find("input").rules("add",this.model.validationRules),i=this.wrapper.closest("form").data("validator"),i=i||this.wrapper.closest("form").validate(),name=this.wrapper.find("input").attr("name"),i.settings.messages[name]={};for(s in this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s])){i.settings.messages[name][s]=e.validator.messages[s];for(r in this.model.validationMessage)s==r&&(n=this.model.validationMessage[s])}else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._setEnabled(!1):"checked"==t&&"checked"==e?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,e)})},_triggerBeforeChange:function(){var e={isChecked:this._isChecked,isInteraction:!1};if(1==this._trigger("beforeChange",e))return!1},_triggerChange:function(){var e={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!1};this._trigger("change",e)},_setModel:function(i){var s,n,r;for(s in i)switch(s){case"checked":e(this.maindiv).removeClass("e-material-animate"),this.model.beforeChange&&this._triggerBeforeChange(),this.checked()instanceof Array?(n=t.util.getVal(i[s]),r=n[n.length-1],this.model.value==r&&(this._isChecked=!0)):(this._isChecked=t.util.getVal(i[s]),this.checked(this._isChecked)),this._isChecked?this._checked():this._unChecked(),this.model.change&&this._triggerChange();break;case"enableTriState":i[s]&&(this.model.enableTriState=i[s],this._indeterminateState=i[s]);break;case"checkState":this.model.enableTriState&&(this.model.beforeChange&&this._triggerBeforeChange(),this._isChecked=t.util.getVal(i[s]),this.checkState(this._isChecked),this._changeState(this._isChecked),this.checked()instanceof Array?this._updateCheckedItem():"check"==i[s]?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked="uncheck"!=this.checkState()),this._triggerChange()));break;case"cssClass":this._changeSkin(i[s]);break;case"enableRTL":i[s]?this._setRTL():e(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.wrapper.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(i[s]);break;case"name":this.element.attr("name",i[s]),(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.setAttribute("name",i[s]),this.model.name=i[s];break;case"value":this.element.attr("value",i[s]);break;case"size":this._setSize(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":this._setEnabled(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this.element.removeClass("e-checkbox e-input"),this.element.insertBefore(this.wrapper),this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),e("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1,this._isChecked=!1;var e=this.element[0].getAttribute("id"),i=this.element[0].getAttribute("name"),s=this.element[0].getAttribute("value");t.isNullOrUndefined(e)||(this.model.id=e),t.isNullOrUndefined(i)||(this.model.name=i),t.isNullOrUndefined(s)||""==s||(this.model.value=s),this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0),t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id),this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(i){i==t.CheckboxSize.Medium?(e(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"),e(this.maindiv).removeClass("e-check-small").addClass("e-check-medium")):(e(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small"),e(this.maindiv).removeClass("e-check-medium").addClass("e-check-small"))},_setRoundedCorner:function(e){e?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(e){e?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?"indeterminate"==this.checkState()?this._indeterminateState=!0:"check"==this.checkState()?this._isChecked=!0:"uncheck"==this.checkState()&&(this._isChecked=!1):"indeterminate"==this.checkState()&&this.checkState("uncheck")},_createElement:function(e,t){var i=document.createElement(e);return this._setAttributes(i,t),i},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState(),this.maindiv=this._createElement("span",{class:"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0}),this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id)),this.innerdiv=document.createElement("div"),this._setSize(this.model.size),this.span=document.createElement("span"),this.span=e(this.span),this.spanImg=this._createElement("span",{class:"e-chk-image e-icon",role:"presentation"}),this.spanImg=e(this.spanImg),this.element.addClass("e-input"),this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name,this.model.value=!!t.isNullOrUndefined(this.model.value)||this.model.value,this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value});var i=e("#"+this._id+"_hidden");this._hiddenInput=i.length?i[0]:this._createElement("input",{type:"checkbox",value:!1,style:"display:none"}),this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden"),this._setRoundedCorner(this.model.showRoundedCorner),this.checked()&&this._setCheckedItem(this.checked()),this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name)),this.checked()instanceof Array||this.checked(this._isChecked),this.span[0].appendChild(this.spanImg[0]),this.innerdiv.appendChild(this.span[0]),this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]),this.maindiv.appendChild(this.element[0]),this.maindiv.appendChild(this._hiddenInput),this.maindiv.appendChild(this.innerdiv),this.wrapper=e(this.maindiv),this._setTextWrapper(this.model.text),this.chkbx=this.element,1==this.model.enableTriState&&1==this._indeterminateState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(e){"indeterminate"==e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):"check"==e?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):"uncheck"==e&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(e){e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checkState("indeterminate"),this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(e){""!=e&&(this.txtSpan=t.buildTag("div.e-text",e),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),this.element[0].setAttribute("id",t)},_isValid:function(e){return!t.isNullOrUndefined(e)&&""!=e},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler),this._isIE8&&this._isValid(this.model.id)&&this._on(e("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()}),this._on(this.wrapper,"focus",this._focusIn),this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click"),this._isIE8&&this._isValid(this.model.id)&&this._off(e("label[for="+this.model.id+"]"),"click"),this._off(this.wrapper,"focus"),this._off(this.wrapper,"focusout")},_focusIn:function(){e(this.wrapper).addClass("e-focus"),e(this.wrapper).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.wrapper).removeClass("e-focus"),e(this.wrapper).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){32==e.keyCode&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(t){var i={isChecked:this._isChecked,isInteraction:!0,event:t};return 1!=this._trigger("beforeChange",i)&&(this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0,this.checkState("check"))):this.span.hasClass("e-chk-act")?1==this.model.enableTriState&&1==this._indeterminateState?(this._setIndeterminate(!0),this.checked()instanceof Array||(this.checked(!0),this.checkState("indeterminate"))):(this._unChecked(),this.checked()instanceof Array||(this.checked(!1),this.checkState("uncheck"))):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),e(this.maindiv).addClass("e-material-animate"),i={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!0,event:t},this._trigger("change",i),!0)},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act"),this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.wrapper[0].setAttribute("aria-checked",!0),this.wrapper.find("input[type=checkbox]").prop("checked",!0),this.checkState("check"),this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1),this.spanImg.removeClass("e-checkmark e-stop"),this.wrapper.find("input[type=checkbox]").prop("checked",!1),this.checkState("uncheck"),this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(e){if(t.isNullOrUndefined(e)||""==e||e instanceof Array){if(e instanceof Array&&!t.isNullOrUndefined(this.model.value)&&""!=this.model.value)for(var i=0;i<e.length;i++)e[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||""==this.model.value||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(e.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):e.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(e.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(null!=this._isChecked&&void 0!=this._isChecked)return this._isChecked}}),t.CheckboxSize={Small:"small",Medium:"medium"},t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.menu.min",["./../common/ej.core.min","./ej.checkbox.min"],e):e()}(function(){!function(e,t,i){t.widget("ejMenu","ej.Menu",{element:null,model:null,validTags:["ul"],_setFirst:!1,_rootCss:"e-menu",angular:{terminal:!1},defaults:{height:"",width:"",animationType:"default",orientation:t.Orientation.Horizontal,menuType:"normalmenu",isResponsive:!0,contextMenuTarget:null,htmlAttributes:{},cssClass:"",openOnClick:!1,subMenuDirection:"none",enableCenterAlign:!1,showRootLevelArrows:!0,showSubLevelArrows:!0,enableAnimation:!0,enableSeparator:!0,enabled:!0,overflowHeight:"auto",overflowWidth:"auto",fields:{child:null,dataSource:null,query:null,tableName:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",url:"url",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",linkAttribute:"linkAttribute",imageUrl:"imageUrl"},enableRTL:!1,titleText:"Menu",locale:"en-US",excludeTarget:null,beforeOpen:null,open:null,close:null,mouseover:null,mouseout:null,click:null,keydown:null,overflowOpen:null,overflowClose:null,create:null,destroy:null},dataTypes:{animationType:"enum",cssClass:"string",titleText:"string",locale:"string",openOnClick:"boolean",enabled:"boolean",enableCenterAlign:"boolean",showArrow:"boolean",showRootLevelArrows:"boolean",showSubLevelArrows:"boolean",enableSeparator:"boolean",isResponsive:"boolean",enableRTL:"boolean",enableAnimation:"boolean",fields:{dataSource:"data",query:"data",child:"data"},excludeTarget:"string",htmlAttributes:"data"},_setModel:function(t){for(var i in t)switch(i){case"menuType":t[i]=this.model.menuType;break;case"fields":this._wireEvents("_off"),this.element.empty().insertBefore(this.wrapper),this.wrapper.remove(),e.extend(this.model.fields,t[i]),this._intializeData(),this.model.enabled||this._wireEvents("_off");break;case"orientation":this._setOrientation(t[i]);break;case"showRootLevelArrows":this._addArrow(t[i],this.model.showSubLevelArrows);break;case"showSubLevelArrows":this._addArrow(this.model.showRootLevelArrows,t[i]);break;case"enableSeparator":this._setSeparator(t[i]);break;case"height":this._setHeight(t[i]);break;case"width":this._setWidth(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"isResponsive":this.model.isResponsive?this._responsiveLayout():(e(this.resWrap).remove(),e(this.wrapper).removeClass("e-menu-responsive"),e(this.element).removeClass("e-menu-responsive"),this.resWrap=null);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableRTL":this._setRTL(t[i]);break;case"enableCenterAlign":this._centerAlign(t[i]);break;case"excludeTarget":this.model.excludeTarget=t[i];break;case"enabled":this.model.enabled=t[i],this._controlStatus(t[i]);break;case"animationType":this._setAnimation(t[i]);break;case"enableAnimation":this.model.enableAnimation=t[i];break;case"openOnClick":this._hoverOpen=!t[i],this._hoverClose=!t[i];break;case"subMenuDirection":this._setSubMenuDirection(this.model.subMenuDirection);break;case"titleText":this._titleText(t[i]);break;case"locale":this.model.locale=t[i],this._updateLocalConstant(),this._setLocale();break;case"overflowHeight":this._setOverflowDimensions("height",t[i]);break
;case"overflowWidth":this._setOverflowDimensions("width",t[i])}},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.Menu",this.model.locale)},_setLocale:function(){this._titleText(this._localizedLabels.titleText)},_titleText:function(i){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e(this.label).text(i)},_destroy:function(){this.model.menuType==t.MenuType.ContextMenu?this._referenceElement.append(this._cloneElement):this._cloneElement.insertBefore(this.wrapper),this._cloneElement.removeClass("e-menu e-js"),this.wrapper.remove()},_init:function(){this._cloneElement=this.element.clone(),this.element.css("visibility","hidden"),this._setValues(),this._intializeData(),this.element.css("visibility","visible")},_setValues:function(){this._mouseOver=!0,this._hoverOpen=!0,this._hoverClose=!0,this._isMenuOpen=!1,this._hideSpeed=100,this._showSpeed=100,this._isSubMenuOpen=!1,this._isContextMenuOpen=!1,this._disabledMenuItems=[],this._hiddenMenuItems=[],this._delayMenuHover=0,this._delaySubMenuHover=0,this._delaySubMenuShow=0,this._preventContextOpen=!0,this._setAnimation(this.model.animationType),this._isFocused=!0,this._menuOverflowItems=[],this._menuHeaderItems=[],this._menuCloneItems=[],this._itemWidth=0},_intializeData:function(){t.isNullOrUndefined(this.model.fields)||null==this.model.fields.dataSource?(this._renderMenu(),this._wireEvents("_on"),this._calculateOverflowItems()):(this._generateTemplate(this.model.fields.dataSource),this._renderMenu())},_renderMenu:function(){this._renderControl(),this._addArrow(this.model.showRootLevelArrows,this.model.showSubLevelArrows),this._renderArrow(),this._intializeMenu(),this._itemWidth=this.element.width(),this.model.isResponsive&&this._ensureResponsiveClasses(e(window).width()<767),"horizontal"==this.model.orientation&&(this._on(this.element.parent().find("span.e-check-wrap.e-icon"),"click",this._mobileResponsiveMenu),null!=this.model.fields.dataSource&&this._calculateOverflowItems())},_renderControl:function(){"normalmenu"==this.model.menuType?(this.wrapper=t.buildTag("div"),this.wrapper.addClass(this.model.cssClass+" e-menu-wrap")):this.wrapper=t.buildTag("div.e-menu-wrap"),this.model.isResponsive&&this._responsiveLayout(),this.model.menuType!=t.MenuType.ContextMenu&&(this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)),this.element.addClass("e-menu e-widget e-box").attr({role:"menu",tabindex:0}),this._addAttr(this.model.htmlAttributes),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this._setSubMenuDirection(this.model.subMenuDirection),"normalmenu"==this.model.menuType?"horizontal"==this.model.orientation?this.element.addClass("e-horizontal"):this.element.addClass("e-vertical"):this._contextMenu_Template(),this._addClass(),this.model.enableCenterAlign&&this._centerAlign(this.model.enableCenterAlign),this.model.enableSeparator&&this._setSeparator(!0),this.model.enabled||this.disable()},_renderPopupWrapper:function(){if(this._ensureOverflowPopup()){this.popupWrapper=t.buildTag("div.e-menu-popwrap"),this.popupWrapper.insertAfter(this.element);var e="number"==typeof value?this.model.overflowHeight+"px":this.model.overflowHeight,i="number"==typeof value?this.model.overflowWidth+"px":this.model.overflowWidth;this.popupWrapper.css({height:e,width:i}),this.popupWrapper.hide(),this._addOverflowItems()}},_calculateOverflowItems:function(){var i,s,n;if(this._ensureOverflowPopup()){this.element.find("li.e-list").removeClass("e-menu-show"),e(this.lastelement).removeClass("e-last"),this._menuHeaderItems=[],i=this.element.outerWidth(),this.element.find("li.e-ham-wrap").length>0&&(this._itemWidth<=this.element.width()||this._itemWidth>=this.element.width()&&!this._isOverflowPopupOpen())&&(t.isNullOrUndefined(this.popupWrapper)||this.popupWrapper.hide()),this._renderHamburgerIcon(),this.element.find("li.e-ham-wrap").css({display:"list-item"});var r=this.element.find("li.e-ham-wrap").outerWidth(),o=0,l=!0;for(this.element.find("li.e-ham-wrap").hide(),this._menuHeaderItems=this.element.find(">li.e-list"),this._menuOverflowItems=[],s=0;s<this._menuHeaderItems.length;s++)if(n=e(this._menuHeaderItems[s]),(o+=n.outerWidth())<i)n.removeClass("e-menu-hide"),this.model.enableSeparator&&this._setSeparator(!0);else{if(l){l=!1,this.element.find("li.e-ham-wrap").css({display:"list-item"}),o=o-n.outerWidth()+r,s>1&&(o-=e(this._menuHeaderItems[s-1]).outerWidth(),s-=2);continue}this._menuOverflowItems.push(e(n).clone(!0)),n.addClass("e-menu-hide")}this._menuOverflowItems.length>0?(this._renderHamburgerIcon(),e(".e-menu-popwrap").length?this._addOverflowItems():this._renderPopupWrapper(),this.lastelement=this.element.find(">li.e-list:visible").last().addClass("e-last"),this.element.find(">li.e-list.e-haschild>ul").find("li.e-haschild").find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")):0==this._menuOverflowItems.length&&e("li.e-ham-wrap").length>0&&this.element.find("li.e-ham-wrap").remove()}("vertical"==this.model.orientation||this.model.menuType==t.MenuType.ContextMenu&&e(window).width()>=768&&this.model.isResponsive)&&this.element.find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")},_renderHamburgerIcon:function(){if(this._ensureOverflowPopup()&&0==this.element.find("li.e-ham-wrap").length){var i=t.buildTag("li.e-ham-wrap"),s=t.buildTag("div");this.hamburgerspan=t.buildTag("span.e-hamburger"),s.append(this.hamburgerspan),i.append(s),this.element.append(i),0!=this.model.height?this._setHeight(this.model.height):e("li.e-ham-wrap").css({height:this.element.find("li.e-list").first().height()}),this._on(this.element.find("li.e-ham-wrap"),"click",this._overflowOpen)}},_addOverflowItems:function(){var i,s,n;if(this._ensureOverflowPopup()&&e(".e-menu-popwrap").length>0&&!t.isNullOrUndefined(this.popupWrapper)){for(this.popupWrapper.empty(),this._menuCloneItems.length=0,i=0;i<this._menuOverflowItems.length;i++)this._menuCloneItems.push(e(this._menuOverflowItems[i]).clone(!0));for(this.ulTag=t.buildTag("ul"),this.ulTag.addClass("e-menu e-js e-responsive e-widget e-box e-vertical"),this.popupWrapper.append(this.ulTag),i=0;i<this._menuCloneItems.length;i++)e(this._menuCloneItems[i]).hasClass("e-haschild")&&(e(this._menuCloneItems[i]).find("span.e-icon").removeClass("e-arrowhead-down e-arrowhead-right").addClass("e-arrowhead-down"),e(this._menuCloneItems[i]).children("span.e-menu-arrow.e-menu-left").remove()),this.ulTag.append(this._menuCloneItems[i]);e(this.ulTag).children("li").removeClass("e-menu-hide"),s=Math.round(this.popupWrapper.width()),s>0&&(n=this.popupWrapper.innerWidth(),this.popupWrapper.find("ul.e-menu").css({width:n+"px"})),this.model.enableSeparator&&this._setSeparator(!0);var r=t.util.getOffset(this.element),o=r.left+(this.model.enableRTL?0:this.element.outerWidth()-this.popupWrapper.outerWidth()),l=r.top+this.element.outerHeight();this.wrapper.parent().length&&("absolute"==this.wrapper.parent().css("position")||"relative"==this.wrapper.parent().css("position"))&&(r=t.util.getOffset(this.wrapper.parent()),o-=r.left,l-=r.top),this.popupWrapper.css({left:o,top:l})}},_overflowOpen:function(e){this._isOverflowPopupOpen()?(this.popupWrapper.show(),this._trigger("overflowOpen",{e:e})):this._overflowClose(e)},_overflowClose:function(e){this._ensureOverflowPopup()&&!t.isNullOrUndefined(this.popupWrapper)&&(this.popupWrapper.find("li.e-list").removeClass(".e-mhover.e-active.e-mfocused"),this._hideAnimation(this.popupWrapper.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this.popupWrapper.hide(),this._trigger("overflowClose",{e:e}))},_isOverflowPopupOpen:function(){if(e(this.popupWrapper).length>0)return"none"==this.popupWrapper.css("display")},_removePopup:function(){e(window).width()<767&&(this.element.find("li.e-ham-wrap").length>0&&this.popupWrapper.length>0&&this.model.isResponsive&&(this.element.find("li.e-ham-wrap").remove(),e(".e-menu-popwrap").remove(),this.element.find("li.e-list").addClass("e-menu-show"),this._ensureResponsiveClasses(e(window).width()<767)),("vertical"==this.model.orientation||"contextmenu"==this.model.menuType)&&this.model.isResponsive&&this._ensureResponsiveClasses(e(window).width()))},_mobileResponsiveMenu:function(){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&"none"==this.element.css("display")?this.element.removeClass("e-res-hide").addClass("e-res-show"):this.model.menuType==t.MenuType.ContextMenu||"vertical"==this.model.orientation||"none"==this.element.css("display")||this.element.removeClass("e-res-show").addClass("e-res-hide")},_ensureOverflowPopup:function(){return this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e(window).width()>=768&&this.model.isResponsive},_onResize:function(){this.element.find("li.e-ham-wrap").hide(),e(window).width()>=768?this._calculateOverflowItems():this._removePopup()},_ensureResponsiveClasses:function(e){e&&this.element.find("span.e-icon").hasClass("e-arrowhead-right")&&this.element.find("span.e-icon.e-arrowhead-right").removeClass("e-arrowhead-right").addClass("e-arrowhead-down")},_responsiveLayout:function(){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(this.wrapper.addClass("e-menu-responsive"),this.element.addClass("e-menu-responsive"),this.resWrap=t.buildTag("span.e-menu-res-wrap e-menu-responsive"),this.inResWrap=t.buildTag("span.e-in-wrap e-box e-menu-res-in-wrap"),this.label=t.buildTag("span.e-res-title").html("en-US"==this.model.locale?this.model.titleText:t.Menu.Locale[this.model.locale]&&t.Menu.Locale[this.model.locale].titleText?t.Menu.Locale[this.model.locale].titleText:this.model.titleText),this.check=t.buildTag("span.e-check-wrap e-icon"),this.wrapper.append(this.resWrap),this.resWrap.append(this.inResWrap),this.inResWrap.append(this.label).append(this.check))},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_oncheck:function(e){var t=this.element.parents(".e-menu-wrap").children(".e-menu");e.isChecked?t.removeClass("e-res-hide").addClass("e-res-show"):t.removeClass("e-res-show").addClass("e-res-hide")},_addClass:function(){var t,i,s,n,r;for(this.element.find('li:has("> ul")').find("> a,> span").addClass("aschild"),this.element.find(">li").addClass("e-list").attr({role:"menuitem"}),this.element.find("li").find(">a, >span").addClass("e-menulink"),t=this.element.find(".e-list a.aschild"),i=this.element.find(".e-list span.aschild"),r=0;r<t.length;r++)s=e(t[r]),s.siblings().attr({"aria-hidden":!0}),s.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),s.siblings("ul").children("li").addClass("e-list").attr("role","menuitem");for(r=0;r<i.length;r++)n=e(i[r]),n.siblings().attr({"aria-hidden":!0}),n.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),n.siblings("ul").children("li").addClass("e-list").attr("role","menuitem")},_renderArrow:function(){if(this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&0==e(e(this.element).find("span.e-menu-arrow")).length){var i=t.buildTag("span.e-menu-arrow e-menu-left");e(i).append("<span class='e-arrowMenuOuter'></span>").append("<span class='e-arrowMenuInner'></span>"),this.element.find(">li.e-list.e-haschild").append(i)}},_generateTemplate:function(e){var i,s=this;e instanceof t.DataManager?(i=e.executeQuery(this._columnToSelect(this.model.fields)),i.done(function(e){s._odataFlag=!0,s._generateItemTemplate(e.result),s._wireEvents("_on")})):(s._odataFlag=!1,this._generateItemTemplate(s.model.fields.dataSource),this._wireEvents("_on"))},_generateItemTemplate:function(e){for(var t,i=0;i<e.length;i++)(null==e[i][this.model.fields.parentId]||0==e[i][this.model.fields.parentId])&&(t=this._menuTemplate(e[i],e,this.model.fields),this.element.append(t))},_menuTemplate:function(i,s,n){var r,o,l,a,d,h,c,u,p,m,g;if(r=e(document.createElement("li")),r.attr("class","e-list"),i[n.htmlAttribute]&&this._setAttributes(i[n.htmlAttribute],r),o=e(document.createElement("a")),o.attr("class","e-menulink"),i[n.imageUrl]&&""!=i[n.imageUrl]?(l=e(document.createElement("img")),l.attr("src",i[n.imageUrl]),i[n.imageAttribute]&&this._setAttributes(i[n.imageAttribute],l),o.append(l)):i[n.spriteCssClass]&&""!=i[n.spriteCssClass]&&(a=e(document.createElement("span")),a.addClass(i[n.spriteCssClass]),o.append(a)),o.append(i[n.text]),i[n.linkAttribute]&&this._setAttributes(i[n.linkAttribute],o),i[n.url]&&o.attr("href",i[n.url]),r.append(o),i[n.id]&&r.prop("id",i[n.id]),t.isNullOrUndefined(n.child)){if(!this._odataFlag&&(u=t.DataManager(n.dataSource).executeLocal(t.Query().where(n.parentId,t.FilterOperators.equal,i[n.id])))&&u.length>0){for(p=t.buildTag("ul"),m=0;m<u.length;m++)g=this._menuTemplate(u[m],n.dataSource,n),p.append(g);r.append(p)}}else if(this._odataFlag=!0,n.child.dataSource instanceof t.DataManager)d=this,h=t.Query(),e(r).attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),h=this._columnToSelect(n.child),h.where(n.child.parentId,t.FilterOperators.equal,i[n.id]),c=n.child.dataSource.executeQuery(h),c.done(function(t){var i,s,o,l=t.result;if(l&&l.length>0){for(i=e(document.createElement("ul")),s=0;s<l.length;s++)o=d._menuTemplate(l[s],n.child.dataSource,n.child),i.append(o);r.append(i),e(r).children("a").addClass("aschild"),e(r).parent().hasClass("e-menu")&&d.model.showRootLevelArrows?e(r).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):d.model.showSubLevelArrows&&e(r).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space")}}),c.then(function(){d._renderArrow()});else if(t.isNullOrUndefined(i.child)||(t.isPlainObject(i.child)?u=t.DataManager(n.child.dataSource).executeLocal(t.Query().where(n.child.parentId,t.FilterOperators.equal,i[n.id])):i.child instanceof Array&&(u=i.child)),u&&u.length>0){for(p=e(document.createElement("ul")),m=0;m<u.length;m++)g=this._menuTemplate(u[m],n.child.dataSource,n.child),p.append(g);r.append(p)}return r},_setAttributes:function(e,t){for(var i in e)"class"==i?t.addClass(e[i]):t.attr(i,e[i])},_addArrow:function(t,i){if(t){var s="horizontal"==this.model.orientation?"e-arrowhead-down":"e-arrowhead-right";this.element.find('>li.e-list:has("> ul")').children("a,span").append(e("<span>").addClass("e-icon "+s)).addClass("e-arrow-space")}else this.element.find('>li.e-list:has("> ul")').children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove();i?this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove()},_intializeMenu:function(){0!=this.model.height&&this._setHeight(this.model.height),0!=this.model.width&&this._setWidth(this.model.width),"contextmenu"==this.model.menuType&&(this.model.openOnClick=!1),this.model.openOnClick&&(this._hoverOpen=!1,this._hoverClose=!1)},_setOrientation:function(e){"horizontal"==e?this.element.removeClass("e-vertical e-horizontal").addClass("e-horizontal"):this.element.removeClass("e-horizontal e-vertical").addClass("e-vertical"),"vertical"==e&&this._removePopup()},_setHeight:function(i){"horizontal"==this.model.orientation&&"auto"!==i?(i="number"==typeof i?i+"px":i,this.element.find("> li").find(">a:first").css("line-height",i),this.model.showRootLevelArrows&&this.element.find("> li").find(">a:first").find("> span:first").css({"line-height":i,top:"0px"}),this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e("li.e-ham-wrap").length>0&&(this.element.find("li.e-ham-wrap").children("div").css({"line-height":i}),this.element.find("li.e-ham-wrap").css({height:i}),e(".e-menu-popwrap").length>0&&this.popupWrapper.find("a.e-menulink").css({"line-height":i}))):this.element.height(i)},_setWidth:function(e){this.element.css("width",e),"horizontal"===this.model.orientation&&"auto"!==e&&this.model.isResponsive&&this.resWrap.css("width",e),"horizontal"==this.model.orientation&&this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&this._calculateOverflowItems()},_setOverflowDimensions:function(e,i){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(i="number"==typeof i?i+"px":i),"height"==e?this.popupWrapper.css({height:i}):"width"==e&&this.popupWrapper.css({width:i}),this._addOverflowItems()},_setRTL:function(e){e?this.element.removeClass("e-rtl").addClass("e-rtl"):this.element.removeClass("e-rtl"),e&&"horizontal"===this.model.orientation?this.wrapper.removeClass("e-menu-rtl").addClass("e-menu-rtl"):this.wrapper.removeClass("e-menu-rtl"),this.model.subMenuDirection=e?"left":"right"},_setSubMenuDirection:function(e){"left"!=e&&"right"!=e&&(this.model.subMenuDirection=this.model.enableRTL?"left":"right")},_setAnimation:function(e){"none"===e?(this._showAnim="none",this._hideAnim="none"):(this._showAnim="slideDown",this._hideAnim="slideUp")},_controlStatus:function(e){1!=e?this.disable():this.enable()},_centerAlign:function(e){"horizontal"==this.model.orientation&&e?this.element.css("text-align","center"):this.element.css("text-align","inherit")},_columnToSelect:function(e){var i,s=[],n=t.Query();if(t.isNullOrUndefined(e.query)){for(i in e)"tableName"!==i&&"child"!==i&&"dataSource"!==i&&e[i]&&s.push(e[i]);s.length>0&&n.select(s),this.model.fields.dataSource.dataSource.url.match(e.tableName+"$")||t.isNullOrUndefined(e.tableName)||n.from(e.tableName)}else n=e.query;return n},_max_zindex:function(){var t,i,s;return"contextmenu"==this.model.menuType?(t=e(this._targetElement).parents(),t.push(this._targetElement)):t=e(this.element).parents(),i=e("body").children(),index=i.index(this.popup),i.splice(index,1),e(i).each(function(e,i){t.push(i)}),s=Math.max.apply(s,e.map(t,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!s||s<1e4?s=1e4:s+=1,s},_recursiveFunction:function(t,i){var s=this,n=!1;e.each(t,function(e,t){return t.Text==i?(s.selectedItem=t,n=!0,!1):(null!=t.ChildItems&&s._recursiveFunction(t.ChildItems,i),!n&&void 0)})},_contextMenu_Template:function(){var t=e(".e-menu-wrap #"+this.element[0].id).get(0);t&&e(t.parentElement).remove(),this.model.orientation="vertical",this.element.addClass(this.model.cssClass+" e-context"),this.element.css("display","none"),this._referenceElement=this.element.parent(),e("body").append(this.element),this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)},_closeMenu:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim)},_onMenuIntent:function(e,t,i){t._delayMenuHover=window.setTimeout(function(){if(1==t._mouseOver&&i){var s=t._showAnim,n=t._hideAnim;t._showSpeed,t._hideSpeed;t._show(e,s,n)}},this._showSpeed)},_onHide:function(e,t,i){t._delaySubMenuHover=window.setTimeout(function(){if(0==t._mouseOver&&i){t._id,t._hideAnim,t._hideSpeed;t._closeAll()}},t._hideSpeed)},_subMenuPos:function(t,s){var n,r,o,l,a,d,h,c,u=e(t).offset(),p=u.left,m=e("ul:first",t),g=e(t).outerWidth();if(null==u||u==i)return!1;if(o=m.outerWidth()+1,l=document.documentElement.clientWidth+e(document).scrollLeft(),"normalmenu"==this.model.menuType)if(e(t.parentNode).is(this.element))"horizontal"==this.model.orientation?(m.css("top",e(t).outerHeight()+"px"),this.model.enableRTL?(r=p+g-o<0?p+g-o:1,m.css({left:"auto",right:r+"px"})):(n=l<p+o?p+o-l:1,m.css("left",n*-1+"px"))):"left"==s&&p>o||"right"==s&&l<=u.left+g+o?m.css("left",-(o+4)+"px"):m.css("left",e(t).outerWidth()+4+"px");else if("left"==s&&p>o||"right"==s&&l<=u.left+g+o)m.css("left",-(o+4)+"px");else{m.css("left",e(t).outerWidth()+4+"px");var h=m.outerHeight(),f=e(window).height(),_=f-(u.top-e(window).scrollTop());f<h?(a=u.top-e(window).scrollTop(),m.css("top",4-a+"px")):_<h?(a=_-h,m.css("top",a-2+"px")):m.css("top","")}else l-=u.left+2*o+4,l<0?(d=null==o?"-206.5px":"-"+(o+5)+"px",m.css("left",d)):m.parent("li.e-list").parent("ul").width()&&"right"==s?m.css("left",m.parent("li.e-list").parent("ul").width()+4+"px"):u.left>o&&m.css("left",-(o+4)+"px"),h=m.outerHeight(),u.top+h>e(window).height()?(c=-h+e(t).outerHeight(),h>u.top+e(t).outerHeight()/2?m.css("top",-(h/2)+"px"):m.css("top",c+"px")):m.css("top","0px")},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e+" e-menu-wrap")},_setSeparator:function(i){i?(this.element.addClass("e-separator"),e(".e-menu-popwrap").length>0&&!t.isNullOrUndefined(this.ulTag)&&this.ulTag.addClass("e-separator")):this.element.removeClass("e-separator")},_contextMenuEvents:function(t){this[t](e(this.model.contextMenuTarget),"mouseup taphold",this._ContextMenuHandler),this[t](this.element,"contextmenu",this._onDefaultPreventer),this[t](e(this.model.contextMenuTarget),"contextmenu",this._onDefaultPreventer),this[t](e(document),"mousedown",this._onContextClose)},_show:function(t,i,s){var n,r=e("> ul",t),o=this._max_zindex();r.attr({"aria-hidden":!1}),this._hideAnimation(e(t).siblings().find(" > ul:visible"),s),e.inArray(this._disabledMenuItems,t)>-1||("none"!=r.css("display")?(n=this.model.openOnClick?e(r):r.children().find("> ul"),this._hideAnimation(n,s)):e("> ul",t).children().find("> ul").hide(),this._subMenuPos(t,this.model.subMenuDirection),r.css({"z-index":o+1}),e(t).children("span.e-menu-arrow").css({"z-index":o+2}),"block"==e("> ul",t).css("display")||e(t).hasClass("e-disable-item")||(this._showAnimation(r,i),r.closest("li").addClass("e-active e-mfocused")),e(t).siblings("li.e-active").length>0&&e(t).siblings("li.e-active").removeClass("e-active e-mfocused"))},_closeAll:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this._hideAnimation(this.element.find("> ul:visible"),this._hideAnim)},_showAnimation:function(e,t){switch(t){case"slideDown":e.slideDown(this.model.enableAnimation?200:0);break;case"none":e.css("display","block")}},_hideAnimation:function(t,i){switch(i){case"slideUp":e(t).attr({"aria-hidden":!0}),t.slideUp(this.model.enableAnimation?100:0);break;case"none":t.css("display","none")}t.closest("li").removeClass("e-active e-mfocused")},_removeValue:function(i,s){for(var n=t.browserInfo(),r="8.0"===n.version&&"msie"===n.name?i[0].outerText:i[0].textContent,o=e(s).length,l=0,a=0==e(s).children("a").length?e(s).children("span"):e(s).children("a");l<=o;){if(e(a[l]).text()===r)return l;l++}},_createSubLevelItem:function(t,i){var s;s=e(document.createElement("ul")),s.append(i),t.append(s),t.attr({role:"menu","aria-haspopup":"true"}),t.addClass("e-haschild"),this.element.find('li:has("> ul")').find("> a,>span").addClass("aschild e-arrow-space"),this._insertArrows(s)},_insertArrows:function(t){this.model.showRootLevelArrows?t.find(">a,>span").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):t.find(">a,>span").removeClass("e-arrow-space").find(">span.e-icon").remove(),this.model.showSubLevelArrows?t.parent("li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):t.parent("li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").find(">span.e-icon").remove()},_createMenuItem:function(t){var i,s,n,r;return i=e(document.createElement("li")),i.attr({class:"e-list",role:"menuitem"}),t.htmlAttribute&&this._setAttributes(t.htmlAttribute,i),t.text&&""!=t.text&&(s=e(document.createElement("a")),s.attr({class:"e-menulink"}),t.imageUrl&&""!=t.imageUrl?(n=e(document.createElement("img")),n.attr("src",t.imageUrl),t.imageAttribute&&this._setAttributes(t.imageAttribute,n),s.append(n)):t.spriteCssClass&&""!=t.spriteCssClass&&(r=e(document.createElement("span")),r.addClass(t.spriteCssClass),s.append(r)),s.append(t.text),t.linkAttribute&&this._setAttributes(t.linkAttribute,s),t.url&&s.attr("href",t.url),i.append(s)),t.id&&i.prop("id",t.id),this.model.enabled||i.addClass("e-disable-item"),i},_insertNode:function(i,s,n){var r=0,o=0,l=0,a=[];for(e(s).is(this.element)?a.push(this.element):"string"==typeof s?a.push(this.element.find(s)):void 0===s?a.push(this.element):a.push(s),o=0;o<a.length;o++)for(l=0;l<a[o].length;l++)for(r=0;r<i.length&&!t.isNullOrUndefined(i[r]);r++)this._addItem(i[r],a[o][l],n)},_addItem:function(t,i,s){var n,r;switch(this._wireEvents("_off"),n=this._createMenuItem(t),i=e("default"===i?"#"+t.parentId:i),s){case"insert":r=e(i).is(this.element)?i:i.children("ul"),0!=r.length?r.append(n):this._createSubLevelItem(i,n);break;case"insertBefore":e(i).is(this.element)?i.prepend(n):n.insertBefore(i);break;case"insertAfter":e(i).is(this.element)?i.append(n):n.insertAfter(i)}this._wireEvents("_on")},_removeItem:function(e){0==e.siblings("li").length?(e.closest("ul").siblings("a.aschild").removeClass("aschild e-arrow-space").children("span.e-icon").remove(),e.closest("ul").hasClass("e-menu")?e.remove():e.closest("ul").remove()):e.remove()},_hiddenElement:function(t){t.length>0&&e.inArray(t[0],this._hiddenMenuItems)==-1&&(t.addClass("e-hidden-item"),this._hiddenMenuItems.push(t[0]))},_showElement:function(t){t.length>0&&e.inArray(t[0],this._hiddenMenuItems)>-1&&(t.removeClass("e-hidden-item"),this._hiddenMenuItems.splice(this._hiddenMenuItems.indexOf(t[0]),1))},_getNodeByID:function(t){return"object"!=typeof t&&""!=t&&(t=this.element.find(".e-list"+t)),e(t)},_processItems:function(t,i){for(var s=this._getNodeByID(t),n=0;n<s.length;n++)i?this._showElement(e(s[n])):this._hiddenElement(e(s[n]))},insert:function(e,t){this._insertNode(e,t,"insert")},insertBefore:function(e,t){this._insertNode(e,t,"insertBefore")},insertAfter:function(e,t){this._insertNode(e,t,"insertAfter")},remove:function(t){for(var i=0,s=0,i=0;i<t.length;i++)for(t[i]="string"==typeof t[i]?this.element.find(t[i]):t[i],s=0;s<t[i].length;s++)"LI"===t[i][s].tagName||"UL"===t[i][s].tagName?this._removeItem(e(t[i][s])):t[i][s].remove()},showContextMenu:function(i,s,n,r,o){if(this._closeMenu(),this._eventArgs=r,t.isNullOrUndefined(r)||!this._checkForExclusion(r.target)){if(this._trigger("beforeOpen",{target:n,events:r}))return!1;if(this._preventContextOpen){if(this._targetElement=t.isNullOrUndefined(n)?t.isNullOrUndefined(target)?this.element:target:n,o){var l=this._calculateContextMenuPosition(r);i=l.X,s=l.Y}this.element.css({left:i,top:s}),this.element.css({"z-index":this._max_zindex()+1}),this._showAnimation(this.element,this._showAnim),this._isContextMenuOpen=!0,this.element.focus(),this._trigger("open",{target:n}),this._on(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)}return!1}},_checkForExclusion:function(i){var s,n;if(!t.isNullOrUndefined(this.model.excludeTarget))for(s=this.model.excludeTarget.split(","),n=0;n<s.length;n++)if(e(i).closest(this.model.excludeTarget).is(e.trim(s[n])))return!0},hideContextMenu:function(i){this._closeMenu(),this.element.find(".e-mhover").removeClass("e-mhover"),this.element.find(".e-mfocused").removeClass("e-mfocused"),this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)},disableItem:function(t){var i=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});i.length>0&&!(e.inArray(i.parent()[0],this._disabledMenuItems)>-1)&&(i.parent().addClass("e-disable-item").attr({"aria-disabled":!0}),i.parent().find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i.parent()[0]))},disableItemByID:function(t){if(t&&""!=t){var s=this.element.find("#"+t)?this.element.find("#"+t)[0]:i;!s||e.inArray(s,this._disabledMenuItems)>-1||(e(s).addClass("e-disable-item").attr({"aria-disabled":!0}),e(s).find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(s))}},getHiddenItems:function(){return this._hiddenMenuItems},hideItems:function(e){if("object"==typeof e&&e.length!==i)for(var t=0;t<e.length;t++)this._processItems(e[t],!1);else this._processItems(e,!1)},showItems:function(e){if("object"==typeof e&&e.length!==i)for(var t=0;t<e.length;t++)this._processItems(e[t],!0);else this._processItems(e,!0)},enableItem:function(t){var i,s=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});s.length>0&&e.inArray(s.parent()[0],this._disabledMenuItems)>-1&&(s.parent().removeClass("e-disable-item").attr({"aria-disabled":!1}),s.parent().find(">a.aschild span.e-icon").removeClass("e-disable"),i=this._removeValue(s,this._disabledMenuItems),this._disabledMenuItems.splice(i,1))},enableItemByID:function(t){var i,s;if(t&&""!=t&&(i=this.element.find("#"+t)[0])&&e.inArray(i,this._disabledMenuItems)>-1)for(e(i).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(i).find(">a.aschild span.e-icon").removeClass("e-disable"),s=this._disabledMenuItems.length-1;s>=0;s--)this._disabledMenuItems[s].id==t&&this._disabledMenuItems.splice(s,1)},disable:function(){this.model.enabled=!1;var t=this.element.find(">li[class~=e-list]"),i=this;e.each(t,function(t,s){e.inArray(s,i._disabledMenuItems)>-1||(e(s).addClass("e-disable-item").attr({"aria-disabled":!0}),e(s).find(">a.aschild span.e-icon").addClass("e-disable"),i._disabledMenuItems.push(s))})},enable:function(){var t,i=this;this.model.enabled=!0,t=this.element.find("li.e-disable-item"),e.each(t,function(t,s){e(s).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(s).find(">a.aschild span.e-icon").removeClass("e-disable"),i._disabledMenuItems.pop(s)})},show:function(e,t,i,s){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.showContextMenu(e,t,i,s,!1):this.element.css("display","block")},hide:function(e){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.hideContextMenu(e):(this._closeMenu(),this.element.css("display","none"))},_wireEvents:function(t){this[t](this.element.find("li.e-list"),"mouseout",this._mouseOutHandler),this[t](this.element.find("li.e-list"),"mouseover",this._mouseOverHandler),this[t](this.element,"click",this._onClickHandler),this[t](this.element,"keydown",this._onKeyDownHandler),this[t](this.element,"focus",this._OnFocusHandler),this[t](this.element,"blur",this._OnFocusOutHandler),"contextmenu"==this.model.menuType&&null!=e(this.model.contextMenuTarget)[0]&&this._contextMenuEvents(t),"contextmenu"!=this.model.menuType&&(this[t](e(document),"click",this._onDocumentClick),this[t](this.element,"mousedown",this._onMouseDownHandler)),this[t](e(window),"resize",e.proxy(this._onResize,this))},_mouseOverHandler:function(i){var s,n,r,o="";if(this.element.find(".e-mhover").removeClass("e-mhover"),i.currentTarget=e(i.target).closest("li")[0],e(i.currentTarget).hasClass("e-disable-item")?this._isFocused=!1:e(i.currentTarget).addClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!0,this._isMenuOpen=!0,this._isSubMenuOpen=!e(i.currentTarget.parentNode.parentNode).is(this.element),"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}e(i.currentTarget).hasClass("e-disable-item")||this._onMenuIntent(s,this,this._hoverOpen),e.inArray(s,this._disabledMenuItems)>-1||(n=e(s).children("a,span").text(),o=t.isNullOrUndefined(s)?"":e(s)[0].id,r={text:n,element:s,event:i,ID:o},this._trigger("mouseover",e.extend({events:r},r)))},_onMouseDownHandler:function(t){e(t.target).hasClass("e-menu")&&(this._isFocused=!1)},
_mouseOutHandler:function(i){var s,n,r,o="";if(e(i.currentTarget).removeClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!1,this._isMenuOpen=!1,"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}this._onHide(s,this,this._hoverClose),e.inArray(s,this._disabledMenuItems)>-1||(n=e(s).children("a,span").text(),o=t.isNullOrUndefined(s)?"":e(s)[0].id,r={text:n,element:s,event:i,ID:o},this._trigger("mouseout",e.extend({events:r},r)))},_onClickHandler:function(i){var s,n,r,o,l,a="";if(this._isFocused=!0,n=!1,e(i.target).closest("li.e-list").hasClass("e-disable-item")||!(e(i.target).closest("li.e-list").length>0))return void(e(i.target).is(this.element)&&(this._activeElement=this.element.find(">li:first")));s=e(i.target).closest("li.e-list")[0],e(s).is(this.element.find(">li.e-list"))&&(this._activeElement=s),e(i.target).is("a")&&e(s).find(">a,>span").hasClass("aschild")&&this.model.openOnClick&&(this._isFocused=!1),!this._hoverOpen&&e(s).find(">a,>span").hasClass("aschild")&&(this._show(s,this._showAnim,this._hideAnim),this._hoverOpen=!1,n=!0),e.inArray(s,this._disabledMenuItems)>-1||("contextmenu"==this.model.menuType&&this._isContextMenuOpen&&!e(s).hasClass("e-haschild")&&(this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),n||e(s).find(">a,>span").hasClass("aschild")||(this._closeMenu(),this.model.openOnClick&&(this._hoverOpen=!1)),r=e(s).children("a,span").text(),o=e(s).closest("ul").parent("li"),0!=o.length?(parentId=t.isNullOrUndefined(o.attr("id"))?null:o.attr("id"),parentText=o.children("a,span").text()):(parentId=null,parentText=null),a=t.isNullOrUndefined(s)?"":e(s)[0].id,l={text:r,element:s,event:i,selectedItem:this.selectedItem,ID:a,parentId:parentId,parentText:parentText},this._trigger("click",e.extend({events:l},l)),this.selectedItem=null,this.model.openOnClick&&"contextmenu"!=this.model.menuType&&this.element.focus())},_onKeyDownHandler:function(i){var s,n,r;if("contextmenu"!=this.model.menuType||this._isContextMenuOpen){var o,l,a,d="",h=this.element.find(".e-mhover"),c=this.element.find(".e-mfocused");if(!e(h).length>0&&e(this._activeElement).length>0&&(h=c=e(this._activeElement)),9==i.keyCode?(this._isFocused=!1,this._OnFocusOutHandler()):(37==i.keyCode||38==i.keyCode||39==i.keyCode||40==i.keyCode)&&i.preventDefault(),40==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-mhover").children("ul").length>0||e(this._activeElement).length>0?("none"===e(h).children("ul").css("display")&&this._show(h[h.length-1],this._showAnim,this._hideAnim),h.removeClass("e-mhover e-mfocused").children("ul:first").find("li:first").addClass("e-mhover"),null==this._activeElement?h.addClass("e-mfocused"):e(this._activeElement).addClass("e-mfocused")):(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e(h[h.length-1]).removeClass("e-mfocused e-mhover"),l=e(liVisible[liVisible.index(h)+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first(),l.addClass("e-mhover")):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mfocused"),h.length>0?(h.removeClass("e-mhover"),l=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()):l=liVisible.first(),l.addClass("e-mhover"))),39==i.keyCode&&("horizontal"==this.model.orientation&&(this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0)?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first(),l.addClass("e-mhover")):e(h).children("ul").length>0?(h.removeClass("e-mfocused e-mhover"),s=h.children("ul:first").find("li:first"),this._show(h[h.length-1],this._showAnim,this._hideAnim),liVisible=h.addClass("e-mfocused").children("ul:first").children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l=e(liVisible[liVisible.index(s)]).length>0?e(liVisible[liVisible.index(s)]):liVisible.first(),l.addClass("e-mhover")):h.children("ul").length<=0&&"horizontal"==this.model.orientation&&h.parent().closest(".e-list").parent().hasClass("e-menu")&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l=e(e(liVisible[liVisible.index(c[c.length-1])+1]).length>0?liVisible[liVisible.index(c[c.length-1])+1]:liVisible[liVisible.index(c.first())]),l.addClass("e-mhover"))),38==i.keyCode&&("horizontal"==this.model.orientation?(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mhover"),l=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.length>0?(h.removeClass("e-mfocused e-mhover"),l=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):l=liVisible.last()),l.addClass("e-mhover")),37==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.find("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last(),l.addClass("e-mhover")):(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused e-active"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l=h.parent().closest(".e-list").parent(".e-menu").length>0?e(liVisible[liVisible.index(c[c.length-1])-1]).length>0?e(liVisible[liVisible.index(c[c.length-1])-1]):liVisible.last():e(liVisible[liVisible.index(c[c.length-1])]).length>0?e(liVisible[liVisible.index(c[c.length-1])]):liVisible.last(),l.addClass("e-mhover")):(0==h.parent("ul.e-menu").length||"contextmenu"==this.model.menuType&&0==h.parent("ul.e-context").length)&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l=e(e(liVisible[liVisible.index(c[c.length-1])]).length>0?liVisible[liVisible.index(c[c.length-1])]:liVisible[liVisible.index(c.last())]),l.addClass("e-mhover"))),13==i.keyCode&&(n=e(h).children("a,span").text(),d=t.isNullOrUndefined(e(h)[0])?"":e(h)[0].id,r={menuId:this.element[0].id,text:n,selectedItem:c,ID:d},"contextmenu"==this.model.menuType?this._isContextMenuOpen&&h.length>0&&!c.hasClass("e-disable-item")&&(this.model.click&&this._trigger("click",e.extend({events:r},r)),this.selectedItem=null,this.hideContextMenu(i)):h.length>0&&!h.hasClass("e-disable-item")&&(e(h).find(">a,>span").hasClass("aschild")&&"none"===e(h).children("ul").css("display")?(this._show(h[0],this._showAnim,this._hideAnim),h.removeClass("e-mhover").children("ul:first").find("li:first").addClass("e-mhover")):(this.element.find(".e-mhover >a,.e-mhover >span ").focus(),this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),t.isNullOrUndefined(e(h).find(">a").attr("href"))&&this._trigger("click",e.extend({events:r},r)))),27==i.keyCode&&("contextmenu"==this.model.menuType?this.hideContextMenu(i):this.element.find("li.e-list").removeClass("e-mhover"),this.element.find('li.e-list:has("> ul")').find("> ul:visible").parents("li.e-list").addClass("e-mhover"),this._closeAll()),!e(i.target).is(this.element)||!i.target.parentNode)return!1;h.length&&(o=h),e.inArray(o,this._disabledMenuItems)>-1||(n=e(o).children("a,span").text(),d=t.isNullOrUndefined(o)?"":e(o)[0].id,(this.element.find("li.e-mfocused.e-mhover").length||13==i.keyCode)&&(a=13==i.keyCode?h:this.element.find("li.e-mfocused.e-mhover")),r={text:n,element:o,targetElement:a,event:i,ID:d},this._trigger("keydown",e.extend({events:r},r))),this._activeElement=null,c=this.element.find(".e-mfocused")}},_OnFocusHandler:function(){"contextmenu"!=this.model.menuType&&!this.element.find(">li:first").hasClass("e-disable-item")&&this._isFocused&&0==this.element.find(".e-mhover").length&&0==e("li.e-ham-wrap").length?this.element.find(">li:first").addClass("e-mhover"):this._isFocused=!0,"contextmenu"!=this.model.menuType&&(this._activeElement=this.element.find(">li:first"))},_OnFocusOutHandler:function(){this._isFocused||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),this._isFocused=!1},_onDocumentClick:function(t){this.model.openOnClick&&(this._hoverOpen=!1),e(t.target).parents("ul.e-menu").is(this.element)||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll(),this._isFocused=!0),e(t.target).parents("ul.e-menu").is(this.popupWrapper)||e(t.target).hasClass("e-ham-wrap")||e(t.target).parent().hasClass("e-ham-wrap")||e(t.target).hasClass("e-hamburger")||e(t.target).parent("li").hasClass("e-haschild")||e(t.target).is("span.e-icon.e-arrowhead-down")||this._isOverflowPopupOpen()||"contextmenu"==this.model.menuType||!(e("li.e-ham-wrap").length>0)||this._overflowClose()},_ContextMenuHandler:function(e){var t,i,s,n,r=!1;"taphold"==e.type?r=!0:e.button?r=2==e.button:e.which&&(r=3==e.which),t=e.target,r?(i=e,"taphold"==e.type&&(i="touchstart"==e.options.type?e.options.touches[0]:e.options),this._showSpeed,this.showContextMenu(null,null,t,i,!0)):this._isContextMenuOpen&&(s=this._hideAnim,n=this._hideSpeed,this.hideContextMenu(e,s,n))},_calculateContextMenuPosition:function(t){locationX=t.clientX+this.element.width()<e(window).width()?t.pageX:t.pageX-this.element.width(),locationY=t.clientY+this.element.height()<e(window).height()?t.pageY:t.clientY>this.element.height()?t.pageY-this.element.height():e(window).height()-this.element.outerHeight();var i="static"!=e("body").css("position")?e("body").offset():{left:0,top:0};return locationX-=i.left,locationY-=i.top,{X:locationX,Y:locationY}},_onDefaultPreventer:function(e){return e.preventDefault(),e.stopPropagation(),!1},_onContextClose:function(t){var i,s,n,r,o=this;this._isContextMenuOpen&&(i=!1,(e(t.target).is(this.element)||e(t.target).parents(".e-context").is(this.element))&&(i=!0),i||(s=this._hideAnim,n=this._hideSpeed,this.hideContextMenu(t,s,n),r=e(t.target).parents(),e.each(r,function(e,t){t.id,o._ContextTargetId})))}}),t.Menu.Locale=t.Menu.Locale||{},t.Menu.Locale.default=t.Menu.Locale["en-US"]={titleText:"Menu"},t.MenuType={NormalMenu:"normalmenu",ContextMenu:"contextmenu"},t.Direction={Left:"left",Right:"right",None:"none"},t.AnimationType={None:"none",Default:"default"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.waitingpopup.min",["./../common/ej.core.min"],e):e()}(function(){!function(e,t){t.widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,target:null,appendTo:null,showImage:!0,htmlAttributes:{},cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},_isTargetVisible:function(){return"none"!=this.element.css("display")},show:function(){this._isTargetVisible()&&(this._refreshPanel(),this.maindiv.css("display","block"),this.model.showOnInit=!0)},hide:function(){this.maindiv.css("display","none"),this.model.showOnInit=!1},refresh:function(){this._isTargetVisible()&&this._refreshPanel()},_setText:function(e){e?this.popupText?this.popupText.html(e):(this._generateTextTag(e),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(e){e?(this.popupImage=t.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var i=this.model.template;"string"==typeof i&&(i=e(i)),this.templateObj="object"==typeof i&&"function"==typeof i.css?i:t.buildTag("div","",{"text-align":"center"}).append(i),this.templateObj.css({visibility:"visible",display:"block"}),this.maindiv.append(this.templateObj)},_setTheme:function(e){this.maindiv.removeClass(this.model.cssClass).addClass(e)},_init:function(){this._initialize(),this._render(),this._wireEvents()},_wireEvents:function(){e(window).on("resize",e.proxy(this._resizeHandler,this))},_unwireEvents:function(){e(window).off("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this.refresh()},_setModel:function(i){for(var s in i)switch(s){case"text":this._setText(i[s]);break;case"cssClass":this._setTheme(i[s]);break;case"htmlAttributes ":this._addAttr(i[s]);break;case"showOnInit":this._setVisibility(i[s]);break;case"showImage":this._showImage(i[s]),this._setContentPosition();break;case"target":this.model.target=i[s],this._setTarget(),this.refresh();break;case"appendTo":this.model.appendTo=i[s],this._setTarget(),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this.refresh();break;case"template":this.maindiv.empty(),i[s]?(this.model.template=i[s],this._setTemplate()):(this.model.template=i[s]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),this._setContentPosition()}},_setTarget:function(){this.targetElement="document"==this.model.target?e(document):"window"==this.model.target?e(window):this.model.target?e(this.model.target):this.element},_destroy:function(){this.maindiv.remove(),this._unwireEvents()},_initialize:function(){this.maindiv=null,this.popupText=null,this.popupImage=null,this.templateObj=null,this.targetElement=null},_render:function(){this._setTarget();var i=e("#"+this.element[0].id+"_WaitingPopup").get(0);i&&e(i).remove(),this.maindiv=t.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup"),this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this._setVisibility(this.model.showOnInit),this._addAttr(this.model.htmlAttributes)},_refreshPanel:function(){this.maindiv.width(this.targetElement.outerWidth()),this.maindiv.height(this.targetElement.outerHeight()),this._setPanelPosition(),this._setContentPosition()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.maindiv.addClass(e):i.maindiv.attr(t,e)})},_setPanelPosition:function(){var i=t.util.getOffset(this.targetElement);null!=this.model.appendTo&&e(this.model.appendTo).length>0&&("relative"!=this.targetElement.css("position")&&"absolute"!=this.targetElement.css("position")||this.targetElement[0]!==e(this.model.appendTo)[0]?(i.left-=this.targetElement.offsetParent().offset().left,i.top-=this.targetElement.offsetParent().offset().top):i={left:0,top:0}),this.maindiv.css({position:"absolute",left:Math.ceil(i.left)+"px",top:Math.ceil(i.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){if(null==this.model.template){var e,t=0,i=0,s=null;e=this.targetElement.outerHeight(),this.popupText&&(t=this.popupText.outerHeight()),this.popupImage&&(i=this.popupImage.outerHeight()),this.popupImage&&(s=Math.ceil((e-(i+t))/2),this.popupImage.css("top",s+"px")),this.popupText&&(s||(s=Math.ceil((e-t)/2)),this.popupText.css("top",s+"px"))}else this.templateObj.css({position:"relative",left:Math.ceil((this.targetElement.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.targetElement.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(e){this.popupText=t.buildTag("div.e-text",e),this.maindiv.append(this.popupText)},_setVisibility:function(e){e&&this._isTargetVisible()?this.show():this.hide()},_maxZindex:function(){return t.util.getZindexPartial(this.element)}})}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.radiobutton.min",["./../common/ej.core.min"],e):e()}(function(){!function(e,t){t.widget("ejRadioButton","ej.RadioButton",{_rootCSS:"e-radiobtn",element:null,_requiresID:!0,model:null,validTags:["input"],_addToPersist:["checked"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,checked:!1,cssClass:"",text:"",enableRTL:!1,htmlAttributes:{},enablePersistence:!1,idPrefix:"ej",size:"small",enabled:!0,validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._cloneElement=this.element.clone(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._setValue(),this._renderControl(),this.isChecked&&this._checkedHandler(),t.isNullOrUndefined(this.radbtn.attr("disabled"))||(this.model.enabled=!1),this._setEnabled(this.model.enabled),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._wireEvents(),this.initialRender=!1},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.div.addClass(e):"name"==t?i.radbtn.attr(t,e):"required"==t?i.radbtn.attr(t,e):"disabled"==t&&"disabled"==e?i.disable():"checked"==t&&"checked"==e?i._checkedChange(!0,!0):i.div.attr(t,e)})},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,r;this.element.find("input").rules("add",this.model.validationRules),i=this.element.closest("form").data("validator"),i=i||this.element.closest("form").validate(),name=this.element.find("input").attr("name"),i.settings.messages[name]={};for(s in this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s])){i.settings.messages[name][s]=e.validator.messages[s];for(r in this.model.validationMessage)s==r&&(n=this.model.validationMessage[s])}else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_setModel:function(t){for(var i in t)switch(i){case"cssClass":this._changeSkin(t[i]);break;case"enableRTL":this.model.text?t[i]?this.div.addClass("e-rtl"):this.div.removeClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").hasClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl"):t[i]?this.element.closest(".e-radiobtn-wrap").addClass("e-rtl"):this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl");break;case"text":this._setText(t[i]);break;case"size":this._setSize(t[i]);break;case"validationRules":null!=this.model.validationRules&&(this.element.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=t[i],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=t[i],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"checked":e(this.div).removeClass("e-material-animate"),"boolean"==typeof this.checked()?(this.model.checked=t[i],this._checkedChange(this.model.checked)):null!=t[i]()&&t[i]()==this.element.find(".e-input").attr("value")&&this._checkedChange(t[i]());break;case"enabled":this._setEnabled(t[i]);break;case"id":this._setIdAttr(t[i]);break;case"name":this.radbtn.attr("name",t[i]);break;case"value":this.radbtn.attr("value",t[i]);break;case"htmlAttributes":this._addAttr(t[i])}},_destroy:function(){this.radbtn.remove(),this._cloneElement.removeClass("e-js e-input e-radiobtn"),this._cloneElement.insertBefore(this.element),this.element.remove()},_changeSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass).addClass(e),this.div.removeClass(this.model.cssClass).addClass(e))},_setValue:function(){t.isNullOrUndefined(this.element.attr("type"))&&this.element.attr("type","radio"),t.isNullOrUndefined(this.element.attr("id"))||(this.model.id=this.element.attr("id")),t.isNullOrUndefined(this.element.attr("name"))||(this.model.name=this.element.attr("name")),t.isNullOrUndefined(this.element.attr("value"))||(this.model.value=this.element.attr("value")),this.element.attr({id:this.model.id,name:this.model.name,value:this.model.value}),"boolean"==typeof this.checked()?this.model.checked=this.isChecked=this.model.checked||"checked"==this.element.attr("checked"):this.isChecked=this.element.attr("value")==this.checked(),this.isChecked&&this.element.attr("checked","checked"),this._hiddenValue=this.element.attr("value"),this._isAngularbind=!1},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),e("#"+this.model.idPrefix+this.model.id).attr("id",this.model.idPrefix+t),this.radbtn.attr("id",t)},_setSize:function(e){e==t.RadioButtonSize.Medium?(this.span.removeClass("e-radsmaller").addClass("e-radmedium"),this.div.removeClass("e-radsmall").addClass("e-radmed")):(this.span.removeClass("e-radmedium").addClass("e-radsmaller"),this.div.removeClass("e-radmed").addClass("e-radsmall"))},_setEnabled:function(e){e?this.enable():this.disable()},_renderControl:function(){this.initialRender=!0;var i=t.browserInfo();this.div=e("msie"==i.name&&"8.0"==i.version?'<div class="e-radiobtn-wrap e-widget e-rad-outer" ></div>':'<div class="e-radiobtn-wrap e-widget" ></div>'),this.div.attr({id:this.model.idPrefix+this.model.id,role:"radio",tabindex:0,"aria-checked":!1}),this.span=e("<span></span>"),this.span.addClass("e-spanicon"),this._setSize(this.model.size),this.spanImg=e('<span class="e-rad-icon e-icon e-rad-select"></span>',"",{},{role:"presentation"}),this.element.addClass("e-input"),this.div.addClass(this.model.cssClass),this.span.append(this.spanImg),this.div.insertBefore(this.element),this.div.append(this.element),this.div.append(this.span),this._setTextWrapper(this.model.text),this.radbtn=this.element,this.element=this.div},_setTextWrapper:function(e){""!=e?(this.txtSpan=t.buildTag("div.e-text",e),this.div.append(this.txtSpan),this.model.enableRTL&&this.div.addClass("e-rtl")):this.model.enableRTL&&this.element.closest(".e-radiobtn-wrap").addClass("e-rtl")},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_wireEvents:function(){this._on(this.element,"click",this._checkedHandler),this._on(this.element,"focus",this._focusIn),this._on(this.element,"focusout",this._focusOut)},_focusIn:function(){e(this.element).addClass("e-focus"),e(this.element).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.element).removeClass("e-focus"),e(this.element).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){(32==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(t){t&&(this._interacted=!0),this.element.hasClass("e-disable")||(this.isChecked="boolean"==typeof this.checked()?"checked"==this.radbtn.attr("checked"):this.checked()==this.radbtn.attr("value"),e(this.element).find(".e-rad-icon").hasClass("e-circle_01")||this._changeEvent(!0),t&&e(this.div).addClass("e-material-animate"))},_checkedChange:function(e,t){this.isChecked=e,this._changeEvent(t)},_changeEvent:function(t){var i={isChecked:this.isChecked,isInteraction:!!t};if(!this.initialRender&&1==this._trigger("beforeChange",i))return!1;if(e(this.element).find(".e-rad-icon").hasClass("e-circle_01"))this.spanImg.removeClass("e-circle_01").addClass("e-rad-select"),this.span.removeClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!1}),this.radbtn.removeAttr("checked");else{var s=this.element.find(".e-input").attr("name"),n=e('input.e-radiobtn[name="'+s+'"]:radio'),r=this,o=this.element.find(".e-input"),l=e(o).data("ejRadioButton");i.isChecked&&(this.spanImg.addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this.radbtn.attr("checked","checked")),e.each(n,function(t,i){r._interacted&&e(e(i).closest(".e-widget")).find("span.e-spanicon").hasClass("e-rad-active")&&e(i).closest(".e-radiobtn-wrap").addClass("e-material-animate"),e(i).closest(".e-radiobtn-wrap").find(".e-rad-icon").removeClass("e-circle_01").addClass("e-rad-select"),e(i).closest(".e-radiobtn-wrap").find(".e-spanicon").removeClass("e-rad-active"),e(i).closest(".e-radiobtn-wrap").attr({tabindex:0,"aria-checked":!1});var s=e(i).data("ejRadioButton");null!=s&&null!=s.checked()&&"boolean"==typeof s.checked()&&(s.model.checked=!1)}),null!=l&&null!=l.checked()&&"boolean"==typeof l.checked()?l.model.checked=!0:l.checked(l.radbtn.attr("value")),this.element.find(".e-rad-icon").addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this._isAngularbind||this.element.find(".e-input").click(),this.isChecked=!0}i={isChecked:this.isChecked,isInteraction:!!t},this.initialRender||this._trigger("change",i),t&&this._trigger("_change",{value:this._hiddenValue})},disable:function(){this.element.hasClass("e-disable")||(this.element.addClass("e-disable"),this.radbtn.attr("disabled","disabled")),this._isIE8&&this.span.addClass("e-disable"),this.div.attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.hasClass("e-disable")&&(this.element.removeClass("e-disable"),this.radbtn.prop("disabled",!1)),this._isIE8&&this.span.removeClass("e-disable"),this.div.attr("aria-disabled",!1),this.model.enabled=!0}}),t.RadioButtonSize={Small:"small",Medium:"medium"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.autocomplete.min",["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min"],e):e()}(function(){!function(e,t,i){t.widget("ejAutocomplete","ej.Autocomplete",{element:null,model:null,validTags:["input"],_ignoreOnPersist:["fields","dataSource","query","focusIn","focusOut","change","select","create","destroy","open","close","actionComplete","actionSuccess","actionFailure"],_setFirst:!1,_rootCSS:"e-autocomplete",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{dataSource:null,query:null,fields:{text:null,key:null,category:null,groupBy:null,htmlAttributes:null},locale:"en-US",name:null,template:null,allowGrouping:!1,enableDistinct:!1,allowSorting:!0,sortOrder:"ascending",htmlAttributes:{},multiSelectMode:"none",delimiterChar:",",allowAddNew:!1,addNewText:"Add New",showRoundedCorner:!1,readOnly:!1,cssClass:"",watermarkText:null,value:"",selectValueByKey:null,filterType:"startswith",caseSensitiveSearch:!1,showLoadingIcon:!0,showResetIcon:!1,itemsCount:0,minCharacter:1,delaySuggestionTimeout:200,showPopupButton:!1,highlightSearch:!1,enableAutoFill:!1,enableRTL:!1,enabled:!0,visible:!0,height:"",width:"",emptyResultText:"No suggestions",animateType:"slide",showEmptyResultText:!0,enablePersistence:!1,popupHeight:"152px",popupWidth:"auto",autoFocus:!1,multiColumnSettings:{enable:!1,showHeader:!0,stringFormat:"{0}",columns:[{field:null,headerText:null,textAlign:"left",headerTextAlign:"left",cssClass:"",type:"string",filterType:"startswith"}]},validationRules:null,validationMessage:null,focusIn:null,focusOut:null,change:null,select:null,create:null,open:null,close:null,destroy:null,actionBegin:null,actionComplete:null,actionSuccess:null,actionFailure:null},dataTypes:{autoFocus:"boolean",watermarkText:"string",locale:"string",cssClass:"string",filterType:"enum",caseSensitiveSearch:"boolean",showLoadingIcon:"boolean",template:"string",allowGrouping:"boolean",enableDistinct:"boolean",allowSorting:"boolean",sortOrder:"enum",allowAddNew:"boolean",addNewText:"string",showRoundedCorner:"boolean",showResetIcon:"boolean",readOnly:"boolean",itemsCount:"number",animateType:"enum",minCharacter:"number",showPopupButton:"boolean",highlightSearch:"boolean",enableAutoFill:"boolean",enableRTL:"boolean",multiSelectMode:"enum",delimiterChar:"string",emptyResultText:"string",showEmptyResultText:"boolean",enabled:"boolean",visible:"boolean",enablePersistence:"boolean",dataSource:"data",query:"data",fields:"data",validationRules:"data",validationMessage:"data",htmlAttributes:"data",multiColumnSettings:"data"},observables:["value","selectValueByKey"],value:t.util.valueFunction("value"),_selectValueByKey:t.util.valueFunction("selectValueByKey"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.target.disabled=!1,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.removeAttr("disabled"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-disable").attr({"aria-disabled":!1}),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.removeClass("e-disable-wrap"))},disable:function(){this.model.enabled&&(this._hideResult(),this.model.enabled=!1,this.target.disabled=!0,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.model.showPopupButton&&this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),"visualmode"==this.model.multiSelectMode&&this._ulBox&&this._ulBox.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.addClass("e-disable-wrap"))},clearText:function(){"visualmode"==this.model.multiSelectMode&&this._deleteBox(this._ulBox.children("li")),this.element.val(""),this._valueChange(),this._isFocused?this.element.blur():this._focusOutAction(),this._hideResult()},getValue:function(){var e=this.value();return null==e?"":e},getSelectedItems:function(){return this._isFocused&&"visualmode"!=this.model.multiSelectMode&&this._updateSelectedItemArray(this.getValue()),this._selectedItems},_setValue:function(i){var s,n,r;if(this._isWatermark||this._hiddenSpan.css("display","none"),("object"==typeof i||"number"==typeof i&&isNaN(i)||""==e.trim(i))&&(i=""),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(""),this.element.val(""),i)if("visualmode"==this.model.multiSelectMode)if(this._selectedItems=[],this._modelValue=i,this._deleteBox(this._ulBox.children("li")),s=i.split(this.model.delimiterChar),this.element.width(1).val("").removeAttr("placeholder"),
this._hiddenInput||(this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),t.DataManager&&this.model.dataSource instanceof t.DataManager)this._createBoxForObjectType(s);else if(this.suggestionListItems=this.model.dataSource,this.suggestionListItems&&"object"!=typeof this.suggestionListItems[0])for(this._hiddenInput.val(i),n=0,r=s.length;n<r;n++)s[n]&&(this._ulBox.append(this._createBox(s[n])),this._selectedItems.push(s[n]));else this._createBoxForObjectType(s);else this.element.val(i),this._updateSelectedItemArray(i);return"visualmode"!=this.model.multiSelectMode&&this.value(this.element.val()),this._preVal=this.element.val(),this._isWatermark||this._setWatermarkTxt(),i},_createBoxForObjectType:function(i){for(var s,n=this,r=this._declareVariable(),o=0,l=i.length;o<l;o++)""!=(s=e.trim(i[o]))&&(t.DataManager&&this.model.dataSource instanceof t.DataManager?(this._dataQuery=this._getQuery().where(r[0],"equal",s,!1),this._promise=this.model.dataSource.executeQuery(this._dataQuery),this._promise.done(function(e){var i=e.result;n._strData=i instanceof Array&&i.length?i[0]:s,t.isNullOrUndefined(n._strData[r[1]])||n._selectKeyInit(),n._selectedItems.push(n._strData)}).fail(function(){n._selectedItems.push(s)})):(this._dataQuery=t.Query().where(r[0],"equal",s,!1),this._promise=t.DataManager(this.suggestionListItems).executeLocal(this._dataQuery),this._strData=this._promise instanceof Array&&this._promise.length?this._promise[0]:s,t.isNullOrUndefined(this._strData[r[1]])||this._selectKeyInit(),this._selectedItems.push(this._strData)),"visualmode"==this.model.multiSelectMode&&this._ulBox.append(this._createBox(s)))},_selectKeyInit:function(){var e,i=this._declareVariable();delimiterChar=this._delimiterChar(),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(this._hiddenInput.val()+(t.isNullOrUndefined(this._strData[i[1]]||this._strData[i[0]])?"":(this._strData[i[1]]||this._strData[i[0]])+this.model.delimiterChar)),t.isNullOrUndefined(this._strData[i[1]])||("none"!=this.model.multiSelectMode?(e=null!=this._selectValueByKey()?this._selectValueByKey()+this._strData[i[1]]+delimiterChar:this._strData[i[1]]+delimiterChar,e=e.split(delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),this._selectValueByKey(e.join(delimiterChar))):this._selectValueByKey(this._strData[i[1]]))},_declareVariable:function(){var e=this.model.fields,i={_key:null,_text:null,_attr:null},s=[];if(!t.isNullOrUndefined(e))return i._text=e&&e.text?e.text:"text",i._key=e&&e.key?e.key:"key",s.push(i._text,i._key),s},selectValueByKey:function(i){var s,n;t.isNullOrUndefined(i)||(s=this,i=i.toString(),n="none"!=this.model.multiSelectMode?i.split(this.model.delimiterChar):i.split(","),"[object Array]"===Object.prototype.toString.call(n)&&e.each(n,function(t,i){s._setOperation(e.trim(i),"key")}))},selectValueByText:function(e){this._setOperation(e,"text")},setValue:function(e){this._setText(e)},_setOperation:function(e,i){var s,n,r,o="",l=this,a=this.model.dataSource;if(t.isNullOrUndefined(a))return!1;if("object"==typeof a[0]||a instanceof t.DataManager)r=this.model.fields,o=r&&r[i]?r[i]:i;else if("key"==i)return!1;if(t.DataManager&&a instanceof t.DataManager)n=this._getQuery().where(o,"equal",e,!this.model.caseSensitiveSearch),s=a.executeQuery(n),s.done(function(e){l._setText(e.result[0])});else{if(!a||!a.length||a.length<1)return!1;n=t.Query().where(o,"equal",e,!this.model.caseSensitiveSearch),s=t.DataManager(a).executeLocal(n),this._setText(s[0])}},_setText:function(e){var t,i,s;if(!e)return!1;if(i=this.model.fields,t="object"==typeof this.model.dataSource[0]||"object"==typeof e?"string"==typeof e?e:i&&i.text?e[i.text]:e.text:e){if("visualmode"==this.model.multiSelectMode&&this._removeDuplicates(e))return!1;this._valueToTextBox(t,e,!0),s="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val(),this.value(s),this.model.showResetIcon&&this._showReset()}},_textFormateString:function(e){var i,s,n=this.model.multiColumnSettings.stringFormat;if(this._columnsIndex(),t.isNullOrUndefined(e)||"object"!=typeof e)n=t.isNullOrUndefined(e)||"object"==typeof e?this._currList[this._activeItem-1]:n.replace("{"+this._columnIndex[0]+"}",e);else for(i=0,s=this._columnIndex.length;i<s;i++)n=n.replace("{"+this._columnIndex[i]+"}",e[this.model.multiColumnSettings.columns[parseInt(this._columnIndex[i])].field]);return n},_columnsIndex:function(){var t=this;this._columnIndex=[],e.each(this.model.multiColumnSettings.stringFormat.match(/\{.+?\}/g),function(e,i){t._columnIndex[e]=i.slice(1,-1)})},_valueToTextBox:function(i,s,n){var r,o,l;!this._addNewTemplate&&this.model.multiColumnSettings.enable&&"string"!=typeof s&&(i=this._textFormateString(s)),"visualmode"==this.model.multiSelectMode?(s="string"==typeof s&&this._addNewTemplate&&s.substr(s.length-this._addNewTemplate.length)==this._addNewTemplate?s.replace(this._addNewTemplate,""):s,r=i.indexOf(this._addNewTemplate),this._addNewTemplate&&(i=i.substr(0,i.length-this._addNewTemplate.length)),l=this.model.delimiterChar,o=this._getUniqueKey(),o=o||(this.model.fields&&this.model.fields.key?s[this.model.fields.key]:t.isNullOrUndefined(s.key)?o:s.key),(!(this._selectValueByKey()==o||null==o)||r>-1)&&this._selectValueByKey(null!=this._selectValueByKey()?this._selectValueByKey()+(r>-1?i:o)+l:(r>-1?i:o)+l),(!(this._hiddenInput.val()==o||null==o)||r>-1)&&this._hiddenInput.val(this._hiddenInput.val()+(o||i)+l),this._modelValue=t.isNullOrUndefined(this.value())?i+l:this.value()+i+l,this.element.val("").removeAttr("placeholder").width(1),this._ulBox.append(this._createBox(i)),""!=this.model.height&&(e(this._ulBox).parent().css("overflow","auto"),this.model.showPopupButton&&0!=this._ulBox.parent()[0].scrollHeight&&this.dropdownbutton.css("height",this._ulBox.parent()[0].scrollHeight)),this._addNewTemplate=null):"delimiter"==this.model.multiSelectMode?(l=this.target.value.lastIndexOf(this.model.delimiterChar),this._typed||""==this.element.val()||n||!this.model.showPopupButton?n?this.element.val(""==this.element.val()?i+this.model.delimiterChar:this.element.val()+i+this.model.delimiterChar):l==-1?this.element.val(this._queryString.substr(0,l+1)+i+this.model.delimiterChar):this.element.val(this._queryString.substr(0,l+this.model.delimiterChar.length)+i+this.model.delimiterChar):!this.model.enableAutoFill||this.showSuggestionBox?this._checkDeli()?this.element.val(this._queryString.substr(0,l)+this.model.delimiterChar+i+this.model.delimiterChar):this.element.val(this.element.val()+this.model.delimiterChar):this._checkDeli()||this.element.val(this.element.val()+this.model.delimiterChar),this._typed=!1):(this.element.val(i),this._selectedItems=[]),this._selectedItems.push(s),this._originalval.push(i),this._moveCaretToEnd(this.element[0])},_removeDuplicates:function(e){return 0!=this._selectedItems.length&&(this._selectedItems.indexOf(e)!=-1||void 0)},search:function(){this.model.enabled&&this._checkDelimiter()&&(this._hideResult(),this._autoFill=!1,this._queryString=e.trim(this._queryString),this._queryString.length>0&&this._OnTextEnter())},setVisible:function(e){e?this.wrapper.show():this.wrapper.hide()},hide:function(){this._hideResult()},open:function(){this._showFullList()},_changeWatermark:function(e){this._isWatermark?this.element.attr("placeholder",e):this._hiddenSpan.text(e)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.suggestionList.removeClass(this.model.cssClass).addClass(e)},_setDropdown:function(e){this.model.showPopupButton=e,e?this._renderDropdown():this._destroyDropdown()},_changeHeight:function(e){this.wrapper.height(e)},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setCulture:function(){this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.addNewText)||(this._localizedLabels.addNewText=this._options.addNewText),t.isNullOrUndefined(this._options.emptyResultText)||(this._localizedLabels.emptyResultText=this._options.emptyResultText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this.model.addNewText=this._localizedLabels.addNewText,this.model.emptyResultText=this._localizedLabels.emptyResultText,this.model.watermarkText=this._localizedLabels.watermarkText},_init:function(e){if(this._options=e,this._setCulture(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category,this._initialize(),this._render(),this._wireEvents(),this.initialRender=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation())},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,r,o;if(this.model.validationRules){i="visualmode"==this.model.multiSelectMode?this._hiddenInput:this.element,i.rules("add",this.model.validationRules),s=this.element.closest("form").data("validator"),s=s||this.element.closest("form").validate(),name=i.attr("name"),s.settings.messages[name]={};for(n in this.model.validationRules)if(r=null,!t.isNullOrUndefined(this.model.validationRules[n])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[n])){s.settings.messages[name][n]=e.validator.messages[n];for(o in this.model.validationMessage)n==o&&(r=this.model.validationMessage[n])}else r=this.model.validationRules.messages[n];s.settings.messages[name][n]=null!=r?r:e.validator.messages[n]}}},_removeDuplicateValue:function(e){return e.split(this.model.delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]).join(this.model.delimiterChar)},_delimiterChar:function(){return"none"!=this.model.multiSelectMode?this.model.delimiterChar:""},_setModel:function(e){var i,s,n,r,o,l,a;for(i in e){switch(i){case"dataSource":this.model.dataSource=null;break;case"watermarkText":this._changeWatermark(e[i]);break;case"delaySuggestionTimeout":this.model.delaySuggestionTimeout=parseInt(e[i]);break;case"value":deli=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(a=e[i].substr(e[i].length-deli.length)==deli?e[i]:e[i]+deli,e[i]=""==e[i]?this.value():(this.value()?this.value():"")+a,"visualmode"==this.model.multiSelectMode&&(e[i]=e[i].split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),e[i]=e[i].join(deli))),this.value(this._setValue(e[i])),this._modelValue=this.value(),s="visualmode"==this.model.multiSelectMode?this._hiddenInput.val():this.element.val(),this._changeEvtTrigger(s),this.model.showResetIcon&&this._showReset();break;case"showPopupButton":this._setDropdown(e[i]);break;case"enableRTL":this._RightToLeft(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"readOnly":this._checkReadOnly(e[i]);break;case"delimiterChar":n=this.model.delimiterChar,e[i]=this._validateDelimiter(e[i]),this.model.delimiterChar=e[i],this.element.val(this.value().replace(new RegExp(n,"g"),this.model.delimiterChar)),this.value(this.element.val());break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[i],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[i],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"locale":t.Autocomplete.Locale[e[i]]?(this.model.locale=e[i],this._setCulture(),this._setWatermark()):e[i]=this.model.locale;break;case"filterType":r=[];for(l in t.filterType)t.filterType.hasOwnProperty(l)&&r.push(t.filterType[l]);r.indexOf(e[i])>-1?this.model.filterType=e[i]:e[i]=this.model.filterType;break;case"multiSelectMode":this.model.multiSelectMode=e[i],o=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(l=this._selectValueByKey(),a=this.value(),a&&(a=a.substr(a.length-o.length)==o?a:a+o,this.value(a),"visualmode"==this.model.multiSelectMode&&this.value(this._removeDuplicateValue(this.value()))),l&&(this._selectValueByKey(l.substr(l.length-o.length)==o?l:l+o),"visualmode"==this.model.multiSelectMode&&this._selectValueByKey(this._removeDuplicateValue(this._selectValueByKey())))),"visualmode"==e[i]?(null!=this.model.validationRules&&this.element.rules("remove"),""!=this.element.val()&&this._isWatermark&&this.element.removeAttr("placeholder"),this._renderBoxModel()):this.element.hasClass("e-visual-mode")&&this._destroyBoxModel(),this._setValue(this.value()),this._setValidation(),t.isNullOrUndefined(this.element.attr("placeholder"))&&this._isWatermark&&this._setWatermark();break;case"enabled":this._disabled(!e[i]);break;case"visible":this.setVisible(e[i]);break;case"height":this._changeHeight(e[i]);break;case"width":this._changeWidth(e[i]);break;case"cssClass":this._changeSkin(e[i]);break;case"itemsCount ":(e[i]<=0||isNaN(e[i]))&&(e[i]=0);break;case"popupHeight":this.suggestionList.css({"max-height":isNaN(e[i])?e[i]:e[i]+"px"});break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"selectValueByKey":deli=this._delimiterChar(),l=t.util.getVal(e[i]),this.selectValueByKey(l),keyValue="none"!=this.model.multiSelectMode?this._selectValueByKey()+e[i]:e[i],keyValue=keyValue.split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),keyValue=keyValue.join(deli),e[i]=keyValue.substr(keyValue.length-deli.length)==deli?keyValue:keyValue+deli;break;case"htmlAttributes":this._addAttr(e[i]);break;case"emptyResultText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.emptyResultText=this.model.emptyResultText=e[i],this._setCulture();break;case"addNewText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.addNewText=this.model.emptyResultText=e[i],this._setCulture();break;case"multiColumnSettings":t.isNullOrUndefined(e[i].enable)||(this.model.multiColumnSettings.enable=e[i].enable),t.isNullOrUndefined(e[i].showHeader)||(this.model.multiColumnSettings.showHeader=e[i].showHeader),t.isNullOrUndefined(e[i].stringFormat)||(this.model.multiColumnSettings.stringFormat=e[i].stringFormat),t.isNullOrUndefined(e[i].columns)||(this.model.multiColumnSettings.columns=e[i].columns),this.suggestionList.remove(),this._renderSuggestionList();break;case"showResetIcon":this.model.showResetIcon=e[i],e[i]&&!t.isNullOrUndefined(this.value())&&""!=this.value()?this._showReset():this._removeReset()}this._hideResult()}},_destroy:function(){this.element.width("").removeAttr("role aria-label aria-expanded aria-haspopup aria-autocomplete autocomplete placeholder aria-owns aria-disabled disabled"),this.element.insertAfter(this.wrapper),"visualmode"==this.model.multiSelectMode&&this.element.removeClass("e-visual-mode").attr("name",this._hiddenInput.attr("name")),this.model.enabled||this.element.removeClass("e-disable"),this.wrapper.remove(),this.element.removeClass("e-input").val(""),this._isWatermark&&this.element.removeAttr("placeholder"),this._hideResult(),this.suggestionList.remove()},_initialize:function(){this.value(""===this.value()?this.element[0].value:this.value()),this.element.attr("role","combobox").attr("aria-label","Autocomplete textbox").attr("aria-expanded",!1).attr("tabindex",0).attr("aria-autocomplete","list"),/Edge\/12./i.test(navigator.userAgent)&&this.element.addClass("edge-browser"),this.target=this.element[0],this.dropdownbutton=null,this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this.showSuggestionBox=!1,this.noresult=!0,this._queryString=null,this.suggLen=0,this._selectedItems=[],this._modelValue="",this._activeItem=0,this._originalval=[],this.ctrlKeyPressed=!1,this._isFocused=!1,this._isOpened=!1,this._typed=!1,this._cancelEvent=!1,this._isWatermark=this._checkWatermarkSupport(),this._selectedObj=[]},_render:function(){this._renderWrapper(),this._addAttr(this.model.htmlAttributes),this._setDimentions(),this._renderDropdown(),this._checkProperties(),this._isWatermark?this._setWatermark():this._setWatermarkTxt(),this._renderSuggestionList(),this._RightToLeft(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this.setVisible(this.model.visible),this._setListPosition()},_renderWrapper:function(){var e,i;this.element.addClass("e-input").attr("autocomplete","off"),this.wrapper=t.buildTag("span.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),document.activeElement==this.element[0]&&(e=!0),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),i=this,this._hiddenSpan.click(function(){this._isFocused||i.element.focus()})),e&&this.element.focus()},_renderDropdown:function(){if(this.model.showPopupButton){var i=t.buildTag("span.e-icon e-search").attr(this._isIE8?{unselectable:"on"}:{});this.dropdownbutton=t.buildTag("span.e-select#"+this.target.id+"_dropdown").attr(this._isIE8?{unselectable:"on"}:{}).append(i),this.container.append(this.dropdownbutton).addClass("e-padding"),this.model.enabled||this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),this.dropdownbutton.on("mousedown",e.proxy(this._OnDropdownClick,this))}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"required"==t&&i.element.attr(t,e),"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._disabled(!0):"readOnly"==t&&e===!0?i._checkReadOnly(!0):i.wrapper.attr(t,e)})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderBoxModel:function(){this._ulBox=t.buildTag("ul.e-ul e-boxes");var i=this.model.enabled?"":"e-disable";this._ulBox.addClass(i),this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._hiddenInput.attr("name",this.element.attr("name")),this.element.val("").removeAttr("name").addClass("e-visual-mode"),this._isWatermark||this.element.width(1),this.container.prepend(this._hiddenInput,this._ulBox),""!=this.model.height?this.wrapper.height(this.model.height):this.wrapper.height("auto"),this._on(this.container,"mousedown",function(t){if(!this.model.enabled)return!1;var i=e(t.target);i.is(this.element)||(t.preventDefault(),this._isFocused||this.element.focus(),i.hasClass("e-options")?(!t.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")):this._moveCaretToEnd(this.element[0])),!t.ctrlKey&&(i.hasClass("e-boxes")||i.hasClass("e-input"))&&this._removeActive()})},_destroyBoxModel:function(){this.container.prepend(this.element),this.element.attr({name:this._hiddenInput.attr("name")}).removeAttr("style").removeClass("e-visual-mode"),this.wrapper.height(this.model.height),this._hiddenInput.remove(),this._hiddenInput=null,this._ulBox.remove(),this._off(this.container,"mousedown")},_deleteLastBox:function(){var e=this._ulBox.children(),t=e.last(),i=t.hasClass("e-active");this._removeActive(),i?this._deleteBox(t):t.addClass("e-active")},_deleteBox:function(t){for(var i,s,n,r,o,l=0,a=t.length;l<a;l++)i=this._ulBox.children(),s=i.index(t[l]),this._selectedItems.splice(s,1),n=this.model.delimiterChar,r=this._hiddenInput.val().split(n),r.splice(s,1),this._hiddenInput.val(r.join(n)),this._selectValueByKey(r.join(n)),o=this._modelValue.split(n),o.splice(s,1),this._modelValue=o.join(n),e(t[l]).remove();this.showSuggestionBox&&this._refreshPopup(),this._valueChange(),""==this._hiddenInput.val()&&this._setWatermark()},_removeActive:function(){this._ulBox.children("li.e-active").removeClass("e-active")},_adjustWidth:function(){var e,i,s=t.buildTag("span",this.element.val());this.container.append(s),i=30,e=s.width()+i,this.element.width()!=e&&this.element.width(e),""==this._hiddenInput.val()&&this._setWatermark(),s.remove()},_checkProperties:function(){var i,s;this._checkReadOnly(this.model.readOnly),this.model.delimiterChar=this._validateDelimiter(this.model.delimiterChar),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&(this.model.enabled=!1,this._disabled(!1)):(this.model.enabled=!0,this._disabled(!0)),this._checkNameAttr(),"visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),null!=this._selectValueByKey()&&""==this.value()?(i=this._selectValueByKey().toString(),"none"!=this.model.multiSelectMode&&(i=i.substr(i.length-this.model.delimiterChar.length)==this.model.delimiterChar?i:i+this.model.delimiterChar,"visualmode"==this.model.multiSelectMode?this._selectValueByKey(null):this._selectValueByKey(i)),this.selectValueByKey(i),this.model.showResetIcon&&this._showReset()):(s=this.value(),"none"==this.model.multiSelectMode||t.isNullOrUndefined(s)||""==s||(s=s.substr(s.length-this.model.delimiterChar.length)==this.model.delimiterChar?s:s+this.model.delimiterChar),this.value(this._setValue(s)),this.model.showResetIcon&&""!=this.value()&&this._showReset())},_checkNameAttr:function(){this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,this.element.attr("name",this.model.name)},_disabled:function(e){e?this.disable():this.enable()},_destroyDropdown:function(){this.dropdownbutton.off("mousedown",e.proxy(this._OnDropdownClick,this)),this.dropdownbutton.remove(),this.dropdownbutton=null,this.container.removeClass("e-padding")},_validateDelimiter:function(t){return e.trim(t).length!=t.length&&null==t.length||/^[a-zA-Z0-9]+$/.test(t)?",":t},_checkWatermarkSupport:function(){return"placeholder"in document.createElement("input")},_setWatermark:function(){(this.model.watermarkText&&(""==this.value()||t.isNullOrUndefined(this.value()))||"visualmode"!=this.model.multiSelectMode)&&this.element.attr("placeholder",this.model.watermarkText).width("")},_setWatermarkTxt:function(){if(null!=this.model.watermarkText&&""==e.trim(this.element.val())&&("visualmode"!=this.model.multiSelectMode||""==e.trim(this._hiddenInput.val()))){var t=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan.css("display","block").text(t)}},_renderSuggestionList:function(){var i,s,n,r,o,l,a=e("#"+this.element[0].id+"_suggestion").get(0);if(a&&e(a).remove(),this.suggestionList=t.buildTag("div.e-atc-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_suggestion","",{display:"none"}).attr("role","listbox"),this.element.attr("aria-owns",this.target.id+"_suggestion"),this.popup=this.suggestionList,i=t.buildTag("div"),this.model.multiColumnSettings.enable){if(this._tableColumn=t.buildTag("table","",{},{role:"listbox","border-collapse":"separate",border:0,cellspacing:0,cellpadding:0,class:"e-atc-tableContent"}),this._listEventBind(this._tableColumn,"tr"),this._headerColGroup=document.createElement("colgroup"),this.model.multiColumnSettings.showHeader){for(this._tableHeaderDiv=t.buildTag("div",{},{},{class:"e-atc-tableHeader "+(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll")}),s=t.buildTag("div",{},{},{class:"e-atc-tableHeaderContent e-atc-tableHeaderBorder"}),n=document.createElement("tr"),this._tableHeader=t.buildTag("table","",{},{cellspacing:"0.25px"}),r=0,o=this.model.multiColumnSettings.columns.length;r<o;r++)e(n).append(t.buildTag("th",this.model.multiColumnSettings.columns[r].headerText?this.model.multiColumnSettings.columns[r].headerText:"column"+r,{"text-align":this.model.multiColumnSettings.columns[r].headerTextAlign?this.model.multiColumnSettings.columns[r].headerTextAlign:"left"},{class:r==this.model.multiColumnSettings.columns.length-1?"":this.model.enableRTL?"e-atc-thleft":"e-atc-thright"})),e(this._headerColGroup).append(document.createElement("col"));e(this._tableHeaderDiv).append(e(s).append(e(this._tableHeader).append(n).append(this._headerColGroup))),this.suggestionList.append(this._tableHeaderDiv)}else{for(r=0,o=this.model.multiColumnSettings.columns.length;r<o;r++)e(this._headerColGroup).append(document.createElement("col"));this._tableColumn.append(this._headerColGroup)}l=t.buildTag("div"),l.append(this._tableColumn),i.append(l)}else this.ul=t.buildTag("ul.e-ul").attr("role","listbox"),this._listEventBind(this.ul,"li:not('.e-category')"),i.append(this.ul);this.suggestionList.append(i),e("body").append(this.suggestionList),this._setListWidth(),this._setListHeight(),this.model.multiColumnSettings.enable?(i.ejScroller({height:0,width:0,scrollerSize:20}),this.scrollerObj=i.ejScroller("instance")):(this.suggestionList.ejScroller({height:0,width:0,scrollerSize:20}),this.scrollerObj=this.suggestionList.ejScroller("instance"))},_listEventBind:function(t,i){t.on({mouseenter:e.proxy(this._OnMouseEnter,this),mouseleave:e.proxy(this._OnMouseLeave,this),click:e.proxy(this._OnMouseClick,this)},i)},_checkEmptyList:function(){"visualmode"==this.model.multiSelectMode&&this._removeRepeated(),0==this.suggestionListItems.length?(this.suggestionListItems.push(this.model.emptyResultText),this.noresult=!0):this.noresult=!1},_showSuggestionList:function(e){this.suggestionListItems=this.model.enableDistinct?t.dataUtil.distinct(this.suggestionListItems,"object"!=typeof this.suggestionListItems[0]?"":this.model.fields&&this.model.fields.text?this.model.fields.text:"text",!0):this.suggestionListItems,this.model.itemsCount>0&&(this.suggestionListItems=t.DataManager(this.suggestionListItems).executeLocal(t.Query().take(this.model.itemsCount))),this._checkEmptyList(),this._addNewTemplate=null,this.noresult&&"visualmode"==this.model.multiSelectMode&&this.model.allowAddNew&&""!=this.element.val()&&!this._repeatRemove&&(this.noresult=!1,this.suggestionListItems.pop(),this._addNewTemplate="   ("+this.model.addNewText+")",this.suggestionListItems.push(this.element.val()+this._addNewTemplate),this._checkEmptyList()),(!this.noresult||this.model.showEmptyResultText)&&this._generateSuggestionList(e)},_generateSuggestionList:function(i){var s,n,r,o,l,a,d,h,c,u,p,m,g=this.suggestionListItems;if(this.model.multiColumnSettings.enable?this._tableColumn.empty()&&this.model.multiColumnSettings.showHeader&&this._tableHeaderDiv.css("display",""):this.ul.empty(),s=this,n=document.createDocumentFragment(),"object"!=typeof g[0]){if(s.model.multiColumnSettings.enable){var f=t.buildTag("tbody"),_=t.buildTag("tr").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}),v=t.buildTag("td",{},{},{role:"option"});for(o=0,l=g.length;l>o;o++){var a=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(g[o]):g[o],b=_.clone(),y=v.clone();e(y).attr(s._isIE8?{unselectable:"on"}:{}).attr(g[o]!=g.length-1?{class:"e-atc-tdbottom"}:{}).html(a),b[0].appendChild(y[0]),f[0].appendChild(b[0]),n.appendChild(f[0]),s.model.showEmptyResultText&&s.model.emptyResultText==a&&s.model.multiColumnSettings.showHeader&&s._tableHeaderDiv.css("display","none")&&e(y).removeClass("e-atc-tdbottom"),s._addNewTemplate&&!t.isNullOrUndefined(s._tableHeaderDiv)&&s._tableHeaderDiv.css("display","none")}s._tableColumn[0].appendChild(n)}else{for(r=t.buildTag("li",{},{},{role:"option"}).attr(s._isIE8?{unselectable:"on"}:{}),o=0,l=g.length;l>o;o++)a=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(g[o]):g[o],d=r.clone(),d[0].innerHTML=a,n.appendChild(d[0]);s.ul[0].appendChild(n)}this._currList=g,this._mapper={txt:null,key:null}}else h=this.model.fields,c={_key:null,_text:null,_attr:null},c._key=h&&h.key?h.key:"key",c._text=h&&h.text?h.text:"text",c._attr=h&&h.htmlAttributes?h.htmlAttributes:"htmlAttributes",this._mapper={txt:c._text,key:c._key},this._currList=[],this.model.fields.groupBy?(u=h&&h.groupBy?h.groupBy:"groupBy",m=t.Query().group(u),this._addSortingQuery(m,"key"),p=t.DataManager(g).executeLocal(m),this._swapUnCategorized(p),p.forEach(function(e,i){if(e.key)if(s.model.multiColumnSettings.enable){var n=t.buildTag("tr.e-category").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{});n.append(t.buildTag("td",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}).attr(i!=g.length-1?{class:"e-atc-tdbottom"}:{})),s._tableColumn.append(n)}else s.ul.append(t.buildTag("li.e-category",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}));s._generateLi(e.items,c)})):this._generateLi(g,c);this._getLiTags().length>0&&this._showResult(i)},_swapUnCategorized:function(e){for(var t,i=e.length,s=0;s<i;s++)if(!e[s].key){for(t=s;t>0;t--)e[t]=e[t-1];return e[t]=e[s],!1}},_generateLi:function(i,s){var n,r,o,l,a,d,h,c,u,p,m,g=this,f=document.createDocumentFragment(),_=document.createDocumentFragment();if(g.model.multiColumnSettings.enable){for(n=g.model.multiColumnSettings.columns.length,this._tableColumn.append(t.buildTag("tbody")),r=t.buildTag("tr"),o=t.buildTag("td"),h=0,c=i.length;c>h;h++)if(u=i[h][s._text],p=i[h][s._key],!t.isNullOrUndefined(u)||g.model.multiColumnSettings.enable){for(g._getField(i[h]),l=r.clone(),l[0].className=h%2?"e-atc-trbgcolor":"",a=0;a<n;a++)d=o.clone(),d[0].innerHTML=g.model.highlightSearch&&e.inArray(a.toString(),g._columnIndex)>-1?g._highlightSuggestion(g._getField(i[h],g.model.multiColumnSettings.columns[a].field).toString()):g._getField(i[h],g.model.multiColumnSettings.columns[a].field),d[0].className=(h!=i.length-1?"e-atc-tdbottom ":"")+(a!=g.model.multiColumnSettings.columns.length-1?g.model.enableRTL?"e-atc-tdleft ":"e-atc-tdright ":"")+(g.model.multiColumnSettings.columns[a].cssClass?g.model.multiColumnSettings.columns[a].cssClass:""),d[0].style.textAlign=g.model.multiColumnSettings.columns[a].textAlign?g.model.multiColumnSettings.columns[a].textAlign:"left",_.appendChild(d[0]);l[0].appendChild(_),p&&l.attr("id",p),g._setAttributes(g._getField(i[h],s._attr),l[0]),f.appendChild(l[0]),g._currList=g._currList.concat([i[h]])}e(g._tableColumn).find("tbody")[0].appendChild(f)}else{for(h=0,c=i.length;c>h;h++)u=i[h][s._text],p=i[h][s._key],t.isNullOrUndefined(u)||(g.model.highlightSearch&&(u=g._highlightSuggestion(u)),g.model.template&&(u=g._getTemplatedString(i[h],s._text,u)),m=document.createElement("li"),m.innerHTML+=u,p&&m.setAttribute("id",p),g._setAttributes(g._getField(i[h],s._attr),m),f.appendChild(m),g._currList=g._currList.concat([i[h]]));g.ul[0].appendChild(f)}},_getLiTags:function(){return this.model.multiColumnSettings.enable?this._tableColumn.find("tbody tr:not('.e-category')"):this.ul.children("li:not('.e-category')")},_getTemplatedString:function(e,t,i){for(var s=this.model.template,n=s.indexOf("${"),r=s.indexOf("}");n!=-1&&r!=-1;){var o=s.substring(n,r+1),l=o.replace("${","").replace("}",""),a=this._getField(e,l);t==l&&(a=i),a||(a=""),s=s.split(o).join(a),n=s.indexOf("${"),r=s.indexOf("}")}return s},_getField:function(e,i){return t.pvt.getObject(i,e)},_setAttributes:function(t,i){if(t){"string"==typeof t&&(t=e.parseJSON(t));for(var s in t)i.setAttribute(s,t[s])}},_setListWidth:function(){var e=this.model.popupWidth;e&&"auto"!=e?this.suggestionList.css({width:e}):this.suggestionList.css({width:this.wrapper.width()})},_setListHeight:function(){this.suggestionList.css({"max-height":this.model.popupHeight})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.wrapper.outerWidth()!=this.suggestionList.outerWidth()&&(this.suggestionList.css({width:this.wrapper.width()}),this._refreshScroller()),this._setListPosition()},_showResult:function(s){var n,r,o,l;this._refreshScroller(),this._refreshPopup(),this._isOpened?e(document).on("mousedown",e.proxy(this._OnDocumentClick,this)):(this.suggestionList.css("display","none"),n=this,clearTimeout(this._typing),this._typing=setTimeout(function(){
n.suggestionList["slide"==n.model.animateType?"slideDown":"fadeIn"]("none"==n.model.animateType?0:300,function(){e(document).on("mousedown",e.proxy(n._OnDocumentClick,n))})},this.model.delaySuggestionTimeout),r=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("open",r),this.wrapper.addClass("e-active")),this._isOpened=!0,this.showSuggestionBox=!0,o=this._getLiTags(),this._listSize=o.length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),l=t.getScrollableParents(this.wrapper),l[0]!=window&&this._on(l,"scroll",this._hideResult)},_hideResult:function(s){var n,r;this.showSuggestionBox&&(this.showSuggestionBox=!1,this._activeItem=0,clearTimeout(this._hiding),this.element.attr("aria-expanded",!1),n=this,this._isOpened?(this.suggestionList.css("display","none"),r=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("close",r)):this._hiding=setTimeout(function(){n.model&&n.suggestionList["slide"==n.model.animateType?"slideUp":"fadeOut"]("none"==n.model.animateType?0:100),n._activeItem=0},this.model.delaySuggestionTimeout),e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_refreshScroller:function(){this.suggestionList.css("height","auto"),this.suggestionList.find(".e-content , .e-scroller").removeAttr("style"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(e(this._tableColumn).attr("width","auto"),e(this._tableHeader).attr("width","auto")),this.suggestionList.css("display","block"),this.model.multiColumnSettings.enable&&(this.scrollerObj.option("height","auto"),this._columnBorderAlign());var i=this.suggestionList.height()>parseInt(e.isNumeric(this.model.popupHeight)?this.model.popupHeight:this.model.popupHeight.replace("px",""))-4;i||this.model.multiColumnSettings.enable&&(this.suggestionList.height()<=this._tableColumn.height()||this.suggestionList.width()<=this._tableColumn.width()||this.model.multiColumnSettings.showHeader&&this.suggestionList.width()<=this._tableHeader.width())?(i&&(this.scrollerObj.model.height=this.model.multiColumnSettings.showHeader&&this._tableHeader?parseInt(this.suggestionList.height())-parseInt(this._tableHeader.height()):this.suggestionList.height()),!this.model.multiColumnSettings.enable&&this.suggestionList.width()<this.suggestionList.find(".e-ul").width()&&this.suggestionList.find(".e-ul").width(this.suggestionList.find(".e-ul").width()),this.scrollerObj.model.width=this.suggestionList.width(),this.scrollerObj.refresh(),this.scrollerObj.option({enableRTL:this.model.enableRTL,scrollTop:0,scrollLeft:0}),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._addThBorder(),this.suggestionList.addClass("e-scroller"),!this.scrollerObj._vScroll&&this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()):(this.suggestionList.removeClass("e-scroller"),this.scrollerObj.refresh(),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()),this.suggestionList.css("height","auto"),this._isIE8&&this.suggestionList.find(".e-vscroll div, .e-hscroll div").attr("unselectable","on"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this.suggestionList.find(".e-content").scroll(t.proxy(function(t){this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(e(t.currentTarget).scrollLeft())},this)),this.suggestionList.find(".e-content").length>0&&this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(this.model.enableRTL?this.suggestionList.find(".e-content")[0].scrollWidth-this.suggestionList.find(".e-content")[0].clientWidth:0))},_columnBorderAlign:function(){var t,i,s;if(this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&"none"!=this._tableHeaderDiv.css("display")){for(this._tableWid=this._tableHeader.outerWidth()>this._tableColumn.outerWidth()?this._tableHeader.outerWidth():this._tableColumn.outerWidth(),this._tableColumn.find("colgroup").remove(),e(this._headerColGroup.children).removeAttr("style"),i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:parseInt(e(this._tableColumn).find("tr:first td").eq(i).outerWidth())>parseInt(this._tableHeader.find("tr:first th").eq(i).outerWidth())?e(this._tableColumn).find("tr:first td").eq(i).outerWidth():this._tableHeader.find("tr:first th").eq(i).outerWidth()});this._tableColumn.append(e(this._headerColGroup).clone()),t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%",e(this._tableColumn).attr("width",t),e(this._tableHeader).attr("width",t)}else if(this.model.multiColumnSettings.enable&&!this.model.multiColumnSettings.showHeader){if(e(this._tableColumn).attr("width","auto"),this._tableWid=this._tableColumn.outerWidth(),e(this._headerColGroup.children).removeAttr("style"),"100%"!=(t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%")){for(i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:e(this._tableColumn).find("tr:first td").eq(i).outerWidth()});this._tableColumn.append(this._headerColGroup)}e(this._tableColumn).attr("width",t)}else e(this._tableColumn).attr("width","100%")},_removeThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").removeClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.parent(".e-atc-tableHeaderContent").removeClass("e-atc-tableHeaderBorder")},_addThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").addClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll").removeClass(this.model.enableRTL?"e-atc-tableHeaderScroll":"e-atc-tableHeaderRTL"),this._tableHeader.parent(".e-atc-tableHeaderContent").addClass("e-atc-tableHeaderBorder")},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),n=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),r=s.top-e(document).scrollTop(),o=this.suggestionList.outerHeight(),l=this.suggestionList.outerWidth(),a=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<n||o>r?s.top+d+3:s.top-o-3)-h;t=e(document).scrollLeft()+e(window).width()-a,(this.model.enableRTL||l>t&&l<a+i.outerWidth())&&(a-=this.suggestionList.outerWidth()-i.outerWidth()),this.suggestionList.css({left:a+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.suggestionList)},_targetFocus:function(e){"visualmode"==this.model.multiSelectMode&&this._setWatermarkWidth(30),this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._focusValue=this.model.value,this._isFocused=!0,this._trigger("focusIn",{event:e,isInteraction:!0,value:this.value()})},_focusOutAction:function(e){var i,s,n="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();if(this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._focusValue==this.model.value)return!1;this._changeEvtTrigger(n,e),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active"),this._isWatermark||this._setWatermarkTxt(),this._removeSelection(),"visualmode"==this.model.multiSelectMode&&this.model.showResetIcon&&""!=this.element.val()&&this._removeReset(),"visualmode"==this.model.multiSelectMode?(this._removeActive(),this.element.val(""),this._setWatermarkWidth(1),this._preVal="",this._addNewTemplate=null):("delimiter"==this.model.multiSelectMode&&this._valueChange(e),this._updateSelectedItemArray(this.getValue())),t.isNullOrUndefined(this.value())||""==this.value()||(i=this.value().split(this.model.delimiterChar),("delimiter"==this.model.multiSelectMode||"none"==this.model.multiSelectMode)&&(s=this._removeDuplicateVal(i),this._keyProcess(s))),""==this.element.val()&&(""==this.value()||null==this.value())&&this._selectValueByKey(null)},_targetBlur:function(e){this._focusOutAction(e),this._trigger("focusOut",{event:e,isInteraction:!0,value:this.value()})},_setWatermarkWidth:function(e){this.model.watermarkText&&this.element.attr("placeholder")?this.element.width(""):this.element.val("").width(e)},_checkDeli:function(){var e=this.element.val(),t=this.model.delimiterChar;return e.substr(e.length-t.length,e.length)==t&&(this.element.val(e.substr(0,e.length-t.length)),!0)},_removeSelection:function(){if(this.model.enableAutoFill){this.element.attr("aria-autocomplete","both");var e=this._getCaretSelection();e.end-e.start!=0&&e.end-e.start!=this.element.val().length&&(this.target.value=this.target.value.substr(0,e.start))}},_removeListHover:function(){this._getLiTags().removeClass("e-hover")},_addListHover:function(){var t=e(this._getLiTags()[this._activeItem-1]);t.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop()}),t.focus()},_calcScrollTop:function(){var e,t=(this.model.multiColumnSettings.enable?this.model.multiColumnSettings.showHeader?(this._tableColumn.outerHeight(),this._tableHeader.outerHeight()):this._tableColumn.outerHeight():this.ul.outerHeight(),this.model.multiColumnSettings.enable?this._tableColumn.find("tr"):this.ul.find("li"));return e=this.model.multiColumnSettings.enable?this._tableColumn.find("tr.e-hover").index():this.ul.find("li.e-hover").index(),t.eq(1).outerHeight()*e-((this.model.multiColumnSettings.enable?this._tableColumn.parent().outerHeight():this.suggestionList.outerHeight())-t.eq(e).outerHeight())/2},getActiveText:function(){if(this._activeItem>0)return this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):!t.isNullOrUndefined(this._mapper)&&this._mapper.txt?this._getField(this._currList[this._activeItem-1],this._mapper.txt):this._currList[this._activeItem-1]},_getUniqueKey:function(){var e=null;return t.isNullOrUndefined(this._mapper)||(this._mapper.key&&(e=this._getField(this._currList[this._activeItem-1],this._mapper.key)),t.isNullOrUndefined(e)&&(e=null)),e},_setTextBoxValue:function(){var t,i,s,n,r,o;this._activeItem&&!this.noresult&&(t=this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):this.getActiveText(),i=this._getCaretSelection(),this.suggLen=i.start,s=this.target.value.substr(0,this.suggLen),r=this.target.value.lastIndexOf(this.model.delimiterChar),o=r==-1?e.trim(s.substr(r+1,this.suggLen)):e.trim(s.substr(r+this.model.delimiterChar.length,this.suggLen)),!s||s.toLowerCase()!=t.substr(0,this.suggLen).toLowerCase()&&o.toLowerCase()!=t.substr(0,this.suggLen-(r+this.model.delimiterChar.length)).toLowerCase()?("delimiter"==this.model.multiSelectMode&&t&&o?this.element.val(this.element.val().replace(o,t)):t&&this.element.val(t),this._removeSelection()):(n="delimiter"==this.model.multiSelectMode?s+t.substr(o.length,t.length):s+t.substr(s.length,t.length),this.element.val(n),this._autofilSelection(),"visualmode"==this.model.multiSelectMode&&(this._adjustWidth(),this.model.enableAutoFill&&this._refreshPopup()),this.model.autoFocus&&!this.noresult&&this._addListHover()))},_enterTextBoxValue:function(e){var t,i,s;!this._activeItem||this.noresult||this.model.readOnly||(t=this.getActiveText(),i=this._currList[this._activeItem-1],this._preVal=t+("delimiter"==this.model.multiSelectMode?this.model.delimiterChar:""),this._valueToTextBox(t,i,!1),s="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val(),this._trigger("select",{event:e,isInteraction:!0,value:s,text:t,key:this._getUniqueKey(),item:i}),this._valueChange(e),this.model.showResetIcon&&this._showReset()),this._isOpened&&this._trigger("close",{event:e,isInteraction:!0})},_createBox:function(i){var s=t.buildTag("span.e-icon e-close"),n=t.buildTag("li.e-options",i).append(s);return this._on(s,"click",function(t){if(!this.model.enabled)return!1;this._deleteBox(e(t.target).parent())}),n},_addLoadingClass:function(){this.model.showLoadingIcon&&this.element.addClass("e-load")},_removeLoadingClass:function(){this.element.removeClass("e-load")},_highlightSuggestion:function(t){var i,s,n,r,o,l,a,d,h;if(""!=e.trim(this._queryString)&&(i=this.model.caseSensitiveSearch?"g":"gi",l=e.trim(this._queryString),l=/^[a-zA-Z0-9- ]*$/.test(l)?l:l.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s="startswith"==this.model.filterType?"^"+l:"endswith"==this.model.filterType?l+"$":l,n=new RegExp(s,i),n.test(t)))for(r=t.match(n),a=t.replace(n,"~^"),o=a.split("~^"),t="",d=0,h=o.length;h>d;d++)t+=r[d]?o[d]+"<span class='e-hilight-txt'>"+r[d]+"</span>":o[d];return t},_RightToLeft:function(e){e?(this.wrapper.addClass("e-rtl"),this.suggestionList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.suggestionList.removeClass("e-rtl")),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this._tableHeaderDiv.removeClass(e?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.find("tr :not(th:last)").addClass(e?"e-atc-thleft":"e-atc-thright").removeClass(e?"e-atc-thright":"e-atc-thleft"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.suggestionList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.suggestionList.removeClass("e-corner"))},_checkReadOnly:function(e){this.model.readOnly=e,this.model.readOnly?(this.element.attr({readonly:"readonly","aria-readonly":!0}),this._off(this.element,"keydown",this._OnKeyDown),this._off(this.element,"keyup",this._OnKeyUp),this._off(this.element,"paste",this._OnPaste),this._off(this.element,"keypress",this._onkeyPress)):(this.element.removeAttr("readonly aria-readonly"),this._on(this.element,"keydown",this._OnKeyDown),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"paste",this._OnPaste),this._on(this.element,"keypress",this._onkeyPress))},_onkeyPress:function(e){13==e.keyCode&&this._PreventDefaultAction(e)},_OnPaste:function(e){var t=this;setTimeout(function(){t._OnKeyUp(e)},0)},_OnKeyDown:function(t){var i;switch("startswith"!=this.model.filterType&&(this.model.enableAutoFill=!1),t.keyCode){case 37:case 35:case 36:this._removeSelection();break;case 38:this.showSuggestionBox&&this.suggestionList&&(this._removeListHover(),this._activeItem>1?this._activeItem-=1:this._activeItem=this._listSize,this._navigationHover()),this._PreventDefaultAction(t);break;case 40:this.showSuggestionBox&&this.suggestionList?(this._removeListHover(),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=1,this._navigationHover()):t.ctrlKey&&""==this.element.val()?this._showFullList(t):t.ctrlKey&&this._showSuggestionList(t),this._PreventDefaultAction(t);break;case 33:case 34:if(this.showSuggestionBox&&this.suggestionList){this._removeListHover();var s=this.model.multiColumnSettings.enable?this._tableColumn.parent().height():this.suggestionList.height(),n=this.model.multiColumnSettings.enable?this._tableColumn.find("tr").outerHeight():this.ul.children("li").outerHeight(),r=0!=Math.round(s/n)?Math.round(s/n):this._listSize;this._activeItem=33==t.keyCode?this._activeItem-r:this._activeItem+r,this._activeItem<1&&(this._activeItem=1),this._activeItem>this._listSize&&(this._activeItem=this._listSize),this._navigationHover()}this._PreventDefaultAction(t);break;case 8:""==e.trim(this.element.val())&&(this._isOpened=!1),"visualmode"==this.model.multiSelectMode&&""==this.element.val()&&this._deleteLastBox();break;case 17:this.ctrlKeyPressed=!0;break;case 9:this.showSuggestionBox&&(this._queryString=this.element.val(),this._enterTextBoxValue(t),this._hideResult(t),this._isOpened=!1,this._PreventDefaultAction(t));break;case 27:this._isOpened=!1,i=this.showSuggestionBox,this._hideResult(t),this._PreventDefaultAction(t),i&&this._trigger("close",{event:t,isInteraction:!0})}"visualmode"==this.model.multiSelectMode&&(17!=t.keyCode&&8!=t.keyCode&&46!=t.keyCode&&this._removeActive(),this._adjustWidth())},_PreventDefaultAction:function(e){e.preventDefault(),this._cancelEvent||(e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!0)},_bubbleEvent:function(e){return"boolean"==typeof e&&(this._cancelEvent=e),this._cancelEvent},_navigationHover:function(){this._addListHover(),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this._queryString=this.target.value,this._setTextBoxValue())},_OnKeyUp:function(t){if(this._keyDownComplete(t),this.ctrlKeyPressed&&"paste"!=t.type)return 17==t.keyCode&&(this.ctrlKeyPressed=!1),!1;if(""==e.trim(this.element.val())&&38==t.keyCode&&40==t.keyCode)return this._hideResult(t),!1;if(!this._checkDelimiter())return!1;switch(this._queryString=e.trim(this._queryString),t.keyCode){case 34:case 33:case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 9:case 27:break;case 13:t.preventDefault(),this._queryString=this.element.val(),this._enterTextBoxValue(t),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this.suggLen=this.element.val().length,this._autofilSelection()),this._isOpened=!1,this._hideResult(t);break;case 46:if("visualmode"==this.model.multiSelectMode&&""==this.element.val()){this._deleteBox(this._ulBox.children("li.e-active"));break}case 8:this._queryString.length>=this.model.minCharacter?(this._autoFill=!1,this._OnTextEnter(t)):(this.noresult=!0,this._hideResult(t),""==e.trim(this.element.val())&&(this._isOpened=!1)),this._typed=!0;break;default:this._queryString.length>=this.model.minCharacter?(this._autoFill=!0,this._OnTextEnter(t)):this.noresult=!0,this._typed=!0}},_getFilteredList:function(e,i){var s,n;clearTimeout(this.timeDelay),t.isNullOrUndefined(e)||"object"!=typeof e[0]||(s=this.model.fields.text?this.model.fields.text:"text",this.model.actionFailure&&t.isNullOrUndefined(t.DataManager(e).executeLocal(t.Query().select(s))[0])&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})),!e||!e.length||e.length<1?(this.suggestionListItems=[],this.model.actionFailure&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})):(n=t.Query(),this._addQuery(n,"object"==typeof e[0]),this.suggestionListItems=t.DataManager(e).executeLocal(n),this.model.actionSuccess&&this._trigger("actionSuccess")),this._doneRemaining(i),this.model.actionComplete&&this._trigger("actionComplete")},_performSearch:function(e){var i,s;this.model.actionBegin&&this._trigger("actionBegin"),i=this.model.dataSource,t.DataManager&&i instanceof t.DataManager?i.dataSource.offline||i.dataSource.json&&i.dataSource.json.length>0?(this._getFilteredList(i.dataSource.json,e),this._selectedObj.push(i.dataSource.json)):(window.clearTimeout(this.timer),s=this,this.timer=window.setTimeout(function(){s._fetchRemoteDat(i)},700)):this._getFilteredList(i,e)},_fetchRemoteDat:function(e){var t,i=this,s=this._getQuery();this._addQuery(s,!0),t=e.executeQuery(s),t.fail(function(e){i.suggestionListItems=null,i._removeLoadingClass(),i._trigger("actionFailure",e)}).done(function(e){i.suggestionListItems=e.result,"none"==i.model.multiSelectMode?i._selectedObj=e.result:"delimiter"==i.model.multiSelectMode&&(i._selectedObj=i._selectedObj.concat(e.result)),i._doneRemaining(e),i._trigger("actionSuccess",e)}).always(function(e){i._trigger("actionComplete",e)})},_addSortingQuery:function(e,t){if(this.model.allowSorting){var i="descending"==this.model.sortOrder;e.sortBy(t,i)}},_addQuery:function(e,t){var i,s,n,r,o="";if(t&&(s=this.model.fields,o=s&&s.text?s.text:"text"),this._queryString)if(this.model.multiColumnSettings.enable)if(this._columnsIndex(),t){for(o=[],n=0,r=this._columnIndex.length;n<r;n++)o.push(this.model.multiColumnSettings.columns[this._columnIndex[n]].field),i=this._predicateConvertion(i,this.model.multiColumnSettings.columns[this._columnIndex[n]].field,this.model.multiColumnSettings.columns[this._columnIndex[n]].filterType?this.model.multiColumnSettings.columns[this._columnIndex[n]].filterType:this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._columnIndex[n]].type?this.model.multiColumnSettings.columns[this._columnIndex[n]].type:"string");e.where(i)}else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);this._addSortingQuery(e,o)},_predicateConvertion:function(e,s,n,r,o,l){var a;return"number"==l?a=Number(r):"boolean"==l?"true"==r||"yes"==r||"1"==r?a=!0:("false"==r||"no"==r||"0"==r)&&(a=!1):a="date"==l?new Date(r):r,"number"==l&&isNaN(a)||"boolean"==l&&a==i?e:e!=i?e.or(s,n,a,o):t.Predicate(s,n,a,o)},_getQuery:function(){var e;if(t.isNullOrUndefined(this.model.query)){var i=[],s=t.Query(),n=this.model.fields;for(e in n)"tableName"!==e&&n[e]&&i.push(n[e]);i.length>0&&s.select(i),t.isNullOrUndefined(this.model.dataSource.dataSource.url)||this.model.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||s.from(n.tableName)}else s=this.model.query.clone();return s},_OnTextEnter:function(e){var i=this;t.isDevice()?(clearTimeout(this.timeDelay),this.timeDelay=setTimeout(function(){i._onTextProcess(e)},i.model.delaySuggestionTimeout)):i._onTextProcess(e)},_onTextProcess:function(e){this._addLoadingClass(),this.element.attr("aria-expanded",!1),this._performSearch(e),this.model.showResetIcon&&this._showReset()},_showReset:function(){t.isNullOrUndefined(this.resetSpan)&&(this.resetSpan=t.buildTag("span.e-icon e-iclose"),this.model.showPopupButton?(this.dropdownbutton.before(this.resetSpan),this.container.addClass("e-popup e-reset")):this.container.append(this.resetSpan).addClass("e-reset")),this._on(this.resetSpan,"mousedown",this._refreshSearch)},_refreshSearch:function(){this.resetSpan=null,this.clearText(),this._refreshPopup()},_removeReset:function(){this.resetSpan=this.resetSpan&&this.resetSpan[0].remove(),this._refreshPopup()},_doneRemaining:function(e){this._showSuggestionList(e),this.element.attr({"aria-expanded":!0,"aria-haspopup":!0}),(this.model.enableAutoFill&&this._autoFill&&!this.noresult||this.model.autoFocus)&&(this.element.attr("aria-autocomplete","both"),this._activeItem=1,this._queryString=this.target.value),this.model.enableAutoFill&&this._autoFill&&!this.noresult&&this._setTextBoxValue(),this.model.autoFocus&&!this.noresult&&this._addListHover(),this._removeLoadingClass(),this.noresult&&!this.model.showEmptyResultText&&this._hideResult(e)},_removeRepeated:function(){var e,i,s,n,r,o=this.suggestionListItems;if(!o||0==o.length||0==this._selectedItems.length||1==this.suggestionListItems.length&&this.suggestionListItems[0]==this.element.val()+this._addNewTemplate)return!1;for(this._repeatRemove=!1,e=0,i=this._selectedItems.length;e<i;e++)t.DataManager&&this.model.dataSource instanceof t.DataManager?(n=this,r=0,o.forEach(function(i){(t.isNullOrUndefined(i[n.model.fields.text])?t.isNullOrUndefined(i[n.model.fields.key])?t.isNullOrUndefined(i[n.model.fields.htmlAttributes])?!!t.isNullOrUndefined(i[n.model.fields.groupBy])||i[n.model.fields.groupBy]==n._selectedItems[e][n.model.fields.groupBy]:i[n.model.fields.htmlAttributes]==n._selectedItems[e][n.model.fields.htmlAttributes]:i[n.model.fields.key]==n._selectedItems[e][n.model.fields.key]:i[n.model.fields.text]==n._selectedItems[e][n.model.fields.text])&&(s=r),r++})):s=o.indexOf(this._selectedItems[e]),s!=-1&&this.suggestionListItems.splice(s,1),this.element.val()==this._selectedItems[e]&&(this._repeatRemove=!0)},_checkDelimiter:function(){this._queryString=this.element.val();var e="delimiter"!=this.model.multiSelectMode?-1:this._queryString.lastIndexOf(this.model.delimiterChar);return e==-1||(this._queryString=this._queryString.substr(e+this.model.delimiterChar.length,this._queryString.length),!0)},_autofilSelection:function(){var e=this.element[0],t=this.element.val().length;e.setSelectionRange?e.setSelectionRange(this.suggLen,t):e.createTextRange&&(e=e.createTextRange(),e.collapse(!0),e.moveEnd("character",t),e.moveStart("character",this.suggLen),e.select())},_OnDropdownClick:function(e){this.model.enabled&&!this.model.readOnly&&(e.preventDefault(),this.dropdownbutton.addClass("e-active"),this._iconEventBind(this.dropdownbutton,"span"),(e.which&&1==e.which||e.button&&0==e.button)&&(this._addLoadingClass(),this.showSuggestionBox?(this._hideResult(e),this._isOpened=!1,this._removeLoadingClass()):this._showFullList(e)))},_iconEventBind:function(t,i){t.on({mouseleave:e.proxy(this._OnMouseIconClick,this)},i)},_OnMouseIconClick:function(){this.dropdownbutton.removeClass("e-active")},_showFullList:function(e){this._isFocused||this.element.focus(),this._queryString=null,this._autoFill=!1,this._performSearch(e)},_OnMouseEnter:function(e){this._getActiveItemIndex(e),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active")},_getActiveItemIndex:function(t){var i=t.target;this.model.multiColumnSettings.enable&&"tr"!=t.target.tagName.toLowerCase()?i=e(t.target).parents("tr"):"li"!=t.target.tagName.toLowerCase()&&(i=e(t.target).parents("li")),this._getLiTags().removeClass("e-hover"),e(i).addClass("e-hover"),this._queryString=this.element.val(),this._activeItem=this._getLiTags().index(e(i))+1},_OnMouseLeave:function(){this._getLiTags().removeClass("e-hover"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active"),this.model.highlightSearch&&this._getLiTags().find(".e-hilight-txt").removeClass("e-hover")},_OnMouseClick:function(e){this._getActiveItemIndex(e),this.noresult||(this._enterTextBoxValue(e),this._isOpened=!1,this._hideResult(e))},_OnDocumentClick:function(t){e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList)||e(t.target).is(this.element)||e(t.target).parents(".e-atc").is(this.wrapper)?(e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList))&&t.preventDefault():(this._isOpened=!1,this._hideResult(t),this._trigger("close",{event:t,isInteraction:!0}))},_OnWindowResize:function(){this._refreshPopup()},_keyProcess:function(e){var i,s,n,r,o=this._declareVariable(),l=this;if(i=this._delimiterChar(),!t.isNullOrUndefined(e))for(s=0,n=e.length;s<n;s++)r=e[s],t.DataManager&&this.model.dataSource instanceof t.DataManager?l._selectValueByKey(null):(this._dataQuery=this.model.multiColumnSettings.enable?t.Query():t.Query().where(o[0],this.model.filterType,r,!1),this._promise=t.DataManager(this.model.dataSource).executeLocal(this._dataQuery),this.model.multiColumnSettings.enable?this._formatStringKey(e,o,i):this._promise instanceof Array&&0==this._promise.length?null!=this._selectValueByKey()&&this._selectValueByKey():this._getFieldKey(this._promise[0],o[1],i))},_formatStringKey:function(e,t,i){var s,n,r,o,l,a;for(this._selectValueByKey(null),s=0,n=e.length;s<n;s++)if(""!=e[s]){for(r=e[s],l=0,a=this._promise.length;l<a;l++)r==this._textFormateString(this._promise[l])&&(o=l);o?this._getFieldKey(this._promise[o],t[1],i):null!=this._selectValueByKey()&&this._selectValueByKey()}},_getFieldKey:function(i,s,n){if((t.isNullOrUndefined(this.model.template)||!t.isNullOrUndefined(this._getField(i,s)))&&!t.isNullOrUndefined(this._getField(i,s))){if(l=this._getField(i,s).toString(),"none"!=this.model.multiSelectMode){var r,o,l=this._selectValueByKey();delimiterChar=this.model.delimiterChar,r=this._getField(i,s).toString(),null!=l?(o=l.toString().split(n).filter(function(e){return""!==e}),e.inArray(r,o)==-1?(o.push(r),l=o.join(delimiterChar)+delimiterChar):l=r+delimiterChar):l=r+delimiterChar}this._selectValueByKey(l)}},_removeDuplicateVal:function(i){var s=[];return e.each(i,function(t,i){e.inArray(i,s)==-1&&s.push(i)}),1!=i.length||t.isNullOrUndefined(this._originalval)||e.inArray(i[0],this._originalval)==-1&&this._selectValueByKey(null),s},_valueChange:function(e){var t="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();(this.value()!=t||""==t&&""!=this.element.val())&&(this.value(t),this._changeEvtTrigger(t,e)),this.model.showResetIcon&&!t&&(this.wrapper.find("span.e-iclose").remove(),this.resetSpan=null)},_changeEvtTrigger:function(e,t){var s=t!=i?{event:t,isInteraction:!0,value:e}:{isInteraction:!1,value:e};this.initialRender||(this._trigger("_change",{value:e}),this._trigger("change",s))},_updateSelectedItemArray:function(i){var s,n,r,o,l,a=[];if(this._selectedItems=[],this.suggestionListItems=this.model.dataSource,"delimiter"==this.model.multiSelectMode&&i)if(a=i.split(this.model.delimiterChar),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]){for(s=0,n=a.length;s<n;s++)if(a[s]){var o=this,d=this._selectedObj.length,l={};for(r=0;r<d;r++)this._selectedObj[r][o.model.fields.text]==a[s]&&(l=this._selectedObj[r],r=d);this._selectedItems.push(e.isEmptyObject(l)?a[s]:l)}}else this._createBoxForObjectType(a);else"none"==this.model.multiSelectMode&&i&&(a.push(i),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]?(o=this,l=e.grep(this._selectedObj,function(e){if(e[o.model.fields.text]==i)return e}),this._selectedItems.push(l.length>0?l:i)):this._createBoxForObjectType(a))},_keyDownComplete:function(e){var t=this.element.val();this._preVal!=t&&(this._preVal=t,"visualmode"==this.model.multiSelectMode&&this._adjustWidth(),this._valueChange(e))},_moveCaretToEnd:function(e){var t,i;e.scrollLeft=e.scrollWidth,e.createTextRange&&(t=e.createTextRange(),t.moveEnd("textedit"),t.moveStart("textedit"),t.select()),"number"==typeof e.selectionStart?e.selectionStart=e.selectionEnd=e.value.length:void 0!==e.createTextRange&&(i=e.createTextRange(),i.collapse(!1),i.select())},_getCaretSelection:function(){var e,t,i,s,n,r=this.element[0],o=0,l=0;return isNaN(r.selectionStart)?(e=document.selection.createRange().getBookmark(),t=r.createTextRange(),t.moveToBookmark(e),i=r.createTextRange(),i.collapse(!0),i.setEndPoint("EndToStart",t),s=i.text.length,n=t.text.length,{start:s,end:s+n}):(o=r.selectionStart,l=r.selectionEnd,{start:Math.abs(o),end:Math.abs(l)})},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur)}}),t.Autocomplete.Locale=t.Autocomplete.Locale||{},t.Autocomplete.Locale.default=t.Autocomplete.Locale["en-US"]={addNewText:"Add New",emptyResultText:"No suggestions",actionFailure:"The specified field doesn't exist in given data source",watermarkText:""},t.filterType={StartsWith:"startswith",Contains:"contains",EndsWith:"endswith",LessThan:"lessthan",GreaterThan:"greaterthan",LessThanOrEqual:"lessthanorequal",GreaterThanOrEqual:"greaterthanorequal",Equal:"equal",NotEqual:"notequal"},t.SortOrder={Ascending:"ascending",Descending:"descending"},t.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},t.Animation={None:"none",Slide:"slide",Fade:"fade"},t.Type={Number:"number",String:"string",Boolean:"boolean",Date:"date"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.datepicker.min",["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){!function(e,t,n){t.widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date(1900,0,1),maxDate:new Date(2099,11,31),startLevel:"month",
depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_renderPopup:function(){this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._setRestrictDateState(this.model.showDisabledRange),this._createCalender(),this._setDisplayInline(this.model.displayInline),this._resizeCalender(),this._setRTL(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this._wireCalendarEvents()},_setModel:function(i){var s,n;t.isNullOrUndefined(this.sfCalendar)&&this._renderPopup();var r=!1,o=!1,l=!1;for(s in i)switch(s){case"dayHeaderFormat":this.model.dayHeaderFormat=i[s],r=o=!0;break;case"showPopupButton":this._renderDateIcon(i[s],!0);break;case"displayInline":i[s]||this._bindDateButton(),this._setDisplayInline(i[s]),this.model.allowEdit||i[s]||!this._isInputBox||this.element.on("mousedown",e.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[s])&&(i[s]=null),t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),i[s]=this.model.value):this._updateDateValue(i[s]),l=r=o=!0;break;case"specialDates":this.model.specialDates=i[s],this._createSpecialDateObject(),r=o=!0;break;case"fields":this.model.fields=i[s],this._mapField=this._getMapper(),r=o=!0;break;case"showTooltip":this.model.showTooltip=i[s],r=o=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[s],r=o=!0;break;case"highlightSection":this.model.highlightSection=i[s],r=o=!0;break;case"dateFormat":this.model.dateFormat=i[s],this._ensureValue();break;case"minDate":this._setMinDate(i[s]),i[s]=this.model.minDate,this._ensureValue(),l=r=o=!0;break;case"maxDate":this._setMaxDate(i[s]),i[s]=this.model.maxDate,this._ensureValue(),l=r=o=!0;break;case"locale":this.model.locale=i[s],this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay?-1:this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(i[s]),this.model.value&&this._setDateValue(this.model.value),i[s]=this.model.locale,r=o=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[s],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[s],l=r=o=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[s],this._disbleMaualInput();break;case"width":this._setWidth(i[s]);break;case"height":this._setHeight(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":i[s]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(i[s]);break;case"showFooter":this._enableFooter(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":n=i[s],(parseInt(i[s])<0||parseInt(i[s])>6)&&(i[s]=this.culture.calendar.firstDay,n=-1),this.model.startDay=i[s],t.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=n,r=o=!0;break;case"startLevel":this.model.startLevel=i[s],r=o=!0;break;case"headerFormat":this.model.headerFormat=i[s],r=o=!0;break;case"depthLevel":this.model.depthLevel=i[s],r=o=!0;break;case"htmlAttributes":this._addAttr(i[s]);break;case"allowEdit":this._changeEditable(i[s]);break;case"tooltipFormat":this.model.tooltipFormat=i[s],r=o=!0;break;case"allowDrillDown":this._allowQuickPick(i[s]),r=o=!0;break;case"showDisabledRange":this._setRestrictDateState(i[s]);break;case"blackoutDates":this.model.blackoutDates=i[s],this._initDisableObj(this.model.blackoutDates),r=o=!0}l&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate),this._setWaterMark(),r&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),o&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar&&this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isInputBox=this._isInputBox(),this._isSupport=document.createElement("input").placeholder!=n,this._checkAttribute(),this._setValues(),this._createDatePicker(),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=n&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,r;this.element.rules("add",this.model.validationRules),i=this.element.closest("form").data("validator"),i=i||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={};for(s in this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s])){i.settings.messages[name][s]=e.validator.messages[s];for(r in this.model.validationMessage)s==r&&(n=this.model.validationMessage[s])}else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_checkAttribute:function(){for(var e,i,s=["min","max","readonly","disabled"],n=["minDate","maxDate","readOnly","enabled"],r=0;r<s.length;r++)e=this.element.attr(s[r]),i=n[r],t.isNullOrUndefined(e)||(t.isNullOrUndefined(this._options)?this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"):t.isNullOrUndefined(this._options[i])&&(this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]")))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this[i](this.element,"blur",this._onFocusOut),this[i](this.element,"focus",this._onFocusIn),this[i](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(t){e(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",e.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){var t=e?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s.disable():"readOnly"==n&&"readOnly"==e?s.model.readOnly=!0:"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box e-padding"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr(),this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&e("#e-"+this._id).remove(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this.model.displayInline?this._renderPopup():this._isInputBox&&this._renderDateIcon(this.model.showPopupButton,!1),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?this.wrapper?this.wrapper.width(e):this.element.width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?this.wrapper?this.wrapper.height(e):this.element.height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar&&this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar&&this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar&&this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar&&this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var t,i;if(this._stopRefresh)return void(this._stopRefresh=!1);t=this.element.val(),i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t?this._parseDate(t,!0):this._parseDate(t),i=this._validateYearValue(i),this._setDateValue(i),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged()},_validateYearValue:function(e){if(null!=e){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>i&&e.setFullYear(this._calendarDate.getFullYear())}return e},_setFooterText:function(t){e(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(t){this.model.displayInline=t,t&&this._isInputBox?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),e("body").append(this.sfCalendar),this._isOpen=!1),t&&(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",e.proxy(this._showDatePopUp,this)))},_disbleMaualInput:function(){this.model.readOnly?(e(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&e(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){var t;return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?null:(e instanceof Date||(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t),e=t||((t=this._checkJSONString(e))?t:null)),!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null)},_checkJSONString:function(e){if(isNaN(Date.parse(e))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e)return new Date(e);if("string"==typeof e)return this._dateFromISO(e)}},_dateFromISO:function(e){var t,i,s,n,r,o,l,a,d,h,c=this._extISORegex.exec(e)||this._basicISORegex.exec(e),u="",p="",m="";if(c){for(i=0;i<this._dates.length;i++)if(this._dates[i][1].exec(c[1])){u=this._dates[i][0];break}if(c[3])for(s=0;s<this._times.length;s++)if(this._times[s][1].exec(c[3])){p=(c[2]||" ")+this._times[s][0];break}for(c[4]&&this._zeroRegex.exec(c[4])&&(m="Z"),t=u+p+m,n=t.match(this._tokens),o=[],a=0;a<n.length;a++)d=n[a],l=this._checkLiteral(n[a]),h=this._numberRegex[l?n[a].toLowerCase():d.length]||new RegExp("^\\d{1,"+d.length+"}"),(r=e.match(h))&&(e.substr(0,e.indexOf(r))>=0&&!l&&(n[a].indexOf("M")>=0?o.push(parseInt(r[0])-1):o.push(parseInt(r[0]))),e=e.slice(e.indexOf(r[0])+r[0].length));return"Z"==c[4]?new Date(Date.UTC.apply(null,o)):new Date(o[0],o[1],o[2],o[3],o[4],o[5])}return new Date(e+"")},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){if("string"==typeof e){var i=t.parseDate(e,this.model.dateFormat,this.model.locale);e=null!=i?i:new Date(e)}return e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=t.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),this.model.startDay==-1&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox){var i,s,n=this.element.is("input")?this.wrapper:this.element,r=this._getOffset(n),o=e(document).scrollTop()+e(window).height()-(r.top+e(n).outerHeight()),l=r.top-e(document).scrollTop(),a=this.sfCalendar.outerHeight(),d=this.sfCalendar.outerWidth(),h=r.left,c=n.outerHeight(),u=(n.height(),this._getZindexPartial()),p=a<o||a>l?r.top+c+3:r.top-a-3;i=e(document).scrollLeft()+e(window).width()-h,s=e(document).scrollLeft()+h+n.width(),(this.model.enableRTL||d>i&&d<h+n.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(h+=this.wrapper.width()-this.sfCalendar.width()),d>s&&(h=r.left),this.sfCalendar.css({left:h+"px",top:p+"px","z-index":u})}},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,i){var s=this._checkDateObject(e,i);null!=s?(this.isValidState=!0,this.model.value=new Date(s.toString()),this.model.displayInline||this.wrapper.addClass("e-valid"),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this.model.displayInline||this.wrapper.removeClass("e-valid"),this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!t.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){(null!=this._validateValue()||!this.model.enableStrictMode)&&this.sfCalendar&&this.sfCalendar.find(".e-datepicker-days").is(":visible")&&this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate?this.isValidState=!0:(this.model.value=null,this.isValidState=!0)))},_validateValue:function(){var e;return e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),t=-1;if(null!=e.exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1)),t>=7&&t<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_parseDate:function(e,i){var s=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=n&&""!=e&&1!=i&&t.format(t.parseDate(DateValue,s,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:t.parseDate(e,s,this.model.locale)},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[\/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){var t="string"==typeof e?this._parseDate(e):new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields;this._mapField={},this._mapField._date=e&&e.date?e.date:"date",this._mapField._tooltip=e&&e.tooltip?e.tooltip:"tooltip",this._mapField._icon=e&&e.iconClass?e.iconClass:"iconClass",this._mapField._custom=e&&e.cssClass?e.cssClass:"cssClass"},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return e?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,r,o,l,a,d;this.model.minDate!=n&&this.model.maxDate!=n&&(s=new Date(this.model.minDate.getTime()),s.setDate(1),r=new Date(this.model.maxDate.getTime()),r.setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(o=this._zeroTime(new Date),o.setDate(1)):o=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),o.getTime()<s.getTime()?o=s:o.getTime()>r.getTime()&&(o=r),l=this.displayedMonth,a=this.displayedYear,this.displayedMonth=o.getMonth(),this.displayedYear=o.getFullYear(),d=o,i&&(this.displayedMonth!=l||this.displayedYear!=a)&&(this._renderCalendar(this,d),this._dateValue=d,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&e("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){e("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){e("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i),this._renderCalendar(this),
this._startLevel(this.model.startLevel),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),e(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?e(".e-header",this.sfCalendar).show():e(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?e(".e-footer",this.sfCalendar).show():e(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){e>=t?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){var i,s,n,r,o,l;if(this.model.readOnly||!this.model.enabled||e(t.target).hasClass("e-disable"))return!1;switch(t.preventDefault(),i=e("table",this.sfCalendar),s=this._navigateFrom(i),n=e(e(t.target).is("a")?t.target.parentNode:t.target),r=!!n.hasClass("e-prev"),this._processNextPrevDate(r),o=e("table",this.sfCalendar),o.get(0).className){case"e-dp-viewdays":l="month";break;case"e-dp-viewmonths":l="year";break;case"e-dp-viewyears":l="decade";break;case"e-dp-viewallyears":l="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:l,navigateFrom:s})},_processNextPrevDate:function(t){var i,n,r,o,l,a,d;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(i=e("table",this.sfCalendar),i.get(0).className){case"e-dp-viewdays":if(r=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0,this._addMonths(this._dateValue,t?-r:r),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),o=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(o.firstDay,this.model.minDate),this._nextArrowCondition(o.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if(l=this._dateValue,l.setFullYear(e(".e-datepicker-headertext",this.sfCalendar).text()),t){if(l.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(l.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,this._addYears(l,t?-1:1),this._renderCalendar(this,l),n=l.getFullYear(),e(".e-datepicker-headertext",this.sfCalendar).text(n),e("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide(),e(e(i).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(n,n);break;case"e-dp-viewyears":if(a=this._dateValue,a.setFullYear(e(i).find(".e-state-hover").text()),t){if(parseInt(e("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(e("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,e(i).find(".e-state-hover").hasClass("e-year-first")&&t||e(i).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(a.getFullYear()):e(i).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(a.getFullYear()+11):e(i).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(a.getFullYear()-11):this._dateValue.setFullYear(a.getFullYear()+(t?-10:10)),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+(d+10)),e("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide(),e(e(i).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(e(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,d+10);break;case"e-dp-viewallyears":if(t){if(parseFloat(e("td.e-allyear-first",i.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),n=parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+n),e("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide(),e(e(i).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(e(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,n)}this._layoutChanged()},_addFocus:function(t,i){var s,n,r="e-current-"+t;return"day"==t&&(r="current-month"),s=this.sfCalendar.find("tbody tr td."+r),"month"==t&&e(s).each(function(t,s){if(parseInt(e(s).attr("index"))==parseInt(i))return void(i=t)}),n=s[i],n||(n=s.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(n).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){var i,s,n;if(this.model.value instanceof Date){var r,o=this.sfCalendar.find("tbody tr td.e-current-"+t),l=this,a=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(e(".e-text",this.sfCalendar).text())&&e(o).each(function(t,i){if(parseInt(e(i).attr("index"))==parseInt(l.model.value.getMonth()))return void(a=t)});break;case"year":i=this.model.value.getFullYear(),e(o).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(i))return void(a=e)});break;case"allyear":s=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),n=s+1+" - "+(s+10),e(o).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(n))return void(a=e)})}r=o[a],r&&(this.sfCalendar.find("table td").removeClass("e-active"),e(r).hasClass("e-hidedate")||e(r).addClass("e-active"))}},_setFocusByName:function(t,i){var s,n,r=this.sfCalendar.find("tbody tr td.e-current-"+t);return e(r).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(i))return void(s=e)}),n=r[s],n||(n=r.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(n).addClass("e-state-hover"),this._setActiveState(t),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var i,s,n=e("table",this.sfCalendar),r=e("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(n),r){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(n.find(".e-state-hover")).getMonth()||this._getDateObj(n.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),s="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt(),this._startLevel("decade"),s="decade",this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt(),this._startLevel("century"),s="century",this._hoverAllYear=this._setFocusByName("allyear",i)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var t,i,s=(e("table",this.sfCalendar),e("table",this.sfCalendar).get(0).className);switch(s){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=t,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=t,i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var i,s,n=this.sfCalendar.find("tbody tr td.e-current-"+t),r=this._dateValue.getFullYear();e(n).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(r))return void(i=e)}),(s=n[i])&&(e(s).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):e(s).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t,i=e.get(0).className;switch(i){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){var s,n;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),s=e(i.currentTarget)):s=i;var r,o,l=e("table",this.sfCalendar),a=e("table",this.sfCalendar).get(0).className,d=this;switch(navFrom=this._navigateFrom(l),a){case"e-dp-viewmonths":l.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(e(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,1),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget}),this._renderCalendar(this,this._dateValue),e("tbody",l).not(".e-datepicker-days,.e-week-header").hide(),e(e(l).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){d._addFocus("day",d._hoverDate||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),o="month";break;case"e-dp-viewyears":l.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),e("tbody,tr.e-week-header",l).not(".e-datepicker-months").hide(),t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),e(e(l).find(".e-datepicker-months")).fadeIn("fast",function(){d._addFocus("month",d._hoverMonth||0),d._animating=!1}),r=s.text(),e(".e-datepicker-headertext",this.sfCalendar).text(r),this._checkArrows(r,r),o="year";break;case"e-dp-viewallyears":n=s.text().split("-"),l.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),n[0]<this.model.minDate.getFullYear()?n[0]=this.model.minDate.getFullYear().toString():n[0]>this.model.maxDate.getFullYear()&&(n[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(n[0],0,1)),e("tbody,tr.e-week-header",l).not(".e-datepicker-years").hide(),e(e(l).find(".e-datepicker-years")).fadeIn("fast",function(){d._addFocus("year",d._hoverYear||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(n[0]+" - "+n[1]),this._checkArrows(n[0],n[1]),o="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.trim(n[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:o,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(t){var i,s,n,r,o=e("table",this.sfCalendar),l=e(".e-datepicker-headertext",this.sfCalendar),a=this._dateValue;switch(t){case"decade":o.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-years").hide(),e(e(o).find(".e-datepicker-years")).show(),a=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:a,r=parseInt(a.getFullYear())-(parseInt(a.getFullYear())%10+1),i=r+1,s=r+10,l.text(i+" - "+s),this._checkArrows(i,s),this._hoverYear=this._setFocusByName("year",a.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,a),o.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-allyears").hide(),e(e(o).find(".e-datepicker-allyears")).show(),i=parseFloat(e("td.e-allyear-first",o.get(0)).text().split("-")[1])+1,s=parseFloat(e("td.e-allyear-last",o.get(0)).prev().text().split("-")[1]),n=i+" - "+s,l.text(n),this._checkArrows(i,s),r=parseInt(a.getFullYear())-(parseInt(a.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",r+1+" - "+(r+10));break;case"year":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),e("tbody,tr.e-week-header",o).hide(),e(e(o).find(".e-datepicker-months")).show(),i=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():a.getFullYear(),l.text(i),this._checkArrows(i,i),this._hoverMonth=a.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":e(i.find(".e-current-year,.e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),this._on(e(".e-current-month",this.sfCalendar),"click",e.proxy(this._onDepthSelectHandler,this));break;case"decade":e(i.find(".e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),e(".e-current-year",this.sfCalendar).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"century":e(i.find(".e-current-allyear")).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;e(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):e(t.target).hasClass("e-current-year")?this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML))):e(t.target).hasClass("e-current-allyear")&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML)))),this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,s){for(var n,r,o,l,a=function(e){return document.createElement(e)},d=0,h=0;h<3;h++){for(n=e(a("tr")),r=0;r<4;r++)o=e(a("td")).addClass("e-current-month e-state-default").attr({index:d}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[d++]),s.getFullYear()<this.model.minDate.getFullYear()||s.getFullYear()>this.model.maxDate.getFullYear()?(o.addClass("e-hidedate"),o.removeClass("e-current-month")):(s.getFullYear()<=this.model.minDate.getFullYear()&&d<this.model.minDate.getMonth()+1||s.getFullYear()>=this.model.maxDate.getFullYear()&&d>this.model.maxDate.getMonth()+1)&&(o.addClass("e-hidedate"),o.removeClass("e-current-month")),n.append(o);t.append(n)}i.append(t),l=s.getFullYear(),this._checkArrows(l,l)},_datepickerYears:function(t,i,s){for(var n,r,o,l,a=function(e){return document.createElement(e)},d=parseInt(s)-(parseInt(s)%10+1),h=[],c=0;c<12;c++)h.push(d+c);for(n=0,r=0;r<3;r++){for(o=e(a("tr")),c=0;c<4;c++)l=e(a("td")),l.attr(this._isIE8?{unselectable:"on"}:{}),0==n?l.addClass("e-year-first e-current-year "):11==n?l.addClass("e-year-last e-current-year "):l.addClass("e-current-year e-state-default"),(h[n]<this.model.minDate.getFullYear()||h[n]>this.model.maxDate.getFullYear())&&(l.addClass("e-hidedate"),l.removeClass("e-current-year")),l.html(h[n++]),o.append(l);t.append(o)}i.append(t),this._checkArrows(h[0],h[h.length])},_datepickerAllYears:function(t,i,s){for(var n,r,o,l,a=parseInt(s)-(parseInt(s)%100+10),d=[],h=this._isIE8||this._isIE9?"":"\n",c=0;c<12;c++)d.push(parseInt(a)+" -"+h+parseInt(a+9)),a+=10;for(n=0,r=0;r<3;r++){for(o=e(document.createElement("tr")),c=0;c<4;c++)l=e(document.createElement("td")),l.attr(this._isIE8?{unselectable:"on"}:{}),0==n?l.addClass("e-allyear-first e-current-allyear "):11==n?l.addClass("e-allyear-last e-current-allyear "):l.addClass("e-current-allyear e-state-default"),(parseInt(d[n].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(d[n].split("-\n")[0])>this.model.maxDate.getFullYear())&&(l.addClass("e-hidedate"),l.removeClass("e-current-allyear")),l.html(d[n++]),o.append(l);t.append(o)}i.append(t)},_renderHeader:function(i){var s,n,r,o,l,a,d=e(document.createElement("thead")),h=t.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=i.model.dayHeaderFormat)for(s=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),n=this.Date.firstDayOfWeek;n<this.Date.firstDayOfWeek+7;n++)r=n%7,o=h.names[r],l="short"==i.model.dayHeaderFormat?h.namesAbbr[r]:"long"==i.model.dayHeaderFormat?o:h.namesShort[r],a=t.buildTag("th","",{},{scope:"col",abbr:o,date:o,title:this._formatter(o,"dddd"),class:0==r||6==r?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(l),s.append(a);return d.append(s)},_renderCalendar:function(i,s){var r,o,l,a,d,h,c,u,p,m=this;i=e.extend({},t.DatePicker.prototype.defaults,i),this.Date.firstDayOfWeek=this.model.startDay,r=s||(this._calendarDate?this._calendarDate:m._zeroTime(new Date)),o=e("table",this.sfCalendar),o.empty(),o.append(this._renderHeader(i)),l=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(l,o,r.getFullYear()),l=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(l,o,r.getFullYear());var g=i.model.month==n?r.getMonth():i.model.month,f=i.model.year||r.getFullYear(),_=new Date(f,g,1,0,0,0),v=this.Date.firstDayOfWeek-_.getDay()+1;v>1&&(v-=7),a=Math.ceil((-1*v+1+this._getDaysInMonth(_))/7),this._addDays(_,v-1),d=m._zeroTime(new Date),h=this._calendarDate,l=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(l,o,r),l=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var b=0,y=!0,w=!0;b++<a;){for(c=jQuery(document.createElement("tr")),u=0;u<7;u++){var C=_.getMonth()==g,x=this._isSpecialDates(_),S=this._checkDisableRange(_),T=this._getIndex,k=e(document.createElement("td")).html(x?"<span></span>"+_.getDate():_.getDate()+"").attr({date:_.toDateString(),title:this.model.showTooltip?x&&this.model.specialDates[T][this._mapField._tooltip]?this.model.specialDates[T][this._mapField._tooltip]:this._formatter(_,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((C?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(_)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(C&&_.getTime()==d.getTime()?"today ":""));k.find("span:first-of-type").addClass(x?this.model.specialDates[T][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[T][this._mapField._icon]+" ":"e-special-day":""),k.addClass(x&&this.model.specialDates[T][this._mapField._custom]?this.model.specialDates[T][this._mapField._custom]:""),S&&this._disableDates({date:_,element:k}),h.getTime()==_.getTime()&&C&&(k.hasClass("e-hidedate")||(this.model.value?(k.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&c.addClass("e-selected-week"),"month"==this.model.highlightSection&&l.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&c.addClass("e-work-week")):k.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(k.hasClass("e-hidedate")||k.addClass("e-state-hover"),this._hoverDate=_.getDate()-1)),p=!0,(_<this.model.minDate||_>this.model.maxDate)&&(k.addClass("e-hidedate"),k.removeClass("current-month"),this.model.showOtherMonths&&k.removeClass("other-month"),p=w=!1),C&&(p&&y&&(this._tempMinDate=_,y=!1,w=!0),w&&(this._tempMaxDate=_)),this._trigger("beforeDateCreate",{date:_,value:this._formatter(_,this.model.dateFormat),element:k}),c.append(k),_=new Date(_.getFullYear(),_.getMonth(),_.getDate()+1,0,0,0)}l.append(c)}o.append(l),this._DRPdisableFade?(e(l).css("display","block"),e(l).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?e(l).css("display","block"):e(l).fadeIn("fast"),this.model.startLevel===this.model.depthLevel?this._depthLevel(this.model.depthLevel):"month"!=this.model.depthLevel&&""!=this.model.depthLevel?"century"==this.model.startLevel?this._depthLevel(this.model.depthLevel):"decade"==this.model.startLevel&&"century"!=this.model.depthLevel?this._depthLevel(this.model.depthLevel):"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel?this._depthLevel(this.model.depthLevel):(this._on(o.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(o.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))):(this._on(o.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(o.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!t.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])!==-1},_initDisableObj:function(){var e,s,n;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(e=this._checkInstanceType(this.model.blackoutDates[i]))&&(s=e.getFullYear(),n=e.getMonth(),t.isNullOrUndefined(this._disableCollection[s])&&(this._disableCollection[s]=[]),jQuery.inArray(n,this._disableCollection[s])==-1&&this._disableCollection[s].push(n))},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;t={row:null,col:null},t.col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=t.col!=-1?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=t.row!=-1?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=this.sfCalendar.find("table")[0].className,n=3,r=4;switch(s){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,n,r,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,n,r,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,n,r,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":n=this.sfCalendar.find("tbody.e-datepicker-days tr").length,r=7,i=this._changeRowCol(t,e.keyCode,n,r,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(t,i,s,n,r,o){var l,a,d,h,c,u={parent:null,child:null};switch(r){case"day":l="tbody.e-datepicker-days tr td.current-month",u.parent=".e-datepicker-days",u.child=".current-month";break;case"month":l="tbody.e-datepicker-months tr td.e-current-month",u.parent=".e-datepicker-months",u.child=".e-current-month";break;case"year":l="tbody.e-datepicker-years tr td.e-current-year",u.parent=".e-datepicker-years",u.child=".e-current-year";break;case"yearall":l="tbody.e-datepicker-allyears tr td.e-current-allyear",u.parent=".e-datepicker-allyears",u.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(l+":first");switch(this,i){case 36:return this.sfCalendar.find(l+":first");case 35:return this.sfCalendar.find(l+":last");case 38:if(o&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(l+":nth-child("+t.col+"):last");t.row-=1}if(a=this._getCell(t,u),a.length<=0){if(null!==(a=this._findVisible(t,u,"up")))return a;this._processNextPrevDate(!0),a=this.sfCalendar.find(l+":nth-child("+t.col+"):last")}return a;case 37:if(o)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(l+":last");t={row:t.row-1,col:n}}if(a=this._getCell(t,u),a.length<=0){if(null!==(a=this._findVisible(t,u,"left")))return a;this._processNextPrevDate(!0),a=this.sfCalendar.find(l+":last")}return a;case 39:if(o)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<n)t.col+=1;else{if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(l+":first");t={row:t.row+1,col:1}}if(a=this._getCell(t,u),a.length<=0){if(null!==(a=this._findVisible(t,u,"right")))return a;this._processNextPrevDate(!1),a=this.sfCalendar.find(l+":first")}return a;case 40:if(!o){if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(l+":nth-child("+t.col+"):first");if(t.row+=1,a=this._getCell(t,u),a.length<=0){if(null!==(a=this._findVisible(t,u,"down")))return a;this._processNextPrevDate(!1),a=this.sfCalendar.find(l+":nth-child("+t.col+"):first")}return a}case 13:d=e("table",this.sfCalendar).get(0).className,h=this._getCell(t,u),c=e(h)[0],"e-dp-viewmonths"==d&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(c.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewyears"==d&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==d&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(c.innerHTML))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewdays"==d?(this._backwardNavHandler(h),this._onSetCancelDateHandler({type:null,target:h})):this._backwardNavHandler(h)}return this._getCell(t,u)},_findVisible:function(e,t,s){var n=e.col,r=e.row,o=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+r+") td:nth-child("+n+")"),nextElement.length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?n++:n--:"down"==s?r++:r--,r<=0||r>this.sfCalendar.find("tbody"+t.parent+" tr").length||(n>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+r+") td").length&&(r++,n=1),n<=0&&(r--,n=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+r+") td").length),r<=0||r>this.sfCalendar.find("tbody"+t.parent+" tr").length))return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(o))return e.col=n,e.row=r,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){var s,n;if(t.isNullOrUndefined(this.sfCalendar)&&this._renderPopup(),this._isOpen)return!1;if(s=this,this._popupOpen=!0,n=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),s._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){s.model&&!s.model.displayInline&&e(document).on("mousedown",e.proxy(s._onDocumentClick,s))}),this.element.val()&&!this._compareDate(new Date(this.element.val()),n)&&this._updateInputVal(),this._refreshLevel(n),this._trigger("open",{prevDate:n,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox&&this.wrapper.addClass("e-active")}},hide:function(i){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var s=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&i!=n&&"click"!=i.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){s._isOpen=!1,e(document).off("mousedown",e.proxy(s._onDocumentClick,s)),s._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),
this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar&&this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar&&this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireCalendarEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(e(".e-next",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this._on(e(".e-prev",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))),this.model.showFooter&&this._on(e(".e-footer",this.sfCalendar),"click",this._setCurrDate),this.sfCalendar&&this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",e.proxy(this._touchCalendar,this))},_wireEvents:function(){this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showDatePopUp,this)))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",e.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_onFocusOut:function(i){var s,n,r;this._isFocused=!1,s=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),i),this.wrapper.removeClass("e-focus"),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(s),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this.element.off("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),n=this.element.val(),r={prevDate:this._prevDate,value:n},this._specificFormat()?this._prevDate!=n&&this._setDateValue(n,!0):this._setDateValue(n),this.model.value||this._clearSelected(),this._trigger("focusOut",r),this._checkErrorClass()},_onFocusIn:function(t){this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.wrapper.addClass("e-valid"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(t),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){if(this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel){var t=this._stringToObject(this.element.val());t=this._validateYearValue(t),t&&(this._compareDate(e,t)||this._refreshPopup())}},_validateOnFocusOut:function(e,i){var s,n,r=null!=this._preValue?this._calendarDate:this._preValue,o=this._formatter(r,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=r:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),s=!1,n=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(this.isValidState=!1,n=!0,this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),n&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(o),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(e){if(13===e.keyCode){var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(t),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this._checkErrorClass()}},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(s=!1,this.isValidState=!1)}return s},_triggerChangeEvent:function(e){var t,i,s=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),i={prevDate:this._prevDate,value:s,isInteraction:!!e},t=this._specificFormat()&&e!=n&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=n&&"blur"==e.type?this.model.value:this._parseDate(s),t=this._validateYearValue(t),this._validateDate(t)||(t=null),this._compareDate(this._preValue,t)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(i.value=this.element.val(),this._trigger("_change",i)):(this._preValue=this.model.value=t,i.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox&&this._hiddenInput.attr("value",s),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),i.value=s,this._trigger("_change",i),i.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",i),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown&&this._trigger("dt_drilldown",e))},_onDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datewidget").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(){this.sfCalendar&&this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&(e(t.target).hasClass("e-disable")||e(t.target).hasClass("e-hidedate")))return!1;t&&t.type&&t.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(t),this._triggerChangeEvent(t),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t),t&&e(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DatePicker.Locale=t.DatePicker.Locale||{},t.DatePicker.Locale.default=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.datetimepicker.min",["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],e):e()}(function(){!function(e,t,s){t.widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},allowEdit:!0,enabled:!0,value:"",name:null,minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null},dataTypes:{allowEdit:"boolean",cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",headerFormat:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(i){var s,n,r,o,l=!1;for(s in i)switch(s){case"allowEdit":this._changeEditable(i[s]);break;case"cssClass":this._changeSkin(i[s]);break;case"locale":this._localize(i[s]);break;case"readOnly":this._readOnly(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enableRTL":this._setRtl(i[s]);break;case"enabled":this._enabled(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"value":i[s]=this._setValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),l=!0;break;case"enableStrictMode":this.model.enableStrictMode=i[s],l=!0;break;case"minDateTime":r=this._stringToObject(i[s]),n=this._getFormat(r,this.timePicker.model.timeFormat),this._isValidDate(r)?(this.datePicker.option("minDate",r),this.timePicker.option("minTime",n),i[s]=r,this.model.minDateTime=r):i[s]=this.model[s],l=!0;break;case"maxDateTime":r=this._stringToObject(i[s]),o=this._getFormat(i[s],this.timePicker.model.timeFormat),this._isValidDate(r)?(this.datePicker.option("maxDate",r),this.timePicker.option("maxTime",o),i[s]=r,this.model.maxDateTime=r):i[s]=this.model[s],l=!0;break;case"height":this.wrapper.height(i[s]);break;case"width":this.wrapper.width(i[s]);break;case"dateTimeFormat":this.model.dateTimeFormat=i[s],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options[s]=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(i[s]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",i[s]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",i[s]);break;case"timePopupWidth":this._updateTimeHeight(),this.timePicker.option("popupWidth",i[s]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",i[s]);break;case"startLevel":this.datePicker.option("startLevel",i[s]);break;case"depthLevel":this.datePicker.option("depthLevel",i[s]);break;case"startDay":this.datePicker.option("startDay",i[s]),this.model.startDay=this.datePicker.model.startDay,i[s]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",i[s]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",i[s]);break;case"headerFormat":this.datePicker.option("headerFormat",i[s]);break;case"htmlAttributes":this._addAttr(i[s]);break;case"popupPosition":this.model.popupPosition=i[s],this._setListPosition();break;case"timeDrillDown":t.isNullOrUndefined(i[s].enabled)||(this.model.timeDrillDown.enabled=i[s].enabled,this._changeDesign()),t.isNullOrUndefined(i[s].interval)||(this.model.timeDrillDown.interval=i[s].interval,this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),t.isNullOrUndefined(i[s].showMeridian)||(this.model.timeDrillDown.showMeridian=i[s].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),t.isNullOrUndefined(i[s].showFooter)||(this.model.timeDrillDown.showFooter=i[s].showFooter,this._changeDesign())}l&&this._validateMinMax(),this._valueChange(!0),"value"==s&&(i[s]=this.model.value),this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove(),t.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),t.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup.remove()},_init:function(e){if(!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=s,this._validateMeridian(),this._checkAttribute(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._changeDesign(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){if(this.model.timeDrillDown.enabled){var t=this.model.timeDrillDown.showFooter?"block":"none";this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),e(".e-footer",this._sfTimeHour).css("display",t),e(".e-footer",this._sfTimeMins).css("display",t)}else this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_checkAttribute:function(){this.model.value=""===this.model.value?this.element[0].value:this.model.value,this._options.minDateTime||(this.model.minDateTime=this.element[0].min),this._options.maxDateTime||(this.model.maxDateTime=this.element[0].max),t.isNullOrUndefined(this._options.readOnly)&&(this.model.readOnly=this.element.is("[readonly]")),t.isNullOrUndefined(this._options.enabled)&&(this.model.enabled=!this.element.is("[disabled]"))},_setValidation:function(){var i,s,n,r;this.element.rules("add",this.model.validationRules),i=this.element.closest("form").data("validator"),i=i||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={};for(s in this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s])){i.settings.messages[name][s]=e.validator.messages[s];for(r in this.model.validationMessage)s==r&&(n=this.model.validationMessage[s])}else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s._enabled(!1):"readOnly"==n&&"readOnly"==e?s._readOnly(!0):"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],n)?s.element.attr(n,e):s.wrapper.attr(n,e)})},_validateMeridian:function(){var e=t.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),t.isNullOrUndefined(this._options)?this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM):t.isNullOrUndefined(this._options.timeDrillDown)?this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM):t.isNullOrUndefined(this._options.timeDrillDown.showMeridian)&&(this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){var i,s,n,r;this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value)?i=null:this.model.value instanceof Date?i=this.model.value:(s=t.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale),i=s||((s=this._checkJSONString(this.model.value))?s:null)),i&&(this.model.value=i),n=this.model.minDateTime=this._stringToObject(this.model.minDateTime),n&&this._isValidDate(n)||(this.model.minDateTime=this.defaults.minDateTime),(r=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime))&&this._isValidDate(r)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var t=new Date(e);if(isNaN(Date.parse(t))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(t.toJSON()===this.model.value||t.toGMTString()===this.model.value||t.toISOString()===this.model.value||t.toLocaleString()===this.model.value||t.toString()===this.model.value||t.toUTCString()===this.model.value)return t;if("string"==typeof e)return this._dateFromISO(e)}},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._renderDropdown(),this._checkProperties()},_renderWrapper:function(){if(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",value:this.model.value}),this.wrapper=t.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),!this._isSupport){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1;this.datetimeIcon=t.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=t.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this.wrapper.height(this.model.height),this.wrapper.width(this.model.width)},_renderDropdown:function(){var i,s,n,r,o,l=e("#"+this.element[0].id+"_popup").get(0);l&&e(l).remove(),this.popup=t.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),t.isTouchDevice()||this.popup.addClass("e-ntouch"),e("body").append(this.popup),this._renderControls(),i=t.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=t.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=t.buildTag("div.e-timecontainer").append(i,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=t.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),s=t.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),n=t.buildTag("div.e-dt-button e-dt-today e-btn e-select e-flat",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),r=t.buildTag("div.e-dt-button e-dt-now e-btn e-select e-flat",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),o=t.buildTag("div.e-dt-button e-dt-done e-btn e-select e-flat",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=t.buildTag("div.e-button-container").append(n,r,o).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(s,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(n,"click",this._todayClick),this._on(r,"click",this._nowClick),this._on(o,"click",this._doneClick)},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=t.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){var s,n,r,o,l,a,d;if(t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;o=6e4*this._interval,l=this.model.timeDrillDown.showMeridian?2:1,rowCount=this.model.timeDrillDown.showMeridian?6:4;var h=this.model.timeDrillDown.showMeridian?"hh":"HH:00",c=["AM","PM"],u=0,p="";for(s=this.timePicker._createObject("12:00:00 AM"),n=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM"),i=0;i<l;i++){for(this.model.timeDrillDown.showMeridian&&(p=c[i].toLowerCase(),a=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[c[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[c[i]][0],t.buildTag("div.e-header-"+p).attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-meridiantxt-"+p).text(a).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)),table=t.buildTag("table.e-dp-viewhours","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(table),tbody=t.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{}),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(n,s,!0);)r=this._localizeTime(s,h),d=t.buildTag("td.e-hour e-state-default",r),this.model.timeDrillDown.showMeridian&&d.addClass("e-hour-"+p),this._isIE8&&d.attr("unselectable","on"),tr.append(d),u++,u>=rowCount&&(u=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;table.append(tbody),this.model.timeDrillDown.showMeridian&&(s=this.timePicker._createObject("12:00:00 PM"),n=this.timePicker._createObject("11:59:59 PM"))}t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),e(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),
e(".e-hours-headertext",this._sfTimeHour).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",e.proxy(this._hourNavHandler,this)),this._on(e(".e-next",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-prev",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-footer",this._sfTimeHour),"click",this._todayBtn),e(".e-hours-headertext",this._sfTimeHour).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(i,s){return e.trim(t.format(this.timePicker._createObject(i),s,this.model.locale))},_renderMinsPopup:function(){var i,s,n,r,o,l,a;if(this._sfTimeMins=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),t.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),i=t.buildTag("table.e-dp-viewmins","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeMins.append(i),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),this._intervall<1)return!1;for(o=6e4*this._interval,s=this.timePicker._createObject("12:00:00 AM"),n=this.timePicker._createObject("11:59:59 PM"),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),l=0;this.timePicker._compareTime(n,s,!0);)r=this._localizeTime(s,"HH:00"),a=t.buildTag("td.e-mins e-state-default",r),this._isIE8&&a.attr("unselectable","on"),tr.append(a),l++,l>=4&&(l=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;i.append(tbody),e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),e(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this.model.timeDrillDown.showMeridian||e(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(i.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this)),this._on(e(".e-next",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-prev",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-footer",this._sfTimeMins),"click",this._todayBtn),e(".e-minitues-headertext",this._sfTimeMins).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(i){var s,n;if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeHour).find("td").removeClass("e-active"),e(i.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),this.model.timeDrillDown.showMeridian?(n=e(i.target).hasClass("e-hour-am")?"AM":"PM",s=e(i.target).text()+":00 "+n):s=e(i.target).text(),this._generateMins(s);var r=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),o=e.trim(t.format(this.timePicker._createObject(r),"HH:mm",this.model.locale)),l=e.trim(t.format(this.timePicker._createObject(r),"HH:00",this.model.locale));index=(this.timePicker._parse(o)-this.timePicker._parse(l))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins)},_minsNavHandler:function(i){if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),e(i.target).addClass("e-active"),this.model.timeDrillDown.showMeridian?(value=e(i.target).text()+" "+t.format(this._datetimeValue,"tt","en-US"),value=this.timePicker._localizeTime(value)):value=e(i.target).text(),this.timePicker.option("value",value),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this.model.timeDrillDown.autoClose&&this._hideResult(i),this._updateInput()},_generateMins:function(i){var s,n,r,o,l,a,d,h=e("table",this._sfTimeMins);for(h.empty(),this.model.timeDrillDown.showMeridian?e(".e-mins-header",this._sfTimeMins).show():e(".e-mins-header",this._sfTimeMins).hide(),s=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm",e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),l=0,a=6e4*this.model.timeDrillDown.interval,n=this.timePicker._createObject(i),this._datetimeValue.setHours(n.getHours()),r=this.timePicker._createObject(n).getTime()+354e4,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr);this.timePicker._compareTime(r,n,!0);)l>=4&&(l=0,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr)),o=this._localizeTime(n,s),d=t.buildTag("td.e-mins e-state-default",o),this._isIE8&&d.attr("unselectable","on"),tr.append(d),l++,n=this.timePicker._createObject(n).getTime()+a;h.append(tbody),e(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(t.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(h.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=e(e(t.target).is("a")?t.target.parentNode:t.target),s=!!i.hasClass("e-prev");this._processNextPrev(s,this._sfTimeHour)},_prevNextMinsHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=e(e(t.target).is("a")?t.target.parentNode:t.target),s=!!i.hasClass("e-prev");this._processNextPrev(s,this._sfTimeMins)},_processNextPrev:function(i,s){var n,r;if(i&&s.find(".e-arrow-sans-left").hasClass("e-disable")||!i&&s.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(n=e("table",s),n.get(0).className){case"e-dp-viewhours":incVal=i?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+incVal),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":incVal=i?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+incVal),this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var r=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),o=e.trim(t.format(this.timePicker._createObject(r),"HH:mm",this.model.locale)),l=e.trim(t.format(this.timePicker._createObject(r),"HH:00",this.model.locale));index=(this.timePicker._parse(o)-this.timePicker._parse(l))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(i,s){var n;if(this.model.readOnly||!this.model.enabled)return!1;switch(this,i&&i.preventDefault(),i?e(i.currentTarget).get(0).className:s.find(".e-text>span").get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),n=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.datePicker=e.data("ejDatePicker"),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(e),e.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:this.model.timePopupWidth,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.timePicker=e.data("ejTimePicker"),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0,this.timePicker.popup.css({position:"static",display:"block"}),this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime},_updateTimeHeight:function(){var e=this.popup.find(".e-timecontainer .e-header").is(":visible")?this.datePicker.popup.height()-this.popup.find(".e-header").height():this.datePicker.popup.height();e=this.popup.hasClass("e-dt-responsive")?"98px":e,this.timePicker.option("popupHeight",e)},_bindOperations:function(){var e=this;this.datePicker.option("layoutChange",function(){e._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){e.isValidState=!1}),this.timePicker.option("outOfRange",function(){e.isValidState=!1}),this.datePicker.option("change",function(t){e._refreshTimes(t)}),this.datePicker.option("select",function(t){e._updateInput(t)}),this.datePicker.option("dt_drilldown",function(t){e.model.timeDrillDown.enabled&&(e._updateInput(t),e._switchToDrilDown(t))}),this.timePicker.option("select",function(){e._updateInput()})},_switchToDrilDown:function(){var i,s;this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour),i=new Date(this.model.value.toString()),this._datetimeValue=new Date(i.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),s=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(s)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(s){var n,r,o,l,a="hour"==s?this._interval:this.model.timeDrillDown.interval,d="hour"==s?this._sfTimeHour:this._sfTimeMins,h="hour"==s?"e-hide-hour e-disable":"e-hide-mins e-disable";if(d.find("tbody tr td.e-"+s).removeClass(h),d.find(".e-arrow-sans-left").removeClass("e-disable"),d.find(".e-arrow-sans-right").removeClass("e-disable"),start="hour"==s?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00"),this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==s&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(n=e.trim(t.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*a),indx="hour"==s?Math.floor(indx):Math.ceil(indx),i=0;i<indx;i++)o=d.find("tbody tr td.e-"+s),l=o[i],e(l).addClass(h);d.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==s&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(n=e.trim(t.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*a),indx=Math.floor(indx)+1,r=d.find("tbody tr td.e-"+s).length,i=indx;i<r;i++)o=d.find("tbody tr td.e-"+s),l=o[i],e(l).addClass(h);d.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(t,i,s){var n,r,o=s.find("tbody tr td.e-"+t);return e(o).each(function(e,t){if(t.innerHTML==i)return void(n=e)}),r=o[n],r||(r=o.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(r).hasClass("e-hide-"+t)||e(r).addClass("e-state-hover"),this._setActiveState(t,s),n},_setFocusByIndex:function(t,i,s){var n,r=s.find("tbody tr td.e-"+t);return n=r[i],n||(n=r.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(n).hasClass("e-hide-"+t)||e(n).addClass("e-state-hover"),this._setActiveState(t,s),i},_setActiveState:function(i,s){var n,r,o=s.find("tbody tr td.e-"+i),l=-1;switch(i){case"hour":this._compareDate(this.model.value,this._datetimeValue)&&(start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),r=e.trim(t.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale)),l=(this.timePicker._parse(r)-this.timePicker._parse(start))/(6e4*this._interval),l=Math.floor(l));break;case"mins":if(this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()){var a=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),r=e.trim(t.format(this.timePicker._createObject(a),"HH:mm",this.model.locale)),d=e.trim(t.format(this.timePicker._createObject(a),"HH:00",this.model.locale));l=(this.timePicker._parse(r)-this.timePicker._parse(d))/(6e4*this.model.timeDrillDown.interval),l=Math.ceil(l)}}(n=o[l])&&(s.find("table td").removeClass("e-active"),e(n).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=(new Date).setHours(0,0,0,0),i=this._getDate()||new Date,s=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),this._preVal=this._objectToString(this.model.value),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var t,i,s=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!s)return!1;this.isValidState=!0,this._compare(s,this._setEmptyTime(this.model.minDateTime))?(t=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("minTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("minTime",this._defaultMinVal()),this._compare(s,this._setEmptyTime(this.model.maxDateTime))?(i=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("maxTime",i),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("maxTime",this._defaultMaxVal()),this.timePicker._changeActiveEle()},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showhidePopup,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showhidePopup,this))),this[i](this.element,"blur",this._targetBlur),this[i](this.element,"focus",this._targetFocus),this[i](this.element,"keydown",this._keyDownOnInput)),this._change("allowEdit",t)},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0,this.wrapper.removeClass("e-valid")):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode(),this.wrapper.addClass("e-valid")):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t,i,s,n,r,o,l,a,d,h,c=this._extISORegex.exec(e)||this._basicISORegex.exec(e),u="",p="",m="";if(c){for(i=0;i<this._dates.length;i++)if(this._dates[i][1].exec(c[1])){u=this._dates[i][0];break}if(c[3])for(s=0;s<this._times.length;s++)if(this._times[s][1].exec(c[3])){p=(c[2]||" ")+this._times[s][0];break}for(c[4]&&this._zeroRegex.exec(c[4])&&(m="Z"),t=u+p+m,n=t.match(this._tokens),o=[],a=0;a<n.length;a++)d=n[a],l=this._checkLiteral(n[a]),h=this._numberRegex[l?n[a].toLowerCase():d.length]||new RegExp("^\\d{1,"+d.length+"}"),(r=e.match(h))&&(e.substr(0,e.indexOf(r))>=0&&!l&&(n[a].indexOf("M")>=0?o.push(parseInt(r[0])-1):o.push(parseInt(r[0]))),e=e.slice(e.indexOf(r[0])+r[0].length));return"Z"==c[4]?new Date(Date.UTC.apply(null,o)):new Date(o[0],o[1],o[2],o[3],o[4],o[5])}return new Date(e+"")},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_validateValue:function(e){var i=t.parseDate(e,this.model.dateTimeFormat);!i||i<this.model.minDateTime||i>this.model.maxDateTime?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e,t,i;if(e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,!e||!t||!i)return!1;t>i&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),e>i&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||e>i||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.model.name=this.model.name?this.model.name:this.element.attr("name")?this.element.attr("name"):this.element[0].id,this.element.attr("name",this.model.name),this._checkStrictMode(),this._checkErrorClass(),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),t.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode||this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime,this.isValidState=!0):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime,this.isValidState=!0):(this.model.value="",this.element.val(""),this.isValidState=!0))},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value}),this.wrapper.addClass("e-valid")},_targetBlur:function(){var e,i;this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult(),e=t.parseDate(this.element.val(),this.model.dateTimeFormat),e&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),i=t.parseDate(this.element.val(),this.model.dateTimeFormat),null!=i||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value}),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:if(!this.model.timeDrillDown.enabled){this._valueChange();break}}},_addFocus:function(t){t.hasClass("e-focus")||(this._removeFocus(),t.addClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).on("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).on("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).on("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).on("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).on("keydown",e.proxy(this._buttonClick,this)))},_removeFocus:function(){var t=this._getFocusedElement();t.length>0&&(t.removeClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).off("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).off("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).off("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).off("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).off("keydown",e.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();i.length>0?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),t={row:null,col:null},t.col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),t.col=t.col!=-1?t.col+1:this._sfTimeHour.find("tbody tr td.e-active").index()+1,t.row!=-1?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2)),this._sfTimeHour.find("table")[0].className,rowLength=this._sfTimeHour.find("tbody.e-timepicker-hours tr").length,colLength=this.model.timeDrillDown.showMeridian?6:4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(i)),e.ctrlKey||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_changeRowCol:function(t,i,s,n,r,o){var l,a,d,h,c={parent:null,child:null};switch(r){case"hours":l="tbody.e-timepicker-hours tr td.e-hour",c.parent=".e-timepicker-hours",c.child=".e-hour",hiddenClass=".e-hide-hour",a=this._sfTimeHour;break;case"mins":l="tbody.e-timepicker-mins tr td.e-mins",c.parent=".e-timepicker-mins",c.child=".e-mins",hiddenClass=".e-hide-mins",a=this._sfTimeMins,n=a.find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length}if(t.row<=0&&t.col<=0)return a.find(l+":not(.e-disable):first");switch(this,i){case 36:return a.find(l+":not(.e-disable):first");case 35:return a.find(l+":not(.e-disable):last");case 38:if(o)this._forwardNavHandler(null,a);else{if(!(t.row>1))return this._processNextPrev(!0,a),a.find(l+":nth-child("+t.col+"):last");t.row-=1}if(d=this._getCell(t,c,a).not(hiddenClass),d.length<=0){if(null!==(d=this._findVisible(t,c,"up",a)))return d;this._processNextPrev(!0,a),d=a.find(l+":nth-child("+t.col+"):last")}return d;case 37:if(o)return this._processNextPrev(!0,a),a.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrev(!0,a),a.find(l+":not(.e-disable):last");t={row:t.row-1,col:n},"mins"==r&&(t.col=n=a.find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length)}if(d=this._getCell(t,c,a).not(hiddenClass),d.length<=0){if(null!==(d=this._findVisible(t,c,"left",a)))return d;this._processNextPrev(!0,a),d=a.find(l+":not(.e-disable):last")}return d;case 39:if(o)return this._processNextPrev(!1,a),a.find("tbody tr td.e-state-hover");if(t.col<n)t.col+=1;else{if(!(t.row<s))return this._processNextPrev(!1,a),a.find(l+":not(.e-disable):first");t={row:t.row+1,col:1}}if(d=this._getCell(t,c,a).not(hiddenClass),d.length<=0){if(null!==(d=this._findVisible(t,c,"right",a)))return d;this._processNextPrev(!1,a),d=a.find(l+":not(.e-disable):first")}return d;case 40:if(!o){if(!(t.row<s))return this._processNextPrev(!1,a),a.find(l+":nth-child("+t.col+"):first");if(t.row+=1,d=this._getCell(t,c,a).not(hiddenClass),d.length<=0){if(null!==(d=this._findVisible(t,c,"down",a)))return d;this._processNextPrev(!1,a),d=a.find(l+":nth-child("+t.col+"):first")}return d}case 13:h=this._getCell(t,c,a),e(h)[0],args={type:null,target:h},"hours"==r&&this._hourNavHandler(args),"mins"==r&&this._minsNavHandler(args)}return this._getCell(t,c,a).not(hiddenClass)},_getCell:function(t,i,s){var n,r=t.row;return this.model.timeDrillDown.showMeridian&&t.row>2&&s.hasClass("e-time-hours")&&(r-=2),n=s.find("tbody"+i.parent+" tr:nth-child("+r+") td"+i.child+":nth-child("+t.col+")"),this.model.timeDrillDown.showMeridian&&n.length>0&&s.hasClass("e-time-hours")&&(n=e(t.row<=2?n[0]:n[1])),n},_findVisible:function(e,t,s,n){var r=e.col,o=e.row,l=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this._getCell({row:o,col:r},t,n),nextElement.length<=0)return null;if(nextElement.hasClass("e-disable")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?r++:r--:"down"==s?o++:o--,o<=0||o>n.find("tbody"+t.parent+" tr").length||(r>n.find("tbody"+t.parent+" tr:nth-child("+o+") td").length&&(o++,r=1),r<=0&&(o--,r=n.find("tbody"+t.parent+" tr:nth-child("+o+") td").length),o<=0||o>n.find("tbody"+t.parent+" tr").length))return null
}else if(nextElement.hasClass(l))return e.col=r,e.row=o,nextElement=this._getCell(e,t,n)}},_keyDownOnMinutes:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),t={row:null,col:null},t.col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=t.col!=-1?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=t.row!=-1?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1,this._sfTimeMins.find("table")[0].className,rowLength=this._sfTimeMins.find("tbody.e-timepicker-mins tr").length,colLength=4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(i)),e.ctrlKey||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e){var i,n;if(this._stopRefresh)return void(this._stopRefresh=!1);i=this.element.val(),""==i?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!0):(n=e!=s&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:t.parseDate(i,this.model.dateTimeFormat,this.model.locale),n?(this.model.value=n,this.isValidState=!0,this._refreshPopup(),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1))},_refreshPopup:function(){if(this.isValidState&&this.isPopupOpen){var e=this._setEmptyTime(this.model.value),t=this._setEmptyDate(this.model.value),i=this._getDate(),s=this._getTime();i&&this._compare(i,e)||this.datePicker.option("value",e),s&&this._compare(s,t)||this.timePicker.option("value",t)}},_buttonClick:function(e){if(13==e.keyCode){e.preventDefault();var t=this._getFocusedElement();t.hasClass("e-dt-today")?this._todayClick():t.hasClass("e-dt-now")?this._nowClick():t.hasClass("e-dt-done")&&this._doneClick()}},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){var e;if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var i=this.model.minDateTime,s=this.model.maxDateTime,n=this.datePicker.model.value,r=new Date;n=t.isNullOrUndefined(n)?new Date:n,e=new Date(n.getFullYear(),n.getMonth(),n.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()),e<i?this.timePicker.option("value",this.timePicker._localizeTime(i)):e>s&&this.timePicker.option("value",this.timePicker._localizeTime(s)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||t.isTouchDevice()||this.element.focus(),this._showhidePopup(),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var t,i,s,n,r,o=this.timePicker.ul.find("li");o.hasClass("e-hover")||(t=this.timePicker._setEmptyDate(new Date),i=t,this.timePicker.minTime&&!this._compareTime(this._createObject(t),this.timePicker.minTime,!0)&&(i=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(t),!0)&&(i=this.timePicker.maxTime),s=o.first().html(),n=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this.timePicker.model.interval),n=Math.round(n),activeItem=n==o.length?n:n+1,(activeItem<0||activeItem>o.length||isNaN(activeItem))&&(activeItem=1),r=e(this.timePicker.ul.find("li")[activeItem-1]),r.addClass("e-hover"),this._calcScrollTop())},_calcScrollTop:function(){var e,t,i=(this.timePicker.ul.outerHeight(),this.timePicker.ul.find("li").outerHeight());e=this.timePicker.ul.find("li.e-hover").index(),t=i*e-(this.timePicker.popupList.outerHeight()-i)/2,this.timePicker.scrollerObj.setModel({scrollTop:t})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.isPopupOpen||!this.model.enabled||this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this._setListPosition(),this._checkForResponsive();var i=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){i._on(e(document),"mousedown",i._OnDocumentClick),i.model.timeDrillDown.enabled&&i._addFocus(i._dateContainer.find(".e-datepicker")),i.timePicker.model.value||i._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(e(window),"resize",this._OnWindowResize),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(i){var s=this;return!(!this.isPopupOpen||this._trigger("beforeClose",{element:this.popup}))&&(this.isPopupOpen=!1,this._removeFocus(),this._popClose&&i&&"click"!=i.type?void(this.isPopupOpen=!0):(this.popup.slideUp(this.model.enableAnimation?100:0,function(){s.model&&(s.model.timeDrillDown.enabled&&(s._sfTimeHour.hide(),s._sfTimeMins.hide(),s._dateContainer.show()),t.isNullOrUndefined(s.model.value)||(s._datetimeValue=new Date(s.model.value.toString())))}),this._raiseEvent("close"),this._off(e(document),"mousedown",this._OnDocumentClick),this._off(e(window),"resize",this._OnWindowResize),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),void this.wrapper.removeClass("e-active")))},_setListPosition:function(){var i,s,n=this.wrapper,r=this._getOffset(n),o=e(document).scrollTop()+e(window).height()-(r.top+e(n).outerHeight()),l=r.top-e(document).scrollTop(),a=this.popup.outerHeight(),d=this.popup.outerWidth(),h=r.left,c=n.outerHeight(),u=(c-n.height())/2,p=this._getZindexPartial();this.model.popupPosition;s=this.model.popupPosition==t.PopupPosition.Bottom?(a<o||a>l?r.top+c+3:r.top-a-3)-u:(a>l?r.top+c+3:r.top-a-3)-u,i=e(document).scrollLeft()+e(window).width()-h,(this.model.enableRTL||d>i&&d<h+n.outerWidth())&&(h-=this.popup.outerWidth()-n.outerWidth()),this.popup.css({left:h+"px",top:s+"px","z-index":p})},_getOffset:function(e){return t.util.getOffset(e)},_OnDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datetime-wrap").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup))&&(t.preventDefault(),e(t.target).parents(".e-datepicker").length>0?this._addFocus(e(t.target).parents(".e-datepicker")):e(t.target).parents(".e-timecontainer").length>0?this._addFocus(e(t.target).parents(".e-timecontainer")):e(t.target).hasClass("e-dt-button")?this._addFocus(e(t.target)):e(t.target).parents(".e-time-hours").length>0?this._addFocus(e(t.target).parents(".e-time-hours")):e(t.target).parents(".e-time-minitues").length>0?this._addFocus(e(t.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(i){var s,n=t.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat),r=t.parseDate(this.element.val(),this.model.dateTimeFormat);+n==+r?this._prevDateTimeVal!=this.element.val()&&(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState},this._prevDateTimeVal=this.element.val(),this._trigger("_change",s)):(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!i,isValidState:this.isValidState},this._trigger("_change",s),s.value=""==e.trim(this.element.val())?null:this.element.val(),this._trigger("change",s),this._prevDateTimeVal=this.element.val())},_raiseEvent:function(e){return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:this._preVal,value:this.element.val()})},_getDateTimeFormat:function(){var e=t.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){var t=new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,i){if(e instanceof Date){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)}return e},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[\/]/g},_getDateObj:function(e,i){var s,n;if("string"!=typeof e)return e;if(s=this._checkFormat(i),null!=(n=t.parseDate(e,s,this.model.locale)))return n;if(""==e||null==e)return null;var r,o=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/.exec(e),l=new Date;return o&&(l=new Date,r=+o[2],l.setUTCFullYear(o[1],r-1,o[3]),l.setUTCHours(o[4],o[5],o[6]),r!=l.getUTCMonth()+1&&l.setTime()),this._isValidDate(l)?l:void 0},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.datePicker.option(e,t),this.timePicker.option(e,t)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(s){var n,r;if(this.model.locale=s,this.model.dateTimeFormat=this.model.timeDisplayFormat="",n=["AM","PM"],this._getDateTimeFormat(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",s),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(i=0;i<2;i++)r=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[n[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[n[i]][0],e("span.e-hours-meridiantxt-"+n[i].toLowerCase(),this._sfTimeHour).text(r)},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){this.model.readOnly=e,e&&!this.model.allowEdit?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup.removeClass("e-corner")),this.datePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){this.model.showPopupButton=e,e?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){if(e(window).outerWidth()>200&&e(window).outerWidth()<=500)this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle());else if(this.popup.hasClass("e-dt-responsive")){this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth);var t=this.datePicker.popup.height()-this.popup.find(".e-header").height();this.timePicker.option("popupHeight",t),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()}},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this._hideResult(),this._change("enabled",!1),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this.model.allowEdit&&(this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showhidePopup,this))),this.popup.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DateTimePicker.Locale=t.DateTimePicker.Locale||{},t.DateTimePicker.Locale.default=t.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},t.PopupPosition={Bottom:"bottom",Top:"top"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.timepicker.min",["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min"],e):e()}(function(){!function(e,t,s){t.widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,open:null,close:null},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},show:function(){this.showDropdown||this._getInternalEvents||this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(e){var i,s;return e||(e=t.preferredCulture(this.model.locale).calendars.standard.patterns.t),i=this._validateTimeFormat(e),i&&(this.model.timeFormat=i,this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value?(this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value)):(this._setModelOption=!1,(s=this._localizeTime(this.element.val()))&&this._checkMinMax(s)&&(this.model.value=s,this.element.val(s)))),i},_getTimeFormat:function(){this.model.timeFormat=t.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt",this.seperator=this._getSeperator()},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(e)},_localize:function(e){var i=this._createObject(this.model.value,!0);this.model.locale=e,this._getTimeFormat(),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),i?(this.model.value=this._localizeTime(i),this.element.val(this.model.value)):(i=this._localizeTime(this.element.val()))&&this._checkMinMax(i)&&(this.model.value=i,this.element.val(i)),this._getAmPm()},_setLocalize:function(e){var e=t.preferredCulture(e);e&&(this.model.locale="en"==e.name?"en-US":e.name,t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=t.preferredCulture(this.model.locale).calendars.standard.patterns.t))},_updateInput:function(){if(!t.isNullOrUndefined(this._options)){var e=this._localizeTime(this._options.value);t.isNullOrUndefined(e)||"string"==typeof e&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=""==this.element.val(),this._checkErrorClass())}},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime),this._minTimeObj||(this.model.minTime=t.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale)),this._maxTimeObj=this._createObject(this.model.maxTime),this._maxTimeObj||(this.model.maxTime=t.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var e=(new Date).setHours(0,0,0,0),i=(new Date).setHours(23,59,59,59);!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=t.format(this._createObject(e),this.model.timeFormat,this.model.locale)),!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=t.format(this._createObject(i),this.model.timeFormat,this.model.locale)),this._createMinMaxObj()},_init:function(e){if(this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._initialize(),this._render(),this._wireEvents(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()}),this._updateInput(),this._updateTextbox(),null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){this._options!==s&&(this._options.value!==s||this.model.value)||this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(i,s){!t.isNullOrUndefined(s.minTime)&&e.trim(s.minTime)&&this._isValid(s.minTime)&&(this.model.minTime=s.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes()),!t.isNullOrUndefined(s.maxTime)&&e.trim(s.maxTime)&&this._isValid(s.maxTime)&&(this.model.maxTime=s.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes()),this._validateMinMax(),this._createMinMaxObj(),t.isNullOrUndefined(s.minTime)||(s.minTime=this.model.minTime),t.isNullOrUndefined(s.maxTime)||(s.maxTime=this.model.maxTime),this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime))),i!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(e){var i,s,n,r,o,l=!1,a=this.model.value;for(i in e)switch(i){case"timeFormat":n=this._createObject(this.model.value),this._preTimeformat=this.model.timeFormat,s=this._timeFormat(e[i]),e[i]=this.model.timeFormat,s&&(this.seperator=this._getSeperator()),r=this._createObject(this.model.value),l=+n!=+r;break;case"locale":n=this._createObject(this.model.value),this._localize(e[i]),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),r=this._createObject(this.model.value),l=+n!=+r;break;case"interval":this.model.interval=e[i];break;case"cssClass":this._changeSkin(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"enableRTL":this._setRtl(e[i]);break;case"height":this._setHeight(e[i]);break;case"width":this.wrapper.width(e[i]),this._setListWidth();break;case"value":t.isPlainObject(e[i])&&(e[i]=null),this.model.value=t.format(this._createObject(e[i],!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e[i],!0)&&(o=this._isValid(e[i])?this._localizeTime(e[i]):e[i],this.element.val(o)),e[i]=this.model.value,l=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[i];break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=e[i],null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=e[i],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initTimeValidator(),this._setTimeValidation());break;case"popupHeight":this.model.popupHeight=e[i],this._setListHeight();break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"enabled":e[i]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(e[i]);break;case"disableTimeRanges":this.model.disableTimeRanges=e[i],this._initStartEnd(),this.model.value=t.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val()),l=!0}t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)||(this._setMinMaxTime(a,e),l=!0),t.isNullOrUndefined(e.showPopupButton)?!this.model.showPopupButton||!s&&t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)&&t.isNullOrUndefined(e.locale)&&t.isNullOrUndefined(e.interval)&&t.isNullOrUndefined(e.disableTimeRanges)||this._reRenderDropdown():this._showButton(e[i]),l&&(this._raiseChangeEvent(a,!0),e.value=this.model.value),this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value")),this._cloneElement.attr("name")||this.element.removeAttr("name"),this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0],this.timeIcon=null,this._disabledItems=[],this.popupList=null,this.focused=!1,this.start=0,this.end=0,this.min=null,this.max=null,this.incomplete=!1,this.downPosition=0,this._setLocalize(this.model.locale),this._setMinMax(),this._getAmPm(),this.showDropdown=!1,this._activeItem=0,this.isValidState=!0,this._manualFocus=!1,this._isIE7=this._checkIE7(),this._initStartEnd(),t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._getInternalEvents=!1,this._dateTimeInternal=!1,this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper(),this._setDimentions(),this._renderTimeIcon(),this._validateTimes(),this._createMinMaxObj(),this._renderDropdown(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this._enableMask(),this._checkErrorClass(),this.element.attr({"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value}),(this.model.showPopupButton||!t.isNullOrUndefined(this.popupList))&&this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),t.isNullOrUndefined(this.model.value)?this.wrapper.addClass("e-valid"):this.wrapper.removeClass("e-valid")},_renderWrapper:function(){this.element.addClass("e-input").attr("tabindex","0"),this.wrapper=t.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container)},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s.disable():"readOnly"==n&&"readOnly"==e?s.model.readOnly=!0:"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_initTimeValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setTimeValidation:function(){var i,s,n,r;this.element.rules("add",this.model.validationRules),i=this.element.closest("form").data("validator"),i=i||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={};for(s in this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s])){i.settings.messages[name][s]=e.validator.messages[s];for(r in this.model.validationMessages)s==r&&(n=this.model.validationMessages[s])}else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_renderTimeIcon:function(){if(this.model.showPopupButton){this.timeIcon=t.buildTag("span.e-select").attr({role:"button","aria-label":"select"});var e=t.buildTag("span.e-icon e-clock").attr("role","presentation");this._isIE8&&(this.timeIcon.attr("unselectable","on"),e.attr("unselectable","on")),this.timeIcon.append(e),this.container.append(this.timeIcon).addClass("e-padding"),this._on(this.timeIcon,"mousedown",this._timeIconClick)}},_elementClick:function(){this.showDropdown||this._showResult()},_renderDropdown:function(){var i,s=e("#"+this.element[0].id+"_popup").get(0);if(s&&e(s).remove(),!this.model.showPopupButton||this.popupList)return!1
;this.popupList=t.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,"aria-activedescendant":""}),t.isTouchDevice()||this.popupList.addClass("e-ntouch"),this.popup=this.popupList,this.ul=t.buildTag("ul.e-ul"),this._isIE8&&this.ul.attr("unselectable","on"),i=t.buildTag("div").append(this.ul),e("body").append(this.popupList.append(i)),this._renderLiTags(),this._setListHeight(),this._setListWidth(),this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css("display","none"),this._listSize=this.ul.find("li").length},_renderLiTags:function(){var i,s,n,r,o,l,a,d;for(this._disabledItems=[],r=6e4*this.model.interval,o=!t.isNullOrUndefined(this.model.disableTimeRanges)&&this.model.disableTimeRanges.length>0,i=this._minTimeObj,s=this._maxTimeObj,l=0;this._compareTime(s,i,!0);)n=this._localizeTime(i),a=e(document.createElement("li")),a[0].appendChild(document.createTextNode(n)),this._isIE8&&a.attr("unselectable","on"),o&&(this._ensureTimeRange(n)?(a.addClass("e-disable"),this._disabledItems.push(l)):a.removeClass("e-disable")),this.ul[0].appendChild(a[0]),i=new Date(i).getTime()+r,l++;d=this.ul.find("li"),t.isTouchDevice()||(this._on(d,"mouseenter",e.proxy(this._OnMouseEnter,this)),this._on(d,"mouseleave",e.proxy(this._OnMouseLeave,this))),this._on(d,"click",e.proxy(this._OnMouseClick,this))},_ensureTimeRange:function(e){if(!t.isNullOrUndefined(this.model.disableTimeRanges)){var s=this._makeDateTimeObj(e);for(i=0;i<this.model.disableTimeRanges.length;i++)if(+s>=+this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime)&&+s<=+this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime))return!0}return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)this._startTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime),this._endTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime)},_makeDateTimeObj:function(e){var i;if("string"==typeof e){var s=t.preferredCulture(this.model.locale).calendar.patterns.d,n=t.format(new Date("1/1/2000"),s,this.model.locale),r=t.parseDate(n+" "+e,s+" "+this.model.timeFormat);if(!r){if(i=new Date(e),!isNaN(Date.parse(i))&&!t.isNullOrUndefined(e))return this._setEmptyDate(e);r=new Date("1/1/2000 "+e)}return r}return e instanceof Date?this._setEmptyDate(e):null},_reRenderDropdown:function(){this.ul.empty(),this._renderLiTags(),this._refreshScroller(),this._changeActiveEle()},_refreshScroller:function(){var t="none"==this.popupList.css("display");this.popupList.css("height","auto"),this.popupList.find(".e-content, .e-vscroll").removeAttr("style"),this.popupList.find(".e-vscroll div").removeAttr("style"),t&&this.popupList.css("display","block"),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this._isIE8&&(e("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),e("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on")),t&&this.popupList.css("display","none")},_setListWidth:function(){if(this.popupList){var e=this.model.popupWidth;e&&"auto"!=e?this.popupList.css({width:e}):this.popupList.css({width:this.wrapper.width()})}this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"}),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.popupList.css({width:this.wrapper.width()}),this._setListPosition(),this._refreshScroller()},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),n=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),r=s.top-e(document).scrollTop(),o=this.popupList.outerHeight(),l=this.popupList.outerWidth(),a=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<n||o>r?s.top+d+3:s.top-o-3)-h;t=e(document).scrollLeft()+e(window).width()-a,(this.model.enableRTL||l>t&&l<a+i.outerWidth())&&(a-=this.popupList.outerWidth()-i.outerWidth()),this.popupList.css({left:a+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.isValidState=!(this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)),this._setTime(this.model.value),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange"),this._changeActiveEle(),this._preVal=this.element.val()},_setTime:function(e){var t=this._localizeTime(e);this.element.val(t),this.model.value=t},_timeFromISO:function(e){var t,i,s,n,r,o,l,a,d,h,c=this._extISORegex.exec(e)||this._basicISORegex.exec(e),u="",p="",m="";if(c){for(i=0;i<this._dates.length;i++)if(this._dates[i][1].exec(c[1])){u=this._dates[i][0];break}if(c[3])for(s=0;s<this._times.length;s++)if(this._times[s][1].exec(c[3])){p=(c[2]||" ")+this._times[s][0];break}for(c[4]&&this._zeroRegex.exec(c[4])&&(m="Z"),t=u+p+m,n=t.match(this._tokens),o=[],a=0;a<n.length;a++)d=n[a],l=this._checkLiteral(n[a]),h=this._numberRegex[l?n[a].toLowerCase():d.length]||new RegExp("^\\d{1,"+d.length+"}"),(r=e.match(h))&&(e.substr(0,e.indexOf(r))>=0&&!l&&(n[a].indexOf("M")>=0?o.push(parseInt(r[0])-1):o.push(parseInt(r[0]))),e=e.slice(e.indexOf(r[0])+r[0].length));return"Z"==c[4]?new Date(Date.UTC.apply(null,o)):new Date(o[0],o[1],o[2],o[3],o[4],o[5])}return new Date(e+"")},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_setMask:function(){this.model.value=new Date,this._enableMask()},_validateTimes:function(){var e=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=e||"h:mm tt",this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM"),this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM"),this._isValid(this.model.value,!0)||(this.model.value=null),this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)),this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable()),this._addProperty(),this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(t){this.model.showPopupButton=t,t?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id}),"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"}),"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var t=new Date;t.setHours(0),this.ttAM=e.trim(this._localizeMeridian(t)),t.setHours(23),this.ttPM=e.trim(this._localizeMeridian(t))},_setDimentions:function(){this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this._setHeight(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(e){e&&this.wrapper.height(e),this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(t){var i=t.split(" "),s="";return 1==i.length||2==i.length?(e(i).each(function(t,i){s+=e.trim(i)+" "}),e.trim(s)):null},_getSeperator:function(){for(var e=this._getElePlace(),t=this.model.timeFormat.split(" ")[e.time],i=new RegExp("^[a-zA-Z0-9]+$"),s=0;s<t.length;s++)if(!i.test(t.charAt(s)))return t.charAt(s)},_checkInComplete:function(){var e=this._getCaretSelection(),t=this._getStartEnd(e),i="00",s=this._getSelectedValue(t),n=this._getCategory(t);e.end-e.start==this.element.val().length&&this._checkAll(),n&&"tt"!=n&&(this._findCategoryPosition(n),"__"==s?(("h"==n||"hh"==n)&&(i="12"),this._changeToDefault(i)):1!=n.length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))))},_checkAll:function(){for(var e,t=this._getElePlace(),i=this.model.timeFormat.split(" ")[t.time].split(this.seperator),s=0;s<i.length;s++)this._findCategoryPosition(i[s]),e=this._getSelectedValue({start:this.start,end:this.end}),1!=i[s].length&&1==e.length&&(e=this._changeWhole(e),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,e)))},_changeToDefault:function(e){var t,i;this.incomplete=!0,t=this.element[0].value,this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,e),i=this._checkExceedRange(this.target.value),!i||this._setTime(this.model[i]),this._setSelection(this.start,this.end),this._raiseChangeEvent(t)},_setSelection:function(e,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(e,t):i.createTextRange&&(i=i.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())},_getSelectedValue:function(e){return this.target.value.substring(e.start,e.end)},_getMinMax:function(e,t){"hh"==e||"h"==e?(this.min=1,this.max=11,t&&(this.max=12)):"HH"==e||"H"==e?(this.min=0,this.max=23):("mm"==e||"m"==e||"ss"==e||"s"==e)&&(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0,this.element.focus()},_targetFocus:function(t){this._clearRange(),t.preventDefault(),this.focused=!0,this.element.on("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false"),this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end)),this._manualFocus=!1,this._prevTimeVal=this.element.val(),this._raiseEvent("focusIn"),this.wrapper.addClass("e-valid")},_targetBlur:function(){this.focused=!1,this.element.off("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.wrapper.removeClass("e-focus"),this.model.enableStrictMode||this.target.value.indexOf("_")>-1&&this.element.val(""),!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0,t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")):this.isValidState=!0,this._ensureValue(),this._raiseChangeEvent(),this._checkErrorClass(),this._raiseEvent("focusOut"),this.model.enableStrictMode||this._checkInComplete(),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")},_clearRange:function(){var e=this.element[0];isNaN(e.selectionStart)||(e.selectionStart=0,e.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getCaretSelection:function(){var e,t,i,s,n,r=this.element[0],o=0,l=0;return isNaN(r.selectionStart)?(e=document.selection.createRange().getBookmark(),t=r.createTextRange(),t.moveToBookmark(e),i=r.createTextRange(),i.collapse(!0),i.setEndPoint("EndToStart",t),s=i.text.length,n=t.text.length,{start:s,end:s+n}):(o=r.selectionStart,l=r.selectionEnd,{start:Math.abs(o),end:Math.abs(l)})},_mouseDownOnInput:function(){this.focused||t.isTouchDevice()||this._focusElement(),this.downPosition=this._getCaretSelection(),e(document).on("mouseup",e.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(t){t.preventDefault(),e(document).off("mouseup",e.proxy(this._mouseUpOnInput,this));var i=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,i=this.downPosition),this.target.value!=this._getSelectedText()&&(i=this._getStartEnd(i),this._setSelection(i.start,i.end))},_getCategoryPosition:function(e){var t,i,s=0,n=0,r=this.target.value.split(" "),o=this._getElePlace(),l=this.seperator,a=!1,d=this.model.timeFormat.split(" ")[o.time].split(l),h=r[o.time].split(l);if(d.length>h.length)return{start:s,end:n,isValid:a};if("tt"==e)(r[o.tt]==this.ttAM||r[o.tt]==this.ttPM)&&(s=0==o.tt?0:r[o.time].length+1,n=s+r[o.tt].length,a=!0);else if(s=0==o.time?0:r[o.tt].length+1,(t=d.indexOf(e))!=-1){for(i=0;i<d.length&&(n=h[i].length+1,i!=t);i++)s+=n;n+=s-1,a=!0}return{start:s,end:n,isValid:a}},_getCategory:function(e){var t=this.model.timeFormat.split(" "),i=this.seperator,s=this._getElePlace();return e.isTT?t[s.tt]:t[s.time].split(i)[e.index]},_getStartEnd:function(e){for(var t,i=this.seperator,s=this.element.val(),n=s.split(" "),r=0,o=0,l=tt=null,a=0;a<n.length;a++)if(n[a]!=this.ttAM&&n[a]!=this.ttPM){var d=n[a].split(i),h=r,c=r+d[0].length;for(t=0;t<d.length;t++){if(o=d[t].length+r,e.start<=o){l=t,tt=!1,a=n.length;break}r+=d[t].length+1}}else{if(e.start<=r+n[a].length){o=n[a].length+r,l=0,tt=!0,a=n.length;break}r+=n[a].length+1}return null==l&&(r=h,o=c,l=0,tt=!1),{start:r,end:o,index:l,isTT:tt}},_modifyValue:function(e){var t,i,s,n;this._isValid(this.target.value)&&(this.model.enableStrictMode||this._checkInComplete(),t=this._getCaretSelection(),t.start==t.end?(s=this._getLeast(!0),n=this._getCategoryPosition(s),i=this._getStartEnd(n)):i=this._getStartEnd(t),this.start=i.start,this.end=i.end,this._changeValue(i,e))},_keyUpOnInput:function(e){e.preventDefault(),this._preVal!=this.element.val()&&(this._preVal=this.element.val())},_getNextCategory:function(t,i){var s,n,r=[],o=this.seperator,l=this.model.timeFormat.split(" ");return e(l).each(function(e,t){if("tt"==t)r.push(t);else{var i=t.split(o);r=i.concat(r)}}),(s=r.indexOf(t))!=-1?(n=i?0==s?r.length-1:s-1:s==r.length-1?0:s+1,r[n]):t},_getElePlace:function(){var e,t,i=this.model.timeFormat.split(" ");return"tt"==i[0]?(e=1,t=0):(e=0,t=1),{time:e,tt:t}},_movePosition:function(e,t){var i,s=this._getStartEnd(e),n=this._getCategory(s);n||(n=this._getLeast(t)),i=this._getNextCategory(n,t),s=this._getCategoryPosition(i),s.isValid&&this._setSelection(s.start,s.end)},_findActiveIndex:function(){var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(e){var t,i,s,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y;if(this.model.readOnly&&!this._readOnlyKeys(e)||(s=e.keyCode,this._getInternalEvents&&38!=s&&40!=s&&36!=s&&35!=s&&9!=s))return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&38!=s&&40!=s&&27!=s&&!this._readOnlyKeys(e))return!1;this.showDropdown&&(37==s||39==s)&&(e.keyCode=37==s?38:40)}switch(t=this._getCaretSelection(),y=this._getStartEnd(t),i=this._getCategory(y),e.keyCode){case 38:e.preventDefault(),this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),activeItem=this._getActiveItem(),activeItem.length&&this._selectTimeItem(activeItem)):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:e.preventDefault(),e.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:e.preventDefault(),t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:e.preventDefault(),t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:e.preventDefault(),this.showDropdown?(this._activeItem=0,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):(n=this._firstlastVal(!0),r=this._getCategoryPosition(n),r.isValid&&this._setSelection(r.start,r.end));break;case 35:e.preventDefault(),this.showDropdown?(this._activeItem=this._listSize+1,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),this._selectTimeItem(this._getActiveItem())):(o=this._firstlastVal(!1),l=this._getCategoryPosition(o),l.isValid&&this._setSelection(l.start,l.end));break;case 9:if(this._getInternalEvents)break;this._hideResult(),a=null,e.shiftKey&&t.start>0?a=!0:!e.shiftKey&&t.end<this.element.val().length&&(a=!1),null!=a&&(e.preventDefault(),this._checkInComplete(),this._movePosition(t,a));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:e.preventDefault(),this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;this.target.value!=this._getSelectedText()&&(e.preventDefault(),i&&"tt"!=i&&(this._findCategoryPosition(i),d=8==s&&t.start!=this.start,h=46==s&&t.end!=this.end,c=this.end-this.start,t.start==t.end&&1!=c||!d&&!h&&t.start==t.end?d?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):h&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end)):(u=this.start,p=this.end,this.element[0].value=this._replaceAt(this.target.value,u,p,"__"),m=p-u!=2?p+1:p,this._setSelection(u,m))))}g=this._getSelectedValue(y),f=e.keyCode?e.keyCode:e.charCode,e.keyCode>47&&e.keyCode<58?_=String.fromCharCode(f):e.keyCode>95&&e.keyCode<106&&(_=String.fromCharCode(f-48)),"tt"==i&&(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>64&&e.keyCode<91||e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)&&(e.preventDefault(),v=this._getCategoryPosition(i),this.start=v.start,this.end=v.end,this._changeAmPm(g),this._raiseChangeEvent()),this.target.value!=this._getSelectedText()||e.shiftKey||e.ctrlKey||e.altKey||(e.keyCode>64&&e.keyCode<91&&!this.model.enableStrictMode&&e.preventDefault(),(e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)&&(y=this._getStartEnd(t),this._setSelection(y.start,y.end))),!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106?"tt"!=i&&(this._getMinMax(i,!0),t.start==t.end?(this._findCategoryPosition(i),t.start==this.start?(b=_+g,this.element.val(this.model.minTime),y=this._getStartEnd(t),this._setSelection(y.start,y.end)):b=g+_,(b.length>2||!(Number(b)>=this.min&&this.max>=Number(b)))&&(this.model.enableStrictMode||e.preventDefault())):Number(_)>=this.min&&this.max>=Number(_)||this.model.enableStrictMode||e.preventDefault()):this._allowKeyCodes(e)||(this.model.enableStrictMode?e.stopPropagation():8==e.keyCode||46==e.keyCode?e.stopPropagation():e.preventDefault())},_getSelectedText:function(){if(window.getSelection){var t=e("#"+this.element[0].id).get(0);return t.value.substring(t.selectionStart,t.selectionEnd)}return document.selection.createRange().text},_allowKeyCodes:function(e){return!((!e.ctrlKey||65!=e.keyCode&&67!=e.keyCode&&90!=e.keyCode&&89!=e.keyCode)&&9!=e.keyCode&&116!=e.keyCode&&13!=e.keyCode)},_readOnlyKeys:function(e){return!(35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&!this._allowKeyCodes(e))},_firstlastVal:function(e){var t,i=this.model.timeFormat.split(" "),s=this.seperator;return e?"tt"!=i[0]?i[0].split(s)[0]:"tt":"tt"!=i[0]?"tt":i[1]?(t=i[1].split(s),t.length?t[t.length-1]:"tt"):"tt"},_mouseWheel:function(e){if(e.preventDefault(),this.model.readOnly)return!1;var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected(),this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var e=this._getActiveItem();e.length&&!e.hasClass("e-disable")&&e.addClass("e-active")},_disableItemSelectDown:function(t){return(null==t||t<0)&&(t=0),t<this._listSize?e.inArray(t,this._disabledItems)<0?t:this._disableItemSelectDown(t+1):this._listSize},_disableItemSelectUp:function(t){if(t-=1,(null==t||t<0)&&(t=0),t<this._listSize){if(e.inArray(t,this._disabledItems)<0)return t+1;if(t>0)return this._disableItemSelectUp(t)}return 0},_getActiveItem:function(){return e(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(e){var i,s=!1;if(e.button?s=2==e.button:e.which&&(s=3==e.which),!s){if(e.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup(),i=this.element.val().length,t.isTouchDevice()||this._setSelection(i,i)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){this._raiseEvent("beforeOpen"),this._refreshPopup(),this.focused||t.isTouchDevice()||this._focusElement(),this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var i=this,s=this._vissibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){e(document).on("mousedown",e.proxy(i._OnDocumentClick,i))}),this.scrollerObj.setModel({scrollTop:s}),this.showDropdown=!0,this._listSize=this.ul.find("li").length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this.wrapper.addClass("e-active")},_hideResult:function(){this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_vissibleAndCalculateTop:function(){this.popupList.css({display:"block"});var e=this._calcScrollTop();return this.popupList.css({display:"none"}),e},_calcScrollTop:function(){var e,t=(this.ul.outerHeight(),this.ul.find("li").outerHeight());return e=this.ul.find("li.e-active").index(),t*e-(this.popupList.outerHeight()-t)/2},_changeActiveEle:function(){if(!this.model.showPopupButton||!this.popupList)return!1;var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem)||this._ensureTimeRange(i))&&(this._activeItem=0),this._addListHover()},_OnDocumentClick:function(t){e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-timewidget").is(this.wrapper)?(e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList))&&t.preventDefault():this._hideResult()},_OnWindowResize:function(){this._refreshPopup()},_OnMouseEnter:function(t){var i=t.target;this.ul.find("li").removeClass("e-hover"),e(i).hasClass("e-disable")||e(i).addClass("e-hover")},_OnMouseLeave:function(){(!this._dateTimeInternal||this.model.value)&&this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(t){t.preventDefault(),e(t.target).hasClass("e-disable")||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=e(t.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),e(t.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(e(t.target))),this._showhidePopup())},_selectTimeItem:function(e){this._beforeChange(e),this._raiseChangeEvent()&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(e){"least"==e&&(e=this._getLeast(!0));var t=this._getCategoryPosition(e);this.start=t.start,this.end=t.end},_getLeast:function(t){var i=this.model.timeFormat.split(" "),s=this.seperator,n=null;return e(i).each(function(e,i){if("tt"!=i){var r=i.split(s);n=t?r[r.length-1]:r[0]}}),n},_changeValue:function(e,s){var n,r,o=(this.target.value,this._getCategory(e));if(!o)return!1;if(this._setSelection(this.start,this.end),n=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(n!=this.ttAM&&n!=this.ttPM){if(n=this._changeCurrentValue(n,o,s),1!=o.length&&(n=this._changeWhole(n)),this._findCategoryPosition(o),this.element.val(this._replaceAt(this.target.value,this.start,this.end,n)),this.end=this.start+n.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var l=this._createObject(this.target.value),a=l.getHours(),d=s?this._startTime:this._endTime,h=s?this._endTime:this._startTime;if(!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)(d[i].getHours()===a||+l>=+this._startTime[i]&&+l<=+this._endTime[i])&&(this.target.value=this._localizeTime(h[i]),this._setSelection(this.start,this.end),this._changeValue(e,s))}}else this._changeAmPm(n);else r=this._checkExceedRange(this.target.value),this._setTime(this.model[r]),this._findCategoryPosition(o),this._setSelection(this.start,this.end);this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(o),this._setSelection(this.start,this.end))},_checkMinMax:function(e){var t=this._checkExceedRange(e);return null==t&&(t=!1),!t},_checkExceedRange:function(e){if(e){if(this.model.minTime&&!this._compareTime(e,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,e,!0))return"maxTime"}return null},_changeWhole:function(e){return e>9?""+e:"0"+e},_changeAmPm:function(e){e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)),this._setSelection(this.start,this.end)},_changeMinute:function(e){var t,i=this._getExactFormat(["mm","m"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t=this.min,this._changeHour(e)):t+=1:t==this.min?(t=this.max,this._changeHour(e)):t-=1,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_changeHour:function(e){var t,i=this._getExactFormat(["hh","h","HH","H"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t+=1,this._changeMeridian()):t>this.max?t=this.min:t+=1:t==this.min?t=this.max+1:t>this.max?(t=this.max,this._changeMeridian()):t-=1,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_getExactFormat:function(e){for(var t=this.model.timeFormat,i=0;i<e.length;i++)if(t.indexOf(e[i])!=-1)return e[i];return null},_changeMeridian:function(){var e,t=this.model.timeFormat.indexOf("tt");t!=-1&&(this._findCategoryPosition("tt"),e=this.target.value.substring(this.start,this.end),e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)))},_changeCurrentValue:function(e,t,i){e=Number(e);var s=t,n=1,r=!0;return this._getMinMax(s),"hh"==s||"h"==s||"HH"==s||"H"==s?n=this.model.hourInterval:"mm"==s||"m"==s?n=this.model.minutesInterval:("ss"==s||"s"==s)&&(n=this.model.secondsInterval),n<=0?e:(i?(("hh"==s||"h"==s)&&e>this.max?e=this.min-1+n:e<this.max?e+=n:(r=!1,"hh"!=s&&"h"!=s?e=this.min-1+n:e+=n,this._changeAdjacent(s,i)),"hh"!=s&&"h"!=s||e!=this.max+1?e>this.max+1&&(e-=this.max+1,r&&this._changeAdjacent(s,i)):r&&this._changeAdjacent(s,i),"hh"!=s&&"h"!=s&&e==this.max+1&&(e=this.min,r&&this._changeAdjacent(s,i))):("hh"!=s&&"h"!=s&&e>this.min?e-=n:("hh"==s||"h"==s)&&e>this.min&&e<=this.max?e-=n:"hh"!=s&&"h"!=s||e!=this.min?(r=!1,e=this.max+1-n,this._changeAdjacent(s,i)):e=this.max+2-n,e<this.min&&(e+=this.max+1,r&&this._changeAdjacent(s,i))),e)},_changeAdjacent:function(e,t){"ss"==e||"s"==e?this._changeMinute(t):"mm"==e||"m"==e?this._changeHour(t):("hh"==e||"h"==e||"HH"==e||"H"==e)&&this._changeMeridian()},_valueChange:function(){this._raiseChangeEvent()},_beforeChange:function(e){return this._raiseEvent("beforeChange")||this.element.val(e.text()),!0},_raiseChangeEvent:function(e,t){return e=e===s?this.model.value:e,this._previousValue=e,current=this.target.value?this.target.value:null,e!=current&&(this.isValidState=!!(this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value),this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value!=this._previousValue&&(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0))},_raiseEvent:function(e,t){var i={value:this.model.value,prevTime:this._previousValue};return"change"==e&&(i.isInteraction=!t),this._trigger(e,i)},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),t=-1;if(null!=e.exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1)),t>=7&&t<8)return!0}return!1},_replaceAt:function(e,t,i,s){return e.substring(0,t)+s+e.substring(i)},_localizeTime:function(i){return i?e.trim(t.format(this._createObject(i),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(i){return e.trim(t.format(i,"tt",this.model.locale))},_compareTime:function(e,t,i){return i=!!i,
i?this._parse(e)>=this._parse(t):this._parse(e)>this._parse(t)},_isValid:function(e,t){return(e=this._createObject(e,t))&&"function"==typeof e.getTime&&isFinite(e.getTime())},_parse:function(e){return Date.parse(this._createObject(e))},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_createObject:function(e,i){var s,n,r=null;if("string"==typeof e){var o=this._setModelOption?this._preTimeformat:this.model.timeFormat,l=t.preferredCulture(this.model.locale).calendar.patterns.d,a=t.format(new Date("1/1/2000"),l,this.model.locale);r=t.parseDate(a+" "+e,l+" "+o,this.model.locale),(this._extISORegex.exec(e)||this._basicISORegex.exec(e))&&(this.model.value=r=this._timeFromISO(e)),this._setModelOption=!1,r||(s=new Date(e),r=isNaN(Date.parse(s))||t.isNullOrUndefined(e)?this._dateTimeInternal&&""!=e?new Date("1/1/2000 "+e):null:this._setEmptyDate(e))}else"number"==typeof e?r=new Date(e):e instanceof Date&&(r=this._setEmptyDate(e));return r&&!this._dateTimeInternal&&i&&(n=this._localizeTime(r),this._ensureTimeRange(n)&&(r=null)),r},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"mousedown",this._mouseDownOnInput),this._on(this.element,"keydown",this._keyDownOnInput),this._on(this.element,"keyup",this._keyUpOnInput)}})}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.dropdownlist.min",["./../common/ej.core.min","./../common/ej.globalize.min","./../common/ej.data.min","./../common/ej.scroller.min","./../common/ej.draggable.min"],e):e()}(function(){!function(t,i,s){i.widget("ejDropDownList","ej.DropDownList",{element:null,model:null,validTags:["select","input"],_addToPersist:["value","text","selectedIndex","selectedItemIndex","selectedItems","selectedIndices","popupWidth","popupHeight","itemValue"],_setFirst:!1,_rootCSS:"e-dropdownlist",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{cssClass:"",value:null,htmlAttributes:{},text:null,itemValue:"",itemsCount:0,dataSource:null,delimiterChar:",",query:null,fields:{id:null,text:null,value:null,category:null,groupBy:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,selected:null,tableName:null},locale:"en-US",watermarkText:null,height:"",width:"",popupHeight:"152px",popupWidth:"auto",maxPopupHeight:null,minPopupHeight:"20",maxPopupWidth:null,minPopupWidth:"0",targetID:null,template:null,headerTemplate:null,selectedItemIndex:-1,selectedIndex:-1,disableItemsByIndex:null,enableItemsByIndex:null,selectedItems:[],selectedIndices:[],cascadeTo:null,enablePopupResize:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",showRoundedCorner:!1,showPopupOnLoad:!1,enableRTL:!1,enabled:!0,filterType:"contains",sortOrder:"ascending",caseSensitiveSearch:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,enablePersistence:!1,enableFilterSearch:!1,enableIncrementalSearch:!0,readOnly:!1,enableAnimation:!1,multiSelectMode:"none",allowGrouping:!1,enableSorting:!1,validationRules:null,validationMessage:null,actionBegin:null,actionComplete:null,actionFailure:null,actionSuccess:null,create:null,popupHide:null,popupShown:null,beforePopupShown:null,beforePopupHide:null,popupResizeStart:null,popupResize:null,popupResizeStop:null,change:null,select:null,dataBound:null,search:null,checkChange:null,cascade:null,destroy:null},dataTypes:{cssClass:"string",itemsCount:"number",watermarkText:"string",template:"string",disableItemsByIndex:"string",enableItemsByIndex:"string",enableIncrementalSearch:"boolean",cascadeTo:"string",delimiterChar:"string",showRoundedCorner:"boolean",showPopupOnLoad:"boolean",enableRTL:"boolean",enablePersistence:"boolean",allowVirtualScrolling:"boolean",virtualScrollMode:"enum",enabled:"boolean",readOnly:"boolean",multiSelectMode:"enum",dataSource:"data",query:"data",fields:"data",selectedItems:"array",enableAnimation:"boolean",allowGrouping:"boolean",enableSorting:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",locale:"string"},observables:["value","selectedItemIndex","selectedIndex"],value:i.util.valueFunction("value"),selectedItemIndex:i.util.valueFunction("selectedItemIndex"),selectedIndex:i.util.valueFunction("selectedIndex"),enable:function(){this._visibleInput.hasClass("e-disable")&&(this.target.disabled=!1,this.model.enabled=!0,this._visibleInput.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable"),this.popupListWrapper.removeClass("e-disable"),this._isIE8&&this.drpbtnspan.removeClass("e-disable"),this.container.on("mousedown",t.proxy(this._OnDropdownClick,this)),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable"),this.wrapper.attr("tabindex","0")),this._wireEvents()},disable:function(){this._visibleInput.hasClass("e-disable")||(this.target.disabled=!0,this.model.enabled=!1,this._visibleInput.addClass("e-disable"),this.popupListWrapper.addClass("e-disable"),this.dropdownbutton.addClass("e-disable"),this._isIE8&&this.drpbtnspan.addClass("e-disable"),"visualmode"==this.model.multiSelectMode&&this._ulBox.addClass("e-disable"),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this)),this._unwireEvents(),this.wrapper.removeAttr("tabindex"),this._isPopupShown()&&this._hideResult())},getValue:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode&&this.mapFld&&this.mapFld._text&&this._activeItem>=0?this._getField(this.popupListItems[this._activeItem],this.mapFld._text):this._visibleInput.val()},_setValue:function(e){i.isNullOrUndefined(e)||(this._raiseEvents=!1,i.isNullOrUndefined(this.model.text)||this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByValue(e))},_setText:function(e){e&&(this._raiseEvents=!1,this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByText(e))},_setItemValue:function(e){this.model.itemValue=e},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.text(e)},hidePopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._hideResult()},showPopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._showResult()},clearText:function(){this._clearTextboxValue(),this._isWatermark||this._setWatermark()},addItem:function(e){var i,s,n,r,o,l;if(!this.model.enabled||!e||(this._mapFields(),i=t.isArray(e)?e:[e],i.length<1))return!1;for(s=this.mapFld,n={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null,_category:null},n._id=i[0][s._id]?s._id:"id",n._imageUrl=i[0][s._imageUrl]?s._imageUrl:"imageUrl",n._imageAttributes=i[0][s._imageAttributes]?s._imageAttributes:"imageAttributes",n._spriteCSS=i[0][s._spriteCSS]?s._spriteCSS:"spriteCssClass",n._text=i[0][s._text]?s._text:"text",n._value=i[0][s._value]?s._value:"value",n._htmlAttributes=i[0][s._htmlAttributes]?s._htmlAttributes:"htmlAttributes",n._selected=i[0][s._selected]?s._selected:"selected",n._category=i[0][s._category]?s._category:"groupBy",this._generateLi(i,n),r=this.dummyUl,o=0;o<i.length;o++)this._listItem(i[o],"add");this.model.showCheckbox?this._appendCheckbox(r,!0):this._isSingleSelect()||this._multiItemSelection(r,!0),this._virtualUl.append(t(this.dummyUl).clone(!0)),this.ultag.append(this.dummyUl),this._isPopupShown()&&(l=this.scrollerObj?this.scrollerObj.scrollTop():0,this._refreshScroller(),this.scrollerObj&&this.scrollerObj.option("scrollTop",l))},_toArray:function(e,s){var n;return"function"==typeof e&&(e=i.util.getVal(e)),t.isArray(e)?n=e:"string"==typeof e?s&&("visualmode"==this.model.multiSelectMode||"delimiter"==this.model.multiSelectMode||this.model.showCheckbox)?(n=e.split(this.model.delimiterChar),0==n.length&&(n=[e])):s?n=[e]:(n=e.split(this.model.delimiterChar),0==n.length&&(n=[e])):n=[e],n},_trim:function(e){return"string"==typeof e?t.trim(e):e},selectItemByIndex:function(e){this._selectItemByIndex(e)},selectItemsByIndices:function(e){this._selectItemByIndex(e)},_selectItemByIndex:function(e){var i,s,n,r;for(this.listitems=this._getLi(),this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,i=this._toArray(e,!0),n=0;n<i.length;n++)if(null!=(s=parseInt(i[n]))&&s>=0){if(t.inArray(s,this._selectedIndices)==-1)for(r=0;r<this.listitems.length;r++)t(this.listitems[r]).hasClass("e-disable")||r==s&&(this.selectedIndexValue=r,this._activeItem=s,this._enterTextBoxValue())}else this.model.showCheckbox||"none"!=this.model.multiSelectMode||this._clearTextboxValue()},unselectItemsByIndices:function(e){this._unselectItemByIndex(e)},unselectItemByIndex:function(e){this._unselectItemByIndex(e)},_unselectItemByIndex:function(e){var i,s,n,r;for(this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,s=this._toArray(e,!0),this.listitems=this._getLi(),r=0;r<s.length;r++)for(n=parseInt(s[r]),i=0;i<this.listitems.length;i++)i==n&&(this.selectedIndexValue=i,this._activeItem=n,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue())},setSelectedValue:function(e){this.selectItemByValue(e)},selectItemByValue:function(e){var s,n,r,o;if(this.listitems=this._getLi(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(n=this._toArray(e,!0),r=0;r<n.length;r++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(o=this._getAttributeValue(this.listitems[s])||t(this.listitems[s]).text())&&(this._selectedValue=o,this._selectedValue==n[r])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByValue:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this._getAttributeValue(this.listitems[t])&&(this._selectedValue=this._getAttributeValue(this.listitems[t]),this._selectedValue==s[i])){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},setSelectedText:function(e){this.selectItemByText(e)},selectItemByText:function(e){var s,n,r;if(this.listitems=this._getLi(),this._mapFields(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(n=this._toArray(e,!0),r=0;r<n.length;r++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(this.selectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[s]:this._getField(this.popupListItems[s],this.mapFld._text),this.selectedTextValue==n[r])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByText:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),this._mapFields(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this.unselectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[t]:this._getField(this.popupListItems[t],this.mapFld._text),this.unselectedTextValue==s[i]){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},getSelectedValue:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode&&this.mapFld&&this.mapFld._value&&this._activeItem>=0?this._getField(this.popupListItems[this._activeItem],this.mapFld._value):this.element.val()},getSelectedItem:function(){var e,t=[];for(this.listitems=this._getLi(),e=0;e<this._selectedIndices.length;e++)t.push(this.listitems[this._selectedIndices[e]]);return t},getItemDataByValue:function(e){for(var t,i=this._toArray(e,!1),s=[],n=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",r=0;r<i.length;r++)for(t=0;t<this._rawList.length;t++)this._rawList[t][n]==i[r]&&s.push(this._rawList[t]);return s},getListData:function(){return this._rawList},getSelectedItemsID:function(){return this._selectedItemsID},disableItemsByIndices:function(e){this._disableItemByIndex(e)},disableItemByIndex:function(e){this._disableItemByIndex(e)},_disableItemByIndex:function(e){var i,s;if(!this.model.enabled)return!1;for(i=this._toArray(e,!1),s=0;s<i.length;s++)null==i[s]||isNaN(parseInt(i[s]))||i.length>0&&!(t.inArray(parseInt(i[s]),this._disabledItems)>-1)&&(index=t.inArray(i[s],this._disabledItems),this._setClass(this._getLi()[parseInt(i[s])],"e-disable"),this._disabledItems.push(parseInt(i[s])),this.model.disableItemsByIndex=String(this._disabledItems.join(",")))},enableItemsByIndices:function(e){this._enableItemByIndex(e)},enableItemByIndex:function(e){this._enableItemByIndex(e)},_enableItemByIndex:function(e){var i,s,n=this._toArray(e,!1);for(this.model.enableItemsByIndex=e,s=0;s<n.length;s++)n.length>0&&t.inArray(parseInt(n[s]),this._disabledItems)>-1&&!isNaN(parseInt(n[s]))&&(i=t.inArray(parseInt(n[s]),this._disabledItems),this._removeClass(this._getLi()[parseInt(n[s])],"e-disable"),this._disabledItems.splice(i,1));this.model.enableItemsByIndex=null,this.model.disableItemsByIndex=this._disabledItems.join(this.model.delimiterChar)},_validateDelimiter:function(e){return 1!=this._trim(e).length||/^[a-zA-Z0-9]+$/.test(e)?",":e},_removeText:function(e){var i=this.element[0].value.split(this.model.delimiterChar),s=this._visibleInput[0].value.split(this.model.delimiterChar),n=t.inArray(e,i);n>=0&&(i.splice(n,1),s.splice(n,1)),this.element[0].value=i.join(this.model.delimiterChar),this._visibleInput[0].value=s.join(this.model.delimiterChar)},_addText:function(e){var t,i,s,n;if(this._checkContains(this._hiddenValue))return!1;for(t=["element","_visibleInput"],s=0;s<t.length;s++)i="element"==t[s]?this._hiddenValue:e,this[t[s]][0].value&&""!=this[t[s]][0].value?(n=this[t[s]][0].value.split(this.model.delimiterChar),n.push(i),this[t[s]][0].value=n.join(this.model.delimiterChar)):this[t[s]][0].value=i},_checkContains:function(e){var t,i=this.element[0].value.split(this.model.delimiterChar);for(this.contains=!1,t=0;t<i.length;t++)if(i[t]===e){this.contains=!0;break}return this.contains},_updateLocalConstant:function(){this._localizedLabels=i.getLocalizedConstants("ej.DropDownList",this.model.locale)},_init:function(){var e=i.browserInfo();this._updateLocalConstant(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._textContent=this._isIE8?"innerText":"textContent",(this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))||this.element.is("select"))&&(this._isWatermark="placeholder"in document.createElement("input"),this._id=this.element[0].id,this._initialize(),this._render(),this._addAttr(this.model.htmlAttributes),this._enabled(this.model.enabled),this._initValue=!1,this._checkboxValue=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation()))},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,s,n,r,o;if(0!=this.element.closest("form").length){this.element.rules("add",this.model.validationRules),e=this.element.closest("form").data("validator"),e||(e=this.element.closest("form").validate()),s=this.element.attr("name"),e.settings.messages[s]={};for(n in this.model.validationRules)if(r=null,!i.isNullOrUndefined(this.model.validationRules[n])){if(i.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[n])){e.settings.messages[s][n]=t.validator.messages[n];for(o in this.model.validationMessage)n==o&&(r=this.model.validationMessage[n])}else r=this.model.validationRules.messages[n];e.settings.messages[s][n]=null!=r?r:t.validator.messages[n]}}},_setInitialPopup:function(e){this.model.enabled&&!this.model.readOnly&&(0==e?this._hideResult():this._showResult())},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupListWrapper.removeClass(this.model.cssClass).addClass(e)},_setRTL:function(e){this.model.enableRTL!=e&&(this.model.enableRTL=e,this._RightToLeft(),this._dropbtnRTL())},_changeHeight:function(e){this.wrapper.height(e),this._setListHeight()},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setModel:function(e){var s,n,r,o,l;for(s in e)switch(s){case"dataSource":this._isEqualDataSource(e[s])||this._checkModelDataBinding(e[s],this.model.query);break;case"query":this._checkModelDataBinding(this.model.dataSource,e[s]);break;case"fields":this.model.fields=t.extend(this.model.fields,e[s]),this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"itemsCount":this.model.itemsCount=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"template":this.model.template=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"value":n=i.util.getVal(e[s]),i.isNullOrUndefined(n)||""===n?this._clearTextboxValue():(this._setValue(i.util.getVal(e[s])),e[s]=this.model.value);break;case"delimiterChar":r=this.model.delimiterChar,e[s]=this._validateDelimiter(e[s]),this.model.delimiterChar=e[s],this.model.text&&(this.model.text=this.model.text.split(r).join(this.model.delimiterChar),this._visibleInput.val(this.model.text)),this.model.value&&(this.model.value=this.model.value.split(r).join(this.model.delimiterChar),this.element.val(this.model.value));break;case"text":i.isNullOrUndefined(e[s])||""===e[s]?this._clearTextboxValue():(this._setText(e[s]),e[s]=this.model.text);break;case"itemValue":this._setItemValue(e[s]);break;case"enableRTL":this._setRTL(e[s]);break;case"enabled":this._enabled(e[s]);break;case"height":this._changeHeight(e[s]);break;case"width":this._changeWidth(e[s]);break;case"popupHeight":this.model.popupHeight=e[s],this._setListHeight(e[s]);break;case"popupWidth":this.model.popupWidth=e[s],this._setListWidth();break;case"minPopupHeight":this.model.minPopupHeight=e[s],this._setListHeight(e[s]);break;case"minPopupWidth":this.model.minPopupWidth=e[s],this._setListWidth();break;case"maxPopupHeight":this.model.maxPopupHeight=e[s],this._setListHeight(e[s]);break;case"maxPopupWidth":this.model.maxPopupWidth=e[s],this._setListWidth();break;case"cssClass":this._changeSkin(e[s]);break;case"showCheckbox":this.model.showCheckbox=e[s],o=this.model.text,l=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this._checkboxHideShow(e[s]),this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):l&&l.length&&this._setText(l[0]),this._isPopupShown()&&this._setListPosition();break;case"checkAll":return this._setCheckAll(e[s]),!1;case"uncheckAll":return this._setUncheckAll(e[s]),!1;case"watermarkText":this._changeWatermark(e[s]);break;case"validationRules":0!=this.element.closest("form").length&&(null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation()));break;case"locale":this.model.locale=e[s],this._updateLocalConstant();break;case"validationMessage":0!=this.element.closest("form").length&&(this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation()));break;case"showRoundedCorner":this._roundedCorner(e[s]),this.model.showRoundedCorner=e[s];break;case"showPopupOnLoad":this._setInitialPopup(e[s]);break;case"targetID":this.model.targetID=e[s],this._showFullList();break;case"selectedItemIndex":case"selectedIndex":this._selectItemByIndex(e[s]),this.model.selectedItemIndex=this.model.selectedIndex=e[s];break;case"unselectItemByIndex":this._unselectItemByIndex(e[s]);break;case"disableItemsByIndex":this._disableItemByIndex(e[s]);break;case"enableItemsByIndex":this._enableItemByIndex(e[s]);break;case"selectedItems":case"selectedIndices":this._selectCheckedItem(e[s]),e[s]=this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;break;case"multiSelectMode":"visualmode"==this.model.multiSelectMode&&(this._swapUlandInput(!1),this._ulBox.remove(),this._ulBox=null),this.model.multiSelectMode=e[s],o=this.model.text,l=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):(this._setText(l[0]),this.wrapper.find("input[name="+this._name+"]").remove()),this._isPopupShown()&&this._setListPosition();break;case"allowGrouping":this._setGroupingAndSorting("allowGrouping",e[s]);break;case"enableSorting":this._setGroupingAndSorting("enableSorting",e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"enablePopupResize":this.model.enablePopupResize=e[s],e[s]?this._enablePopupResize():this.popupListWrapper.removeClass("e-resizable").find(".e-resizebar").remove()&&this._hideResult();break;case"enableFilterSearch":if(e[s]){this.model.enableFilterSearch=!0,this._enableSearch();break}this._removeSearch()}},_clearTextboxValue:function(){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._selectedIndices=[],this.model.selectedItems=[],this.model.selectedIndices=[],this.selectedIndex(null),this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.model.showCheckbox&&this._resetCheck(),0!=this.wrapper.find("ul.e-ul.e-boxes").length&&(this._ulBox.children("li").remove(),""===this._name?this.wrapper.find("input:hidden[id^='#']").remove():this.wrapper.find("input:hidden[id^='#'][name="+this._name+"]").remove(),t(this.element).attr("name",this._name))},_destroy:function(){this._destroyDropdown(),this._visibleInput.removeClass("e-input "),this._setAttr(this.element[0],{accesskey:this.wrapper.attr("accesskey"),type:"text"}),this._isWatermark&&this._visibleInput.removeAttr("placeholder"),this.element[0].value="",this.model.dataSource||(this.selectOptions?this.docbdy&&this.docbdy.append(this.selectOptions.show()).show()&&this.element.remove()&&this.selectOptions&&this.selectOptions.removeClass("e-dropdownlist e-js"):this.docbdy&&this.ultag.find("li").removeClass("e-active")&&this.docbdy.append(this.ultag.html()).show()),this._hideResult(),this.popupPanelWrapper.remove(),this.element.removeAttr("aria-expanded aria-autocomplete aria-haspopup aria-owns accesskey role").css({width:"",display:"block"}),this._unwireEvents()},_finalize:function(){""==this.value()&&""!==this._visibleInput[0].value&&this._updateValue(this.element[0].value),this.value()!==this.element.val()&&this._setValue(this.value()),this.model.text!=this._visibleInput.val()&&this._setText(this.model.text),this.selectedIndex(this.selectedIndex()!=-1?this.selectedIndex():this.selectedItemIndex()),this.selectedIndex()!=-1?this._selectItemByIndex(this.selectedIndex()):this._selectedIndices.length>0&&this._selectCheckedItem(this._selectedIndices),null!=this.model.disableItemsByIndex&&this._disableItemByIndex(this.model.disableItemsByIndex),null!=this.model.enableItemsByIndex&&this._enableItemByIndex(this.model.enableItemsByIndex)},_initialize:function(){this._selectedIndices=this.model.selectedIndices.length>0?this.model.selectedIndices:this.model.selectedItems,this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,this.model.selectedIndex=this.model.selectedIndex!=-1?this.model.selectedIndex:this.model.selectedItemIndex,this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown()),this._selectedItemsID=[],this.target=this.element[0],this._disabledItems=[],this._queryString=null,this.suggLen=0,this._itemId=null,this.checkedStatus=!1,this._incqueryString="",this._activeItem=null,this.ddWidth=0,this._initValue=!0,this._virtualCount=0,this._raiseEvents=!0},_renderSelectToDropdown:function(){var e,s,n,r;if(this.inputElement=i.buildTag("input.e-dropdownlist#"+this._id+"_input","",{},{type:"text","data-role":"none"}),this.inputElement.insertAfter(this.element),this.element.attr("name")&&(this.inputElement.attr("name",this.element.attr("name")),this.element.removeAttr("name")),this.selectOptions=this.element,this.selectOptions.attr("id",this._id),null==this.model.dataSource){for(this.optionDiv=i.buildTag("div#"+this._id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=i.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptionItems=this.element.children("option"),s=this.selectOptionItems.length,this.optionDummyUl=t(),e=0;e<s;e++)r=this.selectOptionItems[e],null!=(n=t(r).attr("label")?t(r).attr("label"):r.innerHTML)&&(this.optionLi=i.buildTag("li",n,{},{"data-value":r.value,unselectable:"on"}),this.optionDummyUl.push(this.optionLi[0]),t(r).attr("selected")&&this.model.showCheckbox&&(t.inArray(e,this._selectedIndices)==-1?(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices):i.isNullOrUndefined(this.selectedIndex())&&this.selectedIndex(e)));this.optionUl.append(this.optionDummyUl)}this.element.css("display","none"),this.element=this.inputElement},_render:function(){var e,t;this._renderDropdown(),this._setWatermark(),this._renderPopupPanelWrapper(),this._showFullList(),this._roundedCorner(this.model.showRoundedCorner),e=this.model.dataSource,i.DataManager&&e instanceof i.DataManager?e.dataSource.offline&&e.dataSource.json&&e.dataSource.json.length>0&&(t=this,t._finalize()):this._finalize(),i.DataManager&&this.model.dataSource instanceof i.DataManager||this._finalize(),this._setCheckAll(this.model.checkAll)},_isEqualDataSource:function(e){var t,i,s;if(!this.model.dataSource||!e||this.model.dataSource.length!==e.length)return!1;for(t=!0,i=0,s=this.model.dataSource.length;i<s;i++)if(this.model.dataSource[i]!==e[i]){t=!1;break}return t},_checkModelDataBinding:function(e,t){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this.model.selectedItems=this.model.selectedIndices=this._selectedIndices=[],this.model.selectedIndex=this.model.selectedItemIndex=-1,"visualmode"==this.model.multiSelectMode&&this._destroyBoxModel(),this.model.dataSource=e,this.model.query=t,this.ultag.empty(),this._showFullList()},_initDataSource:function(e){var t,s=this;i.DataManager&&e instanceof i.DataManager&&(s._addLoadingClass(),s._trigger("actionBegin",{requestFrom:"default"})||(t=e.executeQuery(this._getQuery()),t.done(function(e){s._trigger("actionSuccess",{e:e,requestFrom:"default"}),s._totalCount=e.count,s._listItem(e.result),s._removeLoadingClass(),s._renderPopupList(),s._finalize()}).fail(function(e){s.model.dataSource=null,s._addLoadingClass(),s._trigger("actionFailure",{e:e,requestFrom:"default"})}).always(function(e){s._trigger("actionComplete",{e:e,requestFrom:"default"})})))},_listItem:function(e,i){"add"==i?(this.popupListItems.push(e),this._rawList.push(e)):t.isArray(e)&&(this.popupListItems=e.slice(0),this._rawList=e.slice(0))},_getQuery:function(e){var t,s,n,r=this.model.fields,o=i.Query();if(!i.isNullOrUndefined(this.model.query)||this.model.template||e)this.model.query&&(o=this.model.query.clone());else{s=[];for(n in r)"tableName"!==n&&r[n]&&s.push(r[n]);s.length>0&&o.select(s)}return this.model.allowVirtualScrolling&&o.requiresCount(),this.model.itemsCount>0&&o.take(this.model.itemsCount),t=this.model.dataSource.dataSource,r&&(t&&t.url&&!t.url.match(r.tableName+"$")||t&&!t.url||!t)&&(i.isNullOrUndefined(r.tableName)||o.from(r.tableName)),o},_addLoadingClass:function(){this._isPopupShown()?this.popupListWrapper.addClass("e-load"):(this.dropdownbutton.addClass("e-load"),this.drpbtnspan.removeClass("e-icon e-arrow-sans-down")),this._readOnly=!0},_removeLoadingClass:function(){this.dropdownbutton.removeClass("e-load"),this.drpbtnspan.addClass("e-icon e-arrow-sans-down"),this._readOnly=!1,this.popupListWrapper.removeClass("e-load")},_renderDropdown:function(){if(this.wrapper=i.buildTag("span.e-ddl e-widget "+this.model.cssClass+"#"+this._id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.container=i.buildTag("span.e-in-wrap e-box #"+this._id+"_container"),this.element.removeAttr("accesskey"),null==this.model.value&&null!=this.element.attr("value")&&(this.model.value=this.element.attr("value")),this.element.attr("value","").val(""),this._setAttr(this.element[0],{type:"hidden",role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide(),this.drpbtnspan=i.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select",unselectable:"on"}),this.dropdownbutton=i.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button",unselectable:"on"}).append(this.drpbtnspan),this.container.insertAfter(this.element),this.container.append(this.element),this.container.append(this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.selectelement&&this.selectOptions.insertBefore(this.element),this._visibleInput=i.buildTag("input#"+this._id+"_hidden","",{}).insertAfter(this.element),this._visibleInput.addClass("e-input "),this._setAttr(this._visibleInput[0],{readonly:!0,tabindex:-1,"data-role":"none"}),!this._isWatermark){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan=i.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(e),this._hiddenSpan.css("display","none"),this._hiddenSpan.on("mousedown",t.proxy(this._OnDropdownClick,this))}this._checkNameAttr(),this._setDimentions(),this._RightToLeft(),this.ddWidth=this.dropdownbutton.outerWidth()>0?this.dropdownbutton.outerWidth():24,this.container.on("mousedown",t.proxy(this._OnDropdownClick,this))},_checkNameAttr:function(){this._name=i.isNullOrUndefined(this.element.attr("name"))?this._id:this.element.attr("name"),this.element.attr("name",this._name)},_addAttr:function(e){var s=this;t.map(e,function(e,n){var r=n.toLowerCase();"class"==r?s.wrapper.addClass(e):"disabled"==r&&"disabled"==e?s.disable():"readOnly"==r&&"readOnly"==e?s.model.readOnly=!0:"style"==r?s.wrapper.attr(n,e):i.isValidAttr(s._visibleInput[0],n)?t(s._visibleInput).attr(n,e):s.wrapper.attr(n,e)})},_renderBoxModel:function(){if("visualmode"!=this.model.multiSelectMode)return!1;this._ulBox=i.buildTag("ul.e-ul e-boxes"),this.container.prepend(this._ulBox),this._ulBox.css("min-height","30px"),this._ulBox.css("display","none"),this._on(this.container,"click",function(e){if(!this.model.enabled)return!1;var i=t(e.target);i.hasClass("e-options")&&(!e.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")),!e.ctrlKey&&i.hasClass("e-boxes")&&this._removeActive()})},_renderPopupPanelWrapper:function(){var e=t("#"+this.element[0].id+"_popup_wrapper").get(0);e&&t(e).remove(),this.popupPanelWrapper=i.buildTag("div#"+this._id+"_popup_wrapper"),t("body").append(this.popupPanelWrapper),this.popupListWrapper=i.buildTag("div.e-ddl-popup e-box e-widget  e-popup#"+this._id+"_popup_list_wrapper","",{display:"none",overflow:"hidden"}),this.popupList=i.buildTag("div#"+this._id+"_popup",{tabIndex:0}),this.popupListWrapper.addClass(this.model.cssClass),this.popup=this.popupList,this.popupScroller=i.buildTag("div"),this.ultag=i.buildTag("ul.e-ul","",{},{role:"listbox"}),
this.popupScroller.append(this.ultag),this.popupList.append(this.popupScroller),this.model.headerTemplate&&(this.headerTemplate=t("<div>").append(this.model.headerTemplate),this.popupListWrapper.append(this.headerTemplate)),this.popupListWrapper.append(this.popupList),this.popupPanelWrapper.append(this.popupListWrapper),this.ultag.on({mouseenter:t.proxy(this._OnMouseEnter,this),mouseleave:t.proxy(this._OnMouseLeave,this),click:t.proxy(this._OnMouseClick,this)},"li:not('.e-category')"),i.isTouchDevice()&&this.ultag.on({tap:t.proxy(this._OnMouseEnter,this)},"li:not('.e-category')"),t(window).on("resize",t.proxy(this._OnWindowResize,this))},_updateText:function(){this.model.text=""==this._visibleInput.val()?null:this.getValue()},_updateValue:function(e){this.value(""==e?null:this.getSelectedValue())},_setGroupingAndSorting:function(e,t){var i,s,n;if(this.model[e]=t,i=this.model.text,this._updateValue(""),this._selectedIndices=[],this.ultag.empty(),this._showFullList(),this.model.showCheckbox&&i)for(s=i.split(this.model.delimiterChar),n=0;n<s.length;n++)this.selectItemByText(s[n]);else this.selectItemByText(i)},_setSortingList:function(){var e,i,s=document.createElement("ul");if(t(s).append(this.itemsContainer.children()),this.model.allowGrouping||t(s).find(">.e-category").length>0)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<t(s).find(">.e-category").length;e++)i=t(s).find(">.e-category").eq(0).first().nextUntil(".e-category").get(),this._setSortList(s,i);else t(s).children(">.e-category").remove(),i=t(s).children("li").get(),this._setSortList(s,i);this.itemsContainer=t(s)},_setSortList:function(e,i){i.sort(function(e,i){var s=t(e).text().toUpperCase(),n=t(i).text().toUpperCase();return s<n?-1:s>n?1:0}),"descending"==this.model.sortOrder&&i.reverse(),(this.model.allowGrouping||t(e).find(">.e-category").length>0)&&(t(e).append(t("<li>").text(t(e).find(">.e-category").eq(0).text()).addClass("e-category")),t(e).find(">.e-category").eq(0).remove()),t.each(i,function(i,s){t(e).append(s)})},_renderPopupList:function(){this._doDataBind(),this._renderRemaining()},_renderRemaining:function(){var e=this;this._dropbtnRTL(),this.model.enableFilterSearch&&this._enableSearch(),this.model.enablePopupResize&&this._enablePopupResize(),this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode&&this._totalCount&&this._totalCount>0&&(this._totalHeight=29*this._totalCount,this._totalPages=this._totalCount/(29*this.model.itemsCount),this._loadedItemHeight=29*this._getLi().length,this._getLi().attr("page",0),this._virtualPages=[0],this.ultag.append(t("<span>").addClass("e-virtual").css({height:this._totalHeight-this._loadedItemHeight,display:"block"}))),this._virtualUl=this.ultag.clone(!0),this._setListWidth(),this._setListHeight(),this._setListPosition(),this.popupScroller.css({height:"",width:""}),this.popupList.ejScroller({height:this._getPopupHeight(),width:0,scrollerSize:20,scroll:function(t){e.model.allowVirtualScrolling&&e._onScroll(t)}}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.find("div.e-scrollbar div").attr("unselectable","on"),this.popupListWrapper.css({display:"none",visibility:"visible"}),this._isSingleSelect()||(this.model.showCheckbox?this._checkboxHideShow(this.model.showCheckbox):this._multiItemSelection(this._getLi())),this._setUncheckAll(this.model.uncheckAll),this._changeSkin(this.model.cssClass),this.model.showPopupOnLoad&&this._showResult()},_enableSearch:function(){this.model.enableFilterSearch&&(this.inputSearch||(this.inputSearch=i.buildTag("input#"+this._id+"_inputSearch.e-input","",{},{type:"text","data-role":"none"}),this.popupListWrapper.prepend(t("<span>").addClass("e-atc e-search").append(t("<span>").addClass("e-in-wrap ").append(this.inputSearch).append(t("<span>").addClass(" e-icon e-search")))),this._on(this.inputSearch,"keyup",this._OnSearchEnter)))},_removeSearch:function(){this.model.enableFilterSearch=!1,this.popupListWrapper.find(".e-atc.e-search").remove(),this._isPopupShown()&&this.hidePopup(),this.inputSearch=null},_OnSearchEnter:function(e){var s,n,r=this,o="mozilla"==i.browserInfo().name?e.charCode:e.keyCode;t.inArray(o,[38,40,13])!=-1&&this.ultag.find("li.e-nosuggestion").length<=0?13==o?this._OnKeyUp(e):this._OnKeyDown(e):(this._activeItem=-1,this._queryString=this.inputSearch.val(),""==this._queryString&&this._virtualUl?(n={searchString:this._queryString,searchQuery:null,items:this._rawList},this._trigger("search",n),this._resetList(),this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()):(this._mapFields(),s=this._addSearchQuery(i.Query(),!this._isPlainType(this._rawList)),n={searchString:this._queryString,items:this._rawList,searchQuery:s},this.popupListWrapper.find(".e-atc.e-search .e-search").addClass("e-cross-circle").removeClass("e-search"),this._on(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch),this._trigger("search",n)||r._filterSearch(s,n)))},_refreshSearch:function(){this._resetSearch(),this._refreshPopup()},_filterSearch:function(e,t){var s=!1,n=t.result?t.result:i.DataManager(this._rawList).executeLocal(e);0==n.length&&(s=!0,n.push(this._getLocalizedLabels("emptyResultText"))),this.popupListItems=n,this.ultag.empty(),this._isPlainType(this.popupListItems)?this._plainArrayTypeBinding(n):this._objectArrayTypeBinding(n,"search"),s&&1==this.ultag.find("li").length&&this.ultag.find("li").eq(0).addClass("e-nosuggestion"),this.model.showCheckbox&&!s&&this._appendCheckbox(this._getLi()),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1,this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()},_updateSelectedIndexByValue:function(e){var t,i,s;if(e&&this.model.enableFilterSearch){for(this._selectedIndices=this.model.selectedItems=this.model.selectedIndices=[],this._virtualList=this._virtualUl.children("li:not('.e-category')"),t=this._toArray(e),i=0;i<t.length;i++)for(s=0;s<this._virtualList.length;s++)if(t[i]==this._getIndexedValue(this._virtualList[s])){this._selectedIndices.push(s);break}this.model.selectedItems=this.model.selectedIndices=this._selectedIndices}},_getIndexedValue:function(e){return this._getAttributeValue(e)?this._getAttributeValue(e):e.innerText},_resetSearch:function(){this.inputSearch&&this.model&&this.model.enableFilterSearch&&""!=this.inputSearch.val()&&this._virtualUl&&(this.inputSearch.val(""),this._resetList())},_resetList:function(){1==this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").length&&(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").addClass("e-search").removeClass("e-cross-circle"),this._off(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch)),this._listItem(this._rawList),this.ultag.empty().append(this._virtualUl.children().clone(!0)),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1},_addSearchQuery:function(e,t){var i,s="";return t&&(i=this.model.fields,s=i&&i.text?i.text:"text"),this._queryString&&e.where(s,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch),this.model.itemsCount>0&&e.take(this.model.itemsCount),e},_targetElementBinding:function(){var e,i,s,n,r,o=this.element.parents().last();if(this.docbdy=this.model.targetID?o.find("#"+this.model.targetID):this.optionDiv?this.optionDiv:null,!this.docbdy)return!1;if(this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),(this.model.allowGrouping||this.itemsContainer.find(">.e-category").length>0)&&!this.model.enableSorting)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<this.itemsContainer.find(">.e-category").length;e++)i=this.itemsContainer.find(">.e-category").eq(e),i.replaceWith(t("<li>").text(i.text()).addClass("e-category"));else this.model.enableSorting&&this._setSortingList();for(this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this.items.children("img,div").addClass("e-align"),this._listItem([]),s=0;s<this.items.length;s++)n=t(this.items[s]).text(),r=this._getAttributeValue(this.items[s]),t(this.items[s]).attr("data-value")||t(this.items[s]).attr("data-value",r||n),this._listItem({text:n,value:r||n},"add");this.ultag.empty().append(this.itemsContainer.children()),this.ultag.children("li").attr("role","option").attr("unselectable","on"),this.docbdy.css({display:"none"}).children("ol,ul").remove()},_plainArrayTypeBinding:function(e){var s,n;if(this.dummyUl=t(),this.model.enableSorting&&(e.sort(),"descending"==this.model.sortOrder&&e.reverse()),e.length>0){for(s=0;s<e.length;s++)i.isNullOrUndefined(e[s])||(n=i.buildTag("li",e[s],{},{"data-value":e[s],unselectable:"on"}),this.dummyUl.push(n[0]));this.ultag.append(this.dummyUl),this._trigger("dataBound",{data:e})}},_mapFields:function(){this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category;var e=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null},this.mapFld._id=e&&e.id?e.id:"id",this.mapFld._imageUrl=e&&e.imageUrl?e.imageUrl:"imageUrl",this.mapFld._imageAttributes=e&&e.imageAttributes?e.imageAttributes:"imageAttributes",this.mapFld._spriteCSS=e&&e.spriteCssClass?e.spriteCssClass:"spriteCssClass",this.mapFld._text=e&&e.text?e.text:"text",this.mapFld._value=e&&e.value?e.value:"value",this.mapFld._htmlAttributes=e&&e.htmlAttributes?e.htmlAttributes:"htmlAttributes",this.mapFld._selected=e&&e.selected?e.selected:"selected",this.mapFld._category=e&&e.groupBy?e.groupBy:"groupBy"},_doDataBind:function(){var e=this.model.dataSource,t=this.popupListItems;!e||!t||!t.length||t.length<1?this._targetElementBinding():this._isPlainType(t)?this._plainArrayTypeBinding(t):this._objectArrayTypeBinding(t)},_isPlainType:function(e){return"object"!=typeof e[0]},_objectArrayTypeBinding:function(e,s){var n,r,o,l,a,d;if(this.dummyUl=t(),this._mapFields(),this.model.enableSorting&&(n=i.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),e=i.DataManager(e).executeLocal(n),this.popupListItems=e),this.model.allowGrouping||this.model.fields.groupBy)for(this.popupListWrapper.addClass("e-atc-popup"),r=this.mapFld._category,l=i.Query().group(r),this.model.enableSorting||l.queries.splice(0,1),o=i.DataManager(e).executeLocal(l),this._swapUnCategorized(o),"search"==s?this.popupListItems=[]:this._listItem([]),a=0;a<o.length;a++)for(o[a].key&&this.ultag.append(i.buildTag("li.e-category",o[a].key).attr("role","option")[0]),this._generateLi(o[a].items,this.mapFld),this.ultag.append(this.dummyUl),d=0;d<o[a].items.length;d++)"search"==s?this.popupListItems.push(o[a].items[d]):this._listItem(o[a].items[d],"add");else this._generateLi(e,this.mapFld),this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:e})},_onScroll:function(e){var s,n,r,o,l;e.scrollTop&&(s=e.scrollTop,n=this,n.model.allowVirtualScrolling&&"continuous"==n.model.virtualScrollMode?(l=i.Query().skip(n._rawList.length).take(n.model.itemsCount).clone(),s>=Math.round(t(n.popupList).find("ul,ol").height()-t(n.popupList).height())&&n._rawList.length<n._totalCount&&(n._addLoadingClass(),i.DataManager&&n.model.dataSource instanceof i.DataManager?(l=n._getQuery().skip(n._rawList.length).take(n.model.itemsCount).clone(),n._trigger("actionBegin",{requestFrom:"scroll"})||(o=n.model.dataSource.executeQuery(l),o.done(function(e){n.addItem(e.result),n._removeLoadingClass(),n._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){n.model.dataSource=null,n._removeLoadingClass(),n._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){n._trigger("actionComplete",{e:e,requestFrom:"scroll"})}))):(r=i.DataManager(n.model.dataSource).executeLocal(l),n.addItem(r),n._removeLoadingClass()))):n.model.allowVirtualScrolling&&"normal"==n.model.virtualScrollMode&&window.setTimeout(function(){0==n._virtualCount&&n._loadList()},300))},_loadList:function(){var s,n,r,o,l,a;this._virtualCount++;var d,h=this.scrollerObj.scrollTop(),c=this,u=0,p=null;if(this._currentPage=Math.round(h/(29*this.model.itemsCount)),t.inArray(this._currentPage,this._virtualPages.sort(function(e,t){return e-t}))!=-1)if(0==this._currentPage){if(t.inArray(this._currentPage+1,this._virtualPages)!=-1)return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else if(t.inArray(this._currentPage-1,this._virtualPages)!=-1){if(t.inArray(this._currentPage+1,this._virtualPages)!=-1)return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else this._currentPage=this._currentPage-1;for(d=!(t.inArray(this._currentPage-1,this._virtualPages)!=-1),this._addLoadingClass(),s=this._virtualPages.length-1;s>=0;s--)if(this._virtualPages[s]<this._currentPage){u=this._virtualPages[s],s+1==this._virtualPages.length||(p=this._virtualPages[s+1]);break}if(n=d?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,r=i.Query().range(n,this._currentPage*this.model.itemsCount+this.model.itemsCount),i.DataManager&&c.model.dataSource instanceof i.DataManager){if(a=d?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,r=this._getQuery().skip(a),d){for(s=0;s<r.queries.length;s++)if("onTake"==r.queries[s].fn){r.queries.splice(s,1);break}r.take(2*this.model.itemsCount)}c._trigger("actionBegin",{requestFrom:"scroll"})||(o=c.model.dataSource.executeQuery(r),o.done(function(e){c._appendVirtualList(e.result,u,c._currentPage,p,d),c._removeLoadingClass(),c._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){c._virtualCount--,c._removeLoadingClass(),c._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){c._trigger("actionComplete",{e:e,requestFrom:"scroll"})}))}else l=i.DataManager(c.model.dataSource).executeLocal(r),this._appendVirtualList(l,u,this._currentPage,p,d),c._removeLoadingClass()},_appendVirtualList:function(e,i,s,n,r){var o,l,a,d,h,c;if(this._virtualCount--,t.inArray(s,this._virtualPages.sort(function(e,t){return e-t}))!=-1)return!1;for(r&&t.inArray(s-1,this._virtualPages.sort())!=-1&&(e.splice(0,this.model.itemsCount),r=!1),o=this.model.itemsCount,l=t("<ul>"),a=r?(s-1)*o*29-29*(i*o+o):s*o*29-29*(i*o+o),0!=a&&l.append(t("<span>").addClass("e-virtual").css({display:"block",height:a})),this._mapFields(),this._generateLi(e,this.mapFld),t(this.dummyUl).attr("page",s),r&&t(this.dummyUl).slice(0,o).attr("page",s-1),this.model.showCheckbox&&this._appendCheckbox(this.dummyUl),l.append(this.dummyUl),d=29*(s*o+o),d=null!=n?n*o*29-d:this.ultag.height()-d,0!=d&&l.append(t("<span>").addClass("e-virtual").css({display:"block",height:d})),h=this.ultag.find("li[page="+i+"]").last(),h.next().remove(),l.children().insertAfter(h),this._virtualPages.push(s),r&&this._virtualPages.push(s-1),c=0;c<e.length;c++)this._listItem(e[c],"add");this._virtualUl=this.ultag.clone(!0),this._renderBoxModel()},_generateLi:function(e,s){var n,r,o,l;if(this.mapFld=s,this.dummyUl=[],!e||!e.length||e.length<1)return!1;for(n=0;n<e.length;n++){var a=this._getField(e[n],this.mapFld._id),d=this._getField(e[n],this.mapFld._imageUrl),h=this._getField(e[n],this.mapFld._imageAttributes),c=this._getField(e[n],this.mapFld._spriteCSS),u=this._getField(e[n],this.mapFld._text),p=this._getField(e[n],this.mapFld._value),m=this._getField(e[n],this.mapFld._htmlAttributes),g=this._getField(e[n],this.mapFld._selected),f=document.createElement("li");!i.isNullOrUndefined(p)&&p.toString().length>0?f.setAttribute("data-value","object"==typeof p?JSON.stringify(p):p):f.setAttribute("data-value",u),i.isNullOrUndefined(a)||""===a||f.setAttribute("id",a),i.isNullOrUndefined(m)||""==m||this._setAttr(f,m),this.model.template?t(f).append(this._getTemplatedString(e[n])):(i.isNullOrUndefined(d)||""==d||(r=document.createElement("img"),this._setClass(r,"e-align")._setAttr(r,{src:d,alt:u}),h&&""!=h&&this._setAttr(r,h),f.appendChild(r)),i.isNullOrUndefined(c)||""==c||(o=document.createElement("div"),this._setClass(o,"div.e-align "+c+" sprite-image"),f.appendChild(o)),g&&this._setClass(f,"chkselect"),i.isNullOrUndefined(u)&&(u=String(u)),l=document.createElement("span"),l.innerHTML=u,this._setClass(l,"e-ddltxt"),f.innerHTML+=l.outerHTML),this._setAttr(f,{role:"option",unselectable:"on"}),this.dummyUl.push(f)}},_setAttr:function(e,t){var i,s,n;if("string"==typeof t)i=t.replace(/['"]/g,"").split("="),2==i.length&&e.setAttribute(i[0],i[1]);else for(s in t)if("styles"!=s&&"style"!=s||"object"!=typeof t[s])e.setAttribute(s,t[s]);else for(n in t[s])e.style[n]=t[s][n];return this},_setClass:function(e,t){return e.className+=" "+t,this},_removeClass:function(e,t){var i=e.className.indexOf(t);return i>=0&&(e.className=0!=i&&" "===e.className[i-1]?e.className.replace(" "+t,""):e.className.replace(t,"")),this},_hasClass:function(e,t){return e.className.indexOf(t)>=0},_swapUnCategorized:function(e){t(e).each(function(t,i){if(!i.key){for(var s=t;s>0;s--)e[s]=e[s-1];return e[s]=i,!1}})},_getField:function(e,t){return i.pvt.getObject(t,e)},_getTemplatedString:function(e){for(var t,i,s=this.model.template,n=s.indexOf("${"),r=s.indexOf("}");n!=-1&&r!=-1;)t=s.substring(n,r+1),i=t.replace("${","").replace("}",""),s=s.replace(t,this._getField(e,i)),n=s.indexOf("${"),r=s.indexOf("}");return s},_setWatermark:function(){if(""==this.element.val()&&""==this._trim(this._visibleInput.val())){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.css("display","block").text(e),"visualmode"==this.model.multiSelectMode&&this._ulBox&&0==this._ulBox.find("li").length&&this._swapUlandInput(!1)}},_checkboxHideShow:function(e){if(e){this.listitems=this._getLi();0==this.listitems.find("input[type=checkbox]").length&&this._appendCheckbox(this.listitems)}else this._removeCheck(this.popupList);this.model.showCheckbox=e,this._virtualUl=this.ultag.clone(!0)},_setCheckAll:function(e){!this._isSingleSelect()&&e?this.checkAll():this.model.checkAll=!1},_setUncheckAll:function(e){!this._isSingleSelect()&&e?this.uncheckAll():this.model.uncheckAll=!1},checkAll:function(){var e,s,n=this._selectedIndices,r=!1;if(this._mapFields(),this.listitems=this._getLi(),this._isWatermark||this._hiddenSpan.css("display","none"),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?r=!0:this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0],s&&!this._isChecked(s)?(this._setClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!0}),s.firstChild.checked=!0,r=!1):r=!0):(r=!1,t(this.listitems[e]).addClass("e-active")),r||(this.checkedStatus=!0,this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._selectedItemsID.push(this._itemID),this._createListHidden(this._hiddenValue),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._hiddenValue)),this._isPopupShown()&&this._setListPosition()),this._addText(this._currentText),t.inArray(e,n)==-1&&(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",args),this._activeItem=e,this.activeItem=this._getActiveItem(),this._cascadeAction());this.model.itemValue=this._selectedValue,this.model.uncheckAll=!1,this.model.checkAll=!0,this._activeItem=-1,this._setWatermark()}},_createListHidden:function(e){var i=document.createElement("input");this._setAttr(i,{type:"hidden",name:this._name,value:e,id:"#"+e}),this.container.append(i),t(this.element).attr("name","hiddenEle")},_removeListHidden:function(e){var i=document.getElementById("#"+e);t(i).remove()},_getAttributeValue:function(e){return e?e.getAttribute("data-value")||e.getAttribute("value"):null},_selectCheckedItem:function(e){for(var t=0;t<e.length;t++)this._activeItem=e[t],this._enterTextBoxValue()},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){var e,s,n,r=!1;if(this.listitems=this._getLi(),this._mapFields(),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0],s&&this._isChecked(s)?(this._removeClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!1}),s.firstChild.checked=!1,r=!0):r=!1):(t(this.listitems[e]).removeClass("e-active"),r=!0):r=!1,r&&(this.checkedStatus=!1,this._activeItem=e,this.activeItem=this._getActiveItem(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),n=this._selectedIndices,t.inArray(e,n)>-1&&(this._selectedIndices.splice(t.inArray(e,n),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._removeSelectedItemsID(),this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",args),this._cascadeAction(),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition()));this.model.itemValue=this._selectedValue,this.model.checkAll=!1,this.model.uncheckAll=!0,this._setWatermark(),this._activeItem=-1}},_removeSelectedItemsID:function(){var e;e=this._selectedItemsID.indexOf(this._itemID),this._selectedItemsID.splice(e,1),this._itemID=""},_refreshScroller:function(){this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.popupList.find(".e-content, .e-vhandle").removeAttr("style"),this.popupList.find(".e-vhandle div").removeAttr("style"),this.popupList.children(".e-content").removeClass("e-content");var e=this._isPopupShown();this.popupListWrapper.css("display","block"),this.popupList.css({display:"block"}),this.scrollerObj.model.height=Math.ceil(this._getPopupHeight()),this.scrollerObj.refresh(),this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.scrollerObj.option("scrollTop",0),e||this.popupListWrapper.css("display","none")},_enablePopupResize:function(){this.model.enablePopupResize&&(this.popupListWrapper.addClass("e-resizable").append(i.buildTag("div.e-resizebar").append(i.buildTag("div.e-icon e-resize-handle"))).find(".e-resize-handle").addClass(this.model.enableRTL?"e-rtl-resize":""),this._resizePopup())},_resizePopup:function(){var e=this,i=!1;this.popupListWrapper.find("div.e-resize-handle").ejResizable({minHeight:e._validatePixelData(e.model.minPopupHeight),minWidth:e._validatePixelData(e.model.minPopupWidth),maxHeight:e._validatePixelData(e.model.maxPopupHeight),maxWidth:e._validatePixelData(e.model.maxPopupWidth),handle:"e-ddl-popup",resizeStart:function(t){if(!e.model.enabled)return!1;i||e._trigger("popupResizeStart",{event:t}),i=!0},resize:function(i){var s=t(i.element).parents("div.e-ddl-popup");e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),e._trigger("popupResize",{event:i})},resizeStop:function(t){i&&(e._refreshPopupOnResize(e.model.popupHeight,e.model.popupWidth),i&&e._trigger("popupResizeStop",{event:t}),i=!1)},helper:function(i){var s=t(i.element).parents("div.e-ddl-popup");return e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),t(e.popupListWrapper)}})},_refreshPopupOnResize:function(e,t){e&&(this.model.popupHeight=e),t&&(this.model.popupWidth=t),this.popupListWrapper.css({height:this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight)}),this._setListWidth(),this._refreshScroller()},_setListWidth:function(){var e=this.model.popupWidth;"auto"!=e?this.popupListWrapper.css({width:e}):this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}),this.popupListWrapper.css({"max-width":this._validatePixelData(this.model.maxPopupWidth)})},_setListHeight:function(){this.model.enablePopupResize&&this.model.enableFilterSearch&&this.model.minPopupHeight&&this.model.minPopupHeight.toString().indexOf("%")<0&&20==this._validatePixelData(this.model.minPopupHeight)&&(this.model.minPopupHeight="65"),this.model.enablePopupResize?this.popupListWrapper.css({"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight),height:this._validatePixelData(this.model.popupHeight)}):this.popupListWrapper.css({"max-height":this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight)})},_validatePixelData:function(e){return e&&!isNaN(e)?Number(e):e},_getPopupHeight:function(){var e,t=this.popupListWrapper.height();return this.model.enablePopupResize&&(t-=this.popupListWrapper.find(">div.e-resizebar").height()),this.model.headerTemplate&&this.headerTemplate&&(t-=this.headerTemplate.height()),this.model.enableFilterSearch&&this.inputSearch&&(e=this.inputSearch.parent(".e-in-wrap"),t-=parseInt(e.css("height"))+parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"))),t},_refreshPopup:function(){"auto"!=this.model.popupWidth||this._validatePixelData(this.model.minPopupWidth)?this._validatePixelData(this.model.minPopupWidth)&&this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}):this.popupListWrapper.css({"min-width":this.wrapper.width()}),this._refreshScroller(),this._setListPosition()},_setListPosition:function(){var e,i=this.wrapper,s=this._getOffset(i),n=t(document).scrollTop()+t(window).height()-(s.top+t(i).outerHeight()),r=s.top-t(document).scrollTop(),o=this.popupListWrapper.outerHeight(),l=this.popupListWrapper.outerWidth(),a=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<n||o>r?s.top+d+3:s.top-o-3)-h;e=t(document).scrollLeft()+t(window).width()-a,(this.model.enableRTL||l>e&&l<a+i.outerWidth())&&(a-=this.popupListWrapper.outerWidth()-i.outerWidth()),this.popupListWrapper.css({left:a+"px",top:u+"px","z-index":c})},_getOffset:function(e){return i.util.getOffset(e)},_getZindexPartial:function(){return i.util.getZindexPartial(this.element,this.popupListWrapper)},_showResult:function(){var e=this,s={text:this._visibleInput[0].value,value:this._selectedValue,refreshPopup:!0};this._trigger("beforePopupShown",s)||(s.refreshPopup&&this._refreshPopup(),t(this.popupListWrapper).slideDown(this.model.enableAnimation?200:1,function(){t(document).on("mousedown",t.proxy(e._OnDocumentClick,e)),e._on(i.getScrollableParents(e.wrapper),"scroll",e._hideResult)}),this.element[0].setAttribute("aria-expanded",!0),this._listSize=this._getLi().length,this.wrapper.addClass("e-popactive"),this._trigger("popupShown",{text:this._visibleInput[0].value,value:this._selectedValue}),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")}))},_OnWindowResize:function(){!i.isNullOrUndefined(this.model)&&this._isPopupShown()&&this._refreshPopup()},_hideResult:function(e){if(this.model&&this._isPopupShown()){if(!i.isNullOrUndefined(e)&&!i.isNullOrUndefined(this.inputSearch)&&t(this.inputSearch).is(":focus")&&"scroll"==e.type&&i.isTouchDevice())return!1;var s=this;if(this._trigger("beforePopupHide",{text:this._visibleInput[0].value,value:this._selectedValue}))return;t(this.popupListWrapper).slideUp(this.model.enableAnimation?100:0,function(){t(document).off("mousedown",t.proxy(s._OnDocumentClick,s))}),null!=this.element&&this.element.attr("aria-expanded",!1),this._off(i.getScrollableParents(this.wrapper),"scroll",this._hideResult),null!=this._visibleInput&&this.wrapper.removeClass("e-popactive"),this._trigger("popupHide",{text:this._visibleInput[0].value,value:this._selectedValue}),setTimeout(function(){s._resetSearch()},100),this._getLi().find(".e-ddl-anim").removeClass("e-ddl-anim")}},_isPopupShown:function(){return"block"==this.popupListWrapper.css("display")},_enterTextBoxValue:function(){var e,i,s=!0;if(this.removeID=!1,this.checkedStatus=!1,this._isWatermark||this._hiddenSpan.css("display","none"),this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],t(i).removeClass("e-check-inact"),this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},!this._initValue&&!this._onSearch&&this._raiseEvents&&this._trigger("select",e))return void this._setWatermark();(this._activeItem>=0||null!=this._activeItem)&&(this._isSingleSelect()||this._checkContains(this._selectedValue)?this._isSingleSelect()?(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.activeItem.addClass("e-active"),this._maintainHiddenValue(),this._visibleInput.val(this._currentText),this.element.val(this._hiddenValue),this.selectedItemIndex(this.selectedIndexValue),this.selectedIndex(this.selectedIndexValue),this._selectedIndices[0]=this.selectedIndexValue):s=!1:(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)||(this._removeClass(i,"e-ddl-anim"),this._setClass(i,"e-check-act e-ddl-anim"),this._setAttr(i,{"aria-checked":!0}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.addClass("e-active"),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._selectedValue)),this._isPopupShown()&&this._setListPosition()),this._maintainHiddenValue(),this._addText(this._currentText),this._createListHidden(this._hiddenValue),t.inArray(this.selectedIndexValue,this._selectedIndices)==-1&&(this._selectedIndices.push(this.selectedIndexValue),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices)),s&&(this.checkedStatus=!0,this._onValueChange(),this._cascadeAction(),this.selectelement&&t("#"+this._id).children().length>this.selectedIndexValue&&(t("#"+this._id).children()[this.selectedIndexValue].selected=!0))),this.model.uncheckAll=!1,this._setWatermark(),this._uiInteract=!1},_onValueChange:function(){this.model.itemValue=this._selectedValue,this._updateText(),this.value()==this.element.val()||null==this.value()&&""==this.element.val()||(this._updateSelectedIndexByValue(this.element.val()),this._updateValue(this.element.val()),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:this.selectedIndexValue,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||(this._trigger("change",args),this.model.showCheckbox&&this._trigger("checkChange",{isChecked:this.checkedStatus,
text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this._selectedValue,data:this.model})),this._uiInteract=!1)},_decode:function(e){return t("<span>").html(e).text()},_chooseSelectionType:function(){this.activeItem=this._getActiveItem(),this.selectedIndexValue=this._activeItem,this._mapFields(),null==this.model.dataSource||this._isPlainType(this.model.dataSource)?(this._currentText=this.activeItem.text(),this._getAttributeValue(this.activeItem[0])?this._selectedValue=this._getAttributeValue(this.activeItem[0]):null!=this._currentText?(this.activeItem[0].setAttribute("value",this._currentText),this._selectedValue=this._currentText):this._selectedValue="",this._itemID=t(this.activeItem).attr("id")):(this._currentText=this._decode(this._getField(this.popupListItems[this._activeItem],this.mapFld._text)),this._currentText=""===this._currentText||null==this._currentText?this.activeItem.text():this._currentText,this._selectedValue=this._getField(this.popupListItems[this._activeItem],this.mapFld._value),this._selectedValue=null!=this._selectedValue?this._selectedValue:this._currentText,this._itemID=this._getField(this.popupListItems[this._activeItem],this.mapFld._id)),i.isNullOrUndefined(this._itemID)||""==this._itemID||(this.model.showCheckbox?this.removeID?this._removeSelectedItemsID():this._selectedItemsID.push(this._itemID):(this._selectedItemsID=[],this.removeID||this._selectedItemsID.push(this._itemID))),this.selectedTextValue=this._currentText},_maintainHiddenValue:function(){this._hiddenValue=this._getAttributeValue(this.activeItem[0])||this._currentText},_removeTextBoxValue:function(){var e,i;if(this._uiInteract=!0,this.removeID=!0,this.checkedStatus=!0,this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],t(i).removeClass("e-ddl-anim").addClass("e-check-inact e-ddl-anim"),this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},!this._initValue&&!this._onSearch&&this._raiseEvents&&this._trigger("select",e))return void this._setWatermark();this._maintainHiddenValue(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),this.activeItem.removeClass("e-active"),this._isSingleSelect()||(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)&&(this._removeClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!1}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.removeClass("e-active"),t.inArray(this.selectedIndexValue,this._selectedIndices)>-1&&(this._selectedIndices.splice(t.inArray(this.selectedIndexValue,this._selectedIndices),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition())),this.checkedStatus=!1,this._onValueChange(),null==this.model.cascadeTo||this._isSingleSelect()||this._cascadeAction(),this.model.checkAll=!1,this._setWatermark()},_createBox:function(e,s){if(!this._checkContains(s)){"none"==this._ulBox.css("display")&&"none"!=this._visibleInput.css("display")&&this._swapUlandInput(!0);var n=i.buildTag("span.e-icon e-close","",{},{unselectable:"on"}),r=i.buildTag("li.e-options").text(e).attr("data-value",s).append(n);return this._on(n,"click",function(e){if(!this.model.enabled)return!1;this._deleteBox(t(e.target).parent())}),r}},_deleteBoxCheck:function(e){for(var i=this._ulBox.children("li"),s=0;s<i.length;s++)t(i[s]).attr("data-value")==e&&t(i[s]).remove()},_deleteLastBox:function(){var e=this._ulBox.children("li:not(.e-search-box)"),t=e.last();t.hasClass("e-active")?this._deleteBox(t):(this._removeActive(),t.addClass("e-active"))},_deleteBox:function(e){for(var i,s,n,r=0;r<e.length;r++)for(i=t(e[r]).attr("data-value"),s=this._getLi(),n=0;n<s.length;n++)if(t(s[n]).attr("data-value")==i){this._activeItem=n,this._removeTextBoxValue();break}this._isFocused||this._isPopupShown()||this._setWatermark()},_swapUlandInput:function(e){e?(this._visibleInput.css("display","none"),this._ulBox.css("display","block"),this.wrapper.css({height:"auto"})):(this._visibleInput.css("display","block"),this._ulBox.css("display","none"),this.wrapper.css({height:this.model.height}))},_removeActive:function(){this._ulBox.children("li").removeClass("e-active")},_adjustWidth:function(){var e=i.buildTag("span",this._visibleInput.val());this.container.append(e),this._visibleInput.width(e.width()+30),e.remove()},_destroyBoxModel:function(){this._visibleInput.css("display","block"),this.wrapper.height(this.model.height),this._ulBox.remove(),this._ulBox=null,this._off(this.container,"click")},_removeListHover:function(){this.ultag.children("li").removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("hover")}),e.focus()},_getLi:function(){return this.ultag.children("li:not('.e-category'):not('.e-nosuggestion')")},_calcScrollTop:function(e){var i,s,n,r,o=(this.ultag.outerHeight(),this.ultag.find("li")),l=0;for(this._selectedIndices&&this._selectedIndices.length>0&&"active"==e?(r=this._getLi(),i=this._selectedIndices.length==r.length?0:this._selectedIndices[this._selectedIndices.length-1],(null!=this.model.fields.groupBy||this.ultag.find("li.e-category").length>0)&&(i=t.inArray(r.eq(i)[0],o))):i=this.ultag.find("li.e-"+e).index(),n=0;n<i;n++)l+=o.eq(n).outerHeight(!0);return s=l-(this.popupList.outerHeight()-o.eq(i).outerHeight(!0))/2,s<0?0:s},_getActiveItem:function(){return this._getLi().eq(this._activeItem)},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_roundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupListWrapper.addClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupListWrapper.removeClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").removeClass("e-corner"))},_enabled:function(e){e?this.enable():this.disable()},_destroyDropdown:function(){this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton.outerWidth()),this.wrapper.remove(),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this))},_RightToLeft:function(){this.model.enableRTL?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_dropbtnRTL:function(){this.model.enableRTL?(this.popupListWrapper.addClass("e-rtl").find(".e-resize-handle").addClass("e-rtl-resize"),this.popupList.addClass("e-rtl")):(this.popupListWrapper.removeClass("e-rtl").find(".e-resize-handle").removeClass("e-rtl-resize"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(e){if(this._preventDefaultAction(e),t(e.target).is("li")&&t(e.target).parent().hasClass("e-boxes")||t(e.target).parents("ul").hasClass("e-boxes")&&t(e.target).hasClass("e-icon e-close")||this.model.readOnly||this._readOnly)return!1;this.ultag.find("li").length>0&&(e.which&&1==e.which||e.button&&0==e.button)&&this._OnPopupHideShow()},_OnPopupHideShow:function(){this._isPopupShown()?this._hideResult():(this._showResult(),this.wrapper.focus())},_showFullList:function(){var e,t=this.model.dataSource;i.DataManager&&t instanceof i.DataManager?t.dataSource.offline||t.dataSource.json&&t.dataSource.json.length>0?this._getFilteredList(t.dataSource.json):(e=this,e._initDataSource(t)):this._getFilteredList(t)},_getFilteredList:function(e){if(!e||!e.length||e.length<1)this._targetElementBinding(),this._renderRemaining();else{var t=i.DataManager(e).executeLocal(this._isPlainType(e)?i.Query():this._getQuery(!0));this._totalCount=t.count,this._listItem(t.result?t.result:t),this._renderPopupList(),this._rawList=this.popupListItems}},_cascadeAction:function(){if(this.model.cascadeTo)for(var e=this.model.cascadeTo.split(","),s=0;s<e.length;s++)t("#"+e[s]).hasClass("e-dropdownlist")?this._doCascadeAction(e[s],this,this.checkedStatus):t("#"+e[s]).on("ejDropDownListcreate",{Obj:this,status:this.checkedStatus},function(e){i.isNullOrUndefined(e.data.Obj.getValue())||""==e.data.Obj.getValue()||e.data.Obj._doCascadeAction(this.id,e.data.Obj,e.data.status)})},_doCascadeAction:function(e,s,n){s._currentValue=s._getField(s.popupListItems[s._activeItem],s.mapFld._value),s.selectDropObj=t("#"+e).ejDropDownList("instance");var r={cascadeModel:s.selectDropObj.model,cascadeValue:s._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",r),s.selectDropObj._setCascadeModel=r.setCascadeModel,i.isNullOrUndefined(s[e])&&(s[e]=s.selectDropObj.model.dataSource),i.DataManager&&s[e]instanceof i.DataManager?s._cascadeOdataInit(s[e],r.requiresDefaultFilter,n,r.cascadeQuery):s._cascadeJsonInit(s.selectDropObj,s[e],s.mapFld._value,r.requiresDefaultFilter,n,r.cascadeQuery)},_cascadeOdataInit:function(e,t,i,s){var n,r,o=this;o._dQuery=this.selectDropObj._getQuery().clone(),r=o._dQuery.clone(),t?r.where(o.mapFld._value,"equal",o._currentValue):r=s,o.selectDropObj._addLoadingClass(),o._trigger("actionBegin",{requestFrom:"cascade"})||(n=e.executeQuery(r),n.fail(function(e){o._changedSource=null,o.selectDropObj.setModel({dataSource:o._changedSource,enabled:!1}),o._trigger("actionFailure",{e:e,requestFrom:"cascade"})}).done(function(e){o._trigger("actionSuccess",{e:e,requestFrom:"cascade"}),o._cascadeDataBind(o.selectDropObj,e.result,i),o.selectDropObj._removeLoadingClass()}).always(function(e){o._trigger("actionComplete",{e:e,requestFrom:"cascade"})}))},_cascadeJsonInit:function(e,t,s,n,r,o){var l=n?i.Query().where(s,"==",this._currentValue):o,a=i.DataManager(t).executeLocal(l);this._cascadeDataBind(e,a,r)},_cascadeDataBind:function(e,s,n){var r,o,l,a,d,h=e.value();if(this.model.showCheckbox&&n||"none"!=this.model.multiSelectMode&&this.activeItem.hasClass("e-active"))this._changedSource=i.isNullOrUndefined(this._changedSource)?s:this._changedSource.concat(s);else if(this.model.showCheckbox||"none"!=this.model.multiSelectMode){for(r=0;r<s.length;r++)if(this._isPlainType(s)&&this._isPlainType(this._changedSource))this._changedSource.splice(this._changedSource.indexOf(s[r]),1);else for(o=0;o<this._changedSource.length;o++)JSON.stringify(this._changedSource[o])==JSON.stringify(s[r])&&this._changedSource.splice(o,1);e.setModel({dataSource:null})}else this._changedSource=s;if(l=JSON.parse(JSON.stringify(e.model)),e.setModel({dataSource:this._changedSource,enabled:this._changedSource.length>0}),this._isSingleSelect()||e.selectItemByValue(h),(e.model.showCheckbox||"none"!=e.model.multiSelectMode)&&t("input:hidden[id^='#'][name="+e._id+"]").remove(),e._setSelectedItem)e.setModel(e._setCascadeModel);else{for(a=["value","text","selectedIndex","selectedIndices"],d=0;d<a.length;d++)e.model[a[d]]=l[a[d]];e._finalize()}e._setSelectedItem=!0},_OnMouseEnter:function(e){var i,s;if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover"),t(e.target).is("li:not('.e-category')")&&t(e.target).addClass("e-hover"),t(e.target).hasClass("e-disable")?t(e.target).removeClass("e-hover"):"li"!=e.target.tagName&&(i=t(e.target).parents("li:not('.e-category')"),t(i).addClass("e-hover")),this.ultag.children("li:not('.e-category')").each(function(e){if(t(this).hasClass("e-hover"))return s=e,!1}),this._activeItem=s},_OnMouseLeave:function(){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover")},_OnMouseClick:function(e){var i,s,n;if(this._uiInteract=!0,!this.model.enabled||this.model.readOnly||this._readOnly||this.model.enableFilterSearch&&t(e.target).is("li")&&t(e.target).hasClass("e-nosuggestion"))return!1;(!t(e.target).is("li")||t(e.target).hasClass("e-disable"))&&(t(e.target).is("li")||t(e.target).closest("li").hasClass("e-disable"))||(this._isSingleSelect()?(this._enterTextBoxValue(),this._hideResult()):this.model.showCheckbox?(i="LI"===e.target.nodeName?e.target:t(e.target).parents("li.e-hover"),s=t(i).find(".e-checkwrap")[0],this._onCheckChange({target:s})):(n=t(e.target).is("li")?e.target:t(e.target).closest("li")[0],this._activeItem=t.inArray(n,this._getLi()),t(n).hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue()))},_OnDocumentClick:function(e){if(this.model&&(!this.model.enabled||this.model.readOnly||this._readOnly))return!1;t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper)||t(e.target).is(this._visibleInput)||t(e.target).parents(".e-ddl").is(this.wrapper)?t(e.target).is(this.inputSearch)?this.inputSearch.focus():(t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper))&&this._preventDefaultAction(e):this._hideResult()},_OnKeyPress:function(e){this.model.enableIncrementalSearch&&13!=e.keyCode&&this._OnTextEnter("mozilla"==i.browserInfo().name?e.charCode:e.keyCode),32==e.keyCode&&this._preventDefaultAction(e)},_OnTextEnter:function(e){var i=this;this._incqueryString+=String.fromCharCode(e),this._incqueryString.length>0&&setTimeout(function(){i._incqueryString=""},1e3);var s,n,r=this._getLi(),o=this.model.caseSensitiveSearch,l=this._incqueryString,a=this._incqueryString.length,d=!1;for(o||(l=l.toLowerCase()),s=0;s<r.length&&(n=t(r[s]).text(),n=o?n:n.toLowerCase(),n.substr(0,a)==l&&(this._activeItem=s,this._isSingleSelect()?(this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")})):this._isPopupShown()&&(this._removeListHover(),this._addListHover()),d=!0),!d);s++);},_selectItem:function(e){this._isSingle||this._clearTextboxValue(),this._activeItem=e,this._addListHover(),this._enterTextBoxValue()},_focusItem:function(e){this._removeListHover(),this._activeItem=e,this._addListHover()},_selectFocusedItem:function(e){this._focusItem(e),this._enterTextBoxValue()},_selectShiftDown:function(e,i,s){s||this._clearTextboxValue();for(var n=e;n<=i;n++)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&this._selectFocusedItem(n)},_selectShiftUp:function(e,i,s){s||this._clearTextboxValue();for(var n=i;n>=e;n--)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&this._selectFocusedItem(n)},_selectShiftHome:function(e,i,s){if(s||this._clearTextboxValue(),e>=0&&e<=this._listSize-1){if(0==e)this._clearTextboxValue();else for(var n=e;n>=i;n--)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&(this._activeItem=n,this._enterTextBoxValue());this._activeItem=e,0==e&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:0})}},_selectShiftEnd:function(e,i,s){if(s||this._clearTextboxValue(),e<=this._listSize-1){if(e==i)this._clearTextboxValue();else for(var n=e;n<=i;n++)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&(this._activeItem=n,this._enterTextBoxValue());this._activeItem=e,e==i&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this.ultag.outerHeight()})}},_getLastFocusedLi:function(){return this._selectedIndices&&this._selectedIndices.length>0?this._selectedIndices[this._selectedIndices.length-1]:null},_getLastShiftFocusedLi:function(e,i){var s=i?e-1:e+1;return t.inArray(s,this._selectedIndices)<0?e:this._getLastShiftFocusedLi(s,i)},_shiftUp:function(e,t,i){var s,n,r;if(null==e||e<0)this._checkDisableStep(0,t,!1,!1,!0);else if(e>0&&e<=this._listSize-1&&null!=(s=this._disableItemSelectUp(e-t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e-1==this._selectedIndices[this._selectedIndices.length-2])for(n=1;n<=t&&e-n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e+1-n,this._removeTextBoxValue(),this._focusItem(e-n);else r=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!1),this._selectShiftUp(s,r,i);else this._moveUp(e,t,!1)},_shiftDown:function(e,t,i){var s,n,r;if(null==e||e<0)this._checkDisableStep(-1,t,!0,!1,!0);else if(e<this._listSize-1&&null!=(s=this._disableItemSelectDown(e+t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e+1==this._selectedIndices[this._selectedIndices.length-2])for(n=1;n<=t&&e+n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e-1+n,this._removeTextBoxValue(),this._focusItem(e+n);else r=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!0),this._selectShiftDown(r,s,i);else this._moveDown(e,t,!1)},_moveUp:function(e,t,i){null==e||e<=0?this._checkDisableStep(0,t,!1,i):e>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1,i):e>0&&e<=this._listSize-1&&this._checkDisableStep(e,t,!1,i)},_moveDown:function(e,t,i){null==e||e<0?this._checkDisableStep(-1,t,!0,i):0==e?this._checkDisableStep(0,t,!0,i):e>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0,i):e<this._listSize-1&&this._checkDisableStep(e,t,!0,i)},_checkDisableStep:function(e,t,i,s,n){var r,o=i?"_disableItemSelectDown":"_disableItemSelectUp",l=i?e+t:e-t,a=this[o](l);if(null==a)for(r=t;r>=0&&(l=i?e+r:e-r,null==(a=this[o](l)));r--);null!=a&&(s?this._focusItem(a):this._selectItem(a),n&&s&&this._enterTextBoxValue())},_disableItemSelectDown:function(e){return(null==e||e<0)&&(e=0),e<this._listSize?t.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize-1},_disableItemSelectUp:function(e){if((null==e||e<0)&&(e=0),e<this._listSize){if(t.inArray(e,this._disabledItems)<0)return e;if(e>0)return this._disableItemSelectUp(e-1)}},_preventDefaultAction:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},_OnKeyDown:function(e){var t,i,s,n,r;if(this._uiInteract=!0,this.model.enabled)if(this._itemId=null,t=this._getLi(),this._listSize=t.length,s=this.popupList.height(),i=this.ultag.children("li").outerHeight(),n=0!=Math.round(s/i)?Math.round(s/i):5,this._isSingle=this._isSingleSelect(),this._isSingle)switch(e.keyCode){case 38:if(e.altKey){this.ultag.find("li").length>0&&this._hideResult();break}case 33:r=33==e.keyCode?n:1,this._moveUp(this._activeItem,r),this._preventDefaultAction(e,!0);break;case 8:this._preventDefaultAction(e);break;case 40:if(e.altKey){this.ultag.find("li").length>0&&this._showResult();break}case 34:r=34==e.keyCode?n:1,this._moveDown(this._activeItem,r),this._preventDefaultAction(e,!0);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1):this._moveUp(this._activeItem,1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1):this._moveDown(this._activeItem,1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:this._moveDown(this._listSize-1,0),this._preventDefaultAction(e);break;case 36:r=null!=this._activeItem?this._activeItem:this._listSize-1,this._moveUp(r,r),this._preventDefaultAction(e)}else switch(e.keyCode){case 38:e.altKey?this.ultag.find("li").length>0&&this._hideResult():e.shiftKey?this._shiftUp(this._activeItem,1,e.ctrlKey):this._moveUp(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 33:e.shiftKey?this._shiftUp(this._activeItem,n,e.ctrlKey):this._moveUp(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e);break;case 8:this._preventDefaultAction(e);break;case 40:e.altKey?this.ultag.find("li").length>0&&this._showResult():e.shiftKey?this._shiftDown(this._activeItem,1,e.ctrlKey):this._moveDown(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 34:e.shiftKey?this._shiftDown(this._activeItem,n,e.ctrlKey):this._moveDown(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1,!1):this._moveUp(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1,!1):this._moveDown(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:e.shiftKey?this._selectShiftEnd(this._activeItem,this._listSize-1,e.ctrlKey):this._moveDown(this._activeItem,this._listSize,e.ctrlKey),this._preventDefaultAction(e);break;case 36:r=null!=this._activeItem?this._activeItem:this._listSize-1,e.shiftKey?this._selectShiftHome(this._activeItem,0,e.ctrlKey):this._moveUp(this._activeItem,r,e.ctrlKey),this._preventDefaultAction(e)}},_OnKeyUp:function(e){if(this.model.enabled){this._preventDefaultAction(e);e.target;if(null==this._activeItem&&(this._activeItem=this._getLi().index(this.popupList.find("ol,ul").children("li.e-hover"))),""==this._trim(this._visibleInput.val())&&38==e.keyCode&&40==e.keyCode)return this._hideResult(),!1;switch(e.keyCode){case 13:!this._isSingle&&this._isPopupShown()&&(e.ctrlKey||e.shiftKey)&&this._activeItem>=0?this._selectAndUnselect():this._isPopupShown()&&this._hideResult(),this._preventDefaultAction(e);break;case 32:this._isPopupShown()&&this._isSingle&&this._hideResult(),!this._isSingle&&this._isPopupShown()&&this._activeItem>=0&&this._selectAndUnselect(),this._preventDefaultAction(e);break;case 8:"visualmode"==this.model.multiSelectMode&&this._deleteLastBox(),this._preventDefaultAction(e);break;case 46:if("visualmode"==this.model.multiSelectMode||this.model.showCheckbox){this._deleteBox(this._ulBox.children("li.e-active"));break}}}},_isSingleSelect:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode},_selectAndUnselect:function(){this.model.showCheckbox?this._isChecked(this._getActiveItem().find(".e-checkwrap")[0])?this._removeTextBoxValue():this._enterTextBoxValue():"none"!=this.model.MultiSelectMode&&(this._getActiveItem().hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue())},_targetFocus:function(){this.model.enabled&&!this._isFocused&&(this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._isFocused=!0,this._trigger("focusIn"))},_targetBlur:function(){this.model.enabled&&(this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._setWatermark(),this._trigger("focusOut"))},_getLocalizedLabels:function(e){return void 0===this._localizedLabels[e]?i.DropDownList.Locale["en-US"][e]:this._localizedLabels[e]},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"keydown",this._OnKeyDown),this._on(this.popupList,"keydown",this._OnKeyDown),this._on(this.popupList,"keyup",this._OnKeyUp),this._on(this.wrapper,"keyup",this._OnKeyUp),this._on(this.popupList,"keypress",this._OnKeyPress),this._on(this.wrapper,"keypress",this._OnKeyPress)},_unwireEvents:function(){this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"keydown",this._OnKeyDown),this._off(this.popupList,"keydown",this._OnKeyDown),this._off(this.popupList,"keyup",this._OnKeyUp),this._off(this.wrapper,"keyup",this._OnKeyUp),this._off(this.popupList,"keypress",this._OnKeyPress),this._off(this.wrapper,"keypress",this._OnKeyPress),t(window).off("resize",t.proxy(this._OnWindowResize,this))},_multiItemSelection:function(e,t){var i,s;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++)s=t?this._rawList.length-(e.length-i):i,this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"));this._setWatermark()},_appendCheckbox:function(e,t){var i;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i,n=document.createElement("input"),r=document.createElement("span");this._setAttr(n,{type:"checkbox",name:"list"+s,"data-role":"none",id:this._id+"_check"+s})._setClass(n,"e-check-input")._setAttr(r,{name:"list"+s+"_wrap","data-role":"none",id:this._id+"_check"+s+"wrap",unselectable:"on"})._setClass(r,"e-checkwrap e-icon "),r.appendChild(n),e[i].insertBefore(r,e[i].childNodes[0]),this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_onCheckChange:function(e){var i="INPUT"===e.target.nodeName?e.target.parentElement:e.target;this._activeItem=t.inArray(t(i).parents("li")[0],this._getLi()),this._hasClass(i,"e-check-act")?this._removeTextBoxValue():this._enterTextBoxValue()},_isChecked:function(e){return this._hasClass(e,"e-check-act")&&1==t(e).children(".e-check-input")[0].checked},_removeCheck:function(){this._getLi().find(".e-checkwrap").remove()},_resetCheck:function(){var e,t,i=this._getLi();for(i.find(".e-check-act").removeClass("e-check-act").attr("aria-checked",!1),e=i.find(".e-check-input:checked"),t=0;t<e.length;t++)e[t].checked=!1}}),i.DropDownList.Locale=i.DropDownList.Locale||{},i.DropDownList.Locale.default=i.DropDownList.Locale["en-US"]={emptyResultText:"No suggestions",watermarkText:""},i.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},i.VirtualScrollMode={Normal:"normal",Continuous:"continuous"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.dialog.min",["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./../common/ej.draggable.min"],e):e()}(function(){!function(e,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(i){var s,n;for(s in i)switch(s){case"closeIconTooltip":this._dialogClose.attr("title",i[s]);break;case"tooltip":this._tooltipText(i[s]);break;case"title":this.model.title=i[s],this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(i[s]),this._updateCaptionWidth();break;case"width":this.model.width=i[s],this._changeSize(),this._updateCaptionWidth(),i[s]=this.model.width;break;case"height":this.model.height=i[s],this._changeSize(),i[s]=this.model.height;break;case"position":this.model.position=i[s],this._dialogPosition();break;case"cssClass":this._changeSkin(i[s]);break;case"showRoundedCorner":this.model.showRoundedCorner=i[s],this._roundedCorner(i[s]);break;case"contentType":this.model.contentType=i[s],this._appendContent(i[s]);break;case"enabled":this.model.enabled=i[s],this._enabledAction(i[s]);break;case"contentUrl":this.model.contentUrl=i[s],this._appendContent(this.model.contentType);break;case"content":case"target":this._ejDialog.appendTo(e(i[s])),this.model.target=this.model.content=i[s],this._dialogPosition();break;case"containment":this._setDragArea(i[s]),t.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target),this.model.position.X=this.model.position.Y="",this._dialogPosition(),this.model.containment=i[s]=this._target,this.model.enableModal&&this._createOverlay(),this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=i[s],this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._tooltipText(this.model.tooltip),this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title),this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=i[s],this._ejDialog.css("minHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"minWidth":this.model.minWidth=i[s],this._ejDialog.css("minWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxHeight":this.model.maxHeight=i[s],this._ejDialog.css("maxHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxWidth":this.model.maxWidth=i[s],this._ejDialog.css("maxWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",i[s]);break;case"faviconCSS":this.model.faviconCSS=i[s],this._favIcon(),this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=i[s],this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize"),this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[s],i[s]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[s],i[s]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove()),this._reRenderScroller();break;case"showHeader":this.model.showHeader=i[s],i[s]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))):(this._ejDialog.find(".e-titlebar").remove(),this._maximize?this.refresh():this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))),this._roundedCorner(this.model.showRoundedCorner),this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=i[s],i[s]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove(),this._enableResize()._enableDrag()._sizeInPercent(),
this._reRenderScroller(),this._setContainerSize()._resetScroller(),this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":this.model.footerTemplateId=i[s],this.model.showFooter&&(e(".e-footerbar").empty(),n=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(n),this._enableResize());break;case"enableRTL":this.model.enableRTL=i[s],this.model.faviconCSS&&this._favIcon(),i[s]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl"),this.scroller&&this._resetScroller()):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr"),this.scroller&&this._resetScroller());break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[s])),this.model.actionButtons=i[s],this._updateCaptionWidth();break;case"enableModal":this._enableModal(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this._overLay&&this._overLay.remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1},keyConfigs:[37,38,39,40],_init:function(t){this._options=t,this._init=!0,this._widthPercent=null,this._heightPercent=null,this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._initSize={width:this.model.width,height:this.model.height},this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null},this._isOpen=this._maximize=this._minimize=!1,this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._setDimension(),this.model.close||(this.model.close=this.model.Close),this.model.target||(this.model.target=this.model.content),this._responsive(),this._renderControl(),this._wireEvents(),scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),scrObj&&scrObj._resetScroller(),this.hidden=!1,this._init=!1},_responsive:function(){this.width=this.model.width,e(this.element).width(this.width),this.height=this.model.height,e(this.element).height(this.height),e(window).on("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=e(this._dialogTitlebar).outerWidth(),e(this.contentDiv).width(this.width),e(this.contentDiv).children().width(this.width),this.model.height=this.height=e(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-e(this._dialogTitlebar).outerHeight()-e(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height())),t.isNullOrUndefined(this.element)||this._resetScroller()},_setLocaleCulture:function(e){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=e.closeIconTooltip),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.tooltip)||(this.localizedLabels.tooltip=this._options.tooltip),t.isNullOrUndefined(this._options.title)||(this.localizedLabels.title=this._options.title)),this.model.tooltip=e.tooltip,this.model.title=e.title},_setDragArea:function(i){t.isNullOrUndefined(i)?this._target=null:"string"==typeof i?("parent"==i&&(this._target=e(this.element).parent()),"document"==i.toLowerCase()&&(this._target=e(document)),"window"==i.toLowerCase()?this._target=e(window):e(i).length>0&&(this._target=e(i))):"object"==typeof i?i.length>0&&(this._target=i):this._target=null},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i._ejDialog.addClass(e):"disabled"==t&&"disabled"==e?(i.model.enabled=!1,i._enabledAction(!1)):i._ejDialog.attr(t,e)})},_tooltipText:function(i){e.extend(this.model.tooltip,i),!t.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close),!t.isNullOrUndefined(this._dialogCollapsible)&&(i.collapse||i.expand)&&(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand)),!t.isNullOrUndefined(this._dialogMaximize)&&(i.maximize||i.restore)&&(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogMinimize)&&(i.minimize||i.restore)&&(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogPin)&&(i.pin||i.unPin)&&(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){var i,s,n;this._cloneElement=this.element.clone(),this.element.attr("tabindex",0).attr({role:"dialog","aria-labelledby":this.element.prop("id")+"_title"}),this._ejDialog=t.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(""==this.element.prop("id")?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0}),this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize"),this.wrapper=this._ejDialog,this._addAttr(this.model.htmlAttributes),this._setDragArea(this.model.containment),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,s=t.isNullOrUndefined(i)?document.body:i,n=e(s).find("#"+this._id+"_wrapper").get(0),n&&e(n).remove(),this._ejDialog.appendTo(s),this.model.enableRTL&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon()),this._appendContent(this.model.contentType),this._enableResize()._enableDrag()._setSize()._sizeInPercent(),"ajax"!=this.model.contentType&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize()),this._roundedCorner(this.model.showRoundedCorner),this._enabledAction(this.model.enabled),"auto"==this._sizeType.width&&(this._maxWidth=this.model.width),"auto"==this._sizeType.height&&(this._maxHeight=this.model.height)},_setContainerSize:function(){if("auto"!=this.model.height){var t=this._ejDialog.outerHeight()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1;this.contentDiv.height(t),this.element.outerHeight(t)}return this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height},this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null,this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null,this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){if(this.model.enableResize){this._ejDialog.addClass("e-resizable");var e=t.buildTag("div.e-icon e-resize-handle");this.model.showFooter?e.appendTo(this._dialogFooterbar):e.appendTo(this._ejDialog),this._resizeDialog()}return this},_changeSkin:function(e){this.model.cssClass!=e&&this._ejDialog.removeClass(this.model.cssClass).addClass(e)},_enableModal:function(e){e?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(e){e?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),t.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),t.buildTag("div.e-disable-overlay").appendTo(this.wrapper),t.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),"string"!=typeof this._elementTitle&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog),this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=t.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var e=this.model.faviconCSS&&!t.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-e),this},_iconsRender:function(i){for(var s=0;s<i.length;s++)switch("msie"==t.browserInfo().name&&t.browserInfo().version<=8?e.trim(i[s]):i[s].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(i[s])}},_customIconsRender:function(e){this._customIcon=t.util.buildTag("div#"+this.element[0].id+"_"+e+"button.e-dialog-icon e-icon e-"+e,null,null).attr("tabIndex","0").attr("title",e),this._customIcon.appendTo(this._dialogTitlebar),this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(){if(!this.element.hasClass("e-disable")){var t={cancel:!1,buttonID:e(event.target).attr("id"),event:event.type,model:this.model,currentTarget:event.currentTarget.title};this._trigger("actionButtonClick",t)}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(i){var s,n,r,o,l;this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box"),s=this,t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(i)?(this.dialogIframeContent=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild)):"ajax"==i?(this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url)):"iframe"==i?(this.element.children(".e-iframe").length>0?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=t.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&e(this.iframe).load(function(){s.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):"image"==i?(n=t.buildTag("img.e-images","","",{src:this.model.contentUrl}),this.element.append(n).show().appendTo(this.contentDiv),e(n).on("load",function(){s._dialogPosition()}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):this.element.show().appendTo(this.contentDiv),this._ejDialog.find("div.e-resize-handle").length>0?this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle")):(r=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(r)?this.contentDiv.appendTo(this._ejDialog):(this.contentDiv.appendTo(this._ejDialog),o=e("#"+this.contentDiv.find("iframe").attr("id")),e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(r),"mozilla"==t.browserInfo().name&&setTimeout(function(){e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(r)},500))),this.model.showFooter&&(this._renderFooterBar(),null!=this.model.footerTemplateId&&(l=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(l)))},_roundedCorner:function(e){this._ejDialog[e?"addClass":"removeClass"]("e-corner"),this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content"),this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):!(!this.model.showHeader&&!this.model.showFooter)||this.contentDiv.addClass("e-dialog-content"))},_reRenderScroller:function(){if(void 0!=this.scroller&&(this.scroller.refresh(!0),!this.model.enableRTL)){if(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=0,i=0;else var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerHeight();Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=i+t,this.scroller._vScrollbar._scrollData.handle-=i,this.scroller._vScrollbar._scrollData.handleSpace-=i+t,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(e-i-t))}if((!this.scroller._vScrollbar||!this.scroller._vScrollbar._scrollData)&&this.scroller._hScrollbar&&this.scroller._hScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=0,i=0;else var s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerWidth();this.scroller._hScrollbar.model.width-=i+t,this.scroller._hScrollbar._scrollData.handle-=i+t,this.scroller._hScrollbar._scrollData.handleSpace-=i+t,this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData),this.scroller._hScrollbar.element.find("> div.e-hscroll").width(s-i-t)}}},_dialogMaxZindex:function(){var t,i,s,n=this.element.parents();return t=e("body").children(),index=t.index(this.popup),t.splice(index,1),e(t).each(function(e,t){n.push(t)}),i=e(this.model.target).children(),cindex=i.index(this.popup),i.splice(cindex,1),e(i).each(function(e,t){n.push(t)}),s=Math.max.apply(s,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!s||s<1e4?s=1e4:s+=1,s},_setZindex:function(){var e=this._dialogMaxZindex();this.model.zIndex<=e&&this._ejDialog.css({zIndex:e+1})},_createOverlay:function(){var i,s,n=this._ejDialog.css("zIndex");t.isNullOrUndefined(this._overLay)||this._overLay.remove(),this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:n-1}),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,this._overLay.appendTo(t.isNullOrUndefined(i)?document.body:i);var s=t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?"fixed":"absolute",r=t.isNullOrUndefined(i)||"fixed"==s?0:"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().left,o=t.isNullOrUndefined(i)||"fixed"==s?0:"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().top;this._overLay.css({top:o,left:r,position:s})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var s=this,n=this.model.title,r={success:function(e){try{s._ajaxSuccessHandler(e,t,i,n)}catch(r){}},error:function(e){try{s._ajaxErrorHandler({status:e.status,responseText:e.responseText,statusText:e.statusText},t,i,n)}catch(e){}},complete:function(){try{s._setContainerSize(),s._resetScroller(),s.model.showOnInit||s._setHiddenDialogSize()}catch(e){}}};e.extend(!0,r,this.model.ajaxSettings),this._sendAjaxRequest(r)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(e,t,i){t.removeClass("e-load"),t.html(e).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.model.showOnInit&&this.open(),this._trigger("ajaxSuccess",{data:e,url:i})},_ajaxErrorHandler:function(e,t,i){t.addClass("e-dialog-loaded").appendTo(this.contentDiv),this._dialogPosition().open(),this._trigger("ajaxError",{data:e,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0"),"close"==this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):"close"!=this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):("close"==this.model.closeIconTooltip&&this.model.tooltip.close,this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close)),this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down"),this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore"),this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore"),this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin"),this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){if(this._dialogFavIcon)e=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom");else{this._dialogFavIcon=t.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")});var e=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});e.appendTo(this._dialogFavIcon),this._dialogFavIcon.appendTo(this._dialogTitlebar)}this.model.faviconCSS?e.addClass(this.model.faviconCSS):this._dialogFavIcon.remove(),this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),i=parseInt(this.model.maxWidth),s=parseInt(this.model.maxHeight),n=parseInt(this.model.width),r=parseInt(this.model.height),o=this._getParentObj();isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(e=this._convertPercentageToPixel(o.outerWidth(),e)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(t=this._convertPercentageToPixel(o.outerHeight(),t)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(i=this._convertPercentageToPixel(o.innerWidth(),i)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(s=this._convertPercentageToPixel(o.innerHeight(),s)),isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(n=this._convertPercentageToPixel(o.innerWidth(),n)),isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(r=this._convertPercentageToPixel(o.innerHeight(),r)),(i&&n>i||e&&n<e)&&(this.model.width=n>i?i:e),(s&&r>s||t&&r<t)&&(this.model.height=r>s?s:t)},_setSize:function(){var e=this.model;return this._minMaxValidation(),this._ejDialog.css({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}),this._ejDialog.css({height:e.height,minHeight:e.minHeight,maxHeight:e.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var i,s=this._ejDialog.outerHeight(!0)-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),n={width:"0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:"0px"==this.contentDiv.css("border-width")?s:s-1,enableTouchScroll:!1};"auto"==this.model.height&&(this.element.height()<this.model.maxHeight||!this.model.maxHeight)&&!this._maximize&&(n.height="auto"),"auto"!=this.model.width||this._maximize||(n.width=this.model.width),this.contentDiv.ejScroller(n),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._padding=parseInt(e(this.element).css("padding-top"))+parseInt(e(this.element).css("padding-bottom")),"none"==e(this._ejDialog).css("display")&&(this.hidden=!0,this._ejDialog.css({display:"block"})),!t.isNullOrUndefined(this.contentDiv.height())&&this.contentDiv.height()>0&&(i=t.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:!this.scroller._hScrollbar&&this.scroller._vScrollbar?this.contentDiv.outerHeight():this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),"auto"!=this.model.height&&"100%"!=this.model.height?this.element.css({height:i}):this.element.css("height",this.model.height),"auto"!=this.model.height&&"100%"!=this.model.height||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||"auto"==this.model.width||"100%"==this.model.width?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth("0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight})),this.hidden&&this._ejDialog.css({display:"none"}),this.hidden=!1},_updateScroller:function(e,t){this.contentDiv.ejScroller({width:t,height:e,enableRTL:this.model.enableRTL,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._changeSize()},_dragDialog:function(){var i=this;this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(e){return e.element.attr("aria-grabbed",!0),i._clickHandler(),!i.dialogPin&&i.model.allowDraggable&&i.model.enabled?i._trigger("dragStart",{event:e})?(e.cancel=!0,!1):void 0:(e.cancel=!0,!1)},drag:function(e){i._trigger("drag",{event:e})},dragStop:function(s){i._ejDialog.focus(),s.element.attr("aria-grabbed",!1),i.element.find("> .e-draggable.e-titlebar")&&(dragobject=e("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"),dragobject&&dragobject.option("cursorAt",i.element.offset()));var n=this.helper.offsetParent().offset();i._trigger("dragStop",{event:s}),i.model.position.X=t.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[n.left+parseFloat(this.helper.offsetParent().css("border-left-width"))],i.model.position.Y=t.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[n.top+parseFloat(this.helper.offsetParent().css("border-top-width"))]},helper:function(){return e(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var t,i=this,s=!1,n=parseInt(this.model.minWidth),r=parseInt(this.model.minHeight),o=parseInt(this.model.maxWidth),l=parseInt(this.model.maxHeight);return t=this._getParentObj(),isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(n=this._convertPercentageToPixel(t.outerWidth(),n)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(r=this._convertPercentageToPixel(t.outerHeight(),r)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(o=this._convertPercentageToPixel(t.innerWidth(),o)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(l=this._convertPercentageToPixel(t.innerHeight(),l)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:r,minWidth:n,maxHeight:l,maxWidth:o,handle:"e-widget-content",resizeStart:function(e){if(!i.model.enabled)return!1;s||i._trigger("resizeStart",{event:e}),s=!0,i.model.position={X:i._ejDialog.css("left"),Y:i._ejDialog.css("top")},i._dialogPosition()},resize:function(t){var s=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(s).outerHeight(),i.model.width=e(s).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),i._updateCaptionWidth(),i._trigger("resize",{event:t}),i._sizeType={width:"px",height:"px"},scrObj=i._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),scrObj&&scrObj._resetScroller()},resizeStop:function(t){i._ejDialog.focus(),i._sizeInPercent();var n=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(n).outerHeight(),i.model.width=e(n).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),s&&i._trigger("resizeStop",{event:t}),s=!1,i._setDimension()},helper:function(){return e(i._ejDialog)}}),this}},_dialogPosition:function(){return this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.containment)&&t.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),""!=this.model.position.X||""!=this.model.position.Y?(this._ejDialog.css("position","absolute"),this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):this._centerPosition(),this},_centerPosition:function(){var i,s,n,r,o=0,l=0;t.isNullOrUndefined(this.model.target)&&(t.isNullOrUndefined(this._target)||e(this._target).is(e(document))||e(this._target).is(e(window)))?(r=document.documentElement,o=(e(window).outerWidth()>this._ejDialog.width()?(e(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||r.scrollLeft),l=(e(window).outerHeight()>this._ejDialog.height()?(e(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||r.scrollTop)):(i=e(t.isNullOrUndefined(this._target)?this.model.target:this._target),"static"==i.css("position")&&(s=i.offsetParent().offset(),n=i.offset(),o=n.left-s.left,l=n.top-s.top),i.outerWidth()>this._ejDialog.width()&&(o+=(i.outerWidth()-this._ejDialog.width())/2),i.outerHeight()>this._ejDialog.height()&&(l+=(i.outerHeight()-this._ejDialog.height())/2)),this._ejDialog.css({top:l,left:o}),this._ejDialog.css("position","absolute")},_closeClick:function(e){this.model.enabled&&(e.stopPropagation(),this.close(e))},_collapsibleClick:function(t){this.model.enabled&&(e(t.target).hasClass("e-arrowhead-up")?this._actionCollapse(t):e(t.target).hasClass("e-arrowhead-down")&&this._actionExpand(t))},_actionCollapse:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:!!e}),this._collapsible=!0)},_actionExpand:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:!!e}),this._collapsible=!1)},_maximizeClick:function(i){if(this.model.enabled){var s=e(i.target),n=this._dialogMaximize;s.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),s.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment?"absolute":this.model.target?"absolute":"fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),this._maximize=!0,this._minimize=!1;var e=this;this._dialogCollapsible&&!t.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0),1==this._collapseValue&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){e.refresh(),e._reRenderScroller()}),this._resetScroller()},_actionRestore:function(){this.element.height("").width(""),this.contentDiv.height("").width(""),this._restoreDialog(),this._maximize=this._minimize=!1},_minimizeClick:function(i){
if(this.model.enabled){var s=e(i.target),n=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize;s.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}},_actionMinimize:function(){var t;e(window).height(),this._ejDialog.height(),this.element.height();this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment?"absolute":this.model.target?"absolute":"fixed"),this._ejDialog.css("minHeight","0"),this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?t=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),t=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",t+2),this._hideIcon(!1)):this._ejDialog.css("height",""),this.contentDiv.hide(),this.model.showFooter&&this._dialogFooterbar.hide(),this._maximize=!1,this._minimize=!0},_hideIcon:function(i){var s=this._dialogCollapsible?this._dialogCollapsible:null;i?(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(t){if(this.model.enabled){var i=e(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin))}},_restoreDialog:function(){this.contentDiv.show(),this.model.showFooter&&this._dialogFooterbar.show(),this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow"),this._setSize()._resetScroller(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(){var e=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<e&&this._ejDialog.css({zIndex:e+1})},_mouseClick:function(t){t.currentTarget==this._id&&(e(t.target).hasClass("e-dialog")||e(t.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),e(t.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(t){code=t.keyCode?t.keyCode:t.which?t.which:t.charCode,this.model.allowKeyboardNavigation&&this.model.enabled&&e(t.target).hasClass("e-dialog")&&e.inArray(code,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(code,t.ctrlKey),t.preventDefault()),this.model.closeOnEscape&&27===code&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(t),t.preventDefault())),13===code&&this.model.enabled&&(e(t.target).hasClass("e-close")?this.close(t):(e(t.target).hasClass("e-arrowhead-up")||e(t.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(t),e(t.target).hasClass("e-maximize")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMaximize)?this._maximizeClick(t):(e(t.target).hasClass("e-minus")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMinimize))&&this._minimizeClick(t),(e(t.target).hasClass("e-pin")||e(t.target).hasClass("e-unpin"))&&this._pinClick(t)),9==code&&this.model.enableModal&&this._focusOnTab(t)},_focusOnTab:function(t){var i=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')");i=e(i).find("a, button, :input, select, [tabindex]:not('')"),t.shiftKey?i[i.index(t.target)-1]||(t.preventDefault(),i.last().focus()):i[i.index(t.target)+1]||(t.preventDefault(),i[0].focus())},_keyPressed:function(e,t){switch(e){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:0==this._ejDialog.position().left?0:this._ejDialog.position().left,Y:this._ejDialog.position().top>3?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:this._ejDialog.position().left>3?this._ejDialog.position().left-3:0,Y:0==this._ejDialog.position().top?0:this._ejDialog.position().top})}},_resizing:function(e,t){this.model.enableResize&&this.option(e,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var e=this._getParentObj();return this._widthPercent="%"==this._sizeType.width?parseFloat(this.model.width):this._convertPixelToPercentage(e.outerWidth(),this._ejDialog.outerWidth()),this._heightPercent="%"==this._sizeType.height?parseFloat(this.model.height):this._convertPixelToPercentage(e.outerHeight(),this._ejDialog.outerHeight()),this._widthPercent>=100&&(this._widthPercent=100,this._ejDialog.outerWidth(e.outerWidth()),this.model.width=this._ejDialog.width()),this._heightPercent>=100&&(this._heightPercent=100,this._ejDialog.outerHeight(e.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return e(t.isNullOrUndefined(this.model.containment)?t.isNullOrUndefined(this.model.target)?document:this.model.target:this.model.containment)},_convertPercentageToPixel:function(e,t){return Math.round(t*e/100)},_convertPixelToPercentage:function(e,t){return Math.round(t/e*100)},_reSizeHandler:function(){var t;if(this._maximize)return void this._resetScroller();""!=this.model.position.X&&(""!=this.model.position.Y||this._minimize)||this._centerPosition(),t=this._getParentObj(),this._change=!1,this._windowSize.outerWidth!=e(window).outerWidth()?"%"==this._sizeType.width?this._percentageWidthDimension(t):this._pixelsWidthDimension(t):this._windowSize.outerHeight!=e(window).outerHeight()&&("%"==this._sizeType.height?this._percentageHeightDimension(t):this._pixelsHeightDimension(t)),this._change&&this._resizeContainer(t),this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()}},_setDimension:function(){t.isNullOrUndefined(this.model.maxWidth)?t.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:("px"==this._sizeType.width||"auto"==this._sizeType.width)&&(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth,t.isNullOrUndefined(this.model.maxHeight)?t.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:("px"==this._sizeType.height||"auto"==this._sizeType.height)&&(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(e){this._ejDialog.outerWidth(this._convertPercentageToPixel(e.outerWidth(),this._widthPercent)),this._change=!0},_percentageHeightDimension:function(e){this._ejDialog.outerHeight(this._convertPercentageToPixel(e.outerHeight(),this._heightPercent)),this._change=!0},_pixelsWidthDimension:function(t){e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),e(t).outerHeight()<=this._ejDialog.outerHeight()&&this._setHeight(t),parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<e(t).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(t.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(t){e(t).outerHeight()<=this._ejDialog.outerHeight()&&this._setHeight(t),e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<e(t).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(t.outerHeight()),this._change=!0)},_setWidth:function(e){this._ejDialog.outerWidth(e.outerWidth()),this._change=!0},_setHeight:function(e){this._ejDialog.outerHeight(e.outerHeight()),this._change=!0},_resizeContainer:function(){this.contentDiv.width(this._ejDialog.width()),this.element.outerWidth(this.contentDiv.width());var i=this._ejDialog.height()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.element.outerHeight(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.scroller=this.contentDiv.ejScroller({width:t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"),height:t.isNullOrUndefined(this.contentDiv)?this.element.outerHeight()-2:"0px"==this.contentDiv.css("border-width"),rtl:this.model.rtl,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),""==this.model.position.X||""==this.model.position.Y&&!this._minimize?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight()),this._updateCaptionWidth(),this._change=!1},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return!!(this.model.isResponsive||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&"auto"!=this.model.height)},_wireResizing:function(){e(window)[this._enableWindowResize()?"on":"off"]("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown),this._on(this._ejDialog,"click",this._mouseClick),this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){var i,s,n,r;return!!this._isOpen||1!=this._trigger("beforeOpen")&&(this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition(),i=this,s={},this._ejDialog.show(),this.model.enableAnimation&&(this._ejDialog.css({opacity:0}),"slide"==this.model.animation.show.effect?(r=this._ejDialog.css("left"),this._ejDialog.css({left:-this._ejDialog.width()}),s={left:r,opacity:1}):s={opacity:1}),this._ejDialog.animate(s,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){i.model&&("none"==i._ejDialog.css("display")&&i._ejDialog.show(),i._ejDialog.eq(0).focus(),i._ejDialog.css({opacity:""}),i.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),i._trigger("open"),i._updateCaptionWidth(),(i.model.maxHeight||i.model.maxWidth)&&(n=i._ejDialog.outerHeight(!0)-(i._dialogTitlebar?i._dialogTitlebar.outerHeight(!0):0),("auto"==i.model.height||"100%"==i.model.height)&&(n=i.model.height),i._updateScroller(t.isNullOrUndefined(this.contentDiv)?n-2:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?i._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))))}),1==this.model.enableModal&&this._createOverlay(),this._isOpen=!0,this.element.find("> .e-draggable.e-titlebar")&&(dragobject=e("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"),dragobject&&dragobject.option("cursorAt",this.element.offset())),this)},close:function(e){var t,i,s;return!this._isOpen||!this.model.enabled||(t=!!e,1!=this._trigger("beforeClose",{event:e,isInteraction:t})&&(this._isOpen=!1,i=this,s={},this.model.enableAnimation&&(s="slide"==this.model.animation.hide.effect?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(s,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){i._trigger("close",{event:e,isInteraction:t}),i._ejDialog.hide()}),this.model.enableModal&&this._overLay&&this._overLay.remove(),this))},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(e){return this.model.title=e,this._titleText.text(e),this._updateCaptionWidth(),this},setContent:function(e){return!!this.model.enabled&&(this.element.html(e),this._resetScroller(),this)},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),e(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),e(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),e(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this.contentDiv.show(),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var t=this._minimize;return this._actionRestore(),e(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(t?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,e(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,e(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}}),t.Dialog.Locale=t.Dialog.Locale||{},t.Dialog.Locale.default=t.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.editor.min",["./../common/ej.globalize.min","./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,currencySymbol:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(e){var i=!1;for(var s in e)switch(s){case"value":t.isNullOrUndefined(e.minValue)&&t.isNullOrUndefined(e.maxValue)?(this._setValue(e[s],!0),e[s]=this.model.value):(this.model.value=this._checkNumValue(e[s]),this._localizedFormat(),this._raiseChangeEvent(!0),i=!0);break;case"enableRTL":this._enableRTL(e[s]);break;case"width":this._setWidth(e[s]);break;case"height":this._setHeight(e[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(e[s]))return;this.model.minValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"maxValue":if(isNaN(e[s]))return;this.model.maxValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"incrementStep":if(isNaN(e[s]))return;this.model.incrementStep=parseFloat(e[s].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=e[s];break;case"showSpinButton":this._showSpin(e[s]);break;case"showRoundedCorner":this._roundedCorner(e[s]);break;case"locale":this.model.decimalPlaces=t.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals?-1:this._options.decimalPlaces===-1?-1:this.model.decimalPlaces,this._setLocalize(e[s]),this._options.decimalPlaces=this.model.decimalPlaces,e[s]=this.model.locale;break;case"decimalPlaces":this._setDecimal(e[s]),t.isNullOrUndefined(this._options)&&(this._options={}),this._options.decimalPlaces=e[s];break;case"cssClass":this._setSkin(e[s]);break;case"readOnly":this._setReadOnly(e[s]);break;case"enabled":e[s]?this.enable():this.disable();break;case"watermarkText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.watermarkText=this.model.watermarkText=e[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._changeWatermark(e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"groupSeparator":this._checkSeparator(e[s]),e[s]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":case"currencySymbol":this.model[s]=e[s],this._options[s]=e[s],this._initCustomValue(),e[s]=this.model[s],this._setValue(this.model.value,!0)}i&&(this._validateMinMaxValue(!0,!0),e.value=this.model.value,e.maxValue=this.model.maxValue,e.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this.element.attr({"aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value})),this._checkSeparator(this.model.groupSeparator),this.element.val(this._removeSeparator(this.model.value)),this._updateSeparator(),this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove()),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.val("").removeClass("e-input e-disable").empty(),this.element.removeAttr("disabled aria-disabled aria-valuemin aria-valuemax aria-valuenow aria-live"),this._cloneElement.attr("role")||this.element.removeAttr("role"),this.element.css("display","block")},_init:function(e){if(this._cloneElement=this.element.clone(),this._options=t.isNullOrUndefined(e)?{}:e,!this.element.is("input")||!this.element.is("input[type=text]")&&!this.element.is("input[type=number]")&&this.element.attr("type"))return this._destroy(),!1;this.model.decimalPlaces>0&&(this.element[0].type="text"),this._isWatermark="placeholder"in document.createElement("input"),this.model.locale="en"==t.preferredCulture(this.model.locale).name?"en-US":t.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=t.preferredCulture(this.model.locale),this._browsername=t.browserInfo().name,this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._updateSeparator(),e&&e.value!=i&&this._trigger("_change",{value:this.model.value})},_checkAttribute:function(){for(var e,i,s=["min","max","step","readonly","disabled","placeholder"],n=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],r=0;r<s.length;r++)e=this.element.attr(s[r]),i=n[r],t.isNullOrUndefined(e)||t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options[i])||("watermarkText"==i?this._options[i]=e:this.model[i]="disabled"!=i&&"readOnly"!=i?t.parseFloat(e,this.model.locale):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"accesskey"==n?s._hiddenInput.attr(i,e):"disabled"==n&&"disabled"==e?s.disable():"readonly"==n&&"readOnly"==e?s._setReadOnly(!0):"tabindex"==n?(s._hiddenInput.attr(i,e),s.element.attr(i,e)):"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_setValues:function(){this._id=this.element[0].id,this._textBox=this._hiddenInput[0],this._error=!1,this._timeout=null,this.isValidState=!0,this._allowkeyboard=!0,this._validateOnType=!1,this._focused=!1,this._startValue=0,"ej.CurrencyTextbox"===this.sfType&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0),(t.isNullOrUndefined(this.model.decimalPlaces)||this.model.decimalPlaces<0)&&(this.model.decimalPlaces="ej.CurrencyTextbox"===this.sfType?t.preferredCulture(this.model.locale).numberFormat.currency.decimals:t.preferredCulture(this.model.locale).numberFormat.decimals),this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces)),this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._localizedFormat(),this._validateMinMaxValue(!0),this._updateSymbol(this.model.locale),t.isNullOrUndefined(this.model.value)?(value=this.model.value,this.wrapper.removeClass("e-valid")):(value=this.model.value.toString().indexOf("e")==-1?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.wrapper.addClass("e-valid")),this.element.val(value)},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,r,o=this.model.validationRules;this.element.rules("add",o),i=this.element.closest("form").data("validator"),i=i||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={};for(s in o)if(n=null,!t.isNullOrUndefined(o[s])){if(t.isNullOrUndefined(o.messages&&o.messages[s])){i.settings.messages[name][s]=e.validator.messages[s];for(r in this.model.validationMessage)s==r&&(n=this.model.validationMessage[s])}else n=o.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_renderControl:function(){this.wrapper=t.buildTag("span.e-widget e-pinch"),this.innerWrap=t.buildTag("span.e-in-wrap e-box "),this.wrapper.attr("style",this.element.attr("style")),"ej.NumericTextbox"===this.sfType?this.wrapper.addClass("e-numeric"):"ej.PercentageTextbox"===this.sfType?this.wrapper.addClass("e-percent"):"ej.CurrencyTextbox"===this.sfType&&this.wrapper.addClass("e-currency"),this.wrapper.append(this.innerWrap).insertAfter(this.element),this.innerWrap.append(this.element),this._hiddenInput=t.buildTag("input","",{},{type:"text"}).insertBefore(this.element),this._hiddenInput.attr("data-role","none"),this._hiddenInput[0].tabIndex=this.element[0].tabIndex,this._hiddenInput.attr("accesskey",this.element[0].accessKey),this.element[0].accessKey="",this._hiddenInput.css("display","block"),this.element.css("display","none"),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel)),this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null==this.element.attr("name")&&this.element.attr("name",this.model.name),this.element.addClass("e-input"),t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value?("."==t.preferredCulture(this.model.locale).numberFormat[","]&&(this.element[0].value=this.element[0].value.replace(".",",")),this.model.value=this._checkNumValue(this.element[0].value)):("string"==typeof this.model.value&&"."==t.preferredCulture(this.model.locale).numberFormat[","]&&(this.model.value=this.model.value.replace(".",",")),this.model.value=this._checkNumValue(this.model.value)),this._hiddenInput.attr({value:this.model.value}).addClass("e-input"),this.element.attr({role:"spinbutton","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value,"aria-live":"assertive",value:this.model.value});var i=e('<span class="e-select"><span class="e-spin e-spin-up " role="button" "aria-label"="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" "aria-label"="Decrease Value" unselectable="on" /></span>');i.find(".e-spin-up").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"})),i.find(".e-spin-down").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"})),this.innerWrap.append(i),this.spin=this.wrapper.find(".e-select"),this.spinUp=this.wrapper.find(".e-spin-up"),this.spinDown=this.wrapper.find(".e-spin-down"),this._setWidth(this.model.width),this._setHeight(this.model.height),""!=this.model.cssClass&&this._setSkin(this.model.cssClass),this._showSpin(this.model.showSpinButton),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._enableRTL(this.model.enableRTL),this.model.readOnly&&this._setReadOnly(this.model.readOnly),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value,null===this.model.value?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1),this._checkErrorClass(),this._setWaterMark()},_showSpin:function(e){e?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(e){e&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(e){e?this.spin?this.wrapper.addClass("e-rtl"):this.element.addClass("e-rtl"):this.spin?this.wrapper.removeClass("e-rtl"):this.element.removeClass("e-rtl")},_setWidth:function(e){""!=e?this.wrapper.width(e):this.model.width=this.wrapper.outerWidth()},_setHeight:function(e){""!=e?this.wrapper.height(e):this.model.height=this.wrapper.outerHeight()},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setValue:function(e,t){this._isWatermark||this._hiddenSpan.css("display","none"),this.model.value=this._checkNumValue(e),this._validateMinMaxValue(!1),this._checkErrorClass(),this._localizedFormat(),this._raiseChangeEvent(t),this._setWaterMark()},_setLocalize:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];this.model.locale="en"==t.preferredCulture(e).name?"en-US":t.preferredCulture(e).name,this.model.groupSeparator=t.isNullOrUndefined(this._options.groupSeparator)&&i===this.model.groupSeparator?t.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._updateSymbol(this.model.locale),this._localizedFormat(),this._changeWatermark(this.model.watermarkText),value=t.isNullOrUndefined(this.model.value)?this.model.value:this.model.value.toString().indexOf("e")==-1?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(e){this._percentSymbol=t.preferredCulture(e).numberFormat.percent.symbol,this._currencySymbol=t.preferredCulture(e).numberFormat.currency.symbol},_setDecimal:function(e){this.model.decimalPlaces=e,this._localizedFormat()},_validateMinMaxValue:function(e,i){var s,n=!1;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue),!t.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,n=!0):!t.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,n=!0):this.isValidState=!0,this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue),n&&e&&(s=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(s),s=t.isNullOrUndefined(this.model.value)?this.model.value:this.model.value.toString().indexOf("e")==-1?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(s),this._localizedFormat(),this._raiseChangeEvent(i))},_convertToExponetial:function(e){var i,s,n,r="",o=e<0;for(e=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat,e=e.replace(".",s["."]),unformattedValue=e,n=null,"ej.NumericTextbox"===this.sfType?(i=o?s.pattern[0]:"n",e=o?e.replace("-",""):e,symbol=""):"ej.PercentageTextbox"===this.sfType?(i=o?s.percent.pattern[0]:s.percent.pattern[1],e=o?e.replace("-",""):e,symbol=s.percent.symbol):"ej.CurrencyTextbox"===this.sfType&&(i=o?s.currency.pattern[0]:s.currency.pattern[1],e=o?e.replace("-",""):e,symbol=s.currency.symbol),idx=0,n=i.length;idx<n;idx++)ch=i.charAt(idx),r+="n"===ch?e:"$"===ch||"%"===ch?symbol:ch;return{formattedValue:r,unformattedValue:unformattedValue}},_localizedFormat:function(){if(this.culture=t.preferredCulture(this.model.locale),t.isNullOrUndefined(this.model.value))return void(this._textBox.value="");if(this.model.value.toString().indexOf("e")==-1)this._textBox.value=this._removeSeparator(this.model.value),this._focused||""==this._textBox.value||(this._textBox.value=this._formatValue(this.model.value,"n",!0),"ej.PercentageTextbox"===this.sfType?this._appendPercentSymbol(this._textBox.value):"ej.CurrencyTextbox"===this.sfType&&this._appendCurrencySymbol(this._textBox.value));else{var e=this._convertToExponetial(this.model.value);this._textBox.value=e.unformattedValue,
this._focused||""==this._textBox.value||(this._textBox.value=e.formattedValue)}},_checkNumValue:function(e){return"string"==typeof e&&(e=this._changeSeparator?this._replaceSeparator(e,this.model.groupSeparator,t.preferredCulture(this.model.locale).numberFormat[","]):e),"string"!=typeof e||isNaN(this._parseValue(e))?"number"!=typeof e||isNaN(e)?null:e:(e=this._parseValue(e),parseFloat(e))},_setReadOnly:function(e){this.model.readOnly=e,e?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){null!=this._localizedLabels.watermarkText&&""===this._textBox.value&&""===e.trim(this._hiddenInput.val())&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",e),this.element.attr("placeholder",e)):this._hiddenSpan.text(e)},_setSelectionRange:function(e,t){function i(i){i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}var s,n,r=this._textBox;try{r.setSelectionRange?"edge"==this._browsername?setTimeout(function(){r.setSelectionRange(e,t)}):r.setSelectionRange(e,t):r.createTextRange&&(s=r.createTextRange(),i(s))}catch(e){n=this,window.setTimeout(function(){if(document.body.focus(),n._textBox.select(),document.selection){i(document.selection.createRange())}},1)}},_getSelection:function(e){if("number"!=this._textBox.type){var t=null;return document.selection?(t=document.selection.createRange(),""===t.text?t.text:this._removeFormats(t.text)):null==e?this.model.value:this._removeFormats(e.substring(this._textBox.selectionStart,this._textBox.selectionEnd))}},_caretPosition:function(){var e,t=this._textBox,i=0;if("number"!=t.type)return document.selection?(t.focus(),e=document.selection.createRange(),e.moveStart("character",-t.value.length),i=e.text.length):(t.selectionStart||"0"==t.selectionStart)&&(i=t.selectionEnd),i},_appendPercentSymbol:function(e){this._percentSymbol&&(e=e.replace(this._percentSymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e)/100,"p",!0)),this._percentSymbol=t.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(e){this._currencySymbol&&(e=e.replace(this._currencySymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e),"c",!0)),this._currencySymbol=t.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];return null!=e?"."==i?e.toString().replace(/["."]/g,""):e.toString().match(new RegExp(i,"g"))?e.toString().replace(new RegExp(i,"g"),""):e:null},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0,this.element[0].disabled=!1,this.element.prop("disabled",!1),this._hiddenInput.prop("disabled",!1),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable"),this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1,this.element[0].disabled=!0,this.element.attr("disabled","disabled"),this._hiddenInput.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable"),this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){this._on(this._hiddenInput,"focus",this._focusIn),this._on(this.element,"paste",this._paste),this._on(this.element,"blur",this._focusOut),this._on(this.element,"keydown",this._keyDown),this._on(this.element,"keypress",this._keyPress),this._on(this.element,"mousewheel",this._mouseWheel),this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(e){this[e](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick),this[e](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var e=!1,i=t.browserInfo();return"msie"==i.name&&"8.0"==i.version&&(e=!0),e},_spinUpClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinUp.addClass("e-animate"),this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active"),i=this,"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("increment")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_spinDownClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinDown.addClass("e-animate"),this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("decrement")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_mouseUpClick:function(e){e.stopPropagation(),clearTimeout(this._timeout),this._off(this.spinUp,"mouseleave",this._mouseUpClick),this._off(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.removeClass("e-active"),this.spinUp.removeClass("e-active")},_mouseWheel:function(e){if(e.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly){var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._updateInputField("increment"):t<0&&this._updateInputField("decrement"),this._cancelEvent(e)}},_numberValue:function(){var e=this._textBox.value;return"ej.NumericTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),"string"!=typeof e||isNaN(this._parseValue(e))?"":e},_formatValue:function(e,i,s){s&&this._updateCultureInfo();var e=t.format(e,i+this.model.decimalPlaces,this.model.locale);return s&&this._restCultureInfo(),e},_parseValue:function(e){this._updateCultureInfo();var e=t.parseFloat(e,this.model.locale);return this._restCultureInfo(),e},_initCustomValue:function(){var e,i="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";switch(i){case"percent":case"currency":e=this.culture.numberFormat[i],t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=e.pattern[1]),t.isNullOrUndefined(this._options.currencySymbol)&&"currency"==i&&(this.model.currencySymbol=e.symbol),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0]);break;case"numeric":e=this.culture.numberFormat,t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0])}},_updateCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t],this._oldNegativePattern=e.pattern[0],this._oldGroupSize=e.groupSizes[0],e.pattern[0]=this.model.negativePattern,e.groupSizes[0]=this.model.groupSize,"numeric"!=t&&(this._oldPositivePattern=e.pattern[1],e.pattern[1]=this.model.positivePattern),"currency"==t&&(this._oldcurrencySymbol=e.symbol,e.symbol=this.model.currencySymbol)},_restCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t],e.pattern[0]=this._oldNegativePattern,e.groupSizes[0]=this._oldGroupSize,"numeric"!=t&&(e.pattern[1]=this._oldPositivePattern),"currency"==t&&(e.symbol=this._oldcurrencySymbol)},_toggleTextbox:function(e){var t=this;t._hiddenInput.toggle(e),t.element.toggle(!e)},_paste:function(e){var i,s;window.clipboardData&&window.clipboardData.getData?i=window.clipboardData.getData("Text"):e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(i=e.originalEvent.clipboardData.getData("text/plain")),s=t.parseFloat(i,this.model.locale),isNaN(s)?this._cancelEvent(e):(this.element.val(s),this._cancelEvent(e))},_focusIn:function(){if(!this.model.readOnly){if(this._focused=!0,t.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),!this._error){if(""!=this._textBox.value){var e=this._formatValue(this._textBox.value,"n",!0);this._textBox.value=e,this._hiddenInput.val(e)}this._setSelectionRange(0,this._textBox.value.length)}this._trigger("focusIn",{value:this.model.value})}},_focusOut:function(){var e;this._focused=!1,this.wrapper.removeClass("e-focus"),this._error||(""!=this._textBox.value?(e=t.parseFloat(this._textBox.value,this.model.locale),e<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!0):e>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!0)),this.model.value=t.parseFloat(this._textBox.value,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()):(e=""==this._textBox.value?null:this._textBox.value,this.model.value=e,this._hiddenInput.val(e),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]),null===this.model.value||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),e=t.isNullOrUndefined(this.model.value)?this.model.value:this.model.value.toString().indexOf("e")==-1?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(e),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value})),this._checkErrorClass()},_cancelEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault(),!1},_updateInputField:function(i){var s,n,r;this.isValidState=!0,this._focused||e(this._hiddenInput[0]).focus(),s=this.model.incrementStep,this.model.value,""===this._textBox.value?(this._textBox.value=this._formatValue(this._startValue,"n",!0),s=0):this._textBox.value.indexOf(" ")>=0&&(this._textBox.value=this._textBox.value.replace(" ","")),"ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType?(n=this._textBox.value,r=n,n.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)>-1&&(r=n.substring(0,n.length-1)),this.model.value=this._parseValue(r)):"ej.NumericTextbox"==this.sfType&&(this.model.value=t.parseFloat(this._textBox.value,this.model.locale)),isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue),this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&(r="increment"==i?this.model.value+s:this.model.value-s)>=this.model.minValue&&r<=this.model.maxValue&&this._setValue(r),this._checkErrorClass()},_validateDecimal:function(e){var i=String.fromCharCode(e.keyCode);return i=188==e.keyCode?",":190==e.keyCode?".":110==e.keyCode?t.preferredCulture(this.model.locale).numberFormat["."]:i,t.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==i.charCodeAt(0)},_allowKeyCodes:function(e){for(var t=[38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67],i=0;i<t.length;i++)if(e.keyCode==t[i]||this._validateDecimal(e)&&0!=this.model.decimalPlaces)return!0;return!1},_raiseChangeEvent:function(e){var i,s=this.model.value;this._checkNumValue(this._preVal)!==this._checkNumValue(s)&&(this._preVal=s,this.model.value=this._checkNumValue(this._formatValue(this._preVal,"n",!1)),this._updateHiddenField(),t.isNullOrUndefined(this.model.value)?(i=this.model.value,this.wrapper.removeClass("e-valid")):(i=this.model.value.toString().indexOf("e")==-1?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.wrapper.addClass("e-valid")),this.element.val(i),this.element.attr("aria-valuenow",i),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!e}),this._trigger("change",{value:this.model.value,isInteraction:!e}))},_updateHiddenField:function(){var e=this._textBox;this._textBox=this._hiddenInput[0],this._localizedFormat(),this._textBox=e},_removeSeparator:function(e){if(!t.isNullOrUndefined(e)){var i,s;return e=this._checkNumValue(this._formatValue(e,"n",!1)),i=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat,i.replace(".",s["."])}},_updateSeparator:function(){if(this._changeSeparator&&this.model.value){var e;"ej.NumericTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value/100,"p",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"c",!0)),this._hiddenInput.val(this._replaceSeparator(e,t.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator))}},_replaceSeparator:function(e,i,s){var n,r,o=""===i?new RegExp("\\s","g"):new RegExp("\\"+i,"g");return this.model.groupSeparator==t.preferredCulture(this.model.locale).numberFormat["."]?(n=this.model.decimalPlaces,r=e.length-n-1,e.substring(0,r).replace(o,s)+e.substring(r,e.length)):e.replace(o,s)},_checkSeparator:function(e){this.model.groupSeparator=null!=e?this._validateSeparator(e):t.preferredCulture(this.model.locale).numberFormat[","],this._changeSeparator=t.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator,this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(e){var i=e.toString(),s=new RegExp("[a-zA-Z0-9]");return i=i.length>1?i[0]:i,s.test(i)?null!=this._prevSeparator?this._prevSeparator:t.preferredCulture(this.model.locale).numberFormat[","]:i},_keyPress:function(e){var i,s;if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&8!==e.keyCode&&13!==e.keyCode){var n=this,r=null;return cursor=this._caretPosition(),beforeCursor=this._textBox.value.toString().substring(0,cursor),afterCursor=this._textBox.value.toString().substring(cursor),numberFormat=t.preferredCulture(this.model.locale).numberFormat,i=String.fromCharCode(e.which),value=beforeCursor+i+afterCursor,s=numberFormat["."],s="."===s?"\\"+s:s,r=0===n.model.decimalPlaces?/^(-)?(\d*)$/:new RegExp("^(-)?(((\\d+("+s+"\\d*)?)|("+s+"\\d*)))?$"),!!r.test(value)&&void 0}},_validateDecimalOnType:function(e){var i,s,n,r,o,l;return i=this._caretPosition(),this._textBox.value.toString().substring(0,i),this._textBox.value.toString().substring(i),n=this._getSelection(this._textBox.value),o=t.preferredCulture(this.model.locale).numberFormat["."],r=t.isNullOrUndefined(this.model.value)?"":this.model.value.toString(),0!=this.model.decimalPlaces?(l=this._textBox.value.split(o)[1],s=r.indexOf(o)>0?r.substring(r.indexOf(o)+1,r.length).length>this.model.decimalPlaces||!!(0==n.length&&i>this._textBox.value.indexOf(o)&&l&&l.length>=this.model.decimalPlaces):!!(0==n.length&&i>this._textBox.value.indexOf(o)&&l&&l.length>=this.model.decimalPlaces)):s=!1,s?(this._keypressFlag=!1,this._cancelEvent(e),!1):void 0},_keyDown:function(s){var n,r,o,l,a,d,h,c;if(!this.model.readOnly)if(this._CurrentCultureInfo=JSON.parse(JSON.stringify(t.preferredCulture())),s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||this._allowKeyCodes(s)){if(s.shiftKey&&(35==s.keyCode||36==s.keyCode||37==s.keyCode||39==s.keyCode||46==s.keyCode||127==s.keyCode)||s.ctrlKey&&(86==s.keyCode||118==s.keyCode||67==s.keyCode||88==s.keyCode))return!0;if(1==s.ctrlKey&&9!=s.keyCode&&17!=s.keyCode&&86!=s.keyCode&&67!=s.keyCode||67==s.keyCode||86==s.keyCode||88==s.keyCode)return this._keypressFlag=!1,this._cancelEvent(s),!1;if((s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||110==s.keyCode)&&(n=this._caretPosition(),this._textBox.value.toString().substring(0,n),this._textBox.value.toString().substring(n),o=this._getSelection(this._textBox.value),s.keyCode>=96&&s.keyCode<=105&&(s.keyCode-=48),this.model.validateOnType&&this._validateDecimalOnType(s),this._validateOnType)){var u=t.preferredCulture(this.model.locale).numberFormat["."],p=this.model.value.toString(),m=p.indexOf(u),g=this.model.value,f=this.model.minValue.toFixed(this.model.decimalPlaces),_=this.model.maxValue.toFixed(this.model.decimalPlaces),v=!1;if((f.toString().indexOf("e")>0||_.toString().indexOf("e")>0)&&(v=!0),v)0!=this.model.decimalPlaces?(l=this._textBox.value.split(".")[1],r=p.indexOf(u)>0||Number(p)<Number(f)||Number(p)>Number(_)?p.substring(p.indexOf(u)+1,p.length).length>this.model.decimalPlaces||!!(0==o.length&&n>this._textBox.value.indexOf(u)&&l&&l.length>=this.model.decimalPlaces):!!(0==o.length&&n>this._textBox.value.indexOf(u)&&l&&l.length>=this.model.decimalPlaces)):r=!1;else if("."!=u&&(p=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(f=this.model.minValue.toString().replace(/["."]/g,u)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(_=this.model.maxValue.toString().replace(/["."]/g,u))),d=f.toString().indexOf(u)>0?Number(f.toString().substring(0,f.toString().indexOf(u))):this.model.minValue,h=_.toString().indexOf(u)>0?Number(_.toString().toString().substring(0,_.toString().indexOf(u))):this.model.maxValue,m>0){g=Number(p.substring(p.indexOf(u)+1,p.toString().length)),d=f.toString().indexOf(u)>0?Number(f.toString().substring(f.toString().indexOf(u)+1,f.toString().length)):0,h=_.toString().indexOf(u)>0?Number(_.toString().substring(_.toString().indexOf(u)+1,_.toString().length)):0;var b=Number(p.substring(0,p.indexOf(u))),y=Number(f.toString().substring(0,f.toString().indexOf(u))),w=Number(_.toString().substring(0,_.toString().indexOf(u)));r=!this._validateValue(g,d,h,!0,b,y,w)}else r=!this._validateValue(g,d,h,!1);if(r)return this._keypressFlag=!1,this._cancelEvent(s),!1}if(38==s.keyCode&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(s)),40==s.keyCode&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(s)),8==s.keyCode&&(n=this._caretPosition(),this._textBox.value.substring(0,n),this._textBox.value.substring(n),o=this._getSelection(this._textBox.value)),(46==s.keyCode||127==s.keyCode)&&(n=this._caretPosition(),this._textBox.value.substring(0,n),this._textBox.value.substring(n),o=this._getSelection(this._textBox.value)),this._validateDecimal(s)&&0!=this.model.decimalPlaces&&46!=s.keyCode){if(a=t.preferredCulture(this.model.locale).numberFormat["."],c=this._textBox.value.split(a),c[1]==i){var C=this._caretPosition(),x=c[0].substring(0,C),S=c[0].substring(C);if((this.model.minValue.toString().indexOf("e")>0||this.model.maxValue.toString().indexOf("e")>0)&&(v=!0),S.length>this.model.decimalPlaces&&1==this.model.validateOnType)return this._keypressFlag=!1,this._cancelEvent(s),!1;if(this._validateOnType&&!v){if(this.model.minValue.toString().match(new RegExp(".","g"))&&(d=this.model.minValue.toString().replace(/["."]/g,a)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(h=this.model.maxValue.toString().replace(/["."]/g,a)),d=d.indexOf(a)>0?Number(d.substring(0,d.indexOf(a))):Number(d),h=h.indexOf(a)>0?Number(h.substring(0,h.indexOf(a))):Number(h),!this._validateValue(this.model.value,d,h,"DecimalKeyPressed"))return this._keypressFlag=!1,this._cancelEvent(s),!1;this._textBox.value=x+a+S}else this._textBox.value=x+a+S;this._setSelectionRange(C+1,C+1)}this._cancelEvent(s)}else(190==s.keyCode||110==s.keyCode)&&this._cancelEvent(s);(109==s.keyCode||189==s.keyCode||173==s.keyCode)&&(0!=this._caretPosition()&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||this.model.minValue>=0&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&""===this._getSelection(this._textBox.value)?this._cancelEvent(s):this._getSelection()==this.model.value&&(this.model.value=null)),13==s.keyCode&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(27!=s.keyCode&&!s.ctrlKey||s.ctrlKey&&90==s.keyCode&&""===e.trim(this._textBox.value))&&(this._keypressFlag=!1,this._cancelEvent(s))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.NumericTextbox.Locale=t.NumericTextbox.Locale||{},t.NumericTextbox.Locale.default=t.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.PercentageTextbox.Locale=t.PercentageTextbox.Locale||{},t.PercentageTextbox.Locale.default=t.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.CurrencyTextbox.Locale=t.CurrencyTextbox.Locale||{},t.CurrencyTextbox.Locale.default=t.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.pager.min",["./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget("ejPager","ej.Pager",{_rootCSS:"e-pager",validTags:["div"],defaults:{pageSize:12,pageCount:10,currentPage:1,enableExternalMessage:!1,externalMessage:"",enableQueryString:!1,locale:"en-US",masterObject:null,click:null,enableRTL:!1,totalRecordsCount:null,totalPages:null,customText:"",showPageInfo:!0},_init:function(){this._initPrivateProperties(),this.model.enableQueryString&&this._queryStringValue(),this.renderPager(),this._wireEvents()},_initPrivateProperties:function(){this._links=[],this._$prev=null,this._$first=null,this._$PP=null,this._$NP=null,this._lastNP=!1,this._lastpageCount=null,this._$last=null,this._$next=null,this._prevPageNo=null,this.localizedLabels=this._getLocalizedLabels()},_wireEvents:function(){this.model.click!=i&&this._on(this.element,"click",this._pagerClickHandler)},renderPager:function(){var e=t.buildTag("div.e-pagercontainer","",{},{unselectable:"on"});this._renderPagerContainer(e),this.element[0].appendChild(e[0]),this._pageInfo(),this.model.enableExternalMessage&&this._renderPagerMessage()},_queryStringValue:function(){var e=new RegExp("[\\?&]page=([^&#]*)").exec(window.location.href);this.model.currentPage=e?parseInt(e[1]||1):1},_renderPagerMessage:function(){var e=t.buildTag("div.e-pagermessage");this.model.externalMessage.toString().length?e.html(this.model.externalMessage):e.hide(),this.element.append(e)},_renderPagerContainer:function(e){this._renderBackwardButton(e),this._renderpreviousPager(e),this._renderNumericItem(e),this._renderForwardPager(e),this._renderForwardButton(e)},_renderMsgBar:function(){var e=t.buildTag("span.e-pagermsg",String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0));this._parentMsgBar.appendChild(e[0]),this._parentMsgBar.style.textAlign=t.TextAlign.Right},_renderpreviousPager:function(e){this._$PP=t.buildTag("a.e-link e-nextprevitemdisabled e-disable e-spacing e-PP","...",{},{title:this.localizedLabels.previousPagerTooltip,role:"link"}),e.append(this._$PP)},_renderForwardPager:function(e){this._$NP=t.buildTag("a.e-link e-NP e-numericitem e-spacing e-default","...",{},{title:this.localizedLabels.nextPagerTooltip,role:"link"}),e.append(this._$NP)},_renderBackwardButton:function(e){this._$first=t.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.firstPageTooltip}),this._$prev=t.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.previousPageTooltip}),e.append(this._$first),e.append(this._$prev)},_renderNumericItem:function(e){var i=t.buildTag("div.e-numericcontainer e-default","",{},{unselectable:"on"});this._renderNumericLinks(i,this.model.pageCount),e.append(i)},_renderNumericLinks:function(e){var i,s;for(e.empty(),i=1;i<=this.model.pageCount;i++)s=t.buildTag("a.e-link",this.model.customText+i,{},{role:"link"}).addClass("e-numericitem e-spacing e-default").data("index",i),i==this.model.currentPage&&s.removeClass("e-default").addClass("e-currentitem e-active"),e.append(s);this._links=e.children()},_renderForwardButton:function(e){this._$next=t.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{unselectable:"on",title:this.localizedLabels.nextPageTooltip}),this._$last=t.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{unselectable:"on",title:this.localizedLabels.lastPageTooltip}),e.append(this._$next),e.append(this._$last)},_applyCss:function(){this.model.currentPage>1?(this._$prev.removeClass("e-prevpagedisabled").removeClass("e-disable").addClass("e-prevpage e-default"),this._$first.removeClass("e-firstpagedisabled").removeClass("e-disable").addClass("e-firstpage e-default")):(this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default")),this.model.currentPage>this.model.pageCount?this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastNP=!!(this._links.length&&parseInt(this._links[0].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>this.model.totalPages),0==this._lastNP?this._$NP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastpageCount=this.model.totalPages%this.model.pageCount,0==this._lastpageCount&&(this._lastpageCount=this.model.pageCount),this.model.currentPage>this.model.totalPages-this._LastpageCount&&(this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this.model.currentPage==this.model.totalPages||0==this.model.totalRecordsCount?(this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")):(this._$last.addClass("e-lastpage e-default").removeClass("e-lastpagedisabled").removeClass("e-disable"),this._$next.addClass("e-nextpage e-default").removeClass("e-nextpagedisabled").removeClass("e-disable")),this._links.length&&(this._links.removeClass("e-currentitem").removeClass("e-active").addClass("e-default"),e(this._links[(this.model.currentPage-1)%this.model.pageCount]).removeClass("e-default").addClass("e-currentitem e-active"),e(this._links[(this._prevPageNo-1)%this.model.pageCount]).removeClass("e-default").addClass("e-numericitem")),this.model.pageSize>=this.model.totalRecordsCount/this.model.pageCount&&null!=this._$PP&&0!=this._$PP.length&&(this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"))},_SetTotalPages:function(){this.model.totalPages=this.model.totalRecordsCount%this.model.pageSize==0?this.model.totalRecordsCount/this.model.pageSize:parseInt(this.model.totalRecordsCount/this.model.pageSize,10)+1},_refreshNumericItem:function(){var t,i,s;if(0!=this._links.length&&null!=this._links)for(this.model.currentPage=1==this.model.totalPages?1:this.model.currentPage,this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages),t=parseInt(this.model.currentPage/this.model.pageCount,10),this.model.currentPage%this.model.pageCount==0&&t>0&&(t-=1),this._links.css("display","none"),i=0;i<this.model.pageCount;i++)(s=t*this.model.pageCount+1+i)<=this.model.totalPages&&(this._links[i].style.display="",e(this._links[i]).data("index",s),e(this._links[i]).html(this.model.customText+s))},_refreshPagerInfo:function(){0==this.model.totalRecordsCount&&(this.model.currentPage=0),this.element.find(".e-pagermsg").text(String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0))},_refreshExternalMessage:function(){this.model.externalMessage.toString().length?this.element.find(".e-pagermessage").empty().html(this.model.externalMessage).show():this.element.find(".e-pagermessage").hide()},refreshPager:function(){this._SetTotalPages(),this._refreshNumericItem(),this._refreshPagerInfo(),this._applyCss(),this.model.enableExternalMessage&&this._refreshExternalMessage(),this.model.enableRTL?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_kDownHandler:function(e){var t;if(t=e.keyCode?e.keyCode:e.which?e.which:e.charCode,e.target=null,this.model.masterObject.checkKey("firstPage",t,e))e.target=this._$first;else if(this.model.masterObject.checkKey("previousPager",t,e))e.target=this._$PP;else if(this.model.masterObject.checkKey("previousPage",t,e))e.target=this._$prev;else if(this.model.masterObject.checkKey("lastPage",t,e))e.target=this._$last;else if(this.model.masterObject.checkKey("nextPager",t,e))e.target=this._$NP;else{if(!this.model.masterObject.checkKey("nextPage",t,e))return!1;e.target=this._$next}this._pagerClickHandler(e)},_pageInfo:function(){this.model.showPageInfo&&!this._parentMsgBar?(this._parentMsgBar=document.createElement("div"),this._parentMsgBar.className+="e-parentmsgbar",this._renderMsgBar(),this.element[0].appendChild(this._parentMsgBar),
this.element[0].className+=this.model.enableRTL?" e-pager e-rtl":" e-pager"):(this._parentMsgBar&&this._parentMsgBar.remove(),this._parentMsgbar=null)},_doClickAnimation:function(t){var s=e(t.target);s!=i&&t.type!=i&&s.addClass("e-animate")},_pagerClickHandler:function(t){this._prevPageNo=this.model.currentPage;var s=e(t.target);return this.element.find(".e-animate").removeClass("e-animate"),this._doClickAnimation(t),e.inArray(t.target,this._links)!=-1?this.model.currentPage=parseInt(e(t.target).data("index"),10):s.hasClass("e-nextpage")&&1!=s.hasClass("e-nextpagedisabled")?this.model.currentPage%this.model.pageCount==0?(this.model.currentPage++,this._links!=i&&0!=this._links.length&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML,10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0)):this.model.currentPage++:s.hasClass("e-prevpage")&&1!=s.hasClass("e-prevpagedisabled")?(this.model.currentPage%this.model.pageCount==1&&(this._lastNP=!1),--this.model.currentPage<0&&(this.model.currentPage=0)):s.hasClass("e-lastpage")&&1!=s.hasClass("e-lastpagedisabled")?(this._LastpageCount=this.model.totalPages%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this.model.currentPage=this.model.totalPages,this._lastNP=!0):s.hasClass("e-firstpage")&&1!=s.hasClass("e-firstpagedisabled")?(this.model.currentPage=1,this._lastNP=!1):s.hasClass("e-NP")&&1!=s.hasClass("e-nextprevitemdisabled")?(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0,this._LastpageCount=this.model.totalRecordsCount-this.model.pageSize<this.model.pageSize?this.model.totalRecordsCount-this.model.pageSize:this.model.totalRecordsCount/this.model.pageSize%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this._links!=i&&(this.model.currentPage=parseInt(e(this._links[this.model.pageCount-1]).data("index"),10)+1))):s.hasClass("e-PP")&&1!=s.hasClass("e-nextprevitemdisabled")&&(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)-this.model.pageCount),this._lastNP=!1),this.goToPage(this.model.currentPage,t),!1},goToPage:function(e,t){e!=this.model.currentPage&&(this._prevPageNo=this.model.currentPage),this._prevPageNo!==e&&e>=1&&e<=this.model.totalPages?(this.model.currentPage=e,this.model.enableQueryString&&this._updateQueryString(this.model.currentPage),this._trigger("click",{currentPage:e,event:t})):this._trigger("click",{currentPage:e,event:t})},_updateQueryString:function(e){var t=this._getUpdatedURL(window.location.href,"page",e);history.pushState?window.history.pushState({path:t},"",t):window.location.href=t},_getUpdatedURL:function(e,t,i){var s,n,r=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");return e.match(r)?e.replace(r,"$1"+t+"="+i+"$2"):(s="",n=e.indexOf("?")!==-1?"&":"?",e.indexOf("#")!==-1&&(s=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+n+t+"="+i+s)},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_setFirst:!0,_setModel:function(e){for(var t in e)switch(t){case"pageCount":this._renderNumericLinks(this.element.find(".e-numericcontainer"));break;case"enableExternalMessage":this._renderPagerMessage();break;case"showPageInfo":this._pageInfo()}this.refreshPager()},_destroy:function(){this.element.empty().removeClass("e-pager")}}),t.Pager.Locale=t.Pager.Locale||{},t.Pager.Locale.default=t.Pager.Locale["en-US"]={pagerInfo:"{0} of {1} pages ({2} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.toolbar.min",["./../common/ej.core.min","./../common/ej.data.min","./ej.tooltip.min"],e):e()}(function(){!function(e,t){t.widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,disabledItemIndices:[],enabledItemIndices:[],enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,Items:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template"},query:null,responsiveType:"popup",fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template"},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5},adjust:{xValue:17,yValue:17}},isBalloon:!1},cssClass:"",targetID:null,create:null,click:null,itemHover:null,itemLeave:null,overflowOpen:null,overflowClose:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",disabledItemIndices:"data",enabledItemIndices:"data",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data",targetID:"string",responsiveType:"enum"},hide:function(){if(!this.model.enabled&&"none"==this.element.css("display"))return!1;this.element.css("display","none"),this.model.hide=!0},show:function(){if(!this.model.enabled&&"none"!=this.element.css("display"))return!1;this.element.css("display","block"),this.model.hide=!1},_init:function(){null!=this.model.targetID&&this.element.html(e("#"+this.model.targetID).find("ul,ol")),this._cloneElement=e(this.element).clone(),this._localDataSource=null,null!=this.model.dataSource?this._generateTemplate():null!=this.model.Items&&this._generateTemplate(),this.model.dataSource instanceof t.DataManager||this._initialize(),this._renderTooltip(this.model.tooltipSettings)},_setModel:function(t){for(var i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this.model.width=t[i],this._setWidth(),this._bindUnbindWidth();break;case"enabled":this._controlStatus(t[i]);break;case"disabledItemIndices":this._disableItemByIndex(t[i]),t[i]=this.model.disabledItemIndices;break;case"enabledItemIndices":this._enableItemByIndex(t[i]);break;case"isResponsive":this.model.isResponsive=t[i],this.model.isResponsive?(this._responsiveLayout(),this._renderTooltip(this.model.tooltipSettings)):this._removeResponsive();break;case"hide":this._controlVisibleOptions(t[i]);break;case"orientation":this._setOrientation(t[i]),this.model.orientation=t[i],this._wireResizing();break;case"tooltipSettings":this.model.tooltipSettings=e.extend(!0,this.model.tooltipSettings,t[i]),this._renderTooltip(this.model.tooltipSettings);break;case"enableRTL":this._enableRTL(t[i]);break;case"showRoundedCorner":this._roundedCorner(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableSeparator":this.model.enableSeparator=t[i],this._renderToolbarSeparator();break;case"fields":e.extend(this.model.fields,t[i]);break;case"query":this.model.query=t[i];break;case"dataSource":for(optio in t)"fields"==optio&&e.extend(this.model.fields,t[optio]),"query"==optio&&(this.model.query=t[optio]);this._refreshTagItems(i,t[i]);break;case"Items":e.extend(this.model.Items,t[i]),this._refreshTagItems(i,t[i]);break;case"targetID":this.model.targetID=t[i],this._setTargetID()}},_setTargetID:function(){this.element.removeAttr("role tabindex aria-disabled style"),e(this._spantag).remove(),e(this._liTemplte).remove(),this._liTemplte=this._tipRes=null,this.element.removeClass("e-widget e-box e-toolbarspan e-rtl"),this.element.find("ul,ol").removeClass("e-ul e-horizontal e-vertical e-separator e-comnrtl"),this.element.find("li").removeClass("e-tooltxt e-comnrtl"),this.element.find("li").removeAttr("aria-label"),this._init()},_refreshTagItems:function(e,t){this.model[e]=t,this.element.empty(),this._generateTemplate(),this._initialize()},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(){var t,i;if("auto"==this.model.width){var s,n=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),r=this.element.find("ul").children("li"),o=this.element.find("ul");for(s="inline"==this.model.responsiveType?this.element.find(".e-arrowhead-up"):this.element.find(".e-toolbar-res-arrow"),t=0,i=o.length;t<i;t++)null!=o[t]&&e(o[t]).hasClass("e-separator")&&(n+=parseFloat(o.eq(t).css("border-right-width"))+parseFloat(o.eq(t).css("border-left-width")));for(null!=s[0]&&(n+="inline"==this.model.responsiveType?Math.round(this.element.find(".e-arrowhead-up").outerWidth())+8:Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8),t=0,i=r.length;t<i;t++)null!=r[t]&&(n+=Math.round(r.eq(t).outerWidth()));this.element.css("width",Math.ceil(n))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){"auto"!=this.model.width?this._off(e(window),"resize",this._widthHandler):this._on(e(window),"resize",this._widthHandler)},_widthHandler:function(){this._setWidth(this.model.width)},_setOrientation:function(e){e!=t.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical")),this.items.addClass("e-tooltxt")},_reSizeHandler:function(){this._isResized&&this._liTemplte.children().length>0&&(e(this.element).append(this._liTemplte.children()),this._renderToolbarSeparator(),this._liTemplte.addClass("e-display-none"),this._contstatus=!1),this._elementWidth="function"==typeof getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth,this._spantag.removeClass("e-display-block").addClass("e-display-none");for(var t=0;t<this.itemsContainer.length;t++)this._liWidth+=e(this.itemsContainer[t]).outerWidth(!0)+8,this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.addClass("e-normal"),this._liTemplte.append(this.itemsContainer[t]));"inline"==this.model.responsiveType&&(this._liTemplte.removeClass("e-normal"),this._liTemplte.css("width",this.element.width())),this._isResized=!0},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_getOffset:function(e){return t.util.getOffset(e)},_btnMouseClick:function(i){var s,n,r,o,l=this.element.outerWidth(),a=this.element.outerHeight(),d=e(this._liTemplte).outerWidth(),h=e(window).width(),c=e(window).scrollLeft();e(i.currentTarget).hasClass("e-disable")||(maxZ=this._getZindexPartial(),n=this._getOffset(this.element),r=this.model.enableRTL?n.left:n.left+l-d,o=n.top+a-1+2,r=r<c?c+1:r+d>h+c?h-d+c-1:r,this._contstatus?(this._liTemplte.addClass("e-display-none"),"inline"==this.model.responsiveType&&this._spantag.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._contstatus=!1,s={currentTarget:i.currentTarget,clientX:i.clientX,clientY:i.clientY,cancel:i.cancellable},this._trigger("overflowClose",s)):(this._liTemplte.removeClass("e-display-none").css({top:o+"px",left:r+"px","z-index":maxZ}),"inline"==this.model.responsiveType&&this._spantag.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._contstatus=!0,s={currentTarget:i.currentTarget,clientX:i.clientX,clientY:i.clientY,cancel:i.cancellable},this._trigger("overflowOpen",s),this._on(t.getScrollableParents(this.element),"scroll",this._hidecontext),this.element.bind("click",e.proxy(this._hidecontext,this))),this._contstatus&&"inline"!=this.model.responsiveType&&this._on(e(document),"mouseup",this._documentClick),this._contstatus||this._off(e(document),"mouseup",this._documentClick),this._removeListHover())},_hidecontext:function(i){e(i.target).is(e("#"+this.element[0].id+"_target"))||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",e.proxy(this._hidecontext,this)),this._off(t.getScrollableParents(this.element),"scroll",this._hidecontext),this._off(e(document),"mouseup",this._documentClick))},_documentClick:function(t){if(!e(t.target).is(e("#"+this.element[0].id+"_target"))&&0==e(t.target).closest("div#"+this.element[0].id+"_hiddenlist").length&&!e(t.target).parents().hasClass("e-ddl-popup")){this._liTemplte.addClass("e-display-none"),this._contstatus=!1;var i={currentTarget:t.currentTarget,clientX:t.clientX,clientY:t.clientY,cancel:t.cancellable};this._trigger("overflowClose",i),this._off(e(document),"mouseup",this._documentClick)}},_setSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e);var t="e-toolbarTooltip "+e;this._subControlsSetModel("cssClass",t)},_subControlsSetModel:function(i,s){t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("option",i,s),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("option",i,s)},_destroy:function(){this.element.html(""),t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("destroy"),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy"),this._cloneElement.removeClass("e-toolbar e-js"),this.element.replaceWith(this._cloneElement),this._liTemplte&&this._liTemplte.remove(),this._unWireResizing()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"});this.element.children().find("li");this._focusEnable=!0,this._renderControl(),this._responsiveLayout(),this._wireEvents()},_responsiveLayout:function(){this._roundedCorner(this.model.showRoundedCorner),this.model.isResponsive&&"horizontal"==this.model.orientation&&(t.isNullOrUndefined(this._liTemplte)||(t.isNullOrUndefined(this._tipRes)||this._tipRes.destroy(),e(this._liTemplte).remove()),this._spantag=e("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block' unselectable='on'></span>"),"inline"==this.model.responsiveType&&(this._spantag.removeClass("e-toolbar-res-arrow").addClass("e-arrowhead-up"),this._spantag.css("margin-top","5px")),this._spantag.appendTo(this.element),this._spanWidth=this._spantag.outerWidth(!0)+8,this._liTemplte=e("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+e(this.element)[0].className+"'></div>"),this.model.enableRTL&&this._liTemplte.addClass("e-rtl"),this._isResized=!1,this._reSizeHandler(),"inline"==this.model.responsiveType?e(this.element[0]).append(this._liTemplte):e("body").append(this._liTemplte),this._renderTooltip(this.model.tooltipSettings)),this._on(e("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick),this._wireResizing(),this._controlVisibleOptions(this.model.hide),this._enableRTL(this.model.enableRTL),this._disabledItems=this.model.disabledItemIndices,this._controlStatus(this.model.enabled),this.model.disabledItemIndices=this._disabledItems,0!=this.model.disabledItemIndices.length&&this._disableItemByIndex(this.model.disabledItemIndices),0!=this.model.enabledItemIndices.length&&this._enableItemByIndex(this.model.enabledItemIndices),this._setWidth()},_removeResponsive:function(){e(this._spantag).remove(),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy");var i=e(this._liTemplte).children("ul");e(this._liTemplte).detach(),e(this.element).append(i),this.itemsContainer=this.element.children("ol,ul"),this.items=this.itemsContainer.children("li"),this._off(this.items,"mouseup"),this._off(this.items,"mousedown"),this._off(this.element),this._wireEvents(),this._wireResizing(),this._setWidth()},_controlVisibleOptions:function(e){0!=e?this.hide():this.show()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_roundedCorner:function(e){e?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner")),this._subControlsSetModel("showRoundedCorner",e)},_generateTemplate:function(){var e,i=this;this.element.css("visibility","hidden"),this.model.dataSource instanceof t.DataManager?(e=this.model.dataSource.executeQuery(this.model.query),e.done(function(e){i._generateGroup(e.result),i._initialize(),i.element.css("visibility","visible")})):null!=this.model.dataSource?(i._generateGroup(i.model.dataSource),i.element.css("visibility","visible")):(i._generateGroup(i.model.Items),i.element.css("visibility","visible"))},_generateGroup:function(e){var t,i,s,n,r,o=this;for(this._localDataSource=e,t=-1,i=[],s=0;s<e.length;s++)if(this._isNewGroup(e[s][this.model.fields.group],i)){for(i[++t]=e[s][this.model.fields.group],n=-1,o.itemsSource=[],r=s;r<e.length;r++)e[s][this.model.fields.group]==e[r][this.model.fields.group]&&(o.itemsSource[++n]=e[r]);o.element.append(o._generateTagitems())}},_isNewGroup:function(e,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(e==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box"),this._renderToolbarItems(),this._addAttr(this.model.htmlAttributes),this._setOrientation(this.model.orientation),this._renderToolbarSeparator(),this._setHeight(this.model.height),this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0],this.itemsContainer=this.element.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)t.isNullOrUndefined(e(this.items[i]).attr("title"))&&e(this.items[i]).attr("aria-label",this.items[i].id);this._liCount=this.items.length},_generateTagitems:function(){var e,i;for(e=this.itemsSource,this.ultag=t.buildTag("ul"),i=0;i<e.length;i++)this.ultag.append(this._generateLi(e[i]));return this.ultag},_generateLi:function(e){var i,s,n;return i=t.buildTag("li"),e[this.model.fields.id]?i.attr("id",e[this.model.fields.id]):e[this.model.fields.text]&&i.attr("id",e[this.model.fields.text]),e[this.model.fields.tooltipText]&&i.attr("title",e[this.model.fields.tooltipText]),e[this.model.fields.imageUrl]&&""!=e[this.model.fields.imageUrl]&&(s=t.buildTag("img.e-align","",{},{src:e[this.model.fields.imageUrl],alt:e[this.model.fields.text]}),e[this.model.fields.imageAttributes]&&this._setAttributes(e[this.model.fields.imageAttributes],s),i.append(s)),e[this.model.fields.spriteCssClass]&&""!=e[this.model.fields.spriteCssClass]&&(n=t.buildTag("div.e-align "+e[this.model.fields.spriteCssClass]+" e-spriteimg"),i.append(n)),e[this.model.fields.text]&&""!=e[this.model.fields.text]&&i.append(e[this.model.fields.text]),e[this.model.fields.htmlAttributes]&&this._setAttributes(e[this.model.fields.htmlAttributes],i),e[this.model.fields.template]&&(n=t.buildTag("div .e-align",e[this.model.fields.template]),i.append(n)),i},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_renderToolbarSeparator:function(){var t,i;if(this.model.enableSeparator){for(t=0,i=this.itemsContainer.length-1;t<i;t++)e(this.itemsContainer[t]).addClass("e-separator");if(1==this.itemsContainer.length)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==i-1?e(this.itemsContainer[0].children[t]).removeClass("e-separator"):e(this.itemsContainer[0].children[t]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_enableRTL:function(e){e?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl")),this.model.enableRTL=e,this._subControlsSetModel("enableRTL",e),this._renderToolbarSeparator()},_renderTooltip:function(i){var s=e.extend(!0,{},i);s.cssClass=t.isNullOrUndefined(s.cssClass)?"e-toolbarTooltip "+this.model.cssClass:s.cssClass+" e-toolbarTooltip "+this.model.cssClass,s.enableRTL=this.model.enableRTL,s.showRoundedCorner=this.model.showRoundedCorner,s.target="li[data-content], li[title]",s.beforeOpen=this._showTooltip,this._tipToolbar=e(this.target).ejTooltip(s).data("ejTooltip"),this.model.isResponsive&&!t.isNullOrUndefined(this._liTemplte)&&(this._tipRes=e(this._liTemplte).ejTooltip(s).data("ejTooltip"))},_showTooltip:function(t){var i=e(t.event.currentTarget);t.event.target;i.hasClass("e-disable")&&(t.cancel=!0)},_hideTooltip:function(){t.isNullOrUndefined(this._tipToolbar)||(this._tipToolbar.hide(),this._tipToolbar._isHidden=!1),t.isNullOrUndefined(this._tipRes)||(this._tipRes.hide(),this._tipRes._isHidden=!1)},_addOverlay:function(i){for(var s,n=0;n<i.length;n++)e(i[n]).hasClass("e-disable")||(e(i[n]).addClass("e-disable"),s=t.buildTag("div.e-item-overlay"),e(i[n]).append(s))},_removeOverlay:function(t){for(var i=0;i<t.length;i++)e(t[i]).children(".e-item-overlay").remove()},disableItem:function(t){var i=e(t);null==i||i.length<=0||(i.hasClass("e-disable")||(i.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(i)),i.removeClass("e-hover e-active").attr("aria-selected",!1))},enableItem:function(t){var i=e(t);null==i||i.length<=0||(i.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(i))},disableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.disableItem(t)},enableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.enableItem(t)},_enableItemByIndex:function(t){var i,s;if(!this.model.enabled)return!1;if(0!=t.length)for(s=0;s<t.length;s++)e.inArray(t[s],this.model.disabledItemIndices)>-1&&(i=e.inArray(t[s],this.model.disabledItemIndices),this.enableItem(this.items[this.model.disabledItemIndices[i]]),this.model.disabledItemIndices.splice(i,1))},_disableItemByIndex:function(t){var i;if(!this.model.enabled)return!1;for(this._disabledItems=this.model.disabledItemIndices,i=0;i<t.length;i++)e.inArray(t[i],this.model.disabledItemIndices)<0&&this._disabledItems.push(parseInt(t[i]));for(i=0;i<this.items.length;i++)e.inArray(i,this.model.disabledItemIndices)>-1&&this.disableItem(this.items[i]);this.model.disabledItemIndices=this._disabledItems},disable:function(){if("true"==this.element.attr("aria-disabled"))return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(this.items),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.addClass("e-disable"),this.model.enabled=!1,this._subControlsSetModel("enabled",!1)},enable:function(){if(this.model.disabledItemIndices=[],"false"==this.element.attr("aria-disabled"))return!1;this.items.removeClass("e-disable"),this._removeOverlay(this.items),this.element.attr("aria-disabled",!1),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.removeClass("e-disable"),this.model.enabled=!0,this._subControlsSetModel("enabled",!0)},selectItem:function(t){var i=e(t);null==i||i.length<=0||(i.addClass("e-active").attr("aria-selected",!0),this._activeItem=e(this.items).index(i))},deselectItem:function(t){var i=e(t);null==i||i.length<=0||i.removeClass("e-active").attr("aria-selected",!1)},selectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.selectItem(t)},deselectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.deselectItem(t)},removeItem:function(t){var i,s,n;if(this.model.disabledItemIndices=[],i=e(t),s=0,null!=i&&!(i.length<=0))for(i.remove(),this.items=this.itemsContainer.children("li"),n=0;n<this.items.length;n++)e(this.items[n]).hasClass("e-disable")&&(this.model.disabledItemIndices[s++]=n)},removeItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.removeItem(t)},_wireResizing:function(){this.model.isResponsive&&"horizontal"==this.model.orientation?e(window).bind("resize",e.proxy(this._reSizeHandler,this)):this._unWireResizing()},_unWireResizing:function(){e(window).unbind("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler),this._on(this.element,"focus",this._focusElement),this._on(this.element,"blur",this._targetBlur),this._on(this.items,"mouseenter",this._onItemHover),this._on(this.items,"mouseleave",this._onItemLeave),this._on(this.items,"mousedown",this._onItemClick),this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this.items.removeClass("e-hover"),i.addClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemHover",args))},_onItemClick:function(t){if(e(t.currentTarget).hasClass("e-disable")||1!=t.which)return!1;var i=t.currentTarget,s=t.target;this._hideTooltip(),"mousedown"==t.type?(this._focusEnable=!1,e(i).addClass("e-active"),this._focusedItem=this._currentItem=e(i)):"mouseup"==t.type&&(this._removeSelection(),e(i).hasClass("e-disable")||(args={currentTarget:i,text:e(i).attr("data-content"),target:s,status:this.model.enabled,event:t},this._activeItem=this.model.isResponsive&&this._contstatus&&e(i).closest(".e-responsive-toolbar").length>0?this._liTemplte.find(".e-tooltxt").index(i):e(this.items).index(i),this._trigger("click",args)))},_onItemLeave:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this._removeSelection(),i.removeClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemLeave",args))},_onKeyPress:function(i){var s,n,r,o;if(s=i.keyCode?i.keyCode:i.which?i.which:i.charCode,this.model.isResponsive&&this._liTemplte.find(".e-tooltxt").length>0?(this._keyPressed=!0,this._items=this._contstatus?this._liTemplte.find(".e-tooltxt"):this.element.find(".e-tooltxt"),n=this._items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")):(this._keyPressed=!1,n=this.items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")),this._focusedItem?(r=this._focusedItem,this._focusedItem=null):r=n.filter(".e-hover"),"keydown"==i.type)(38==s||39==s)&&this.model.orientation!=t.Orientation.Vertical||(39==s||40==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(n[n.index(r)+1]).length>0?e(n[n.index(r)+1]):n.first()):(37==s||40==s)&&this.model.orientation!=t.Orientation.Vertical||(37==s||38==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(n[n.index(r)-1]).length>0?e(n[n.index(r)-1]):n.last()):33==s||36==s?(i.preventDefault(),o=n.first()):(34==s||35==s)&&(i.preventDefault(),o=n.last()),o&&(this._removeListHover(),o.addClass("e-hover"));else switch(s){case 13:case 32:if(i.preventDefault(),!r[0])break;args={currentTarget:r[0],target:e(r)[0],status:this.model.enabled,event:i},this._trigger("click",args),this._removeListHover();break;case 27:i.preventDefault(),this.element.blur();break;case 9:i.preventDefault(),this._activeItem=e(this.items).filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)").first().index(),this._addListHover()}},_removeListHover:function(){e(this.items).removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.hasClass("e-disable")||e.addClass("e-hover").focus()},_getActiveItem:function(){return e(this.model.isResponsive&&this._keyPressed?this._items[this._activeItem]:this.items[this._activeItem])},_targetBlur:function(e){e.preventDefault(),this.element.focusout().removeClass("e-focus"),this._removeListHover(),this._off(this.element,"keyup",this._onKeyPress)._off(this.element,"keydown",this._onKeyPress),this._trigger("focusOut")},_clickEventHandler:function(){this._clicked=!0},_removeSelection:function(){this._currentItem&&"true"!=this._currentItem.attr("aria-selected")&&this._currentItem.removeClass("e-active")},_focusElement:function(){if(!this.element.hasClass("e-focus")&&(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._onKeyPress)._on(this.element,"keydown",this._onKeyPress),!this._focusEnable))return void(this._focusEnable=!0);this._removeListHover(),this._activeItem=this._clicked?-1:0,(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=e(this.items).filter('li:not([class*="e-disable"])').first().index()),this._addListHover()}}),t.Toolbar.ResponsiveType={Popup:"popup",Inline:"inline"}}(jQuery,Syncfusion)}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.tooltip.min",["./../common/ej.core.min"],e):e()}(function(){"use strict";var e=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},t=function(t){function i(e,i){return t.call(this),this._rootCSS="e-tooltip",this._setFirst=!1,this.PluginName="ejTooltip",this.id="null",this.model=null,this.defaults={height:"auto",width:"auto",enabled:!0,content:null,containment:"body",target:null,title:null,closeMode:"none",autoCloseTimeout:4e3,position:{stem:{horizontal:"center",vertical:"bottom"},target:{horizontal:"center",vertical:"top"}},associate:"target",collision:"flipfit",showShadow:!1,cssClass:null,animation:{effect:"none",speed:0},isBalloon:!0,showRoundedCorner:!1,enableRTL:!1,allowKeyboardNavigation:!0,tip:{size:{width:20,height:10},adjust:{xValue:0,yValue:0}},trigger:"hover"},this.dataTypes={enabled:"boolean",closeMode:"enum",autoCloseTimeout:"number",trigger:"enum",position:{stem:"data",target:"data"},associate:"enum",collision:"enum",showShadow:"boolean",animation:{effect:"enum",speed:"number"},isBalloon:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",tip:{size:{width:"number",height:"number"},adjust:{xValue:"number",yValue:"number"}}},this.isTrack=!0,this._isCancel=!1,this._isHidden=!0,this.arrowValue={left:0,top:0,width:0,height:0,display:null},this.tooltipPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.targetPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.mouseTimer=null,this.positionTarget=null,this.positionTooltip=null,this.containerSize=null,this._createTitle=function(){this.tooltipTitle=ej.buildTag("div.e-def e-header"," ",{},{}),this.tooltipHeader=ej.buildTag("div"," ",{},{}),$(this.tooltipTitle).html(this.model.title).appendTo(this.tooltipHeader)},e&&(e.jquery||(e=$("#"+e)),e.length)?$(e).ejTooltip(i).data(this.PluginName):void 0}return e(i,t),i.prototype.setModel=function(e,t){this.setModel(e,t)},i.prototype.option=function(e,t){this.option(e,t)},i.prototype.triggerEvents=function(e,t){var i,s,n,r,o,l,a;switch(e){case"click":s=t,i=this._trigger(e,s);break;case"hover":n=t,i=this._trigger(e,n);break;case"tracking":r=t,i=this._trigger(e,r);break;case"beforeOpen":o=t,i=this._trigger(e,o);break;case"open":l=t,i=this._trigger(e,l);break;case"beforeClose":case"close":a=t,i=this._trigger(e,a)}return i},i.prototype.enable=function(){this.tooltip.hasClass("e-disable")&&(this.model.enabled=!0,this.tooltip.removeClass("e-disable"))},i.prototype.disable=function(){
this.tooltip.hasClass("e-disable")||(this.model.enabled=!1,this.tooltip.addClass("e-disable"))},i.prototype.show=function(e,t){if(this.model.enabled){if(ej.isNullOrUndefined(e)){var i=null==this.model.target?this.element:$(this.element).find(this.model.target+":first");this._positionElement(i)}else this._positionElement(e);ej.isNullOrUndefined(t)?this._showTooltip():"string"==typeof t?$(this.tooltip).show(t):"function"==typeof t&&t.call.apply(this.tooltip)}},i.prototype.hide=function(e){this.model.enabled&&(ej.isNullOrUndefined(e)?this._hideTooltip():"string"==typeof e?$(this.tooltip).hide(e):"function"==typeof e&&e.call.apply(this.tooltip))},i.prototype._destroy=function(){$(this.tooltip).remove(),this.tooltip=null},i.prototype._setModel=function(e){var t,i;for(t in e)switch(t){case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"enabled":this._enabled(e[t]);break;case"content":this._setContent(e[t]);break;case"title":this.model.title=e[t],null==this.model.title?($(this.tooltipHeader).remove(),this.tooltipHeader=null,this.tooltipTitle=null,this.model.closeMode===ej.Tooltip.CloseMode.Sticky&&this._iconRender()):ej.isNullOrUndefined(this.tooltipHeader)?this._createHeader():$(this.tooltipTitle).html(this.model.title),this.tooltipPos.height=$(this.tooltip).outerHeight();break;case"associate":this.model.associate=e[t],this._wireMouseEvents(!1),this._wireMouseEvents(!0);break;case"position":this._setPosition(e[t]);break;case"collision":this.model.collision=e[t];break;case"closeMode":void 0!==e[t]&&(this.model.closeMode=e[t],this.model.closeMode==ej.Tooltip.CloseMode.Sticky?this._iconRender():($(this.tooltipClose).remove(),this.tooltipClose=null),this.tooltipPos.height=$(this.tooltip).outerHeight());break;case"cssClass":this._setSkin(e[t]);break;case"showShadow":this._shadowEffect(e[t],this.model.position);break;case"isBalloon":ej.isNullOrUndefined(e[t])||(this.model.isBalloon=e[t],this.model.isBalloon?this._renderArrow():($(this.tip).remove(),this.tip=null));break;case"animation":i=e[t],this.model.animation=$.extend(!0,this.model.animation,i),this.model.animation.effect!=ej.Tooltip.Effect.None?(this._off($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._off($(this.tooltip),"mouseleave",this._onTooltipMouseLeave)):this.model.animation.effect==ej.Tooltip.Effect.None&&(this._on($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._on($(this.tooltip),"mouseleave",this._onTooltipMouseLeave));break;case"enableRTL":this._setRTL(e[t]);break;case"target":this._wireTriggerEvents(!1),this.model.target=e[t],this._wireTriggerEvents(!0),this._renderTarget();break;case"trigger":this._setTrigger(e[t]);break;case"showRoundedCorner":this.model.showRoundedCorner=e[t],this._roundedCorner(e[t]);break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=e[t],this.model.allowKeyboardNavigation?this._on($(window),"keydown",this._keyDown):this._off($(window),"keydown",this._keyDown)}},i.prototype._enabled=function(e){e?this.enable(e):this.disable(e),this.model.enabled=e},i.prototype._shadowEffect=function(e,t){this.model.showShadow=e;var i=null;if($(this.tooltip).removeClass("e-tooltipShadowLeft e-tooltipShadowRight"),this.model.showShadow){if(this.model.isBalloon)switch(t.stem.horizontal){case"center":i="top"==t.stem.vertical?"e-tooltipShadowLeft":"bottom"==t.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft";break;case"right":i="center"==t.target.horizontal&&"top"==t.stem.vertical?"e-tooltipShadowLeft":"e-tooltipShadowRight";break;case"left":i="center"==t.target.horizontal&&"bottom"==t.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft"}else i="e-tooltipShadowLeft";$(this.tooltip).addClass(i)}},i.prototype._setContent=function(e){this.model.content=e,$(this.tooltipContent).html(this.model.content),this.tooltipPos.height=$(this.tooltip).outerHeight(),this.tooltipPos.width=$(this.tooltip).outerWidth()},i.prototype._setPosition=function(e){this.model.position.stem=$.extend(!0,this.model.position.stem,e.stem),this.model.position.target=$.extend(!0,this.model.position.target,e.target)},i.prototype._setTrigger=function(e){this._wireTriggerEvents(!1),this.model.trigger=e,this._wireTriggerEvents(!0)},i.prototype._init=function(){this.id=this.element[0].id,this.positionTarget=$.extend(!0,{},this.model.position.target),this.positionTooltip=$.extend(!0,{},this.model.position.stem),this.tipSize=$.extend(!0,{},this.model.tip.size),this._initialize(),this._render(),this.enable(this.model.enabled),this._wireEvents(!0)},i.prototype._initialize=function(){ej.isNullOrUndefined(this.model.target)?ej.isNullOrUndefined(this.model.content)&&!ej.isNullOrUndefined(this.element.attr("title"))&&(this.model.content=this.element.attr("title"),this.element.attr("data-content",this.model.content),this.element.removeAttr("title")):this._renderTarget()},i.prototype._wireEvents=function(e){var t=e?"_on":"_off";this._wireTriggerEvents(e),this.model.allowKeyboardNavigation&&this[t]($(window),"keydown",this._keyDown),null!=this.model.target?this[t](this.element,"scroll",this.model.target,this._hideTooltip):this[t](this.element,"scroll",this._hideTooltip),this[t]($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this[t]($(this.tooltip),"mouseleave",this._onTooltipMouseLeave),this[t]($(window),"resize",this._hideTooltip),this[t]($(window),"touchend",this._docTouchEndHandler)},i.prototype._wireTriggerEvents=function(e){var t,i=e?"_on":"_off";this._wireMouseEvents(e),t=this.model.trigger==ej.Tooltip.Trigger.Click?"click touchstart":this.model.trigger==ej.Tooltip.Trigger.Focus?"focus touchstart":"mouseenter touchstart",null!=this.model.target?this[i](this.element,t,this.model.target,this._targetHover):this[i](this.element,t,this._targetHover),this.model.trigger==ej.Tooltip.Trigger.Focus?null!=this.model.target?this[i](this.element,"blur",this.model.target,this._hideTooltip):this[i](this.element,"blur",this._hideTooltip):null!=this.model.target?this[i](this.element,"mouseleave",this.model.target,this._onMouseOut):this[i](this.element,"mouseleave",this._onMouseOut)},i.prototype._wireMouseEvents=function(e){var t=e?"_on":"_off";(this.model.associate==ej.Tooltip.Associate.MouseEnter||this.model.associate==ej.Tooltip.Associate.MouseFollow)&&(null!=this.model.target?this[t](this.element,"mousemove touchstart",this.model.target,this._tooltipMove):this[t](this.element,"mousemove touchstart",this._tooltipMove))},i.prototype._render=function(){this.tooltip=ej.buildTag("div.e-tooltip-wrap e-widget","",{},{role:"tooltip","aria-readonly":"true","aria-hidden":"true","aria-describedby":this.id+"_content",id:this.id+"_Main"}),this.tooltipInter=ej.buildTag("div.e-tipContainer","",{},{}),this.tooltip.append(this.tooltipInter),this.model.isBalloon&&this._renderArrow(),$(this.model.containment).append(this.tooltip),this._setHeight(this.model.height),this._setWidth(this.model.width),this._createHeader(),this._tooltipContent(),this.model.cssClass&&this.tooltip.addClass(this.model.cssClass),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._setRTL(this.model.enableRTL),$(this.tooltip).css({top:"auto",left:"auto"}),this.tooltipPos={width:$(this.tooltip).outerWidth(),height:$(this.tooltip).outerHeight(),left:$(this.tooltip).offset().left,top:$(this.tooltip).offset().top,position:"absolute"},ej.isNullOrUndefined(this.model.target)&&(this._containerCalc(this.element),this._positionElement(this.element))},i.prototype._containerCalc=function(e){ej.isNullOrUndefined(e)&&(e=this.element);var t=$(e).offset();this.containerSize={height:"body"==this.model.containment?$(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight:$(this.model.containment).height(),width:"body"==this.model.containment?$(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth:$(this.model.containment).width()},this.containerSize.left="body"!=this.model.containment&&"static"==$(this.model.containment).css("position")?$(this.model.containment).offset().left-$(this.model.containment).offsetParent().offset().left:0,this.containerSize.top="body"!=this.model.containment&&"static"==$(this.model.containment).css("position")?$(this.model.containment).offset().top-$(this.model.containment).offsetParent().offset().top:0,t.left-="body"!=this.model.containment?"static"==$(this.model.containment).css("position")?$(this.model.containment).offsetParent().offset().left:$(this.model.containment).offset().left:0,t.top-="body"!=this.model.containment?"static"==$(this.model.containment).css("position")?$(this.model.containment).offsetParent().offset().top:$(this.model.containment).offset().top:0,this.targetPos.left=t.left,this.targetPos.top=t.top},i.prototype._setHeight=function(e){this.model.height=e,!isNaN(+e)&&isFinite(e)?$(this.tooltip).css("height",e+"px"):$(this.tooltip).css("height",e),this.tooltipPos.height=$(this.tooltip).outerHeight()},i.prototype._setWidth=function(e){this.model.width=e,"auto"!=this.model.width&&(e=!isNaN(+e)&&isFinite(e)?e+"px":e,$(this.tooltip).css("max-width",e),$(this.tooltip).css("min-width","0px")),$(this.tooltip).css("width",e),this.tooltipPos.height=$(this.tooltip).outerHeight()},i.prototype._setRTL=function(e){this.model.enableRTL=e,e?this.tooltip.addClass("e-rtl"):this.tooltip.removeClass("e-rtl")},i.prototype._setSkin=function(e){this.model.cssClass!=e&&(this.tooltip.removeClass(this.model.cssClass).addClass(e),this.model.cssClass=e)},i.prototype._roundedCorner=function(){this.model.showRoundedCorner?this.tooltip.addClass("e-corner"):this.tooltip.removeClass("e-corner")},i.prototype._renderArrow=function(){ej.isNullOrUndefined(this.tip)&&(this.tip=ej.buildTag("div.e-arrowTip"," ",{id:this.id+"_eTip"},{}),$(this.tip).append("<div class='e-arrowTipOuter'></div>").append("<div class='e-arrowTipInner'></div>"),$(this.tip).insertBefore(this.tooltipInter))},i.prototype._adjustArrow=function(e){var t,i,s=$(this.tooltip).width(),n=$(this.tooltip).height(),r=e.stem,o=e.target,l={tipHeight:0,tipWidth:0};"right"==o.horizontal||"left"==o.horizontal?(t="left"==r.horizontal?-this.model.tip.size.height:"right"==r.horizontal?s:s/2-this.tipSize.width/2,i="center"!=r.horizontal?"top"==r.vertical?5:"center"==r.vertical?n/2-this.tipSize.width/2:n-5-this.tipSize.width:"top"==r.vertical?-this.tipSize.height:"bottom"==r.vertical?n:this.tooltipPos.height/2-this.tipSize.width/2,l=this._arrowBinding(e,"horizontal")):(i="top"==r.vertical?-this.tipSize.height:"bottom"==r.vertical?n:n/2-this.tipSize.width/2,t="center"==r.vertical?"left"==r.horizontal?-this.model.tip.size.height:s:"left"==r.horizontal?10:"center"==r.horizontal?this.tooltipPos.width/2-this.tipSize.width/2:s-10-this.tipSize.width,l=this._arrowBinding(e,"vertical")),this.arrowValue.left=t,this.arrowValue.top=i,$(this.tip).css({height:l.tipHeight+"px",width:l.tipWidth+"px",left:t+"px",top:i+"px",display:"center"==r.horizontal&&"center"==r.vertical?"none":"block"})},i.prototype._arrowBinding=function(e,t){var i,s,n=e.stem,r="horizontal"==t?"center"!=n.horizontal:"center"==n.vertical,o=$(this.tooltip).css("border-top-color"),l=$(this.tooltip).css("background-color"),a=this.model.tip.size.height,d=this.model.tip.size.height-1,h={"border-top":"none","border-bottom":"none","border-right":"none","border-left":"none"};return r?(i=this.model.tip.size.height,s=this.model.tip.size.width,$(this.tip).find(".e-arrowTipOuter").css(this._arrow(e,a,o,h,"horizontal")),$(this.tip).find(".e-arrowTipInner").css(this._arrow(e,d,l,h,"horizontal"))):(i=this.model.tip.size.width,s=this.model.tip.size.height,$(this.tip).find(".e-arrowTipOuter").css(this._arrow(e,a,o,h,"vertical")),$(this.tip).find(".e-arrowTipInner").css(this._arrow(e,d,l,h,"vertical"))),{tipHeight:s,tipWidth:i}},i.prototype._arrow=function(e,t,i,s,n){var r=e.stem,o="horizontal"==n&&"right"==r.horizontal?"0px":"1px",l="horizontal"==n?"1px":"bottom"==r.vertical?"0px":"1px";return s["border-top"]="horizontal"==n?t+"px solid transparent":"bottom"==r.vertical?t+"px solid "+i:"none",s["border-bottom"]="horizontal"==n?t+"px solid transparent":"top"==r.vertical?t+"px solid "+i:"none",s["border-right"]="horizontal"==n?"left"==r.horizontal?t+"px solid "+i:"none":t+"px solid transparent",s["border-left"]="horizontal"==n?"right"==r.horizontal?t+"px solid "+i:"none":t+"px solid transparent",t==this.model.tip.size.height-1&&(s.left=o,s.top=l),s},i.prototype._iconRender=function(){this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&(ej.isNullOrUndefined(this.tooltipClose)||$(this.tooltipClose).remove(),this.tooltipClose=ej.buildTag("div .e-icon"," ",{},{id:"_closeIcon"}),null!=this.model.title?$(this.tooltipClose).insertAfter(this.tooltipTitle).addClass("e-close"):$(this.tooltipClose).insertBefore(this.tooltipInter).addClass("e-cross-circle"),this._on($(this.tooltipClose),"click",this._hideTooltip))},i.prototype._renderTarget=function(){this.targetElement=$(this.element).find(this.model.target);for(var e=0;e<this.targetElement.length;e++)ej.isNullOrUndefined($(this.targetElement[e]).attr("title"))||(this.targetElement[e].setAttribute("data-content",this.targetElement[e].title),this.targetElement[e].removeAttribute("title"))},i.prototype._tooltipContent=function(){this.tooltipContent=ej.buildTag("div.e-tipcontent e-def","",{},{id:this.id+"_content"}),$(this.tooltipContent).html(this.model.content).addClass("e-def"),null!=this.model.title?$(this.tooltipContent).insertAfter(this.tooltipHeader):$(this.tooltipContent).appendTo(this.tooltipInter)},i.prototype._positionElement=function(e){this.tooltipPos.width=$(this.tooltip).outerWidth(),this.tooltipPos.height=$(this.tooltip).outerHeight(),this.targetPos.width=$(e).outerWidth(),this.targetPos.height=$(e).outerHeight(),this._containerCalc(e),this.model.associate==ej.Tooltip.Associate.Window?this._browserPosition():this.model.associate==ej.Tooltip.Associate.Axis?this._axisPosition():this.model.associate==ej.Tooltip.Associate.Target&&this._tooltipPosition(this.model.position),this.model.collision!=ej.Tooltip.Collision.None&&this.model.associate==ej.Tooltip.Associate.Target&&this._calcCollision(this.model.position,e)},i.prototype._browserPosition=function(){if("body"==this.model.containment){this.containerSize={height:$(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight,width:$(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth};var e=$.extend(!0,{},this.model.position),t={position:"absolute",left:"auto",top:"auto",bottom:"auto",right:"auto"};ej.isNullOrUndefined(this.tip)||$(this.tip).css({display:"none"}),"right"==this.model.position.target.horizontal?t.right=0:t.left="left"==this.model.position.target.horizontal?0:this.containerSize.width/2-this.tooltipPos.width/2,"top"==this.model.position.target.vertical?t.top=0:"center"==this.model.position.target.vertical?t.top=this.containerSize.height/2-this.tooltipPos.height/2:t.bottom=0,this.model.showShadow&&this._shadowEffect(this.model.showShadow,e),$(this.tooltip).css(t)}},i.prototype._tooltipMove=function(e){if(this.model.closeMode==ej.Tooltip.CloseMode.None&&this.model.enabled){var t=this;if(this._isCancel)return;this.model.associate==ej.Tooltip.Associate.MouseFollow?this._mousePosition(e):this.model.associate==ej.Tooltip.Associate.MouseEnter&&(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){t.isTrack&&t._mousePosition(e)},300))}},i.prototype._mousePosition=function(e){var t,i,s;"touchstart"==e.type?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):"mousemove"==e.type&&(t=e.pageX,i=e.pageY),this.isCollision=!0,this._containerCalc(e.currentTarget);var n=0,r=0,o=0,l=$.extend(!0,{},this.model.position.stem),a=$.extend(!0,{},this.model.position),d={left:0,top:0},h={left:t,top:i},c={left:t,top:i},u=this.containerSize.left,p=this.containerSize.top,m="body"!=this.model.containment?t-$(this.model.containment).offset().left:t,g="body"!=this.model.containment?i-$(this.model.containment).offset().top:i;for(a.target.horizontal=a.target.vertical="center","body"!=this.model.containment&&(d="static"==$(this.model.containment).css("position")?$(this.model.containment).offsetParent().offset():$(this.model.containment).offset()),c.left-=d.left,c.top-=d.top;this.isCollision;)if(h=$.extend(!0,{},c),this.model.isBalloon&&("top"==l.vertical||"bottom"==l.vertical)?5+this.tipSize.height/2:0,s=this.model.isBalloon&&("right"==l.horizontal||"left"==l.horizontal)?10+this.tipSize.width/2:0,n=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:7,r=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:10,o=this.model.isBalloon?"center"!=l.horizontal?this.model.tip.size.height:"center"!=l.vertical?this.model.tip.size.height:0:2,h.left+="right"==l.horizontal?-this.tooltipPos.width:"left"==l.horizontal?0:-(this.tooltipPos.width/2),h.top+="bottom"==l.vertical?-this.tooltipPos.height:"top"==l.vertical?0:-(this.tooltipPos.height/2),h.left+="center"!=l.vertical?"right"==l.horizontal?s:"left"==l.horizontal?-s:0:0,h.left+="center"==l.vertical?"right"==l.horizontal?-o:"left"==l.horizontal?+(o+n):0:0,h.top+="top"==l.vertical?+(o+r):"bottom"==l.vertical?-o:0,this.targetElement!=e.currentTarget&&(this.targetElement=e.currentTarget,(h.left<u||h.left+this.tooltipPos.width>u+this.containerSize.width)&&(this.positionTooltip.horizontal=m>=this.tooltipPos.width?"right":this.containerSize.width-m>=this.tooltipPos.width?"left":"center"),(h.top<p||h.top+this.tooltipPos.height>this.containerSize.height+p)&&(this.positionTooltip.vertical=g>=this.tooltipPos.height?"bottom":this.containerSize.height-g>=this.tooltipPos.height?"top":"center")),this.positionTooltip.horizontal!=l.horizontal||this.positionTooltip.vertical!=l.vertical)this.isCollision=!0,l=$.extend(!0,{},this.positionTooltip);else if(this.isCollision=!1,$(this.tooltip).css({top:h.top+"px",left:h.left+"px",position:"absolute",right:"auto",bottom:"auto"}),a.stem=$.extend(!0,{},this.positionTooltip),this.model.showShadow&&this._shadowEffect(this.model.showShadow,a),this.model.isBalloon&&this._adjustArrow(a),this._showTooltip(),this.model.associate==ej.Tooltip.Associate.MouseEnter&&(this.isTrack=!1),this.model.associate==ej.Tooltip.Associate.MouseFollow&&this.triggerEvents("tracking",{position:this.model.position,event:e}))return},i.prototype._axisPosition=function(){var e,t,i,s,n=$.extend(!0,{},this.model.position);"number"==typeof this.model.position.target.horizontal&&(e=this.model.position.target.horizontal.toString()),"number"==typeof this.model.position.target.vertical&&(t=this.model.position.target.vertical.toString()),i=parseInt(e),s=parseInt(t),ej.isNullOrUndefined(this.tip)||$(this.tip).css({display:"none"}),this.model.showShadow&&this._shadowEffect(this.model.showShadow,n),this.model.isBalloon&&this._adjustArrow(n),isFinite(i)&&isFinite(s)&&$(this.tooltip).css({top:s,left:i,position:"absolute"})},i.prototype._tooltipPosition=function(e){var t=0,i=$.extend(!0,{},e.stem),s=$.extend(!0,{},e.target),n=$.extend(!0,{},this.targetPos),r="top"===i.vertical||"bottom"===i.vertical?5+this.tipSize.width/2:0,o="right"===i.horizontal||"left"===i.horizontal?10+this.tipSize.width/2:0,t=this.model.isBalloon?"center"!==i.horizontal?this.model.tip.size.height:"center"!==i.vertical?this.model.tip.size.height:0:0,l=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:2,a=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:2;n.left+="right"===s.horizontal?this.targetPos.width:"left"===s.horizontal?0:this.targetPos.width/2,n.top+="bottom"===s.vertical?this.targetPos.height:"top"===s.vertical?0:this.targetPos.height/2,n.left+="right"===i.horizontal?-this.tooltipPos.width:"left"===i.horizontal?0:-(this.tooltipPos.width/2),n.top+="bottom"===i.vertical?-this.tooltipPos.height:"top"===i.vertical?0:-(this.tooltipPos.height/2),n.left+="center"!==s.horizontal?"right"===i.horizontal?-t:"left"===i.horizontal?t:0:"center"===i.vertical?"right"===i.horizontal?-t:"left"===i.horizontal?t:0:0,n.top+="center"===s.horizontal?"bottom"===i.vertical?-t:"top"===i.vertical?t:0:"center"===i.horizontal?"bottom"===i.vertical?-t:"top"===i.vertical?t:0:0,n.left+="center"===s.horizontal&&"center"!==i.vertical?"right"===i.horizontal?o:"left"===i.horizontal?-o:0:0,n.top+="center"!==s.horizontal&&"center"!==i.horizontal?"top"===i.vertical?-r:"bottom"===i.vertical?r:0:0,n.left+="center"!==s.horizontal?"right"===i.horizontal?-l:"left"===i.horizontal?l:0:"center"===i.vertical?"right"===i.horizontal?-l:"left"===i.horizontal?l:0:0,n.top+="center"===s.horizontal?"bottom"===i.vertical?-a:"top"===i.vertical?a:0:"center"===i.horizontal?"bottom"===i.vertical?-a:"top"===i.vertical?a:0:0,this.tooltipPos.left=n.left,this.tooltipPos.top=n.top,this.model.collision===ej.Tooltip.Collision.None&&(this.model.isBalloon&&this._adjustArrow(e),this._shadowEffect(this.model.showShadow,e),$(this.tooltip).css({top:n.top+"px",left:n.left+"px",position:"absolute"}))},i.prototype._calcCollision=function(e,t){var e=$.extend(!0,{},e),i=$.extend(!0,{},e),s=this.model.tip.size.height,n=!0,r="body"!=this.model.containment?$(t).offset().left-$(this.model.containment).offset().left:$(t).offset().left,o="body"!=this.model.containment?$(t).offset().top-$(this.model.containment).offset().top:$(t).offset().top,l={topSpace:o,rightSpace:this.containerSize.width-(r+this.targetPos.width),bottomSpace:this.containerSize.height-(o+this.targetPos.height),leftSpace:r,centerRight:this.containerSize.width-(r+this.targetPos.width/2),centerLeft:r+this.targetPos.width/2,centerTop:o+this.targetPos.height/2,centerBottom:this.containerSize.height-(o+this.targetPos.height/2),tooltipWidth:this.tooltipPos.width+s,tooltipHeight:this.tooltipPos.height+s};if(this.model.collision===ej.Tooltip.Collision.Fit)this._collisionFit(e,l);else{for(;n;)i=this._collisionFlip(i,l),i.target.horizontal!=e.target.horizontal||i.target.vertical!=e.target.vertical||i.stem.horizontal!=e.stem.horizontal||i.stem.vertical!=e.stem.vertical?(this._tooltipPosition(i),e=$.extend(!0,{},i)):n=!1;n||(this.model.collision==ej.Tooltip.Collision.FlipFit?this._collisionFit(i,l):(this._adjustArrow(i),this._shadowEffect(this.model.showShadow,i),$(this.tooltip).css({top:this.tooltipPos.top+"px",left:this.tooltipPos.left+"px",position:"absolute"})))}},i.prototype._collisionFlip=function(e,t){var i=$.extend(!0,{},this.tooltipPos),s=$.extend(!0,{},e),n=$(this.model.containment).scrollLeft(),r=$(this.model.containment).scrollTop(),o=this.containerSize.left,l=this.containerSize.top;return(i.left+i.width>o+this.containerSize.width+n||i.left<o)&&("center"!=e.target.horizontal?s.target.horizontal=t.leftSpace>=t.tooltipWidth?"left":t.rightSpace>=t.tooltipWidth?"right":"center":s.stem.horizontal=t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center"),i.top<l&&(s.target.vertical=t.bottomSpace>=t.tooltipHeight?"bottom":"center"),i.top+i.height>this.containerSize.height+r+l&&(s.target.vertical=t.topSpace>=t.tooltipHeight?"top":"center"),(s.target.horizontal!=e.target.horizontal||s.target.vertical!=e.target.vertical)&&(s.stem.horizontal="center"==s.target.horizontal?t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center":"right"==s.target.horizontal?"left":"right"),(s.target.vertical!=e.target.vertical||s.target.horizontal!=e.target.horizontal)&&(s.stem.vertical="center"==s.target.vertical?t.centerTop>=t.tooltipHeight?"bottom":t.centerBottom>=t.tooltipHeight?"top":t.centerTop>t.centerBottom?"bottom":"top":"top"==s.target.vertical?"bottom":"top"),s},i.prototype._collisionFit=function(e,t){var i,s,n=$.extend(!0,{},this.tooltipPos),r=!1,o=!1,l=1,a=1,d=null,h=$(this.model.containment).scrollLeft(),c=$(this.model.containment).scrollTop(),u=this.containerSize.left,p=this.containerSize.top;(n.left<u||n.left+n.width>this.containerSize.width+h+u)&&(l=n.left<u?u:n.left+n.width>this.containerSize.width+h+u?n.left-(n.left+n.width-(this.containerSize.width+u)):1,r=!0),(n.top<p||n.top+n.height>this.containerSize.height+c+p)&&(a=n.top<p?p:n.top+n.height>this.containerSize.height+c+p?n.top-(n.top+n.height-(this.containerSize.height+p)):1,o=!0),$(this.tooltip).css({top:1!=a?a+"px":n.top+"px",left:1!=l?l+"px":n.left+"px",position:"absolute"}),this._adjustArrow(e),d={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:$(this.tip).css("display")},this.tooltipPos.top=a=1!=a?a:n.top,this.tooltipPos.left=l=1!=l?l:n.left,i=$(this.tooltip).width(),s=$(this.tooltip).height(),(r||o&&"none"!=d.display)&&(this.model.isBalloon&&(r&&(this.arrowValue.left=this._horizontalAdjustment(e,t)),o&&(this.arrowValue.top=this._verticalAdjustment(e,t))),this.arrowValue.left==-this.model.tip.size.height||this.arrowValue.left==i?$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):this.arrowValue.top==-this.model.tip.size.height||this.arrowValue.top==s?$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"none"})),this._shadowEffect(this.model.showShadow,e)},i.prototype._horizontalAdjustment=function(e,t){var i,s,n={left:this.arrowValue.left,top:this.arrowValue.top};return $(this.tooltip).css({display:"block"}),e.target.horizontal,i=this.model.tip.size.height,s="center"!=e.target.horizontal&&"left"==e.stem.horizontal?$(this.tip).offset().left:"center"!=e.target.horizontal&&"right"==e.stem.horizontal?$(this.tip).offset().left+i:$(this.tip).offset().left,$(this.tooltip).css({display:"none"}),s>t.leftSpace&&s+i<t.leftSpace+this.targetPos.width?n.left:((s>t.leftSpace+this.targetPos.width||s<t.leftSpace)&&(n.left=t.leftSpace+this.targetPos.width/2-parseInt(this.tooltipPos.left.toString())),n.left)},i.prototype._verticalAdjustment=function(e,t){var i,s,n={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:this.arrowValue.display};return $(this.tooltip).css({display:"block"}),e.target.horizontal,i=this.model.tip.size.height,s="center"==e.target.horizontal&&"top"==e.stem.vertical?$(this.tip).offset().top:$(this.tip).offset().top+i,$(this.tooltip).css({display:"none"}),s>t.topSpace&&s<t.topSpace+this.targetPos.height?n.top:((s<t.topSpace||s+i>t.topSpace+this.targetPos.height)&&(n.top=t.topSpace+this.targetPos.height/2-parseInt(this.tooltipPos.top.toString())),n.top)},i.prototype._createHeader=function(){null!=this.model.title&&(ej.isNullOrUndefined(this.tooltipTitle)&&this._createTitle(),ej.isNullOrUndefined(this.tooltipContent)?$(this.tooltipHeader).appendTo(this.tooltipInter).addClass("e-tooltipHeader"):$(this.tooltipHeader).insertBefore(this.tooltipContent).addClass("e-tooltipHeader")),this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&this._iconRender()},i.prototype._hideTooltip=function(){var e;if(this._isHidden=!0,e=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,1==this.model.enabled&&"block"==$(this.tooltip).css("display")){if(this.triggerEvents("beforeClose",{}))return;if(this.model.animation.effect==ej.Tooltip.Effect.Fade?$(this.tooltip).fadeOut(e):this.model.animation.effect==ej.Tooltip.Effect.Slide?$(this.tooltip).slideUp(e):$(this.tooltip).css({display:"none"}),"none"==$(this.tooltip).css("display")&&$(this.tooltip).attr("aria-hidden","true"),this.triggerEvents("close",{}))return}},i.prototype._showTooltip=function(){if(this._isHidden){var e=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0;if("none"==$(this.tooltip).css("display")&&1==this.model.enabled&&(this._isHidden=!1,this.model.animation.effect==ej.Tooltip.Effect.Fade?$(this.tooltip).fadeIn(e):this.model.animation.effect==ej.Tooltip.Effect.Slide?$(this.tooltip).slideDown(e):$(this.tooltip).css({display:"block"}),"block"==$(this.tooltip).css("display")&&(this._getScrollableParents(),$(this.tooltip).attr("aria-hidden","false").css({zIndex:ej.getMaxZindex()+1})),this.triggerEvents("open",{})))return}},i.prototype._getScrollableParents=function(){var e=$(this.element).parentsUntil("html").filter(function(){$(this).css("overflow")}).add($(window));this._on(e,"scroll",this._hideTooltip)},i.prototype._tooltipAuto=function(){var e=this;this.timer=setTimeout(function(){e._hideTooltip()},e.model.autoCloseTimeout)},i.prototype._beforeOpenTooltip=function(e){this.positionTooltip=$.extend(!0,{},this.model.position.stem),this.positionTarget=$.extend(!0,{},this.model.position.target),this.targetElement=this.element,ej.isNullOrUndefined(this.model.target)||ej.isNullOrUndefined($(e.currentTarget).attr("data-content"))||(this.model.content=$(e.currentTarget).attr("data-content"),this._setContent(this.model.content))},i.prototype._targetHover=function(e){if(this.isTrack=!0,this.model.enabled)if(this._isHidden||("msie"==ej.browserInfo().name||"edge"==ej.browserInfo().name)&&this.model.associate==ej.Tooltip.Associate.MouseFollow){if(this.triggerEvents("beforeOpen",{event:e}))return void(this._isCancel=!0);this._isCancel=!1,this._beforeOpenTooltip(e),this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow?(ej.isNullOrUndefined(this.model.target)?this._positionElement(this.element):this._positionElement(e.currentTarget),clearTimeout(this.timer),this._showTooltip(),this.model.closeMode==ej.Tooltip.CloseMode.Auto&&this._tooltipAuto(),"click"==e.type?this.triggerEvents("click",{event:e}):this.triggerEvents("hover",{event:e})):this.isTrack=!0}else ej.isNullOrUndefined(this.model.target)||this._positionElement(e.currentTarget)},i.prototype._onMouseOut=function(){this.model.enabled&&!this._isHidden&&(this.model.closeMode==ej.Tooltip.CloseMode.None&&this._hideTooltip(),clearTimeout(this.mouseTimer)),this.isTrack=!1},i.prototype._onTooltipMouseEnter=function(){var e=this;this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&$(e.tooltip).css({display:"block"})},i.prototype._onTooltipMouseLeave=function(){var e=this;this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&e.model.closeMode==ej.Tooltip.CloseMode.None&&$(e.tooltip).css({display:"none"})},i.prototype._docTouchEndHandler=function(e){$(e.target).closest(".e-tooltip").length||this.model.closeMode!=ej.Tooltip.CloseMode.None||this._hideTooltip()},i.prototype._keyDown=function(e){var t=e.keyCode?e.keyCode:e.which?e.which:e.charCode;if(this.model.enabled)switch(t){case 27:e.preventDefault(),this._hideTooltip()}},i}(ej.WidgetBase);window.ej.widget("ejTooltip","ej.Tooltip",new t),window.ejTooltip=null,ej.Tooltip.CloseMode={Auto:"auto",None:"none",Sticky:"sticky"},ej.Tooltip.Effect={Slide:"slide",Fade:"fade",None:"none"},ej.Tooltip.Trigger={Hover:"hover",Click:"click",Focus:"focus"},ej.Tooltip.Collision={Flip:"flip",FlipFit:"flipfit",None:"none",Fit:"fit"},ej.Tooltip.Associate={Window:"window",MouseFollow:"mousefollow",MouseEnter:"mouseenter",Target:"target",Axis:"axis"}}),function(e){"function"==typeof define&&define.amd?define("syncfusion-javascript/Scripts/ej/web/ej.excelfilter.min",["./ej.menu.min"],e):e()}(function(){!function(e,t,i){t.ExcelFilter=t.ExcelFilter||{},t.excelFilter=function(e){return this._ctrlInstance=e.instance,this.id=this._ctrlInstance._id,this._dialogContainer=null,this._showSort=e.showSortOptions||!1,this._interDeterminateState=e.interDeterminateState||!1,this._maxCount=e.maxFilterLimit||1e3,this._formatFiltering=!0,this._locale=this._ctrlInstance.model.locale||"en-US",this.localizedLabels=this._getLocalizedLabel(),this._filterHandler=e.filterHandler||null,this._searchHandler=this._ctrlInstance.model.searchSettings||null,this._cancelHandler=e.cancelHandler||null,
this._customFilterHandler=e.customFilterHandler||null,this._cssClass=e.cssClass||null,this._matchCase=e.allowCaseSensitive||!1,this._title=e.title||this.localizedLabels.title,this._complexBlankCriteria=e.enableComplexBlankFilter,this._blankValue=e.blankValue,this.fName=e.initFilterCol||null,this._spliter=e.valueDelimiter||t.ExcelFilter.valueDelimiter,this._initialFName=this.fName,this._displayName=null,this._dataSource=null,this._isUrlAdaptor=!1,this._$tableID=null,this._$blankVal=null,this._$selectedColors=[],this._$enableColor=!1,this._$filteredByColor="",this._$colType=null,this._$key=0,this.filteredColumn=null,this.sortedColumns=null,this._chkList=null,this._listsWrap=null,this._menuWrap=null,this._localJSON=null,this._actualCount=0,this._totalRcrd=0,this._enableResponsiveRow=!1,this._searchCount=0,this._currentData=null,this._openedFltr=null,this._predicates=[],this.cFilteredCols=null!=this.fName?[this.fName]:[],this._columnsFiltered=[],this.guid=t.getGuid("excelfilter"),this._noDlg=[],this._sepAftr=["sortDesc","notequal","between","top10","endswith","contains"],this._posType=["number","date","datetime","string","boolean","guid"],this._empties=this._complexBlankCriteria?["null","undefined",""]:[this.guid],this._reqInProgess=!1,this._isFiltered=!1,this._onActionBegin=e.actionBegin||null,this._onActionComplete=e.actionComplete||null,this.maxItemOnQuery=0,this.enableNormalize=!0,this.enableSelect=!1,this._onDemandSearch=!1,this._searchRequest=!1,this._isIndeterminate=!1,this._selectAll="<div class='e-ftrchk'><input type='checkbox' class='e-selectall' value='selectall' class='e-ftrchk' /><label class='e-ftrchk'>("+this.localizedLabels.SelectAll+")</label></div>",this._blanks="<div class='e-ftrchk'><input type='checkbox' id='blanks' class='e-ftrchk' value='"+this._empties.join(this._spliter)+"' @@/><label class='e-ftrchk' for='blanks' value=''>("+this.localizedLabels.Blanks+")</label></div>",this._blank=i,this._addAtLast=!1,this.guidMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.GuidFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.GuidMenuOptions}],this.numberMenuOpt=this.booleanMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.NumberFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.NumberMenuOptions}],this.stringMenuOpt=[{id:1,text:this.localizedLabels.SortTextAscending,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortTextDescending,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.TextFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.StringMenuOptions}],this.dateMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DateMenuOptions}],this.datetimeMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateTimeFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DatetimeMenuOptions}],this},t.excelFilter.prototype={isNotBlank:function(e,i){var s=t.isNullOrUndefined(e)||""===e||null===e;return i||""!==e&&null!==e||(this._addAtLast=!0),!s},_checkBlank:function(e){if(this.isNotBlank(e))return!0;var t=this._blank==i&&!this._addAtLast;return t&&(this._blank=!0),t},_getValueData:function(e,i){var s=this._empties;return this.isNotBlank(e,!0)&&(s=t.distinct(i,this._$foreignKey||this.fName,!1)),s.join(this._spliter)},getPredicate:function(e,s,n){var r,o,l,a,d;for(this._isUrlAdaptor=this._ctrlInstance._dataSource()instanceof t.DataManager&&(this._ctrlInstance._dataSource().adaptor instanceof t.UrlAdaptor||this._ctrlInstance._dataSource().adaptor instanceof t.WebMethodAdaptor),r=s!=i?[s]:t.distinct(e,"field",!1),l={},a=0,d=r.length;a<d;a++)o=new t.DataManager(e).executeLocal((new t.Query).where("field","equal",r[a])),l[r[a]]=this.generatePredicate(o),n&&(this._predicates[this._$key]=this._predicates[this._$key]||{},this._predicates[this._$key][r[a]]=l[r[a]]);return l},generatePredicate:function(e){var i,s,n,r=e?e.length:0;if(r){for(s=this._updateDateFilter(e[0]),i=!this._isUrlAdaptor||"date"!=s.type&&"datetime"!=s.type?s.ejpredicate?s.ejpredicate:t.Predicate(s.field,s.operator,s.value,s.ignoreCase||!s.matchcase):this._getDatePredicate(s),n=1;n<r;n++)e[n]=this._updateDateFilter(e[n]),this._isUrlAdaptor&&r>2&&n>1&&"or"==e[n].predicate?"date"==e[n].type||"datetime"==e[n].type?i.predicates.push(this._getDatePredicate(e[n])):i.predicates.push(t.Predicate(e[n].field,e[n].operator,e[n].value,e[n].ignoreCase||!e[n].matchcase)):i=!this._isUrlAdaptor||"date"!=e[n].type&&"datetime"!=e[n].type?e[n].ejpredicate?i[e[n].predicate](e[n].ejpredicate):i[e[n].predicate](e[n].field,e[n].operator,e[n].value,e[n].ignoreCase||!e[n].matchcase):i[e[n].predicate](this._getDatePredicate(e[n]));return i||null}},_getDatePredicate:function(e){return t.Predicate(e.field,e.operator,e.value,e.ignoreCase||!e.matchcase)},getFilterFrom:function(e,i){var i=t.distinct(i,this.fName,!1);return this.maxItemOnQuery>0&&(i=i.slice(0,this.maxItemOnQuery)),t.UrlAdaptor.prototype.getFiltersFrom(i,(new t.Query).foreignKey(this._$foreignKey))},renderDialog:function(e){this._$colType=e;var i=this.id+e+"_excelDlg",s=t.buildTag("div#"+i+".e-excelfilter e-dlgcontainer e-shadow"),n=t.buildTag("ul#"+this.id+e+"_MenuItem"),r=this._getMenuData(e);n=this._createLiTag(n,r,!1);var o=t.buildTag("span.e-searchbox e-fields").append(t.buildTag("input#"+this.id+"_SearchBox.e-ejinputtext e-searchinput",{},{},{type:"text",placeholder:this.localizedLabels.Search})).append(t.buildTag("span.e-search e-icon")),l=t.buildTag("div#"+this.id+e+"_CheckBoxList.e-checkboxlist e-fields").append(t.buildTag("div")),a=this._createBtn(),d=t.buildTag("div.e-searchcontainer"),h=t.buildTag("div.e-status e-fields e-hide",this.localizedLabels.CheckBoxStatusMsg);s.append(n),d.append(o),d.append(h),d.append(l),d.append(a),s.append(d),s.appendTo(this._ctrlInstance.element),s.css("display","none"),this._renderCustomFDlg(e),this._dialogContainer=s,null!=this._cssClass&&s.addClass(this._cssClass),this._showSort||(n.find(".e-fnsort").closest("li").css("display","none"),n.find("li.e-separator:first").css("display","none")),this._lsitBoxTemplate(),this._renderSubCtrls(e),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&t.ieClearRemover(o.find("input")[0]),this._wireEvents()},_renderSubCtrls:function(i){e("#"+this.id+i+"_MenuItem").ejMenu({orientation:"vertical",width:266,click:t.proxy(this._menuHandler,this),enableRTL:this._ctrlInstance.model.enableRTL,enableSeparator:!1}),e("#"+this.id+i+"_OkBtn").ejButton({text:this.localizedLabels.Ok,showRoundedCorner:!0,width:60,click:t.proxy(this._fltrBtnHandler,this),enabled:!0}),e("#"+this.id+i+"_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:60,click:t.proxy(this.closeXFDialog,this)}),e("#"+this.id+i+"_CheckBoxList").ejScroller({height:130,width:234,scroll:t.proxy(this._virtualize,this)}),e("#"+this.id+i+"_CheckBoxList").ejWaitingPopup({showOnInit:!1})},openXFDialog:function(s){var n,r,o;this.fName=s.field,this._dataSource=s.dataSource,this._$colType=s.type||"string",this._$format=s.format||"",this._enableResponsiveRow=s.enableResponsiveRow,this.filteredColumn=s.filteredColumns||this._ctrlInstance.model.filterSettings.filteredColumns,this.sortedColumns=s.sortedColumns||this._ctrlInstance.model.sortSettings.sortedColumns,this._displayName=s.displayName,this.query=s.query||new t.Query,this._$key=s.key||0,this._$tableID=s.tableID,this._$blankVal=t.isNullOrUndefined(this._$tableID)?this._$blankVal:s.blank,this._$selectedColors=s.selectedColors||[],this._$enableColor=s.enableColor||!1,this._$filteredByColor=s.filteredByColor||this._$filteredByColor,this._$foreignField=s.foreignKeyValue,this._$foreignData=s.foreignDataSource,this._$foreignKey=s.foreignKey,this._$foreignKeyType=s.foreignKeyType,this._$foreignData instanceof t.DataManager&&(this._$foreignData.adaptor instanceof t.ODataAdaptor||this._$foreignData.adaptor instanceof t.ODataV4Adaptor||this._$foreignData.adaptor instanceof t.WebApiAdaptor)&&(this.maxItemOnQuery=50),e.extend(this.localizedLabels,s.localizedStrings||{}),o={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType},this._ctrlInstance._trigger(this._onActionBegin,o)||(null!=this._openedFltr&&this._openedFltr.is(e("#"+this.id+this._$colType+"_excelDlg"))||(this.closeXFDialog(),this._openedFltr=e("#"+this.id+this._$colType+"_excelDlg")),this._listsWrap=e("#"+this.id+this._$colType+"_CheckBoxList"),this._menuWrap=e("#"+this.id+this._$colType+"_MenuItem"),this._searchBox=this._openedFltr.find(".e-searchbox input"),this._setPosition(this._openedFltr,s.position),this._openedFltr.addClass(s.cssClass),this._openedFltr.fadeIn(300,function(){}),r=e("#"+this.id+this._$colType+"_MenuItem").find("li[ejfnrole='popup']"),this._$enableColor?(this._createDivTag(r.eq(0).find(".e-shadow"),this._$selectedColors,!1,"sort"),this._$filteredByColor==-1||this._$filteredByColor.length<1||this._$filteredByColor===this.fName?this._createDivTag(r.eq(1).find(".e-shadow"),this._$selectedColors,!1,"filter"):r.eq(1).addClass("e-disable-item")):r.hide(),this._isFiltered=this._predicates[this._$key]!=i&&this._predicates[this._$key][this.fName]!=i,this._isFiltered=s.isFiltered||this._isFiltered,("date"==this._$colType||"datetime"==this._$colType)&&""==this._$format&&(this._$format="date"==this._$colType?"{0:MM/dd/yyyy}":"{0:MM/dd/yyyy hh:mm:ss}"),this._processListData(),n=this._listsWrap.data("ejScroller"),this._ctrlInstance.model.enableRTL&&n.isHScroll()&&(n.scrollLeft(n.content()[0].scrollWidth-n.content()[0].clientWidth),n.refresh()),this._setDisable(),o={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType},this._ctrlInstance._trigger(this._onActionComplete,o))},closeXFDialog:function(i){if(null!=i){var s=e(i.target);if(!(s.closest("#"+this.id+this._$colType+"_CustomFDlg").length>0||s.closest("#"+this.id+this._$colType+"_excelDlg").length>0))return}this._openedFltr&&(this._openedFltr.hasClass("e-dlgcustom")?this._openedFltr.ejDialog("close"):(this._openedFltr.fadeOut(300,function(){}),this._listsWrap.ejWaitingPopup("hide")),t.isNullOrUndefined(this._cancelHandler)||this._cancelHandler(),this.resetFilterModel(),this._ctrlInstance._$fDlgIsOpen=!1)},_setPosition:function(e,t){e.css("position","absolute"),e.css("left",t.X).css("top",t.Y)},_setDisable:function(){var i,s,n,r=this._menuWrap.find("li[ejfnrole='clearfilter']"),o=this._menuWrap.find("li[ejfnrole='filterpopup']"),l=this._menuWrap.find("li[ejfnrole *= 'sort']");this._listsWrap.find("input").filter(":checked:not(.e-selectall)").length;if(this._isFiltered?r.removeClass("e-disable-item"):r.addClass("e-disable-item"),this._showSort&&(i=t.DataManager(this.sortedColumns).executeLocal((new t.Query).where("field","equal",this.fName)),i.length&&"ascending"==i[0].direction?l.filter("[ejfnrole='sortAsc']").addClass("e-disable-item"):l.filter("[ejfnrole='sortAsc']").removeClass("e-disable-item"),i.length&&"descending"==i[0].direction?l.filter("[ejfnrole='sortDesc']").addClass("e-disable-item"):l.filter("[ejfnrole ='sortDesc']").removeClass("e-disable-item")),s=o.find(".aschild"),0!=this.cFilteredCols.length&&e.inArray(this.fName,this.cFilteredCols)!=-1){for(n=0;n<this.filteredColumn.length;n++)if(this.filteredColumn[n].field==this.fName){0==s.find("#ejFiltercheck").length&&(s.append("<input type='checkbox' id='ejFiltercheck' />"),s.find("#ejFiltercheck").ejCheckBox({checked:!0}),s.find("#ejFiltercheck").ejCheckBox("disable")),o.find(".e-shadow .e-exceltick").length>0&&o.find(".e-shadow .e-exceltick").remove(),this.filteredColumn[n].field==this.fName&&!t.isNullOrUndefined(this.filteredColumn[n+1])&&this.filteredColumn[n+1].field==this.fName&&(this._$foreignField&&this.filteredColumn[n+1].customFilter||!this._$foreignField)?"greaterthanorequal"==this.filteredColumn[n].operator&&"lessthanorequal"==this.filteredColumn[n+1].operator?o.find(".e-shadow .e-list[ejvalue=between]").find("a").append("<span class='e-exceltick e-icon' />"):o.find(".e-shadow .e-list[ejvalue=customfilter]").find("a").append("<span class='e-exceltick e-icon' />"):this._$foreignField?o.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[n].actualFilterOperator+"]").find("a").append("<span class='e-exceltick e-icon' />"):o.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[n].operator+"]").find("a").append("<span class='e-exceltick e-icon' />");break}}else for(n=0;n<this.filteredColumn.length;n++)if(this.filteredColumn[n].field==this.fName){this._removeTick(o,s);break}this._isFiltered||0==s.find("#ejFiltercheck").length||this._removeTick(o,s),"boolean"==this._$colType&&this._menuWrap.find("li[aria-haspopup=true]").addClass("e-hide"),this._searchBox.val(""),this._searchBox.siblings().addClass("e-search").removeClass("e-cancel")},_removeTick:function(e,t){t.find("#ejFiltercheck").ejCheckBox("destroy"),e.find(".aschild #ejFiltercheck").remove(),e.find(".e-shadow .e-exceltick.e-icon").remove()},_createBtn:function(e){var i=e?this.id+this._$colType+"Custom":this.id+this._$colType,s=t.buildTag("div.e-btncontainer e-fields"),n=t.buildTag("div");return n.append(t.buildTag("input#"+i+"_OkBtn.e-fltrbtn e-btnsub e-flat",{},{},{type:"button"})).append(t.buildTag("input#"+i+"_CancelBtn.e-fltrbtn e-btncan e-flat",{},{},{type:"button"})),s.append(n)},_menuHandler:function(t){var i,s,n,r,o,l,a=e(t.element),d=a.attr("ejfnrole"),h={};if("filterbgcolor"===d||"filterfgcolor"===d)i={field:this.fName,operation:d,color:e(t.element).css("background-color")},h={originalEvent:t.event,action:"filterbycolor",filterDetails:i,tableID:this._$tableID},this._isFiltered=!1;else if("clearfilter"==d)s={field:this.fName,operator:"",value:"",predicate:"or"},h={originalEvent:t.event,fieldName:this.fName,action:"clearfiltering",filterDetails:s,tableID:this._$tableID},n=e.inArray(this.fName,this.cFilteredCols),n!=-1&&this.cFilteredCols.splice(n,1),r=e.inArray(this.fName,this._columnsFiltered),r!=-1&&this._columnsFiltered.splice(r,1),this._initialFName==this.fName&&(this._initialFName=null);else{if("popup"==d||"filterpopup"==d)return;"operator"==d?this._openCustomFilter(a.attr("ejvalue")):"sortAsc"==d||"sortDesc"==d?(o="sortAsc"==d?"ascending":"descending",l={field:this.fName,direction:o},h={originalEvent:t.event,action:"sorting",sortDetails:l,tableID:this._$tableID}):(l={field:this.fName,direction:o,operation:d,color:e(t.element).css("background-color")},h={originalEvent:t.event,action:"sortbycolor",sortDetails:l,tableID:this._$tableID})}"operator"!=d&&(this._filterHandler(h),this.closeXFDialog())},_searchBoxFocus:function(t){var i=e(t.target);i.hasClass("e-cancel")&&(i.prev().val(""),i.next().addClass("e-cancel"),i.addClass("e-search"),i.prev().trigger("keyup")),"focusin"==t.type&&(i.next().addClass("e-cancel"),i.next().removeClass("e-search"))},_search:function(s){var n,r,o=s.target.value,l=e(s.target);n="string"!=this.getType()&&parseFloat(o)?parseFloat(o):o,r="contains",n=""==n||n==i?i:n,"boolean"==this._$colType&&(n!=i&&this.localizedLabels.True.toLocaleLowerCase().indexOf(n.toLowerCase())!=-1?n="true":n!=i&&this.localizedLabels.False.toLocaleLowerCase().indexOf(n.toLowerCase())!=-1&&(n="false")),("date"!=this._$colType&&"datetime"!=this._$colType||(n=t.parseDate(o,this.replacer(this._$format,/{0:|}/g,"")),r="equal",null!=this._previousValue||null!=n))&&(this._previousValue=n,delay=this._dataSource instanceof t.DataManager&&this._ctrlInstance.model.pageSettings.totalRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices?1500:0,sender={type:"filterchoicesearch",value:n,operator:r,matchcase:["date","datetime"].indexOf(this._$colType)==-1&&this._matchCase},this._processSearch(sender,delay),""==l.val()?(l.next().addClass("e-search"),l.next().removeClass("e-cancel")):(l.next().addClass("e-cancel"),l.next().removeClass("e-search")))},_processSearch:function(e,t){this._alreadySearchProcessed?(this._stopTimer(),this._startTimer(e,t)):(this._alreadySearchProcessed=!0,this._startTimer(e,t))},_startTimer:function(e,t){this._timer=window.setTimeout(function(){proxy._processListData(e)},t)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_getLocalizedLabel:function(){return t.getLocalizedConstants("ej.ExcelFilter",this._locale)},_getMenuData:function(e){return e!=i?this[e+"MenuOpt"]:[]},_lsitBoxTemplate:function(){var i,s={},n={};s[this.id+"isNotBlank"]=t.proxy(this.isNotBlank,this),s[this.id+"checkBlank"]=t.proxy(this._checkBlank,this),s[this.id+"_getValueData"]=t.proxy(this._getValueData,this),s[this.id+"_checkBoxState"]=t.proxy(this._setCheckState,this),s[this.id+"_genId"]=this._genCheckID,e.views.helpers(s),i=this.id+this._$colType+"{{:~"+this.id+"_genId()}}",n[this.id+this._$colType+"_listBox_Template"]="{{if ~"+this.id+"checkBlank(key)}}<div class='e-ftrchk'><input type='checkbox' id='"+i+"' value='{{html:~"+this.id+"_getValueData(key, items)}}' class='e-ftrchk' {{:~"+this.id+"_checkBoxState(~"+this.id+"_getValueData(key, items))}}/><label class='e-ftrchk' for='"+i+"'>{{if ~"+this.id+"isNotBlank(key,'true')}} {{>key}} {{else}} (Blanks) {{/if}}</label></div>{{/if}}",e.templates(n)},_processListData:function(e){var s,n,r,o,l,a,d,h={},c=new t.Query,u=(new t.Query).requiresCount(),p={};this._searchCount=0;var m,g=this._predicates[this._$key],f=null,_=null,d=null;t.isNullOrUndefined(this._$foreignField&&this._$foreignData)?(f=this._dataSource,_=this.fName,this._localJSON):(f=this._$foreignData,this._dataSource instanceof t.DataManager&&!(f instanceof t.DataManager)&&(f=t.DataManager(f)),_=this._$foreignField);for(n in g)n!=this.fName&&(r=g[n],o=r.from,o?c.skip("top"==o?0:f.length-(f.length-r.take)).take(r.take):m=m!=i?m.and(r):r);h.columnName=_,c.requiresCount(),this._dataSource instanceof t.DataManager&&!this._dataSource.dataSource.offline&&this._ctrlInstance.model.pageSettings.totalRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices&&(c.take(this.maxFilterChoices),this._onDemandSearch=!0),m&&c.where(m),t.merge(c.queries,this.query.queries)||t.merge(c._params,this.query._params),p.requestType=e?e.type:"filterchoicerequest",p.filterModel=this,p.query=c,p.dataSource=f,this._ctrlInstance._trigger(this._onActionBegin,p)||(!t.isNullOrUndefined(this._searchHandler)&&this._searchHandler.key.length&&(l=this._searchHandler,c.search(l.key,l.fields,l.operator||"contains",l.ignoreCase||!0)),this.enableSelect&&c.select(this.fName),e&&"filterchoicesearch"==e.type?(h.type=e.type,this._$foreignField&&(c=u),e.value&&c.where(_,e.operator,e.value,!e.matchcase),this._dataSource instanceof t.DataManager&&this._ctrlInstance.model.pageSettings.totalRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices?(this._searchRequest=!0,this._listsWrap.ejWaitingPopup("show"),this._$foreignField?(a=this._$foreignData instanceof t.DataManager?this._$foreignData:t.DataManager(this._$foreignData),this._dataProcessing(a,c,h)):this._dataProcessing(this._dataSource,c,h)):this._dataProcessing(t.DataManager(this._localJSON),c,h)):this._dataSource instanceof t.DataManager?(proxy=this,h.type="filterchoicerequest",this._listsWrap.ejWaitingPopup("show"),this._reqInProgess||(this._reqInProgess=!0,this._$foreignField&&(f=this._dataSource),s=f.executeQuery(c),s.done(function(e){proxy._$foreignField?proxy._filterForeignData(e,h):(d=e.result,h.data=proxy._localJSON=proxy._currentData=d,proxy._totalRcrd=e.count,proxy._listsWrap.ejWaitingPopup("hide"),proxy._setCheckBoxList(h),proxy._reqInProgess=!1)}))):(d=[],s=t.DataManager(this._dataSource).executeLocal(c),h.type="filterchoicerequest",this._$foreignField?this._filterForeignData(s,h):(d=s.result,h.data=this._localJSON=this._currentData=d,this._totalRcrd=s.count,this._setCheckBoxList(h))))},_dataProcessing:function(e,t,i){var s;s=e.executeQuery(t),s.done(function(e){i.data=proxy._currentData=e.result,proxy._totalRcrd=proxy._searchCount=e.result.length,proxy._setCheckBoxList(i)})},_filterForeignData:function(i,s){var n,r,o,l,a,d,h,c="boolean"==typeof s,u=this._$foreignKey,p=this._$foreignField,m=this._$foreignKeyType,g=this,f={},_=new t.Query,v=this._$foreignData instanceof t.DataManager?this._$foreignData:t.DataManager(this._$foreignData);if(c){for(d=i[0],f=i[0],l=i.slice(),!d||this.closeXFDialog(),o=new t.Predicate(p,d.operator,d.value,!d.matchcase),a=1,h=i.length;a<h;a++)d=i[a],o=o[d.predicate](p,d.operator,d.value,!d.matchcase);_.where(o)}else n=i.result,r=i.count,!r||_.where(this.getFilterFrom(this._$foreignData,n)),this._listsWrap.ejWaitingPopup("model.showOnInit")||this._listsWrap.ejWaitingPopup("show");_.select([u,p]),v.executeQuery(_).done(function(i){if(c){var n=t.distinct(i.result,u,!0),n=0 in n?n:[{}],o=n.map(function(t){return e.extend({},f,{value:t[u],operator:"equal",actuals:l,type:m})});g.initiateFilter(o)}else s.data=g._localJSON=g._currentData=i.result,g._totalRcrd=r,g._listsWrap.ejWaitingPopup("hide"),g._setCheckBoxList(s),g._reqInProgess=!1})},_setCheckBoxList:function(i){var s,n,r={},o=this._blanks;r.requestType=i.type,r.dataSource=this._dataSource,r.filterModel=this,0!=this._currentData.length?(s=this.getDistinct(i.data,i.columnName,!0,!!this._$foreignKey),this._isFiltered,this._actualCount=s.length,s.length=this._maxCount>this._actualCount?this._actualCount:this._maxCount,this._onDemandSearch&&1e3==this._actualCount||this._actualCount>this._maxCount?this._openedFltr.find("div.e-status").removeClass("e-hide"):this._openedFltr.find("div.e-status").addClass("e-hide"),this._filterdCol=t.DataManager(this.filteredColumn).executeLocal(t.Query().where("field","equal",this.fName)),this._listsWrap.find("div:first").html([this._selectAll,e.render[this.id+this._$colType+"_listBox_Template"](s),this._addAtLast?this.replacer(o,/@@/g,this._setCheckState,this._empties.join(this._spliter)):""].join("")),this._chkList=this._listsWrap.find("input:checkbox").not(".e-selectall"),$inView=this._chkList.slice(0,20),$inView.ejCheckBox({change:t.proxy(this._checkHandler,this)}),$inView.siblings().height(14).width(14),this._listsWrap.find(".e-selectall").ejCheckBox({change:t.proxy(this._selectAllHandler,this),enableTriState:this._interDeterminateState}),this._listsWrap.find(".e-selectall").attr("id",this.id+this._$colType+"SelectAll"),this._listsWrap.find(".e-selectall").siblings().height(14).width(14),this._listsWrap.find(".e-selectall").closest("span").siblings("label").attr("for",this.id+this._$colType+"SelectAll")):(this._listsWrap.find("div").first().html(t.buildTag("div.e-ftrchk",this.localizedLabels.NoResult,{},{})),this._chkList=this._listsWrap.find("input:checkbox").not(".e-selectall")),t.isNullOrUndefined(this._chkList)||(n=this._chkList.filter(":checked").length),this._isFiltered&&this._searchRequest&&0==n&&this._checkIsIndeterminate(i.columnName,this.filteredColumn),this._isFiltered&&this._actualCount!=n?(n>0||this._isIndeterminate&&this._interDeterminateState)&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checkState","indeterminate"):this._listsWrap.find(".e-selectall").ejCheckBox({checked:!0}),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=n}),this._listsWrap.ejScroller({scrollTop:0}).ejScroller("refresh"),this._listsWrap.hasClass("e-waitingpopup")&&this._listsWrap.ejWaitingPopup("hide"),this._ctrlInstance._trigger(this._onActionComplete,r)||(this._isIndeterminate=!1)},_checkIsIndeterminate:function(e,t){for(var i=0;i<t.length;i++)e==t[i].field&&(this._isIndeterminate=!0)},_createLiTag:function(s,n,r){return proxy=this,e.each(n,function(n,o){var l,a=t.buildTag("li",{},{},o.htmlAttribute||r&&{ejfnrole:"operator",ejvalue:o.value}||{}),d=r&&e.inArray(o.value,proxy._noDlg)==-1?"...":"",h=t.buildTag("a",o.text+d,{},{});o.sprite!=i&&h.append(t.buildTag("span",{},{},{class:o.sprite})),o.child!=i&&(l=3!=o.id&&5!=o.id?proxy._createLiTag(t.buildTag("ul.e-shadow"),o.child,!0):3===o.id?proxy._createDivTag(t.buildTag("ul.e-shadow"),o.child,!0,"sort"):proxy._createDivTag(t.buildTag("ul.e-shadow"),o.child,!0,"filter")),o.child==i?s.append(a.append(h)):s.append(a.append(h).append(l)),e.inArray(o.value||o.htmlAttribute&&o.htmlAttribute.ejfnrole,proxy._sepAftr)!=-1&&s.append(t.buildTag("li.e-separator"))}),s},_createDivTag:function(e,i,s,n){var r,o,l,a,d=[],h=[],c=!1,u="",p="",m="",g="",f="",_="";if("sort"==n?(u=this.localizedLabels.SortByCellColor,p=this.localizedLabels.SortByFontColor):(u=this.localizedLabels.FilterByCellColor,p=this.localizedLabels.FilterByFontColor),m=n+"colorhdr",f=n+"fonthdr",g=n+"bgcolor",_=n+"fgcolor",e.length>0&&e.children().remove(),i.length>0){for(a=0;a<i.length;a++){for(l=0;l<d.length;l++)if(d[l]==i[a].background){c=!0;break}for(c||t.isNullOrUndefined(i[a].background)||i[a].background.startsWith("#6n")||d.push(i[a].background),c=!1,l=0;l<h.length;l++)if(h[l]==i[a].foreground){c=!0;break}c||t.isNullOrUndefined(i[a].foreground)||i[a].foreground.startsWith("#6n")||h.push(i[a].foreground),c=!1}if(d.length>0)for(r=t.buildTag("li.e-list e-bghdrcolor","","",{ejfnrole:m}),o=t.buildTag("a.e-menulink",u,{}),r.append(o),e.append(r),a=0;a<d.length;a++)r=t.buildTag("li.e-list e-valcolor",{},{"background-color":d[a]},{ejfnrole:g}),e.append(r);if(h.length>0)for(r=t.buildTag("li.e-list e-fghdrcolor","","",{ejfnrole:f}),o=t.buildTag("a.e-menulink",p,{}),r.append(o),e.append(r),a=0;a<h.length;a++)r=t.buildTag("li.e-list e-valcolor",{},{"background-color":h[a]},{ejfnrole:_}),e.append(r);d.length<1&&h.length<1?e.parent().addClass("e-disable-item"):e.parent().removeClass("e-disable-item")}else e.parent().addClass("e-disable-item");return e},_setCheckState:function(e){var i,s,n,r,o,l=e,a=e.split(this._spliter),d=a.length;if(!this._isFiltered||this._searchCount)return"checked";for(;d--;)if(l=this.processValue(a[d]),"date"==this._$colType||"datetime"==this._$colType||"boolean"==this._$colType){for(i=0,s=this._filterdCol.length;i<s;i++)if(("boolean"!=this._$colType||l===this._filterdCol[i].value)&&("date"!=this._$colType&&"datetime"!=this._$colType||(n="date"==this._$colType&&l instanceof Date?this._formatting(this._$format,new Date(l.getFullYear(),l.getMonth(),l.getDate()),this._locale):this._formatting(this._$format,l,this._locale),r=this._formatting(this._$format,this._filterdCol[i].value,this._locale),n===r)))return"checked"}else if(o=t.DataManager(this._filterdCol).executeLocal(t.Query().where("value","equal",l).where("operator","equal","equal")),0!=o.length)return"equal"==o[0].operator&&1==o[0].isCustom&&this._ctrlInstance.model.currentViewData.length>0?"checked":o[0].isCustom===!0?"":"checked"},_genCheckID:function(){return"CheckBox"+this.getIndex()},_formatting:function(e,t,i){if("date"==this._$colType&&""==e&&(e="{0:MM/dd/yyyy hh:mm:ss}"),"boolean"==this._$colType)return""===t?"":this.localizedLabels[1==t?"True":0==t?"False":""];if(this._formatFiltering||"date"==this._$colType){var s=this._ctrlInstance.formatting;return""!=e?s(e,t,i):t}},_updateDateFilter:function(e){return"date"==e.type||e.value instanceof Date?(e.value=e.value instanceof Date?e.value:t.parseJSON({val:e.value}).val,["equal","notequal"].indexOf(e.operator)==-1?e:this._setDateObject(e)):e},_checkHandler:function(t){e("#"+t.model.id).prop("checked",t.isChecked);var i,s=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)"),n=s.length,r=this._listsWrap.find(".e-selectall");n==this._chkList.length?(r.prop("checked",!0),i=!0):0!=n&&this._interDeterminateState?t.isInteraction&&r.ejCheckBox("model.checkState","indeterminate"):(r.prop("checked",!1),i=!1),r.ejCheckBox({checked:i}),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=n})},_selectAllHandler:function(t){"check"==t.checkState?(this._chkList.filter(":not(:checked)").ejCheckBox({checked:t.isChecked}),this._chkList.prop("checked",!0)):"uncheck"==t.checkState&&(this._chkList.filter(function(){if(e(this).hasClass("e-checkbox")&&e(this).prop("checked"))return this}).ejCheckBox({checked:t.isChecked}),this._chkList.prop("checked",!1),this._chkList.removeAttr("checked")),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:t.isChecked})},_renderCustomFDlg:function(i){var s,n=this.id+i+"_CustomFDlg";e("#"+n).length||(s=t.buildTag("div#"+n+".e-excelfilter e-dlgcustom"),s.addClass(this._cssClass),this._renderCDlgContent(s,i),s.ejDialog({showOnInit:!1,enableResize:!1,enableModal:!0,allowKeyboardNavigation:!1,title:this._title,width:370,content:"#"+this.id,enableRTL:this._ctrlInstance.model.enableRTL,closeIconTooltip:"Close"}),"ej.Grid"==this._ctrlInstance.sfType&&s.ejDialog({position:{Y:this._ctrlInstance._gridContentTable.offset().top}}),s.ejDialog("refresh"))},_renderCDlgContent:function(i,s){var n,r=t.buildTag("div.e-dlgfields",this.localizedLabels.Showrowswhere,{},{}),o=this.id+this._$colType,l=t.buildTag("fieldset.e-fieldset"),a=t.buildTag("tr.e-fields"),d=t.buildTag("tr.e-fields"),h=t.buildTag("tr.e-fields e-top"),c=t.buildTag("input#"+o+"_CustomDrop1"),u=t.buildTag("input#"+o+"_CustomDrop2"),p=t.buildTag("input#"+o+"_CustomDrop3"),m=t.buildTag("input#"+o+"_CustomValue1.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),g=t.buildTag("input#"+o+"_CustomValue2.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),f=t.buildTag("input#"+o+"_CustomValue3.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),_=t.buildTag("tr.e-predicate"),v=t.buildTag("input#"+o+"_CustomAndPredicate",{},{},{type:"radio",name:"predicate",value:"and"}),b=t.buildTag("input#"+o+"_CustomOrPredicate",{},{},{type:"radio",name:"predicate",value:"or"}),y=t.buildTag("input#"+o+"_CustomMatchPredicate",{},{},{type:"checkbox"});i.append(r),n=t.buildTag("table.e-optable"),
a.append(t.buildTag("td.e-operator").append(c)).append(t.buildTag("td.e-value").append(m)),_.append(t.buildTag("td",{},{},{}).append(v).append(t.buildTag("label.e-caption",this.localizedLabels.PredicateAnd,{},{for:o+"_CustomAndPredicate"})).append(b).append(t.buildTag("label.e-caption",this.localizedLabels.PredicateOr,{},{for:o+"_CustomOrPredicate"}))),d.append(t.buildTag("td.e-operator").append(u)).append(t.buildTag("td.e-value").append(g)),n.append(a).append(_).append(d),"string"==s&&_.append(t.buildTag("td",{},{},{}).append(y).append(t.buildTag("label.e-caption",this.localizedLabels.MatchCase,{},{for:o+"_CustomMatchPredicate"}))),("number"==s||"guid"==s)&&(h.append(t.buildTag("td.e-operator").append(p)).append(t.buildTag("td.e-value").append(f)),n.append(h)),l.append(t.buildTag("legend")).append(n),i.append(t.buildTag("div.e-dlgfields").append(l)),i.append(t.buildTag("div.e-dlgfields").append(this._createBtn(!0))),i.appendTo("body"),s.replace(s.charAt(0),s.charAt(0).toUpperCase()),e([c,u]).ejDropDownList({fields:{text:"text",value:"value"},height:27,width:120,enableRTL:this._ctrlInstance.model.enableRTL}),"number"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e([m,g]).ejNumericTextbox({showSpinButton:!1,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.NumericTextboxWaterMark,focusOut:function(){0==this.model.decimalPlaces&&this.element.prev(".e-input").val(this.model.value)}})):"guid"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e(m).css({height:"22px",width:"175px"}),e(g).css({height:"22px",width:"177px"})):"date"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e([m,g]).ejDatePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this._locale})):"datetime"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e([m,g]).ejDateTimePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DateTimePickerWaterMark,locale:this._locale})):"string"==s&&e([m,g]).ejAutocomplete({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL,enableDistinct:!0,width:"177px",height:"27px",locale:this._locale}),e([v,b]).ejRadioButton({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL}),y.ejCheckBox({}),e("#"+o+"Custom_OkBtn").ejButton({text:this.localizedLabels.Ok,showRoundedCorner:!0,width:"23.6%",click:t.proxy(this._fltrBtnHandler,this),enabled:!0}),e("#"+o+"Custom_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:"23.6%",click:t.proxy(this.closeXFDialog,this)})},_openCustomFilter:function(i){var s,n,r,o,l,a,d="top10"!=i?this._$colType:i,h=this.query,c=d.replace(d.charAt(0),d.charAt(0).toUpperCase()),u=this.id+this._$colType;this.closeXFDialog(),this._openedFltr=e("#"+u+"_CustomFDlg"),a={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0},this._ctrlInstance._trigger(this._onActionBegin,a)||(this._openedFltr.ejDialog("open"),this._openedFltr.ejDialog({open:function(){e("#"+u+"_CustomValue1").hasClass("e-autocomplete")?e("#"+u+"_CustomValue1").focus():e("#"+u+"_CustomValue1").prev().focus()}}),this._openedFltr.find("legend").html(this._displayName),s=["Number","Date"].indexOf(c)!=-1?6:5,n=this.localizedLabels[c+"MenuOptions"].slice(0,s),n.unshift({text:"",value:""}),e("#"+u+"_CustomDrop1").ejDropDownList({dataSource:n}),e("#"+u+"_CustomDrop2").ejDropDownList({dataSource:n}),"number"==this._$colType?(r=0,"top10"==i?(this._openedFltr.find(".e-optable tr").not(".e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr.e-top").removeClass("e-hide"),e("#"+u+"_CustomDrop3").ejDropDownList({dataSource:this.localizedLabels[c+"MenuOptions"]})):(r=0!=this._$format.length?parseInt(this._$format.replace(/\D/g,"")):0,this._openedFltr.find(".e-optable tr.e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr").not(".e-top").removeClass("e-hide"),e("#"+u+"_CustomValue1").ejNumericTextbox("model.decimalPlaces",r),e("#"+u+"_CustomValue2").ejNumericTextbox("model.decimalPlaces",r))):(this._openedFltr.find(".e-optable tr.e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr").not(".e-top").removeClass("e-hide")),"string"==this._$colType&&(o=this._$foreignField?this._$foreignField:this.fName,l=this._$foreignData&&this._$foreignField?this._$foreignData:this._dataSource,this._openedFltr.find(".e-autocomplete").ejAutocomplete({fields:{text:o},dataSource:l,query:h,focusIn:function(){var e=this.element.closest("td").siblings().find(".e-dropdownlist").ejDropDownList("getSelectedValue"),t=this.element.closest(".e-dialog-scroller").find(".e-checkbox").prop("checked");this.model.caseSensitiveSearch=t,this.model.filterType=""==e?this.model.filterType:e}})),"date"==this._$colType&&""!=this._$format?this._openedFltr.find(".e-datepicker").ejDatePicker({dateFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}):"datetime"==this._$colType&&""!=this._$format&&this._openedFltr.find(".e-datetimepicker").ejDateTimePicker({dateTimeFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}),this._setFilteredData(u,i),t.isNullOrUndefined(this._customFilterHandler)||this._customFilterHandler(),a={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0},this._ctrlInstance._trigger(this._onActionComplete,a))},_setFilteredData:function(s,n){var r,o,l,a,d,h,c=e.inArray(this.fName,this.cFilteredCols),u=[],p=[];if("top10"!=n){c!=-1&&(u=t.DataManager(this.filteredColumn).executeLocal(t.Query().where("field","equal",this.fName))),c!=-1&&this._$foreignField&&(u=u[0].actuals),null!=this._initialFName&&this._initialFName==this.fName&&(u[0].isCustom=!0),r=u.length;var m=this._openedFltr.find(".e-dropdownlist"),g=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),f=this._openedFltr.find(".e-predicate");for(p=c!=-1&&r&&u[0].from!=i?[n,""]:"between"==n&&c!=-1&&r?[u[0].operator,t.isNullOrUndefined(u[1])?"":u[1].operator]:c!=-1&&r&&u[0].isCustom?["customfilter"!=n&&c!=-1?n:u[0].operator,"customfilter"==n&&u[1]?u[1].operator:""]:c==-1&&"customfilter"==n?["equal",""]:"between"==n||"customfilter"==n?"customfilter"!=n?["greaterthanorequal","lessthanorequal"]:["",""]:[n,""],o=0;o<(c!=-1?r:2);o++)l=/\D*/.exec(p[o])[0],e(m[o]).prop("value",l),e(m[o]).ejDropDownList("setSelectedValue",l),e(m[o]).ejDropDownList({change:function(){this.element.closest(".e-fields").find(".e-autocomplete").val("")}}),a=c!=-1&&r&&u[o].isCustom&&(l==(this._$foreignField?u[o].actualFilterOperator:u[o].operator)||"customfilter"==l||"between"==l)?this._$foreignField?""!=l?u[o].actualFilterValue:"":u[o].value:"",e(g[o]).hasClass("e-datepicker")?e("#"+g[o].id).ejDatePicker("model.value",c!=-1&&r&&u[o].isCustom?u[o].value:null):e(g[o]).hasClass("e-numerictextbox")?e("#"+g[o].id).ejNumericTextbox("model.value",a):e(g[o]).hasClass("e-datetimepicker")?e(g[o]).ejDateTimePicker("model.value",a):e(g[o]).val(a),d=c!=-1&&r&&u[o].isCustom&&u[o].predicate!=i?this._$foreignField?u[o].actualPredicate:u[o].predicate:"and",f.find("input[value="+d+"]").ejRadioButton({checked:!0}),"string"==this._$colType&&(h=c!=-1&&r&&u[o].isCustom?u[o].matchcase:this._matchCase,f.find("input.e-js[type='checkbox']").ejCheckBox({checked:h})),this._openedFltr.find(".e-value input:visible:eq(0)").select()}},_setDateObject:function(i){var s;if(null!=i.value){var n=(i.value,e.extend(!0,{},i)),r=e.extend(!0,{},i),o=new Date(n.value.setSeconds(n.value.getSeconds()-1)),l=new Date(r.value.setSeconds(r.value.getSeconds()+2));return i.value=new Date(i.value.setSeconds(r.value.getSeconds()-1)),n.value=o,r.value=l,"equal"==i.operator?(n.operator="greaterthan",n.predicate="and",r.operator="lessthan",r.predicate="and"):"notequal"==i.operator&&(n.operator="lessthanorequal",n.predicate="or",r.operator="greaterthanorequal",r.predicate="or"),s=t.Predicate(n.field,n.operator,n.value,!n.matchcase),s=s[r.predicate](r.field,r.operator,r.value,!r.matchcase),i.ejpredicate=s,i.type="date",i}return i},_getCDlgFields:function(){var t,s,n,r,o,l,a,d,h=this._openedFltr.find(".e-dropdownlist"),c=this._openedFltr.find(".e-checkbox"),u=!0,p=[],m=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),g=this._openedFltr.find(".e-value input"),f=this._openedFltr.find(".e-predicate input[type='radio']:checked").val();for(e.inArray(this.fName,this.cFilteredCols)==-1&&this.cFilteredCols.push(this.fName),s=0,n=h.length;s<n;s++)if(r=e(h[s]).ejDropDownList("getSelectedValue"),"number"==this._$colType&&(o=parseFloat(m.eq(s).ejNumericTextbox("model.value"))),"guid"==this._$colType&&(o=g.eq(s).val()),"string"==this._$colType&&(o=m.eq(s).val(),u=c.is(":checked")),"date"==this._$colType&&(o=m.eq(s).ejDatePicker("model.value")),"datetime"==this._$colType&&(o=m.eq(s).ejDateTimePicker("model.value")),t={field:this.fName,predicate:1==s?f:"or",matchcase:u,isCustom:!0},"top"==r||"bottom"==r)p.push(e.extend(!0,{value:"",operator:"notequal",take:o,from:r},t));else{if(""==r)break;this._empties.indexOf(o+"")>-1||"number"==this._$colType&&isNaN(o)?(l=this.iterateAndGetCollection(this._empties.join(this._spliter),e.extend({},t,{predicate:"notequal"===r.toLowerCase()?"and":"or",operator:r.toLowerCase()})),a=this.generatePredicate(l),p.push(e.extend({},t,{ejpredicate:a,operator:r.toLowerCase()}))):(d={},e.extend(!0,d,{value:o,operator:r.toLowerCase(),isCustom:!0,actualFilterOperator:r.toLowerCase(),actualFilterValue:o,actualPredicate:t.predicate},t),"date"==this._$colType&&(d.type="date"),p.push("date"==this._$colType&&["equal","notequal"].indexOf(r.toLowerCase())!=-1?this._setDateObject(d):d))}this._$foreignField==i?this.initiateFilter(p):this._filterForeignData(p,!0)},_fltrBtnHandler:function(){var i,s,n=[],r={};if(this._openedFltr.hasClass("e-dlgcustom"))n=this._getCDlgFields(),e.inArray(this.fName,this.cFilteredCols)==-1&&n[0]&&this.cFilteredCols.push(this.fName);else{if(!this._isFiltered&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")&&0==this._searchCount)return this.closeXFDialog();var o,l=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)"),a=l.length,d=this.getType(),h="string"==this._colType?"startswith":"equal",c="string"!=this._colType||this._matchCase,u={field:this.fName,predicate:"or",operator:h,matchcase:c};for(i=0;i<a;i++)o=l[i].value,this.enableNormalize&&o.indexOf(this._spliter)!=-1?t.merge(n,this.iterateAndGetCollection(o,u)):(o=this.processValue(o,d),e.extend(!0,r,{value:o},u),n.push("date"==d?this._setDateObject(r):r),r={});s=e.inArray(this.fName,this.cFilteredCols),s!=-1&&this.cFilteredCols.splice(s,1),this._isFiltered&&this._searchRequest&&(this._checkIsIndeterminate(this.fName,this.filteredColumn),this._isIndeterminate&&(t.merge(n,this.filteredColumn),n=t.distinct(n,"value",!0),this._searchRequest=!1)),this.initiateFilter(n)}},initiateFilter:function(s){var n,r,o,l=s[0];if(!t.isNullOrUndefined(l)){for(isTake=l.from,n=l.ejpredicate?l.ejpredicate:t.Predicate(l.field,l.operator,l.value,!l.matchcase),r=1,o=s.length;r<o;r++)n=s[r].ejpredicate!=i?n[s[r].predicate](s[r].ejpredicate):n[s[r].predicate](s[r].field,s[r].operator,s[r].value,!s[r].matchcase);arg={action:"filtering",filterCollection:s,fieldName:this.fName,ejpredicate:n,tableID:this._$tableID},this._predicates[this._$key]==i&&(this._predicates[this._$key]={}),this._predicates[this._$key][this.fName]=isTake?{from:l.from,take:l.take}:n,this._openedFltr.hasClass("e-dlgcustom")||!this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")||this._searchCount||e.inArray(this.fName,this._columnsFiltered)==-1||(arg={action:"clearfiltering",filterDetails:{field:this.fName,operator:"",predicate:"or",value:""},fieldName:this.fName,tableID:this._$tableID}),e.inArray(this.fName,this._columnsFiltered)==-1&&this._columnsFiltered.push(this.fName),this._filterHandler(arg)}this.closeXFDialog()},getDistinct:function(e,i,s,n){for(var r,o,l,a={},d=e.length,h=[];d--;)r=e[d],o=t.getObject(i,r),l=o,this.enableNormalize&&(l=this._formatting(this._$format,o,this._locale)),r.ejvalue=l,!n&&o in a||h.push(s?r:o),a[o]=!0;return t.group(t.mergeSort(h,i),"ejvalue")},iterateAndGetCollection:function(t,i){for(var s,n=t.split(this._spliter),r=n.length,o=[];r--;)s=this.processValue(n[r]),o.push(e.extend(!0,{value:s},i));return o},processValue:function(e,s){switch(s=s||this.getType(),s=this._empties.indexOf(e)!=-1?"empty":s,e=e===this.guid?this._blankValue+"":e,s){case"empty":e="null"==e?null:"undefined"==e?i:"";break;case"date":case"datetime":e=new Date(e);break;case"number":e=+e;break;case"boolean":e=isNaN(e)||"string"!=typeof e?"true"===e:0!=t.parseInt(e)}return e},getType:function(){return t.isNullOrUndefined(this._$foreignField)?this._$colType:this._$foreignKeyType},replacer:function(e,t,i,s){return"function"==typeof i&&(i=i.call(this,s)),e.replace(t,i)},_virtualize:function(i){var s,n=e("#"+this.id+this._$colType+"_CheckBoxList").height(),r=this._chkList.not(".e-checkbox").filter(function(){if(this.offsetTop>i.scrollTop-this.offsetHeight&&i.scrollTop+n+70>this.offsetTop+this.offsetHeight)return this});0!=r.length&&(r.filter(":checked").ejCheckBox({checked:!0}),r.filter(":not(:checked)").ejCheckBox({checked:!1}),r.ejCheckBox({change:t.proxy(this._checkHandler,this)}),s=this._listsWrap.ejScroller("instance"),s.refresh())},resetFilterModel:function(){this._blank=i,this._addAtLast=!1,this._isFiltered=!1,this._searchCount=0},resetExcelFilter:function(){var t,i,s,n,r,o=this.id;for(this._predicates=[],this.cFilteredCols=[],this.resetFilterModel(),t=0,s=this._posType.length;t<s;t++)i=this._posType[t],n=o+i,r=e("#"+n+"_CustomFDlg"),e("#"+n+"_CheckBoxList").ejWaitingPopup("destroy"),e("#"+n+"_excelDlg").remove(),r.find(".e-dropdownlist").ejDropDownList("destroy"),r.find(".e-button").ejButton("destroy"),("string"==i||"boolean"==i)&&r.find(".e-autocomplete").ejAutocomplete("destroy"),"number"==i&&r.find(".e-numerictextbox").ejNumericTextbox("destroy"),"date"==i&&r.find(".e-datepicker").ejDatePicker("destroy"),r.ejDialog("destroy"),e("#"+n+"_CustomFDlg").remove()},_wireEvents:function(){this._ctrlInstance._on(this._dialogContainer,"focus click",".e-searchbox",t.proxy(this._searchBoxFocus,this)),this._ctrlInstance._on(this._dialogContainer,"keyup",".e-searchbox input",t.proxy(this._search,this))}},t.ExcelFilter.valueDelimiter="@|@",t.ExcelFilter.Locale=t.ExcelFilter.Locale||{},t.ExcelFilter.Locale.default=t.ExcelFilter.Locale["en-US"]={SortNoSmaller:"Sort Smallest to Largest",SortNoLarger:"Sort Largest to Smallest",SortTextAscending:"Sort A to Z",SortTextDescending:"Sort Z to A",SortDateOldest:"Sort by Oldest",SortDateNewest:"Sort by Newest",SortByColor:"Sort By Color",SortByCellColor:"Sort by Cell Color",SortByFontColor:"Sort by Font Color",FilterByColor:"Filter By Color",CustomSort:"Custom Sort",FilterByCellColor:"Filter by Cell Color",FilterByFontColor:"Filter by Font Color",ClearFilter:"Clear Filter",NumberFilter:"Number Filters",GuidFilter:"Guid Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"Date Time Filters",SelectAll:"Select All",Blanks:"Blanks",Search:"Search",Showrowswhere:"Show rows where",NumericTextboxWaterMark:"Enter value",StringMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Starts With",value:"startswith"},{text:"Ends With",value:"endswith"},{text:"Contains",value:"contains"},{text:"Custom Filter",value:"customfilter"}],NumberMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],GuidMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Custom Filter",value:"customfilter"}],DateMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],DatetimeMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],Top10MenuOptions:[{text:"Top",value:"top"},{text:"Bottom",value:"bottom"}],title:"Custom Filter",PredicateAnd:"AND",PredicateOr:"OR",Ok:"OK",MatchCase:"Match Case",Cancel:"Cancel",NoResult:"No Matches Found",CheckBoxStatusMsg:"Not all items showing",DatePickerWaterMark:"Select date",DateTimePickerWaterMark:"Select date time",True:"true",False:"false"}}(jQuery,Syncfusion)}),function(e,t){var i=t.jQuery;"object"==typeof exports?module.exports=i?e(t,i):function(i){if(i&&!i.fn)throw"Provide jQuery or null";return e(t,i)}:"function"==typeof define&&define.amd?define("jsrender/jsrender",[],function(){return e(t)}):e(t,!1)}(function(e,t){"use strict";function i(e,t){return function(){var i,s=this,n=s.base;return s.base=e,i=t.apply(s,arguments),s.base=n,i}}function s(e,t){return ie(t)&&(t=i(e?e._d?e:i(o,e):o,t),t._d=1),t}function n(e,t){for(var i in t.props)Ie.test(i)&&(e[i]=s(e.constructor.prototype[i],t.props[i]))}function r(e){return e}function o(){return""}function l(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}function a(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function d(e,t){for(var i in t)e[i]=t[i];return e}function h(e,t,i){return e?se(e)?h.apply(ee,e):(de.delimiters=[e,t,fe=i?i.charAt(0):fe],ue=e.charAt(0),pe=e.charAt(1),me=t.charAt(0),ge=t.charAt(1),e="\\"+ue+"(\\"+fe+")?\\"+pe,t="\\"+me+"\\"+ge,J="(?:(\\w+(?=[\\/\\s\\"+me+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+me+"]|\\"+me+"(?!\\"+ge+"))*?)",ae.rTag="(?:"+J+")",J=new RegExp("(?:"+e+J+"(\\/)?|\\"+ue+"(\\"+fe+")?\\"+pe+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),ae.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),ce):de.delimiters}function c(e,t){t||e===!0||(t=e,e=void 0);var i,s,n,r,o=this,l=!t||"root"===t;if(e){if(!(r=t&&o.type===t&&o))if(i=o.views,o._.useKey){for(s in i)if(r=t?i[s].get(e,t):i[s])break}else for(s=0,n=i.length;!r&&s<n;s++)r=t?i[s].get(e,t):i[s]}else if(l)for(;o.parent;)r=o,o=o.parent;else for(;o&&!r;)r=o.type===t?o:void 0,o=o.parent;return r}function u(){var e=this.get("item");return e?e.index:void 0}function p(){return this.index}function m(t,i){var s,n,r=this,o=r.ctx;if(o&&(o=o[t]),void 0===o&&(o=oe[t]),o&&o._cp){if(i)return n=o[1]?ae._ceo(o[1].deps):["_jsvCp"],n.unshift(o[0]),n._cp=o._cp,n;o=ee.getCtx(o)}return o&&ie(o)&&!o._wrp&&(s=function(){return o.apply(this&&this!==e?this:r,arguments)},s._wrp=r,d(s,o)),s||o}function g(e){return e&&(e.fn?e:this.getRsc("templates",e)||ne(e))}function f(e,t,i,s){var r,o,l="number"==typeof i&&t.tmpl.bnds[i-1],a=t.linkCtx;return void 0===s&&l&&l._lr&&(s=""),void 0!==s?i=s={props:{},args:[s]}:l&&(i=l(t.data,t,ae)),l=l._bd&&l,o=i.args[0],(e||l)&&(r=a&&a.tag,r||(r=d(new ae._tg,{_:{inline:!a,bnd:l,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:i}),a&&(a.tag=r,r.linkCtx=a),i.ctx=W(i.ctx,(a?a.view:t).ctx)),r._er=s&&o,n(r,i),i.view=t,r.ctx=i.ctx||r.ctx||{},i.ctx=void 0,o=r.cvtArgs("true"!==e&&e)[0]),o=l&&t._.onRender?t._.onRender(o,t,r):o,void 0!=o?o:""}function _(e,t){var i,s,n,r=this,o=r.tagCtx,l=o.args,a=r.bindTo;if(e=e||r.convert,""+e===e&&(e=o.view.getRsc("converters",e)||L("Unknown converter: '"+e+"'")),l.length||r.argDefault===!1||o.index?e&&!t&&(l=l.slice()):l=[o.view.data],a){for(n=[],i=a.length;i--;)s=a[i],n.unshift(v(o,s));t&&(l=n)}if(e)if(a=a||[0],e=e.apply(r,n||l),i=a.length,i<2&&(e=[e]),t)l=e;else for(;i--;)+(s=a[i])===s&&(l[s]=e?e[i]:void 0);return l}function v(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function b(){return this.cvtArgs(void 0,!0)}function y(e,t){for(var i,s,n=this;void 0===i&&n;)s=n.tmpl&&n.tmpl[e],i=s&&s[t],n=n.parent;return i||ee[e][t]}function w(e,t,i){var s=this;s.ctx[t]=ae._cp(v(s,e),v(s.params,e),s.view,i)}function C(e,i,s,r,o,l){i=i||Z;var a,d,h,c,u,p,m,g,f,_,v,b,y,C,x,S,T,k,D,I,O,R=0,P="",M=i.linkCtx||0,j=i.ctx,A=s||i.tmpl,N="number"==typeof r&&i.tmpl.bnds[r-1];for("tag"===e._is?(a=e,e=a.tagName,r=a.tagCtxs,a.template):(d=i.getRsc("tags",e)||L("Unknown tag: {{"+e+"}} "),d.template),void 0===l&&N&&N._lr&&(l=""),void 0!==l?(P+=l,r=l=[{props:{},args:[]}]):N&&(r=N(i.data,i,ae)),p=r.length;R<p;R++)f=r[R],(!M||!M.tag||R&&!M.tag._.inline||a._er)&&((y=A.tmpls&&f.tmpl)&&(y=f.content=A.tmpls[y-1]),f.index=R,f.tmpl=y,f.render=E,f.ctxPrm=w,f.view=i,f.ctx=W(f.ctx,j)),(s=f.props.tmpl)&&(f.tmpl=i.getTmpl(s)),a||(a=new d._ctr,C=!!a.init,a.parent=u=j&&j.tag,a.tagCtxs=r,D=a.dataMap,M&&(a._.inline=!1,M.tag=a,a.linkCtx=M),(a._.bnd=N||M.fn)?a._.arrVws={}:a.dataBoundOnly&&L("{^{"+e+"}} tag must be data-bound")),b=a.bindTo||[0],r=a.tagCtxs,D=a.dataMap,f.tag=a,D&&r&&(f.map=r[R].map),a.flow||(_=f.ctx=f.ctx||{},h=a.parents=_.parentTags=j&&W(_.parentTags,j.parentTags)||{},u&&(h[u.tagName]=u),h[a.tagName]=_.tag=a);if(!(a._er=l)){for(n(a,r[0]),a.rendering={},R=0;R<p;R++){if(f=a.tagCtx=r[R],k=f.props,T=a.cvtArgs(),a.linkedCtxParam)for(m=b.length;m--;)(v=a.linkedCtxParam[m])&&(O=b[m],f.ctxPrm(O,v,{tag:a,ind:m}));(x=k.dataMap||D)&&(T.length||k.dataMap)&&(S=f.map,S&&S.src===T[0]&&!o||(S&&S.src&&S.unmap(),S=f.map=x.map(T[0],k,void 0,!a._.bnd)),T=[S.tgt]),a.ctx=f.ctx,R||(C&&(a.template,a.init(f,M,a.ctx),C=void 0),M&&(M.attr=a.attr=M.attr||a.attr),c=a.attr,a._.noVws=c&&c!==je),g=void 0,a.render&&(g=a.render.apply(a,T),i.linked&&g&&a.linkedElem&&!Oe.test(g)&&(g=F(t.templates(g),T[0],void 0,void 0,i,void 0,void 0,a))),T.length||(T=[i]),void 0===g&&(I=T[0],a.contentCtx&&(I=a.contentCtx===!0?i:a.contentCtx(I)),g=f.render(I,!0)||(o?void 0:"")),P=P?P+(g||""):g}a.rendering=void 0}return a.tagCtx=r[0],a.ctx=a.tagCtx.ctx,a._.noVws&&a._.inline&&(P="text"===c?re.html(P):""),N&&i._.onRender?i._.onRender(P,i,a):P}function x(e,t,i,s,n,r,o,l){var a,d,h,c=this,p="array"===t;c.content=l,c.views=p?[]:{},c.parent=i,c.type=t||"top",c.data=s,c.tmpl=n,h=c._={key:0,useKey:p?0:1,id:""+Pe++,onRender:o,bnds:{}},c.linked=!!o,i?(a=i.views,d=i._,d.useKey?(a[h.key="_"+d.useKey++]=c,c.index=Le,c.getIndex=u):a.length===(h.key=c.index=r)?a.push(c):a.splice(r,0,c),c.ctx=e||i.ctx):c.ctx=e}function S(e){var t,i,s;for(t in He)i=t+"s",e[i]&&(s=e[i],e[i]={},ee[i](s,e))}function T(e,t,i){function n(){var t=this;t._={inline:!0,unlinked:!0},t.tagName=e}function r(e){var i;(i=t[e])&&(t[e]=i=se(i)?i:[i],(u||1)!==i.length&&L(e+" length not same as bindTo "))}var o,l,a,h,c,u,p=t.bindTo,m=new ae._tg;if(ie(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),void 0!==p)for(p=t.bindTo=se(p)?p:[p],h=u=p.length;h--;)c=p[h],isNaN(parseInt(c))||(c=parseInt(c)),p[h]=c;if(r("linkedElement"),r("linkedCtxParam"),l=t.baseTag){t.flow=!!t.flow,t.baseTag=l=""+l===l?i&&i.tags[l]||le[l]:l,m=d(m,l);for(a in t)m[a]=s(l[a],t[a])}else m=d(m,t);return void 0!==(o=m.template)&&(m.template=""+o===o?ne[o]||ne(o):o),(n.prototype=m).constructor=m._ctr=n,i&&(m._parentTmpl=i),m}function k(e){return this.base.apply(this,e)}function D(e,i,s,n){function r(i){var r,l;if(""+i===i||i.nodeType>0&&(o=i)){if(!o)if(/^\.\/[^\\:*?"<>]*$/.test(i))(l=ne[e=e||i])?i=l:o=document.getElementById(i);else if(t.fn&&!ae.rTmpl.test(i))try{o=t(i,document)[0]}catch(e){}o&&(n?i=o.innerHTML:(r=o.getAttribute(Fe),r&&(r!==Ae?(i=ne[r],delete ne[r]):t.fn&&(i=t.data(o)[Ae])),r&&i||(e=e||(t.fn?Ae:i),i=D(e,o.innerHTML,s,n)),i.tmplName=e=e||r,e!==Ae&&(ne[e]=i),o.setAttribute(Fe,e),t.fn&&t.data(o,Ae,i))),o=void 0}else i.fn||(i=void 0);return i}var o,l,a=i=i||"";if(0===n&&(n=void 0,a=r(a)),n=n||(i.markup?i:{}),n.tmplName=e,s&&(n._parentTmpl=s),!a&&i.markup&&(a=r(i.markup))&&a.fn&&(a=a.markup),void 0!==a)return a.fn||i.fn?a.fn&&(l=a):(i=P(a,n),V(a.replace(xe,"\\$&"),i)),l||(l=d(function(){return l.render.apply(l,arguments)},i),S(l)),l}function I(e,i){return t.isFunction(e)?e.call(i):e}function O(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(e[i].unmap());return t}function R(e,i){function s(e){h.apply(this,e)}function n(){return new s(arguments)}function r(e,t){for(var i,s,n,r,o=0;o<v;o++)n=u[o],i=void 0,n+""!==n&&(i=n,n=i.getter),void 0===(r=e[n])&&i&&void 0!==(s=i.defaultVal)&&(r=I(s,e)),t(r,i&&c[i.type],n)}function o(t){t=t+""===t?JSON.parse(t):t;var i,s,n=0,o=t,d=[];if(se(t)){for(t=t||[],i=t.length;n<i;n++)d.push(this.map(t[n]));return d._is=e,d.unmap=a,d.merge=l,d}if(t){r(t,function(e,t){t&&(e=t.map(e)),d.push(e)}),o=this.apply(this,d);for(s in t)s===te||y[s]||(o[s]=t[s])}return o}function l(e){e=e+""===e?JSON.parse(e):e;var t,i,s,o,l,a,d,h,c,u=0,p=this;if(se(p)){for(d={},c=[],i=e.length,s=p.length;u<i;u++){for(h=e[u],a=!1,t=0;t<s&&!a;t++)d[t]||(l=p[t],m&&(d[t]=a=m+""===m?h[m]&&(y[m]?l[m]():l[m])===h[m]:m(l,h)));a?(l.merge(h),c.push(l)):c.push(n.map(h))}return void(b?b(p).refresh(c,!0):p.splice.apply(p,[0,p.length].concat(c)))}r(e,function(e,t,i){t?p[i]().merge(e):p[i](e)});for(o in e)o===te||y[o]||(p[o]=e[o])}function a(){var e,i,s,n,r=0,o=this;if(se(o))return O(o);for(e={};r<v;r++)i=u[r],s=void 0,i+""!==i&&(s=i,i=s.getter),n=o[i](),e[i]=s&&n&&c[s.type]?se(n)?O(n):n.unmap():n;for(i in o)"_is"===i||y[i]||i===te||"_"===i.charAt(0)&&y[i.slice(1)]||t.isFunction(o[i])||(e[i]=o[i]);return e}var d,h,c=this,u=i.getters,p=i.extend,m=i.id,g=t.extend({_is:e||"unnamed",unmap:a,merge:l},p),f="",_="",v=u?u.length:0,b=t.observable,y={};for(s.prototype=g,d=0;d<v;d++)!function(e){e=e.getter||e,y[e]=d+1;var t="_"+e;f+=(f?",":"")+e,_+="this."+t+" = "+e+";\n",g[e]=g[e]||function(i){if(!arguments.length)return this[t];b?b(this).setProperty(e,i):this[t]=i},b&&(g[e].set=g[e].set||function(e){this[t]=e})}(u[d]);return h=new Function(f,_.slice(0,-1)),h.prototype=g,g.constructor=h,n.map=o,n.getters=u,n.extend=p,n.id=m,n}function P(e,i){var s,n=he._wm||{},r=d({tmpls:[],links:{},bnds:[],_is:"template",render:E},i);return r.markup=e,i.htmlTag||(s=ke.exec(e),r.htmlTag=s?s[1].toLowerCase():""),s=n[r.htmlTag],s&&s!==n.div&&(r.markup=t.trim(r.markup)),r}function M(e){ce[e]=function(t){return arguments.length?(de[e]=t,ce):de[e]}}function j(e){function t(t,i){this.tgt=e.getTgt(t,i)}return ie(e)&&(e={getTgt:e}),e.baseMap&&(e=d(d({},e.baseMap),e)),e.map=function(e,i){return new t(e,i)},e}function E(e,t,i,s,n,r){var o,l,a,d,h,c,u,p,m=s,g="";if(t===!0?(i=t,t=void 0):typeof t!==Ee&&(t=void 0),(a=this.tag)?(h=this,m=m||h.view,d=m.getTmpl(a.template||h.tmpl),arguments.length||(e=m)):d=this,d){if(!s&&e&&"view"===e._is&&(m=e),m&&e===m&&(e=m.data),c=!m,ve=ve||c,m||((t=t||{}).root=e),!ve||he.useViews||d.useViews||m&&m!==Z)g=F(d,e,t,i,m,n,r,a);else{if(m?(u=m.data,p=m.index,m.index=Le):(m=Z,m.data=e,m.ctx=t),se(e)&&!i)for(o=0,l=e.length;o<l;o++)m.index=o,m.data=e[o],g+=d.fn(e[o],m,ae);else m.data=e,g+=d.fn(e,m,ae);m.data=u,m.index=p}c&&(ve=void 0)}return g}function F(e,t,i,s,n,r,o,l){function a(e){y=d({},i),y[b]=e}var h,c,u,p,m,g,f,_,v,b,y,w,C="";if(l&&(v=l.tagName,w=l.tagCtx,i=i?W(i,l.ctx):l.ctx,e===n.content?f=e!==n.ctx._wrp?n.ctx._wrp:void 0:e!==w.content?e===l.template?(f=w.tmpl,i._wrp=w.content):f=w.content||n.content:f=n.content,w.props.link===!1&&(i=i||{},i.link=!1),(b=w.props.itemVar)&&("~"!==b.charAt(0)&&N("Use itemVar='~myItem'"),b=b.slice(1))),n&&(o=o||n._.onRender,i=W(i,n.ctx)),r===!0&&(g=!0,r=0),o&&(i&&i.link===!1||l&&l._.noVws)&&(o=void 0),_=o,o===!0&&(_=void 0,o=n._.onRender),i=e.helpers?W(e.helpers,i):i,y=i,se(t)&&!s)for(u=g?n:void 0!==r&&n||new x(i,"array",n,t,e,r,o,f),n&&n._.useKey&&(u._.bnd=!l||l._.bnd&&l),b&&(u.it=b),b=u.it,h=0,c=t.length;h<c;h++)b&&a(t[h]),p=new x(y,"item",u,t[h],e,(r||0)+h,o,u.content),m=e.fn(t[h],p,ae),C+=u._.onRender?u._.onRender(m,p):m;else b&&a(t),u=g?n:new x(y,v||"data",n,t,e,r,o,f),l&&!l.flow&&(u.tag=l,l.view=u),C+=e.fn(t,u,ae);return _?_(C,u):C}function A(e,t,i){var s=void 0!==i?ie(i)?i.call(t.data,e,t):i||"":"{Error: "+(e.message||e)+"}";return de.onError&&void 0!==(i=de.onError.call(t.data,e,i&&s,t))&&(s=i),t&&!t.linkCtx?re.html(s):s}function L(e){throw new ae.Err(e)}function N(e){L("Syntax error\n"+e)}function V(e,t,i,s,n){function r(t){(t-=g)&&_.push(e.substr(g,t).replace(we,"\\n"))}function o(t,i){t&&(t+="}}",N((i?"{{"+i+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}function l(l,a,d,u,m,b,y,w,C,x,S,T){(y&&a||C&&!d||w&&":"===w.slice(-1)||x)&&N(l),b&&(m=":",u=je),C=C||i&&!n;var k,D=(a||i)&&[[]],I="",O="",R="",P="",M="",j="",E="",F="",A=!C&&!m;d=d||(w=w||"#data",m),r(T),g=T+l.length,y?p&&_.push(["*","\n"+w.replace(/^:/,"ret+= ").replace(Ce,"$1")+";\n"]):d?("else"===d&&(Te.test(w)&&N('for "{{else if expr}}" use "{{else expr}}"'),D=v[8]&&[[]],v[9]=e.substring(v[9],T),v=f.pop(),_=v[2],A=!0),w&&U(w.replace(we," "),D,t).replace(Se,function(e,t,i,s,n,r,o,l){return s="'"+n+"':",o?(O+=r+",",P+="'"+l+"',"):i?(R+=s+"j._cp("+r+',"'+l+'",view),',j+=s+"'"+l+"',"):t?E+=r:("trigger"===n&&(F+=r),"lateRender"===n&&(k=1),I+=s+r+",",M+=s+"'"+l+"',",c=c||Ie.test(n)),""}).slice(0,-1),D&&D[0]&&D.pop(),h=[d,u||!!s||c||"",A&&[],H(P||(":"===d?"'#data',":""),M,j),H(O||(":"===d?"data,":""),I,R),E,F,k,D||0],_.push(h),A&&(f.push(v),v=h,v[9]=g)):S&&(o(S!==v[0]&&"else"!==v[0]&&S,v[0]),v[9]=e.substring(v[9],T),v=f.pop()),o(!v&&S),_=v[2]}var a,d,h,c,u,p=de.allowCode||t&&t.allowCode||ce.allowCode===!0,m=[],g=0,f=[],_=m,v=[,,m];if(p&&t._is&&(t.allowCode=p),i&&(void 0!==s&&(e=e.slice(0,-s.length-2)+me),e=ue+e+ge),o(f[0]&&f[0][2].pop()[0]),e.replace(J,l),r(e.length),(g=m[m.length-1])&&o(""+g!==g&&+g[9]===g[9]&&g[0]),i){for(d=q(m,e,i),u=[],a=m.length;a--;)u.unshift(m[a][8]);z(d,u)}else d=q(m,t);return d}function z(e,t){var i,s,n=0,r=t.length;for(e.deps=[],e.paths=[];n<r;n++){e.paths.push(s=t[n]);for(i in s)"_jsvto"!==i&&s.hasOwnProperty(i)&&s[i].length&&!s[i].skp&&(e.deps=e.deps.concat(s[i]))}}function H(e,t,i){return[e.slice(0,-1),t.slice(0,-1),i.slice(0,-1)]}function B(e,t){return"\n\t"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n\tprops:{"+e[1]+"}":"")+(e[2]?",\n\tctx:{"+e[2]+"}":"")}function U(e,t,i){function s(s,_,v,b,y,w,C,x,S,T,k,D,I,O,R,P,M,j,E,F){function A(e,i,s,o,l,a,c,u){var p="."===s;if(s&&(y=y.slice(i.length),/^\.?constructor$/.test(u||y)&&N(e),p||(e=(o?'view.hlp("'+o+'")':l?"view":"data")+(u?(a?"."+a:o?"":l?"":"."+s)+(c||""):(u=o?"":l?a||"":s,"")),e+=u?"."+u:"",e=i+("view.data"===e.slice(0,9)?e.slice(5):e)),d)){if(H="linkTo"===n?r=t._jsvto=t._jsvto||[]:h.bd,B=p&&H[H.length-1]){if(B._jsv){for(;B.sb;)B=B.sb;B.bnd&&(y="^"+y.slice(1)),B.sb=y,B.bnd=B.bnd||"^"===y.charAt(0)}}else H.push(y);f[m]=E+(p?1:0)}return e}b&&!x&&(y=b+y),w=w||"",v=v||_||D,y=y||S,T=T||M||"";var L,z,H,B,U,q=")";if("["===T&&(T="[j._sq(",q=")]"),!C||a||l){if(d&&P&&!a&&!l&&(!n||o||r)&&(L=f[m-1],F.length-1>E-(L||0))){if(L=F.slice(L,E+s.length),z!==!0)if(H=r||c[m-1].bd,(B=H[H.length-1])&&B.prm){for(;B.sb&&B.sb.prm;)B=B.sb;U=B.sb={path:B.sb,bnd:B.bnd}}else H.push(U={path:H.pop()});P=pe+":"+L+" onerror=''"+me,z=p[P],z||(p[P]=!0,p[P]=z=V(P,i,!0)),z!==!0&&U&&(U._jsv=z,U.prm=h.bd,U.bnd=U.bnd||U.path&&U.path.indexOf("^")>=0)}return a?(a=!I,a?s:D+'"'):l?(l=!O,l?s:D+'"'):(v?(f[m]=E++,h=c[++m]={bd:[]},v):"")+(j?m?"":(u=F.slice(u,E),(n?(n=o=r=!1,"\b"):"\b,")+u+(u=E+s.length,d&&t.push(h.bd=[]),"\b")):x?(m&&N(e),d&&t.pop(),n=y,o=b,u=E+s.length,d&&(d=h.bd=t[n]=[],d.skp=!b),y+":"):y?y.split("^").join(".").replace(be,A)+(T?(h=c[++m]={bd:[]},g[m]=q,T):w):w||(R?(R=g[m]||R,g[m]=!1,h=c[--m],R+(T?(h=c[++m],g[m]=q,T):"")):k?(g[m]||N(e),
","):_?"":(a=I,l=O,'"')))}N(e)}var n,r,o,l,a,d=t&&t[0],h={bd:d},c={0:h},u=0,p=(i?i.links:d&&(d.links=d.links||{}))||Z.tmpl.links,m=0,g={},f={},_=(e+(i?" ":"")).replace(ye,s);return!m&&_||N(e)}function q(e,t,i){var s,n,r,o,l,a,d,h,c,u,p,m,g,f,_,v,b,y,w,C,x,S,T,k,D,I,O,R,M,j,E=0,F=he.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,A="",L={},V=e.length;for(""+t===t?(b=i?'data-link="'+t.replace(we," ").slice(1,-1)+'"':t,t=0):(b=t.tmplName||"unnamed",t.allowCode&&(L.allowCode=!0),t.debug&&(L.debug=!0),u=t.bnds,v=t.tmpls),s=0;s<V;s++)if(""+(n=e[s])===n)A+='\n+"'+n+'"';else if("*"===(r=n[0]))A+=";\n"+n[1]+"\nret=ret";else{if(o=n[1],C=!i&&n[2],l=B(n[3],"params")+"},"+B(m=n[4]),O=n[5],M=n[6],j=n[7],x=n[9]&&n[9].replace(Ce,"$1"),(k="else"===r)?p&&p.push(n[8]):u&&(p=n[8])&&(p=[p],E=u.push(1)),F=F||m[1]||m[2]||p||/view.(?!index)/.test(m[0]),(D=":"===r)?o&&(r=o===je?">":o+r):(C&&(y=P(x,L),y.tmplName=b+"/"+r,y.useViews=y.useViews||F,q(C,y),F=y.useViews,v.push(y)),k||(w=r,F=F||r&&(!le[r]||!le[r].flow),T=A,A=""),S=e[s+1],S=S&&"else"===S[0]),R=O?";\ntry{\nret+=":"\n+",g="",f="",D&&(p||M||o&&o!==je||j)){if(I=new Function("data,view,j,u","// "+b+" "+ ++E+" "+r+"\nreturn {"+l+"};"),I._er=O,I._tag=r,I._bd=!!p,I._lr=j,i)return I;z(I,p),_='c("'+o+'",view,',c=!0,g=_+E+",",f=")"}if(A+=D?(i?(O?"try{\n":"")+"return ":R)+(c?(c=void 0,F=h=!0,_+(I?(u[E-1]=I,E):"{"+l+"}")+")"):">"===r?(d=!0,"h("+m[0]+")"):(!0,"((v="+m[0]+")!=null?v:"+(i?"null)":'"")'))):(a=!0,"\n{view:view,tmpl:"+(C?v.length:"0")+","+l+"},"),w&&!S){if(A="["+A.slice(0,-1)+"]",_='t("'+w+'",view,this,',i||p){if(A=new Function("data,view,j,u"," // "+b+" "+E+" "+w+"\nreturn "+A+";"),A._er=O,A._tag=w,p&&z(u[E-1]=A,p),A._lr=j,i)return A;g=_+E+",undefined,",f=")"}A=T+R+_+(A.deps&&E||A)+")",p=0,w=0}O&&(F=!0,A+=";\n}catch(e){ret"+(i?"urn ":"+=")+g+"j._err(e,view,"+O+")"+f+";}"+(i?"":"ret=ret"))}A="// "+b+"\nvar v"+(a?",t=j._tag":"")+(h?",c=j._cnvt":"")+(d?",h=j._html":"")+(i?";\n":',ret=""\n')+(L.debug?"debugger;":"")+A+(i?"\n":";\nreturn ret;"),de.debugMode!==!1&&(A="try {\n"+A+"\n}catch(e){\nreturn j._err(e, view);\n}");try{A=new Function("data,view,j,u",A)}catch(e){N("Compiled template code:\n\n"+A+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=A,t.useViews=!!F),A}function W(e,t){return e&&e!==t?t?d(d({},t),e):e:t&&d({},t)}function $(e){return Me[e]||(Me[e]="&#"+e.charCodeAt(0)+";")}function G(e){var t,i,s=[];if(typeof e===Ee)for(t in e)i=e[t],t!==te&&e.hasOwnProperty(t)&&!ie(i)&&s.push({key:t,prop:i});return s}function K(e,i,s){var n=this.jquery&&(this[0]||L("Unknown template")),r=n.getAttribute(Fe);return E.call(r?t.data(n)[Ae]:ne(n),e,i,s)}function Y(e){return void 0!=e?De.test(e)&&(""+e).replace(Re,$)||e:""}var Q=t===!1;t=t&&t.fn?t:e.jQuery;var X,J,Z,ee,te,ie,se,ne,re,oe,le,ae,de,he,ce,ue,pe,me,ge,fe,_e,ve,be=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,ye=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,we=/[ \t]*(\r\n|\n|\r)/g,Ce=/\\(['"])/g,xe=/['"\\]/g,Se=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,Te=/^if\s/,ke=/<(\w+)[>\s]/,De=/[\x00`><\"'&=]/,Ie=/^on[A-Z]|^convert(Back)?$/,Oe=/^\#\d+_`[\s\S]*\/\d+_`$/,Re=/[\x00`><"'&=]/g,Pe=0,Me={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},je="html",Ee="object",Fe="data-jsv-tmpl",Ae="jsvTmpl",Le="For #index in nested block use #getIndex().",Ne={},Ve=e.jsrender,ze=Ve&&t&&!t.render,He={template:{compile:D},tag:{compile:T},viewModel:{compile:R},helper:{},converter:{}};if(ee={jsviews:"v0.9.84",sub:{View:x,Err:a,tmplFn:V,parse:U,extend:d,extendCtx:W,syntaxErr:N,onStore:{template:function(e,t){null===t?delete Ne[e]:Ne[e]=t}},addSetting:M,settings:{allowCode:!1},advSet:o,_ths:n,_gm:s,_tg:function(){},_cnvt:f,_tag:C,_er:L,_err:A,_html:Y,_cp:r,_sq:function(e){return"constructor"===e&&N(""),e}},settings:{delimiters:h,advanced:function(e){return e?(d(he,e),ae.advSet(),ce):he}},getCtx:r,map:j},(a.prototype=new Error).constructor=a,u.depends=function(){return[this.get("item"),"index"]},p.depends="index",x.prototype={get:c,getIndex:p,getRsc:y,getTmpl:g,hlp:m,_is:"view"},ae=ee.sub,ce=ee.settings,!(Ve||t&&t.render)){for(X in He)!function(e,t){function i(n,r,o){var l,a,d,h=ae.onStore[e];if(n&&typeof n===Ee&&!n.nodeType&&!n.markup&&!n.getTgt&&!("viewModel"===e&&n.getters||n.extend)){for(a in n)i(a,n[a],r);return r||ee}return void 0===r&&(r=n,n=void 0),n&&""+n!==n&&(o=r,r=n,n=void 0),d=o?"viewModel"===e?o:o[s]=o[s]||{}:i,l=t.compile,null===r?n&&delete d[n]:(l&&(r=l.call(d,n,r,o,0),r._is=e),n&&(d[n]=r)),h&&h(n,r,o,l),r}var s=e+"s";ee[s]=i}(X,He[X]);re=ee.converters,oe=ee.helpers,le=ee.tags,ae._tg.prototype={baseApply:k,cvtArgs:_,bndArgs:b},Z=ae.topView=new x,t?(t.fn.render=K,te=t.expando,t.observable&&(d(ae,t.views.sub),ee.map=t.views.map)):(t={},Q&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return"function"==typeof e},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},ae._jq=function(e){e!==t&&(d(e,t),t=e,t.fn.render=K,delete t.jsrender,te=t.expando)},t.jsrender="v0.9.84"),de=ae.settings,de.allowCode=!1,ie=t.isFunction,t.render=Ne,t.views=ee,t.templates=ne=ee.templates;for(_e in de)M(_e);(ce.debugMode=function(e){return void 0===e?de.debugMode:(de.debugMode=e,de.onError=e+""===e?new Function("","return '"+e+"';"):ie(e)?e:void 0,ce)})(!1),he=de.advanced={useViews:!1,_jsv:!1},le({if:{render:function(e){var t=this,i=t.tagCtx;return t.rendering.done||!e&&(arguments.length||!i.index)?"":(t.rendering.done=!0,t.selected=i.index,i.render(i.view,!0))},flow:!0},for:{render:function(e){var t,i=!arguments.length,s=this,n=s.tagCtx,r="",o=0;return s.rendering.done||(t=i?n.view.data:e,void 0!==t&&(r+=n.render(t,i),o+=se(t)?t.length:1),(s.rendering.done=o)&&(s.selected=n.index)),r},flow:!0},props:{baseTag:"for",dataMap:j(G),flow:!0},include:{flow:!0},"*":{render:r,flow:!0},":*":{render:r,flow:!0},dbg:oe.dbg=re.dbg=l}),re({html:Y,attr:Y,url:function(e){return void 0!=e?encodeURI(""+e):null===e?e:""}})}return de=ae.settings,se=(t||Ve).isArray,ce.delimiters("{{","}}","^"),ze&&Ve.views.sub._jq(t),t||Ve},window),define("jsrender",["jsrender/jsrender"],function(e){return e});